{"version":3,"sources":["state/PreferencesStore.ts","state/Cluster3dObjectStore.ts","state/GraphDelegate.ts","components/ComponentRef.tsx","state/GraphMutation.ts","state/GraphStore.ts","state/ImportStore.ts","state/ProjectStore.ts","state/SearchStore.ts","state/ClusterStore.ts","state/CssStore.ts","state/InteractionStore.ts","state/index.ts","components/utils/ClusterChooser.tsx","images/logo.png","components/utils/SimpleSelect.tsx","components/Navbar.tsx","components/utils/Collapsable.tsx","constants/index.ts","components/dialogs/ImportCSVDialog.tsx","components/dialogs/ImportGEXFDialog.tsx","components/dialogs/ExportDialog.tsx","components/utils/DataSheetDialogWrapper.tsx","components/utils/InputFormUtils.ts","components/dialogs/NodeDataSheetDialog.tsx","components/utils/NodeChooser.tsx","components/dialogs/EdgeDataSheetDialog.tsx","components/utils/NodeAdder.tsx","components/dialogs/AddNodeDialog.tsx","components/dialogs/AddEdgeDialog.tsx","components/Dialogs.tsx","components/visualize/visualizer.tsx","components/panels/NodeDetailPanel.tsx","components/panels/MultiDetailPanel.tsx","components/panels/SearchPanel.tsx","components/panels/RightClickNodePanel.tsx","components/panels/RightClickBackgroundPanel.tsx","components/panels/DeleteEdgeInteractionPanel.tsx","components/panels/ClusterPanel.tsx","components/utils/ColorPicker.tsx","components/panels/EdgesPanel.tsx","components/panels/LabelsPanel.tsx","components/panels/NodesPanel.tsx","components/panels/GraphOptionsCard.tsx","components/FloatingCards.tsx","App.js","reportWebVitals.js","index.js"],"names":["PreferencesStore","rightClickPositionX","rightClickPositionY","preferenceDialogOpen","statisticsDialogOpen","helpDialogOpen","AddNodeDialogOpen","AddEdgeDialogOpen","nodeDataSheetDialogOpen","edgeDataSheetDialogOpen","rightClickBackgroundPanelOpen","rightClickNodePanelOpen","deleteEdgePanelOpen","isGraphOptionsCardHidden","view","controlType","makeAutoObservable","this","Cluster3dObjectStore","threeScene","fusionClusterObjects","clusterObjectsMap","initialMap","Map","State","cluster","attributePoints","forEach","value","key","set","createMeshGroup","THREE","add","clusterBy","convexHullObjects","initEmptyMapAndFusion","group","newBufferGeometry","convexHullObject","children","mesh","geometry","copy","remove","dispose","material","newMap","points","get","css","shape","length","ConvexGeometry","Array","from","convexGeometry","computeBoundingSphere","sphereGeo","boundingSphere","sphere","SphereGeometry","radius","resolution","translate","center","x","y","z","geom","name","meshMaterial","color","attributeColor","transparent","opacity","side","depthWrite","SceneUtils","createMultiMaterialObject","createCustomNodeObject","_id","_cluster","result","id","hovered","selected","multiSelected","isClusterNode","createCustomLinkObject","_source","_target","source","target","isClusterLink","GraphDelegate","graphDelegateMethods","nodeVisibility","nodeObject","linkVisibility","linkObject","clusterObject","_graphDelegateMethods","scene","newGraph","graph","rawGraph","addInvisibleClusterNode","decorateRawGraph","tempGraph","nodes","links","forEachNode","node","attributes","push","forEachEdge","edge","oldGraph","graphCopy","names","index","getAttributeValues","attribute","clusterID","addNode","_visualize","attributeKeys","addEdge","nodeId","distance","getNodeAttribute","distRatio","Math","hypot","cameraPosition","d3Force","link","clusterForce","normalForce","d3ReheatSimulation","ComponentRef","nodeDetail","multiNodeDetail","visualizer","_instance","instance","reaction","interaction","currentlyHoveredNodeId","forceUpdate","GraphMutation","_this","that","newAttributes","hasOwnProperty","decorateRawNode","refreshGraph","dropNode","decorateRawEdge","dropEdge","GraphStore","Graph","allowSelfLoops","multi","type","numberOfClusters","mutating","metadata","snapshotName","nodeProperties","_rawGraph","_metadata","flush","updateVisualizationGraph","order","size","ImportStore","isLoading","edgeFileName","nodeFileName","gexfFileName","importCSVDialogOpen","importSamplesDialogOpen","importGEXFDialogOpen","selectedEdgeFileFromInput","selectedNodeFileFromInput","selectedGEXFFileFromInput","importConfig","hasNodeFile","nodeFile","isReady","parseError","path","hasHeader","topN","columns","mapping","delimiter","edgeFile","fromId","toId","fileObject","file","reader","FileReader","readAsText","Promise","resolve","reject","onload","content","replace","parse","comment","trim","auto_parse","skip_empty_lines","undefined","err","Toaster","create","position","Position","TOP","show","message","intent","Intent","DANGER","timeout","gexf","readCSV","config","fromColumn","parseInt","toColumn","tempNodes","readNodeCSV","toString","readEdgeCSV","idx","hasNode","addEdgeWithKey","Object","keys","readGEXF","setNodeAttributesCluster","entries","getNodeAttributes","clusterProperties","edgeProperties","edgeFileConfig","fileAsString","lines","split","topLinesAsString","map","l","slice","join","console","log","it","onerror","error","action","onClick","window","location","reload","text","nodeFileConfig","ProjectStore","currentSnapshotName","exportDialogOpen","renameSnapshotDialogOpen","SearchStore","isPreviewing","searchStr","observable","ref","list","searchStrIgnoreCase","toLocaleLowerCase","match","searchId","includes","searchQuery","searchAttr","searchValue","ClusterStore","by","keyValueMap","Set","keyAttribute","values","attributeKeysMap","colors","randomcolor","seed","count","NodeGlobalConfig","defaultColor","selectedColor","multiSelectedColor","highlightColor","EdgeGlobalConfig","defaultWidth","highlightWidth","LabelConfig","ClusterConfig","CssStore","label","isAnimating","InteractionStore","selectedNode","selectedNodes","selectedEdge","selectedEdges","chNodeIdforDisplay","previouslyHoveredNodeId","neighbors","getNodeNeighborEdges","neighbor","getEdgeKey","node1","node2","go","back","updateNodeVisualizeAttribute","oldAttributeVisualize","updateVisualizeAttributeParser","getEdgeAttribute","_attributeVisualize","updateEachNodeAttributes","updateEachEdgeAttributes","newAttribute","oldAttributes","AppState","preferences","graphDelegate","import","search","project","privateConstructor","_state","autorun","renderImportEdgePreview","renderImportNodePreview","resumeAnimation","pauseAnimation","currentlyHoveredNodeNeighborEdges","updateEdgeVisualizeAttribute","refresh","observer","itemRenderer","item","props","handleClick","propertiesWithNone","hasAttribute","unshift","getAttribute","items","showNone","fullProperties","filterable","onItemSelect","onSelect","syncWith","React","Component","defaultProps","CommonItemRenderer","itemPredicate","query","object","toLowerCase","indexOf","noResults","disabled","small","className","classnames","Classes","NAVBAR","NAVBAR_GROUP","ALIGN_LEFT","title","src","logo","width","height","alt","NAVBAR_HEADING","icon","BOTTOM","BUTTON","MINIMAL","checked","onChange","ALIGN_RIGHT","setCluster","NAVBAR_DIVIDER","open","elevation","Elevation","LARGE","FILL","rightIcon","isOpen","onToggle","NODE_AND_EDGE_FILE","ONLY_EDGE_FILE","PreviewTable","renderWrapper","numRows","selectedRegions","rows","cols","cellRenderer","i","state","loading","available","nodesOpen","edgesOpen","canImport","renderNodesSelection","Collapsable","setState","CONTROL_GROUP","INPUT_GROUP","onInputChange","event","files","renderEdgesSelection","newDelimiter","style","minWidth","onClose","DIALOG_BODY","targetValue","renderDelimiterSelection","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","DISABLED","PRIMARY","importGraphFromCSV","then","res","setGraph","fileIsSelect","importGraphFromGEXF","renderImportButton","ready","write","headers","exportData","export","data","edges","interactive","ONE","minimal","computeGEXFFile","filename","computeNodeFile","separator","computeEdgeFile","loadingOptions","TableLoadingOption","CELLS","COLUMN_HEADERS","ROW_HEADERS","for","onOpened","setTimeout","renderTable","handleStringChange","handler","stringifyNodeDetail","parseNumberOrString","numberVal","Number","isNaN","GraphNodeTable","filterQuery","addNodeDialogOpen","deleteAlertOpen","nodeToDelete","renderColumns","rowIndex","columnIndex","renderCell","filter","element","cell","filteredTable","newVal","setValue","onConfirm","tooltip","setNodeAttribute","deleteNodeRenderer","deleteNodeAlert","cancelButtonText","confirmButtonText","onCancel","textAlign","newTable","asyncControl","leftIcon","placeholder","fill","defaultRowHeight","SUCCESS","select","labelFor","labelInfo","GraphEdgeTable","addEdgeDialogOpen","edgeToDelete","chosenSource","chosenTarget","deleteEdgeRenderer","deleteEdgeAlert","addEdgeDialog","onClosed","hasEdge","renderMode","RenderMode","NONE","newNodeId","canImportTag","renderAttributesForm","newValue","componentDidMount","prop","autoFocus","rightElement","onAdded","Dialogs","display","visualizationGraph","graphRef","createRef","hoverNodeCallback","previousNode","current","nodeLeftClickCallback","ctrlKey","shiftKey","splice","nodeRightClickCallback","closeAllPanel","backgroundClickCallback","backgroundRightClickCallback","renderGraph","graphData","nodeLabel","nodeRelSize","nodeColor","computeNodeColor","nodeResolution","nodeThreeObjectExtend","nodeThreeObject","sprite","SpriteText","textHeight","visible","onNodeHover","onNodeClick","onNodeRightClick","onNodeDragEnd","fx","fy","fz","linkWidth","computeEdgeWidth","linkColor","computeEdgeColor","onBackgroundRightClick","onBackgroundClick","onEngineTick","clusterDelegation","_node","_edge","mountDelegateMethods","graphMethods","cellRenderer_property","cellRenderer_value","onNode","formatLongFloat","nodeAttributeValue","num","parseFloat","toPrecision","CARD","enableRowHeader","renderSearchResults","candidates","onMouseOver","cameraFocusOn","large","onMouseLeave","makeObservable","stylePosition","computed","top","left","ELEVATION_1","clusterId","nodeid","targetNode","neighborsRenderer","onMouseEnter","shapeOptionOpen","forceOptionOpen","forceCollapse","min","max","stepSize","labelStepSize","updateClusterForce","shapeCollapse","float","interactionKind","PopoverInteractionKind","CLICK","popoverClassName","RIGHT","backgroundColor","sizeOptionOpen","thicknessOptionOpen","colorOptionOpen","hex","timeOutRef","colorCollapse","sizeCollapse","animate","panel","Expander","optionsVisible","optionsInvisible","sideButtonVis","marginLeft","sideButtonInv","toggleOptions","ELEVATION_2","GraphOptionsCard","paddingTop","paddingRight","paddingBottom","NodeDetailPanel","MultiDetailPanel","App","DARK","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9ba47c7c.chunk.js","sourcesContent":["import { makeAutoObservable } from \"mobx\";\n\nexport default class PreferencesStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    // Right Click Position\n\n    rightClickPositionX = 30;\n    rightClickPositionY = 30;\n\n    // Dialog\n\n    preferenceDialogOpen = false;\n    statisticsDialogOpen = false;\n    helpDialogOpen = false;\n\n    AddNodeDialogOpen = false;\n    AddEdgeDialogOpen = false;\n\n    nodeDataSheetDialogOpen = false;\n    edgeDataSheetDialogOpen = false;\n\n    // Panel\n\n    rightClickBackgroundPanelOpen = false;\n    rightClickNodePanelOpen = false;\n    deleteEdgePanelOpen = false;\n\n    isGraphOptionsCardHidden = true;\n\n    // 3D Graph\n\n    view = \"3D\";\n    controlType: \"trackball\" | \"orbit\" | \"fly\" = \"trackball\";\n}\n","import { makeAutoObservable } from \"mobx\";\nimport * as THREE from \"three\";\nimport { SphereGeometry } from \"three\";\nimport { ConvexGeometry } from \"three/examples/jsm/geometries/ConvexGeometry\";\nimport { SceneUtils } from \"three/examples/jsm/utils/SceneUtils.js\";\nimport State from \".\";\n\nexport default class Cluster3dObjectStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * the THREE.js WebGL Scene of the visualization\n     *\n     */\n    threeScene!: THREE.Scene;\n\n    /**\n     * all the clusters should form a 3D Group to be imported into Scene\n     * if no cluster attribute is set, this will be set to null\n     *\n     * @type {THREE.Group}\n     */\n    fusionClusterObjects: THREE.Group | null = null;\n\n    /**\n     * the map between attribute value and its corresponding Mesh Group\n     * if you want to update the geometry, plz update all the children inside which Mesh Group\n     * if no cluster attribute is set, this will be set to null\n     *\n     * @type {(Map<string | number, THREE.Group> | null)}\n     */\n    clusterObjectsMap: Map<string | number, THREE.Group> | null = null;\n\n    /**\n     * create empty BufferGeometry and mesh with colour\n     * then initialize $fusionClusterObjects and $clusterObjectsMap with it\n     * and then add the THREE.Group to the Scene\n     *\n     */\n    initEmptyMapAndFusion() {\n        let initialMap = new Map<string | number, THREE.Group>();\n        State.cluster.attributePoints.forEach((value, key) => {\n            initialMap.set(\n                key,\n                this.createMeshGroup(new THREE.BufferGeometry(), key)\n            );\n        });\n\n        this.clusterObjectsMap = initialMap;\n        this.fusionClusterObjects = new THREE.Group();\n        initialMap.forEach((value) => {\n            this.fusionClusterObjects?.add(value);\n        });\n        this.threeScene.add(this.fusionClusterObjects);\n    }\n\n    /**\n     * should be called on each render frame\n     * will update the geometry inside each cluster object\n     *\n     * if is the first time (both are null), will run initEmptyMapAndFusion() first\n     *\n     * if meet with clusterBy == null, will dispose all Object3d\n     *\n     */\n    clusterDelegation() {\n        if (State.cluster.clusterBy === null) {\n            if (this.fusionClusterObjects) {\n                this.threeScene.remove(this.fusionClusterObjects);\n                this.dispose();\n            }\n            return;\n        } else {\n            if (\n                this.fusionClusterObjects == null ||\n                this.convexHullObjects == null\n            ) {\n                this.initEmptyMapAndFusion();\n            }\n            this.clusterObjectsMap?.forEach(\n                (group: THREE.Group, key: string | number) => {\n                    let newBufferGeometry = this.convexHullObject(key);\n                    group.children.forEach((mesh: any) => {\n                        mesh.geometry.copy(newBufferGeometry);\n                    });\n                }\n            );\n        }\n    }\n\n    /**\n     * dispose the geometries and materials in every clusterObject\n     * and set these props to be null, which indicates that no additional 3d object is added into Scene\n     *\n     */\n    dispose() {\n        this.clusterObjectsMap?.forEach((group: THREE.Group) => {\n            group.children.forEach((mesh: any) => {\n                let material = mesh.material as THREE.Material;\n                material.dispose();\n                mesh.geometry.dispose();\n            });\n        });\n        this.clusterObjectsMap = null;\n        this.fusionClusterObjects = null;\n    }\n\n    /**\n     * the map between the value of the cluster and the BufferGeometry that this cluster created\n     *\n     * @readonly\n     * @type {(Map<string | number, THREE.Group>)}\n     */\n    get convexHullObjects(): Map<string | number, THREE.BufferGeometry> {\n        let newMap = new Map<string | number, THREE.BufferGeometry>();\n        State.cluster.attributePoints.forEach((value, key) => {\n            newMap.set(key, this.convexHullObject(key));\n        });\n        return newMap;\n    }\n\n    /**\n     * get the computed convexHull BufferGeometry of the specified attribute value\n     *\n     * @param {(string | number)} key\n     * @returns {*}  {THREE.BufferGeometry}\n     */\n    convexHullObject(key: string | number): THREE.BufferGeometry {\n        let points = State.cluster.attributePoints.get(key) as THREE.Vector3[];\n        if (State.css.cluster.shape === \"convexHull\") {\n            if (!points || points.length < 4) {\n                return new THREE.BufferGeometry();\n            } else {\n                return new ConvexGeometry(Array.from(points));\n            }\n        } else {\n            // State.css.clusterShape === \"Sphere\"\n            let convexGeometry = new ConvexGeometry(Array.from(points));\n            convexGeometry.computeBoundingSphere();\n            let sphereGeo = convexGeometry.boundingSphere as THREE.Sphere;\n            let sphere = new SphereGeometry(\n                sphereGeo.radius,\n                State.css.cluster.resolution,\n                State.css.cluster.resolution\n            );\n            sphere.translate(\n                sphereGeo.center.x,\n                sphereGeo.center.y,\n                sphereGeo.center.z\n            );\n            return sphere;\n        }\n    }\n\n    /**\n     * create a Three.Group, which contains 2 Three.Mesh, of the input geometry\n     *\n     * @private\n     * @param {THREE.BufferGeometry} geom\n     * @param {(string | number)} name\n     * @returns {*}  {THREE.Group}\n     *\n     * @see THREE.Mesh\n     */\n    private createMeshGroup(\n        geom: THREE.BufferGeometry,\n        name: string | number\n    ): THREE.Group {\n        const meshMaterial = new THREE.MeshBasicMaterial({\n            color: State.cluster.attributeColor.get(name),\n            transparent: true,\n            opacity: 0.15,\n        });\n        meshMaterial.side = THREE.DoubleSide; //将材质设置成正面反面都可见\n        meshMaterial.depthWrite = false;\n        // const wireFrameMat = new THREE.MeshBasicMaterial();\n        // wireFrameMat.wireframe = true; //把材质渲染成线框\n        // wireFrameMat.wireframeLinecap = \"round\";\n\n        let group = SceneUtils.createMultiMaterialObject(geom, [meshMaterial]);\n        // wireFrameMat,\n        group.name = \"THREE_CLUSTER_\" + name;\n        return group;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport State from \".\";\nimport {\n    ForceGraphMethods,\n    LinkObject,\n    NodeObject,\n} from \"react-force-graph-3d\";\nimport Cluster3dObjectStore from \"./Cluster3dObjectStore\";\n\n/**\n * hovered: false, selected: false: DefaultColor;\n * hovered: false, selected: true: SelectedColor;\n * hovered: true, selected: false: HighlightColor;\n * hovered: true, selected: true: HighlightColor;\n *\n *\n * @interface ICustomNodeObject\n * @extends {NodeObject}\n */\nexport interface ICustomNodeObject extends NodeObject {\n    hovered: boolean;\n    selected: boolean;\n    multiSelected: boolean;\n    isClusterNode?: boolean;\n}\n/**\n * hovered: false, selected: false: DefaultColor;\n * hovered: false, selected: true: SelectedColor;\n * hovered: true, selected: false: HighlightColor;\n * hovered: true, selected: true: HighlightColor;\n *\n *\n * @interface ICustomLinkObject\n * @extends {LinkObject}\n */\nexport interface ICustomLinkObject extends LinkObject {\n    hovered: boolean;\n    selected: boolean;\n    isClusterLink?: boolean;\n}\n\nexport function createCustomNodeObject(\n    _id: string,\n    _cluster: boolean = false\n): ICustomNodeObject {\n    let result: ICustomNodeObject = {\n        id: _id,\n        hovered: false,\n        selected: false,\n        multiSelected: false,\n        isClusterNode: _cluster,\n    };\n    return result;\n}\n\nexport function createCustomLinkObject(\n    _source: string,\n    _target: string,\n    _cluster: boolean = false\n): ICustomLinkObject {\n    let result: ICustomLinkObject = {\n        source: _source,\n        target: _target,\n        hovered: false,\n        selected: false,\n        isClusterLink: _cluster,\n    };\n    return result;\n}\n\nexport default class GraphDelegate {\n    constructor() {\n        makeAutoObservable(this);\n        this.clusterObject = new Cluster3dObjectStore();\n    }\n\n    /**\n     * assign the force-graph methods to this class\n     * should be called as long as the visualizer react component is mounted\n     *\n     * @param {ForceGraphMethods} _graphDelegateMethods\n     */\n    mountDelegateMethods(_graphDelegateMethods: ForceGraphMethods) {\n        this.graphDelegateMethods = _graphDelegateMethods;\n        this.clusterObject.threeScene = this.graphDelegateMethods.scene();\n    }\n\n    /**\n     * the ForceGraphMethods exposed by the visualization force-graph\n     *\n     * @see ForceGraphMethods\n     *\n     * @type {ForceGraphMethods}\n     */\n    graphDelegateMethods!: ForceGraphMethods;\n\n    /**\n     * compute the delegate graph that will be used by the ForceGraph3D\n     * will add invisible cluster nodes and edges to balance the clustered graph and adjust force\n     * the NodeObject and LinkObject inside attributes (named _visualize) will be used.\n     *\n     * nodes and edges with the show=false will be ignored in this case\n     *\n     */\n\n    visualizationGraph() {\n        let newGraph: Graph;\n        if (State.cluster.clusterBy === null) {\n            newGraph = State.graph.rawGraph;\n        } else {\n            newGraph = this.addInvisibleClusterNode(\n                State.graph.decorateRawGraph(State.graph.rawGraph)\n            );\n        }\n        let tempGraph = {\n            nodes: [] as ICustomLinkObject[],\n            links: [] as ICustomLinkObject[],\n        };\n        newGraph.forEachNode((node, attributes) => {\n            tempGraph.nodes.push(attributes[\"_visualize\"]);\n        });\n\n        newGraph.forEachEdge((edge, attributes) => {\n            tempGraph.links.push(attributes[\"_visualize\"]);\n        });\n        return tempGraph;\n    }\n\n    /**\n     * return a new graph that contains the invisible clusters, formed as nodes\n     * as well as the edges that connected to the cluster node to simulate the force within the same cluster\n     * the new graph is a deep copy of the old node, so no worries of the original graph DS\n     *\n     * @private\n     * @param {Graph} oldGraph\n     * @returns {*}  {Graph}\n     */\n    private addInvisibleClusterNode(oldGraph: Graph): Graph {\n        let graphCopy = oldGraph.copy();\n        let names = [\n            \"_CLUSTER_1_\",\n            \"_CLUSTER_2_\",\n            \"_CLUSTER_3_\",\n            \"_CLUSTER_4_\",\n            \"_CLUSTER_5_\",\n            \"_CLUSTER_6_\",\n            \"_CLUSTER_7_\",\n            \"_CLUSTER_8_\",\n            \"_CLUSTER_9_\",\n            \"_CLUSTER_10_\",\n        ];\n        for (let index = 0; index < names.length; index++) {\n            State.cluster.getAttributeValues.forEach(\n                (attribute: string | number) => {\n                    // if a node does not belong to any cluster, a undefined will be formed with no cluster to generate\n                    if (attribute === \"undefined\") return;\n\n                    let clusterID = names[index] + attribute;\n                    graphCopy.addNode(clusterID, {\n                        _visualize: createCustomNodeObject(clusterID, true),\n                    });\n\n                    // add edges to simulate the force of the same cluster\n                    State.cluster.attributeKeys\n                        .get(attribute)\n                        ?.forEach((target) => {\n                            graphCopy.addEdge(clusterID, target, {\n                                _visualize: createCustomLinkObject(\n                                    clusterID,\n                                    target,\n                                    true\n                                ),\n                            });\n                        });\n                }\n            );\n        }\n\n        return graphCopy;\n    }\n\n    /**\n     * determine whether this Node is the cluster delegate node\n     *\n     * @param {CustomNodeObject} nodeObject\n     */\n    nodeVisibility = (nodeObject: NodeObject) => {\n        let node = nodeObject as ICustomNodeObject;\n        return !node.isClusterNode;\n    };\n\n    /**\n     * determine whether this edge is the cluster delegate edge\n     *\n     * @param {CustomLinkObject} nodeObject\n     */\n    linkVisibility = (linkObject: LinkObject) => {\n        let link = linkObject as ICustomLinkObject;\n        return !link.isClusterLink;\n    };\n\n    ////\n\n    clusterObject: Cluster3dObjectStore;\n\n    ////\n\n    /**\n     * this will re-position the camera to focus on the specified node\n     * if distance not specified, a default of 40 will be used\n     *\n     * @param {string} nodeId the node to be focused\n     * @param {number} [distance=40] the ending distance between the camera and the node\n     * @returns {*}\n     */\n    cameraFocusOn(nodeId: string, distance: number = 40) {\n        let node = State.graph.rawGraph.getNodeAttribute(nodeId, \"_visualize\");\n        if (!(node.x && node.y && node.z)) return;\n        // Aim at node from outside it\n        const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);\n\n        this.graphDelegateMethods.cameraPosition(\n            {\n                x: node.x * distRatio,\n                y: node.y * distRatio,\n                z: node.z * distRatio,\n            }, // new position\n            { x: node.x, y: node.y, z: node.z }, // lookAt ({ x, y, z })\n            3000 // ms transition duration\n        );\n    }\n\n    ////\n\n    /**\n     * set the force inside each cluster in the ForceGraph\n     *\n     * @param {number} force the force to be set\n     * @param {number} _default default force of other links\n     */\n    updateClusterForce() {\n        this.graphDelegateMethods\n            ?.d3Force(\"link\")\n            //@ts-ignore\n            ?.distance((link: CustomLinkObject) => {\n                return link.isClusterLink\n                    ? State.css.cluster.clusterForce\n                    : State.css.cluster.normalForce;\n            });\n        this.graphDelegateMethods.d3ReheatSimulation();\n    }\n}\n","import { makeAutoObservable, reaction } from \"mobx\";\nimport State from \"../state\";\n\nclass ComponentRef {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    static _instance: ComponentRef | null = null;\n\n    nodeDetail!: any;\n\n    multiNodeDetail!: any;\n\n    visualizer!: any;\n\n    // add singleton to prevent creating multiple instances of the State class\n    static get instance() {\n        if (ComponentRef._instance === null) {\n            let instance = new ComponentRef();\n            ComponentRef._instance = instance;\n            return instance;\n        } else {\n            return ComponentRef._instance;\n        }\n    }\n}\n\nreaction(\n    () => State.interaction.currentlyHoveredNodeId,\n    () => ComponentRef.instance.nodeDetail?.forceUpdate()\n);\n\nexport default ComponentRef.instance;\n","import { Attributes, EdgeKey, NodeKey } from \"graphology-types\";\nimport { makeAutoObservable } from \"mobx\";\nimport State from \".\";\nimport GraphStore from \"./GraphStore\";\n\n/**\n * the wrapper mutating function that relates to the mutation of the rawGraph DS\n * all the mutation of the Graph should all go through this API rather than calling on rawGraph directly.\n *\n * @export\n * @class GraphMutation\n */\nexport default class GraphMutation {\n    constructor(_this: GraphStore) {\n        makeAutoObservable(this);\n        this.that = _this;\n    }\n\n    private that!: GraphStore;\n\n    /**\n     * add the node with this attribute to the Graph and refresh the 3d Graph\n     * if not specify attributes._visualize , then will add it into the attributes before adding to Graph\n     *\n     * @param {NodeKey} node\n     * @param {Attributes} [attributes]\n     */\n    public addNode(node: NodeKey, attributes?: Attributes): void {\n        let newAttributes: Attributes;\n        if (!attributes) {\n            newAttributes = {};\n            State.graph.decorateRawNode(node as string, newAttributes);\n        } else if (!attributes.hasOwnProperty(\"_visualize\")) {\n            newAttributes = attributes;\n            State.graph.decorateRawNode(node as string, newAttributes);\n        } else {\n            newAttributes = attributes;\n        }\n        this.that.rawGraph.addNode(node, newAttributes);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * delete the node with this nodeId in the Graph and refresh the 3d Graph\n     *\n     * @param {string} nodeId\n     */\n    public dropNode(nodeId: string): void {\n        this.that.rawGraph.dropNode(nodeId);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * add the edge with this attribute to the Graph and refresh the 3d Graph\n     * if not specify attributes._visualize , then will add it into the attributes before adding to Graph\n     *\n     * @param {NodeKey} source\n     * @param {NodeKey} target\n     * @param {Attributes} [attributes]\n     */\n    public addEdge(\n        source: NodeKey,\n        target: NodeKey,\n        attributes?: Attributes\n    ): void {\n        let newAttributes: Attributes;\n        if (!attributes) {\n            newAttributes = {};\n            State.graph.decorateRawEdge(\n                source as string,\n                target as string,\n                newAttributes\n            );\n        } else if (!attributes.hasOwnProperty(\"_visualize\")) {\n            newAttributes = attributes;\n            State.graph.decorateRawEdge(\n                source as string,\n                target as string,\n                newAttributes\n            );\n        } else {\n            newAttributes = attributes;\n        }\n        this.that.rawGraph.addEdge(source, target, newAttributes);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * delete the edge with this key in the Graph and refresh the 3d Graph\n     *\n     * @param {EdgeKey} edge\n     */\n    public dropEdge(edge: EdgeKey): void {\n        this.that.rawGraph.dropEdge(edge);\n        this.that.refreshGraph();\n    }\n\n    public dropedge(source: string, target: string): void {\n        if (source != null && target != null){\n            this.that.rawGraph.dropEdge(source,target);\n            this.that.refreshGraph();\n        }\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport { Attributes } from \"graphology-types\";\nimport {\n    createCustomNodeObject,\n    createCustomLinkObject,\n} from \"./GraphDelegate\";\nimport ComponentRef from \"../components/ComponentRef\";\nimport State from \".\";\nimport GraphMutation from \"./GraphMutation\";\n\nexport interface IMetaData {\n    snapshotName: string;\n\n    // attributes of nodes in imported graph\n    nodeProperties: string[];\n}\n\n/**\n * the class to store a raw graph as well as the related information\n \n * @export\n * @class GraphStore\n */\nexport default class GraphStore {\n    constructor() {\n        makeAutoObservable(this);\n        this.mutating = new GraphMutation(this);\n    }\n\n    /**\n     * the graphology data structure to store a graph.\n     * has a lot of APIs to manipulate as well as iterate through the graph\n     *\n     * @see graphology\n     *\n     * @type {Graph}\n     */\n    rawGraph: Graph = new Graph({\n        allowSelfLoops: true,\n        multi: false,\n        type: \"undirected\",\n    });\n\n    /**\n     * should be called when individual nodes are added to the graph.\n\n     * add the CustomNodeObject to node attributes stored in the data structure\n     * @see CustomNodeObject\n     * name as @code _visualize in attributes\n     *\n     * @param {string} node\n     * @param {Attributes} attributes\n     */\n    decorateRawNode(node: string, attributes: Attributes) {\n        attributes._visualize = createCustomNodeObject(node, false);\n    }\n\n    /**\n     * used in \"cluster node\" in rightclick panel\n     */\n    numberOfClusters: number = 0;\n\n    /**\n     * should be called when individual edges are added to the graph.\n     *\n     * add the CustomLinkObject to node attributes stored in the data structure\n     * @see CustomLinkObject\n     * name as @code _visualize in attributes\n     *\n     * @param {string} source\n     * @param {string} target\n     * @param {Attributes} attributes\n     */\n    decorateRawEdge(source: string, target: string, attributes: Attributes) {\n        attributes._visualize = createCustomLinkObject(source, target, false);\n    }\n\n    /**\n     * should be called on every graph import\n     * add the the _visualize to every links inside the specified graph\n     *\n     * the _visualize is for storing the object to be send to front-end to render the graph\n     *\n     * @param {Graph} _rawGraph\n     * @return {*}  {Graph}\n     */\n    decorateRawGraph(_rawGraph: Graph): Graph {\n        _rawGraph.forEachNode((node, attributes) =>\n            this.decorateRawNode(node, attributes)\n        );\n\n        _rawGraph.forEachEdge((edge, attributes, source, target) =>\n            this.decorateRawEdge(source, target, attributes)\n        );\n        return _rawGraph;\n    }\n\n    /**\n     * proxy method to set the new graph\n     * if intend to set a new graph, please use this method instead of directly modify GraphStore\n     *\n     * @param {Graph} newGraph\n     * @param {IMetaData} metadata\n     */\n    public setGraph(_rawGraph: Graph, _metadata: IMetaData | null = null) {\n        this.rawGraph = this.decorateRawGraph(_rawGraph);\n        if (_metadata) {\n            this.metadata = _metadata;\n        }\n        State.interaction.flush();\n        State.cluster.clusterBy = null;\n        ComponentRef.visualizer.updateVisualizationGraph();\n    }\n\n    /**\n     * should be called when the graph gets updated (the data inside the graph gets updated, or the attribute to be clustered has changed)\n     *\n     * @memberof GraphStore\n     */\n    public refreshGraph() {\n        State.interaction.flush();\n        ComponentRef.visualizer.updateVisualizationGraph();\n    }\n\n    /**\n     * the wrapper methods to mutate the graph\n     * all the mutations of the graph should go through this API rather than calling this.rawGraph.[mutate]\n     *\n     * has basic functions like addNode, dropNode, addEdge, dropEdge...\n     *\n     * @see {GraphMutation}\n     */\n    mutating: GraphMutation;\n\n    /**\n     * if currently there is a graph in the dataset\n     *\n     * @readonly\n     */\n    get hasGraph() {\n        return this.rawGraph.order && this.rawGraph.size !== 0;\n    }\n\n    /**\n     * the metadata related to the raw graph\n     * should be updated if a new graph is imported\n     *\n     */\n    metadata: IMetaData = {\n        snapshotName: \"SNAPSHOT\",\n        nodeProperties: [],\n    };\n}\n","import { Intent, Position, Toaster } from \"@blueprintjs/core\";\nimport { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport gexf from \"graphology-gexf\";\nimport parse from \"csv-parse/lib/sync\";\nimport State from \".\";\n\nexport interface INodeFileConfig {\n    // the file is successfully parsed and ready for display\n    isReady: boolean;\n    parseError: boolean;\n    path: string;\n\n    // has header at the top\n    hasHeader: boolean;\n\n    // Get top 20 lines. Or if there's less than 10 line, get all the lines.\n    topN: any[];\n    //names for the columns of this csv\n    columns: string[];\n    mapping: {\n        id: string;\n    };\n    delimiter: string;\n}\n\nexport interface IEdgeFileConfig {\n    isReady: boolean;\n    parseError: boolean;\n\n    // should save the csv to temp for further change the cluster attribute\n    path: string;\n    hasHeader: boolean;\n\n    // array of objects storing the\n    topN: any[];\n    columns: string[];\n    mapping: {\n        fromId: string;\n        toId: string;\n    };\n    delimiter: string;\n}\n\nexport default class ImportStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    // whether the graph is in importing\n    isLoading = false;\n    //name of the edge file\n    edgeFileName = \"Choose Edge File ...\";\n\n    //name of the node file\n    nodeFileName = \"Choose Node File ...\";\n\n    //name of the GEXF file\n    gexfFileName = \"Choose GEXF File ...\";\n\n    importCSVDialogOpen = false;\n    importSamplesDialogOpen = false;\n    importGEXFDialogOpen = false;\n\n    // specific: File object selected via the file input.\n    selectedEdgeFileFromInput!: File;\n    selectedNodeFileFromInput!: File;\n\n    selectedGEXFFileFromInput!: File;\n\n    importConfig = {\n        hasNodeFile: false,\n        nodeFile: {\n            // the file is successfully parsed and ready for display\n            isReady: false,\n            parseError: false,\n            path: \"\",\n\n            // has header at the top\n            hasHeader: true,\n\n            // Get top 20 lines. Or if there's less than 10 line, get all the lines.\n            topN: [],\n            //names for the columns of this csv\n            columns: [],\n            mapping: {\n                id: \"Unknown\",\n            },\n            delimiter: \",\",\n        } as INodeFileConfig,\n        edgeFile: {\n            isReady: false,\n            parseError: false,\n\n            // should save the csv to temp for further change the cluster attribute\n            path: \"\",\n            hasHeader: true,\n\n            // array of objects storing the\n            topN: [],\n            columns: [],\n            mapping: {\n                fromId: \"Unknown\",\n                toId: \"Unknown\",\n            },\n            delimiter: \",\",\n        } as IEdgeFileConfig,\n    };\n\n    /**\n     * read the CSV file specified by fileObject, with options defined by other paras\n     * and return a list of objects containing the key-value pair of attribute-value\n     *\n     * @param {File} fileObject\n     * @param {boolean} hasHeader\n     * @param {string} delimiter\n     * @return {*}  {Promise<Object[]>}\n     * where Object is of { attribute: number | string, anotherAttribute: number | string, ... } type\n     */\n    private async readCSV(\n        fileObject: File,\n        hasHeader: boolean,\n        delimiter: string\n    ): Promise<any[]> {\n        const file = fileObject;\n        const reader = new FileReader();\n        reader.readAsText(file);\n        return new Promise((resolve, reject) => {\n            reader.onload = () => {\n                let content: any = reader.result;\n                content = content.replace(/\\r\\n/g, \"\\n\");\n                content = content.replace(/\\r/g, \"\\n\");\n                try {\n                    if (hasHeader) {\n                        resolve(\n                            parse(content, {\n                                comment: \"#\",\n                                trim: true,\n                                auto_parse: true,\n                                skip_empty_lines: true,\n                                columns: hasHeader,\n                                delimiter,\n                            })\n                        );\n                    }\n                    resolve(\n                        parse(content, {\n                            comment: \"#\",\n                            trim: true,\n                            auto_parse: true,\n                            skip_empty_lines: true,\n                            columns: undefined,\n                            delimiter,\n                        })\n                    );\n                } catch (err) {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: \" + err.message,\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                }\n            };\n        });\n    }\n\n    /**\n     * parse the graph from import GEXF file specified in selectedGEXFFileFromInput\n     * and return a Graph object\n     *\n     * @private\n     * @return {*}  {Promise<Graph>}\n     */\n    private async readGEXF(): Promise<Graph> {\n        const file = this.selectedGEXFFileFromInput;\n        const reader = new FileReader();\n        reader.readAsText(file);\n        return new Promise((resolve, reject) => {\n            reader.onload = () => {\n                try {\n                    resolve(gexf.parse(Graph, reader.result as string));\n                } catch (err) {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: \" + err.message,\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    this.isLoading = false;\n                }\n            };\n        });\n    }\n\n    public readEdgeCSV(): Promise<any[]> {\n        return this.readCSV(\n            this.selectedEdgeFileFromInput,\n            this.importConfig.edgeFile.hasHeader,\n            this.importConfig.edgeFile.delimiter\n        );\n    }\n\n    public readNodeCSV(): Promise<any[]> {\n        return this.readCSV(\n            this.selectedNodeFileFromInput,\n            this.importConfig.nodeFile.hasHeader,\n            this.importConfig.nodeFile.delimiter\n        );\n    }\n\n    /**\n     * will create a Graph structure to store the nodes and edges in the imported File\n     * should handle whether or not have the NodeFile, whether or not have the header of each file\n     * if successfully imported, change the .isReady to be true\n     *\n     * @return {*}\n     */\n    public async importGraphFromCSV() {\n        const config = this.importConfig;\n\n        // the CSV lib we use uses int index when there's not header/column names specified\n        const fromColumn = config.edgeFile.hasHeader\n            ? config.edgeFile.mapping.fromId\n            : parseInt(config.edgeFile.mapping.fromId);\n        const toColumn = config.edgeFile.hasHeader\n            ? config.edgeFile.mapping.toId\n            : parseInt(config.edgeFile.mapping.toId);\n\n        let tempNodes: any[] = [];\n        let tempEdges: any[] = [];\n\n        const graph = new Graph({\n            allowSelfLoops: true,\n            multi: true,\n            type: \"undirected\",\n        });\n\n        // parse Node file and store into the Graph DS\n        if (config.hasNodeFile) {\n            tempNodes = await this.readNodeCSV();\n            tempNodes.forEach((node) => {\n                let nodeId = node[config.nodeFile.mapping.id].toString();\n                delete node[config.nodeFile.mapping.id];\n                graph.addNode(nodeId, node);\n            });\n        }\n\n        // parse Edge file and store into the Graph DS\n        tempEdges = await this.readEdgeCSV();\n        tempEdges.forEach((edge, idx) => {\n            let fromId = edge[fromColumn].toString();\n            let toId = edge[toColumn].toString();\n\n            if (!graph.hasNode(fromId)) {\n                graph.addNode(fromId, { id: fromId });\n            }\n            if (!graph.hasNode(toId)) {\n                graph.addNode(toId, { id: toId });\n            }\n            graph.addEdgeWithKey(idx, fromId, toId);\n        });\n\n        config.edgeFile.isReady = true;\n\n        let nodeProperties = config.hasNodeFile\n            ? Object.keys(tempNodes[0])\n            : [\"id\"];\n\n        // graph.setAttribute('cluster','label');\n\n        return {\n            graph: graph,\n            metadata: {\n                snapshotName: \"Untitled\",\n                nodeProperties: nodeProperties,\n            },\n        };\n    }\n\n    //TODO:import 里的id和cluster， source target还没设置\n    public async importGraphFromGEXF() {\n        let graph = await this.readGEXF();\n        let nodeProperties: string[] = [];\n        this.setNodeAttributesCluster(graph);\n        for (const [key] of Object.entries(\n            graph.getNodeAttributes(graph.nodes()[0])\n        )) {\n            nodeProperties.push(key);\n        }\n\n        // graph.setAttribute('cluster','label');\n\n        return {\n            graph: graph,\n            metadata: {\n                snapshotName: \"Untitled\",\n                nodeProperties: nodeProperties,\n                clusterProperties: null,\n                edgeProperties: [\"source_id\", \"target_id\"],\n            },\n        };\n    }\n    /**\n     * add attrubute 'cluster' for each node usde for cluster nodes\n     *\n     */\n    private setNodeAttributesCluster(graph: Graph) {\n        graph.forEachNode((node, attributes) => {\n            attributes.cluster = 0;\n        });\n    }\n\n    /**\n     * change the importConfig.edgeFile.topN to be the top 10 parsed elements in the input edge file\n     * change the importConfig.edgeFile.columns to be the attributes of the imported edge file\n     * set the .mapping.fromId and .mapping.toId to be the first and second (if have) attribute of the input edge file.\n     *\n     * if successfully parsed, set the .isReady to be true, else set the.parseError\n     *\n     * This function will autorun if user specify the selectedEdgeFileFromInput and the changes that this function will make is to get ready for the rendering of preview Table in the ImportDialog\n     *\n     * @return {*}\n     */\n    public async renderImportEdgePreview() {\n        let file = this.selectedEdgeFileFromInput;\n        let edgeFileConfig = this.importConfig.edgeFile;\n        let hasHeader = edgeFileConfig.hasHeader;\n        let delimiter = edgeFileConfig.delimiter;\n\n        edgeFileConfig.parseError = false;\n\n        return new Promise<void>((resolve, reject): void => {\n            if (!file) {\n                return;\n            }\n            const reader = new FileReader();\n            reader.readAsText(file);\n\n            reader.onload = () => {\n                // Read entire CSV into memory as string\n                let fileAsString = reader.result as string;\n\n                // if the file is not regularly formatted, replace the EOL character\n                fileAsString = fileAsString.replace(/\\r\\n/g, \"\\n\");\n                fileAsString = fileAsString.replace(/\\r/g, \"\\n\");\n\n                // Get top 10ß lines. Or if there's less than 10 line, get all the lines.\n                const lines = fileAsString.split(\"\\n\");\n                const topLinesAsString = lines\n                    .map((l) => l.trim())\n                    .slice(0, lines.length < 10 ? lines.length : 10)\n                    .join(\"\\n\");\n                console.log(topLinesAsString);\n\n                // Parse the top lines\n                try {\n                    const it = hasHeader\n                        ? parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: hasHeader,\n                              delimiter: delimiter,\n                          })\n                        : parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: undefined,\n                              delimiter: delimiter,\n                          });\n                    edgeFileConfig.topN = it;\n                    edgeFileConfig.columns = Object.keys(it[0]).map(\n                        (key) => `${key}`\n                    );\n\n                    // if there exists two or more columns in the parsed edge file\n                    if (edgeFileConfig.columns.length >= 2) {\n                        edgeFileConfig.mapping.fromId =\n                            edgeFileConfig.columns[0];\n                        edgeFileConfig.mapping.toId = edgeFileConfig.columns[1];\n                        edgeFileConfig.isReady = true;\n                    } else if (edgeFileConfig.columns.length === 1) {\n                        edgeFileConfig.mapping.fromId = edgeFileConfig.mapping.toId =\n                            edgeFileConfig.columns[0];\n                        edgeFileConfig.isReady = true;\n                    } else {\n                        Toaster.create({\n                            position: Position.TOP,\n                        }).show({\n                            message: \"Error: Fails to parse file\",\n                            intent: Intent.DANGER,\n                            timeout: -1,\n                        });\n                        edgeFileConfig.parseError = true;\n                    }\n                    resolve();\n                } catch {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: Fails to parse file\",\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    edgeFileConfig.parseError = true;\n                    reject();\n                }\n            };\n\n            reader.onerror = () => {\n                console.error(reader.error);\n                Toaster.create({\n                    position: Position.TOP,\n                }).show({\n                    action: {\n                        onClick: () => window.location.reload(),\n                        text: \"Refresh Page\",\n                    },\n                    message: \"Error: Fails to open file\",\n                    intent: Intent.DANGER,\n                    timeout: -1,\n                });\n                reject();\n            };\n        });\n    }\n\n    /**\n     * change the importConfig.nodeFile.topN to be the top 10 parsed elements in the input node file\n     * change the importConfig.nodeFile.columns to be the attributes of the imported node file\n     * set the .mapping.id .mapping.cluster to be the first and second (if have) attribute of the input edge file.\n     *\n     * if successfully parsed, set the .isReady to be true, else set the.parseError\n     *\n     * This function will autorun if user specify the selectedNodeFileFromInput and the changes that this function will make is to get ready for the rendering of preview Table in the ImportDialog\n     *\n     * @return {*}\n     */\n    public async renderImportNodePreview() {\n        let file = this.selectedNodeFileFromInput;\n        let nodeFileConfig = this.importConfig.nodeFile;\n        let hasHeader = nodeFileConfig.hasHeader;\n        let delimiter = nodeFileConfig.delimiter;\n\n        nodeFileConfig.parseError = false;\n\n        return new Promise<void>((resolve, reject): void => {\n            if (!file) {\n                return;\n            }\n            const reader = new FileReader();\n            reader.readAsText(file);\n\n            reader.onload = () => {\n                // Read entire CSV into memory as string\n                let fileAsString = reader.result as string;\n\n                // if the file is not regularly formatted, replace the EOL character\n                fileAsString = fileAsString.replace(/\\r\\n/g, \"\\n\");\n                fileAsString = fileAsString.replace(/\\r/g, \"\\n\");\n\n                // Get top 10 lines. Or if there's less than 10 line, get all the lines.\n                const lines = fileAsString.split(\"\\n\");\n                const topLinesAsString = lines\n                    .map((l) => l.trim())\n                    .slice(0, lines.length < 10 ? lines.length : 10)\n                    .join(\"\\n\");\n                console.log(topLinesAsString);\n\n                // Parse the top lines\n                try {\n                    const it = hasHeader\n                        ? parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: hasHeader,\n                              delimiter,\n                          })\n                        : parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: undefined,\n                              delimiter,\n                          });\n                    nodeFileConfig.topN = it;\n                    nodeFileConfig.columns = Object.keys(it[0]).map(\n                        (key) => `${key}`\n                    );\n\n                    // if there exists two or more columns in the parsed edge file\n                    if (nodeFileConfig.columns.length >= 1) {\n                        nodeFileConfig.mapping.id = nodeFileConfig.columns[0];\n                        nodeFileConfig.isReady = true;\n                    } else {\n                        Toaster.create({\n                            position: Position.TOP,\n                        }).show({\n                            message: \"Error: Fails to parse file\",\n                            intent: Intent.DANGER,\n                            timeout: -1,\n                        });\n                        nodeFileConfig.parseError = true;\n                    }\n                    resolve();\n                } catch {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: Fails to parse file\",\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    nodeFileConfig.parseError = true;\n                    reject();\n                }\n            };\n\n            reader.onerror = () => {\n                console.error(reader.error);\n                Toaster.create({\n                    position: Position.TOP,\n                }).show({\n                    action: {\n                        onClick: () => window.location.reload(),\n                        text: \"Refresh Page\",\n                    },\n                    message: \"Error: Fails to open file\",\n                    intent: Intent.DANGER,\n                    timeout: -1,\n                });\n                reject();\n            };\n        });\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\n\nexport default class ProjectStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    currentSnapshotName = \"Untitled\";\n\n    exportDialogOpen = false;\n    renameSnapshotDialogOpen = false;\n}\n","import Graph from \"graphology\";\nimport { makeAutoObservable, observable } from \"mobx\";\n\nexport default class SearchStore {\n    constructor() {\n        makeAutoObservable(this, {\n            rawGraph: observable.ref,\n        });\n    }\n\n    // if is previewing, ignore all mouse hovers detected by NodeDetailPanel because it is showing the detail of selected node\n    isPreviewing = false;\n\n    // can use defined regex\n    // id:123\n    // attr:color:red\n    searchStr = \"\";\n\n    /**\n     * @observable .ref\n     * the reference bounded to the GraphStore/rawGraph\n     *\n     * @type {Graph}\n     * @memberof ClusterStore\n     */\n    rawGraph!: Graph;\n\n    // contains node ids\n    get candidates(): string[] {\n        let list: string[] = [];\n        let searchStrIgnoreCase = this.searchStr.toLocaleLowerCase();\n        if (searchStrIgnoreCase.match(/^id:.+/g)) {\n            const searchId = searchStrIgnoreCase.split(/^id:/g)[1].trim();\n            this.rawGraph.forEachNode((node) => {\n                if (node.toLocaleLowerCase().includes(searchId)) {\n                    list.push(node);\n                }\n            });\n        } else if (searchStrIgnoreCase.match(/^attr:.+:.+/g)) {\n            let searchQuery = searchStrIgnoreCase\n                .split(/^attr:/g)[1]\n                .trim()\n                .split(/:/g);\n            const searchAttr = searchQuery[0].trim();\n            const searchValue = searchQuery[1].trim();\n            this.rawGraph.forEachNode((node, attributes) => {\n                if (\n                    attributes.hasOwnProperty(searchAttr) &&\n                    (attributes[searchAttr] as string)\n                        .toLocaleLowerCase()\n                        .includes(searchValue)\n                ) {\n                    list.push(node);\n                }\n            });\n        } else if (this.searchStr === \"\") {\n        } else {\n            this.rawGraph.forEachNode((node) => {\n                if (node.toLocaleLowerCase().includes(this.searchStr)) {\n                    list.push(node);\n                }\n            });\n        }\n\n        return list;\n    }\n}\n","import { makeAutoObservable, observable } from \"mobx\";\nimport Graph from \"graphology\";\nimport * as THREE from \"three\";\nimport randomcolor from \"randomcolor\";\nimport State from \".\";\n\n/**\n * all the computed values get from the rawGraph\n *\n * @export\n * @class ClusterStore\n */\nexport default class ClusterStore {\n    constructor() {\n        makeAutoObservable(this, {\n            rawGraph: observable.ref,\n        });\n    }\n    /**\n     * @observable\n     *\n     * attention: please use setCluster() to alter this data\n     * Specify which attribute to be clustered\n     * the default value should be null, and front-end graph will interpret this to Not-Cluster\n     *\n     *\n     */\n    clusterBy: string | null = null;\n\n    /**\n     * the setter of clusterBy\n     * will update the front-end 3d graph about the cluster changes\n     *\n     * @param {(string | null)} by\n     */\n    setCluster(by: string | null) {\n        this.clusterBy = by;\n        State.graph.refreshGraph();\n    }\n\n    /**\n     * @observable .ref\n     * the reference bounded to the GraphStore/rawGraph\n     *\n     * @type {Graph}\n     */\n    rawGraph!: Graph;\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the id of a Node -> the value of the attribute specified by $clusterBy]\n     *\n     * @readonly\n     * @type {(Map<string, string | number>)}\n     */\n    get keyAttribute(): Map<string, string | number> {\n        const keyValueMap = new Map<string, string | number>();\n        if (this.clusterBy === null) {\n            return keyValueMap;\n        }\n        const attribute = this.clusterBy as string;\n\n        this.rawGraph?.forEachNode((key, attributes) => {\n            // if this attribute is defined\n            if (attributes.hasOwnProperty(attribute)) {\n                keyValueMap.set(key, attributes[attribute]);\n            } else {\n                // this attribute is undefined in this node\n                keyValueMap.set(key, \"undefined\");\n            }\n        });\n        return keyValueMap;\n    }\n\n    /**\n     * the possible attribute values of the attribute defined by $clusterBy\n     *\n     * @readonly\n     * @type {((string | number)[])}\n     */\n    get getAttributeValues(): (string | number)[] {\n        return Array.from(new Set(this.keyAttribute.values()));\n    }\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> a list of Node ids]\n     *\n     * @readonly\n     * @type {(Map<string | number, string[]>)}\n     */\n    get attributeKeys(): Map<string | number, string[]> {\n        const attributeKeysMap = new Map<string | number, string[]>();\n        this.getAttributeValues.forEach((value) => {\n            attributeKeysMap.set(value, []);\n        });\n        this.keyAttribute.forEach((value, key) => {\n            attributeKeysMap.get(value)?.push(key);\n        });\n        return attributeKeysMap;\n    }\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> the random colour of this cluster]\n     * used to avoid re-compute the colours on every frame refresh\n     *\n     * @readonly\n     * @type {(Map<string | number, string>)}\n     */\n    get attributeColor(): Map<string | number, string> {\n        let colors = randomcolor({\n            seed: 1,\n            count: this.getAttributeValues.length,\n        });\n        let position = 0;\n        let map = new Map<string | number, string>();\n        this.getAttributeValues.forEach((attribute) => {\n            map.set(attribute, colors[position++]);\n        });\n        return map;\n    }\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> the Nodes points in that cluster]\n     * will change on every frame refresh as the Node's position keeps changing.\n     *\n     * @readonly\n     * @type {(Map<string | number, THREE.Vector3[]>)}\n     */\n    get attributePoints(): Map<string | number, THREE.Vector3[]> {\n        let map = new Map<string | number, THREE.Vector3[]>();\n        this.getAttributeValues.forEach((attribute) => {\n            let vectorList: THREE.Vector3[] = [];\n            map.set(attribute, vectorList);\n        });\n        this.rawGraph.forEachNode((key, attributes) => {\n            map.get(this.keyAttribute.get(key) as string | number)?.push(\n                new THREE.Vector3(\n                    attributes._visualize.x,\n                    attributes._visualize.y,\n                    attributes._visualize.z\n                )\n            );\n        });\n        return map;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\n\n/**\n * changing the config inside .global will cause to change every config of every node iteratively\n *\n * but changing the else does not\n *\n * @class NodeGlobalConfig\n */\nclass NodeGlobalConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n    defaultColor: string = \"#808080\";\n    selectedColor: string = \"#ffffAA\";\n    multiSelectedColor: string = \"white\";\n    highlightColor: string = \"#ff6060\";\n\n    resolution = 12;\n\n    size = 4;\n}\n\n/**\n * changing the config inside .global will cause to change every config of every edge iteratively\n *\n * but changing the else does not\n *\n * @class EdgeGlobalConfig\n */ class EdgeGlobalConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    defaultColor = \"#ffffff\";\n\n    selectedColor = \"#ffff00\";\n    highlightColor = \"#ff8E8E\";\n\n    defaultWidth: number = 1;\n\n    highlightWidth: number = 2;\n\n    resolution = 6;\n}\nclass LabelConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    show = true;\n    color = \"#d3d3d3\";\n    size = 4;\n}\n\nclass ClusterConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    clusterForce = 20;\n    normalForce = 50;\n    resolution = 10;\n    shape: \"convexHull\" | \"sphere\" = \"convexHull\";\n}\n/**\n * the configurations to set to cascade the graph\n *\n * @export\n * @class CssStore\n */\nexport default class CssStore {\n    constructor() {\n        makeAutoObservable(this);\n        this.node = new NodeGlobalConfig();\n        this.edge = new EdgeGlobalConfig();\n        this.label = new LabelConfig();\n        this.cluster = new ClusterConfig();\n    }\n\n    node!: NodeGlobalConfig;\n\n    edge!: EdgeGlobalConfig;\n\n    label!: LabelConfig;\n\n    cluster!: ClusterConfig;\n\n    isAnimating: boolean = true;\n}\n","import { Attributes } from \"graphology-types\";\nimport { makeAutoObservable } from \"mobx\";\nimport State from \".\";\n\nexport default class InteractionStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    selectedNode: string | null = null;\n    /**\n     * the currently selected node ids\n     * the singleNodeDetailPanel will render and refresh if this changes\n     *\n     * @type {string[]}\n     */\n    selectedNodes: string[] = [];\n\n    selectedEdge: string | null = null;\n\n    selectedEdges: string[] = [];\n    /**\n     * the currently hovered node id\n     * the multiNodeDetailPanel will render and refresh if this changes\n     *\n     * @type {string}\n     */\n    currentlyHoveredNodeId: string | null = null;\n\n    /**\n     * the currently hovered node id that used for display at RightClickPanel\n     */\n    chNodeIdforDisplay: string = \"\";\n\n    get currentlyHoveredNodeNeighbors(): string[] | null {\n        if (this.currentlyHoveredNodeId === null) {\n            return null;\n        } else {\n            return State.graph.rawGraph.neighbors(this.currentlyHoveredNodeId);\n        }\n    }\n\n    get currentlyHoveredNodeNeighborEdges(): string[] | null {\n        if (this.currentlyHoveredNodeId === null) {\n            return null;\n        } else {\n            return this.getNodeNeighborEdges(this.currentlyHoveredNodeId);\n        }\n    }\n\n    previouslyHoveredNodeId: string | null = null;\n\n    getNodeNeighborEdges(node: string): string[] {\n        let neighbors = State.graph.rawGraph.neighbors(node);\n        return neighbors?.map((neighbor: string) => {\n            return this.getEdgeKey(\n                neighbor,\n                this.currentlyHoveredNodeId as string\n            ) as string;\n        });\n    }\n\n    getEdgeKey(node1: string, node2: string): string | null {\n        let go: string | undefined = State.graph.rawGraph.edge(node1, node2);\n        if (go === undefined) {\n            let back: string | undefined = State.graph.rawGraph.edge(\n                node2,\n                node1\n            );\n            if (back === undefined) {\n                return null;\n            } else {\n                return back;\n            }\n        } else {\n            return go;\n        }\n    }\n\n    setNodeToDefault(node: string) {\n        this.updateNodeVisualizeAttribute(node, {\n            hovered: false,\n            selected: false,\n        });\n    }\n    /**\n     * update the _visualize object inside node attribute and calls graph refresh\n     *\n     * @param {string} id\n     * @param {Attributes} attribute\n     * @memberof GraphMutation\n     */\n    updateNodeVisualizeAttribute(\n        id: string,\n        attribute: Attributes,\n        oldAttributeVisualize: Attributes | null = null\n    ) {\n        if (oldAttributeVisualize === null) {\n            oldAttributeVisualize = State.graph.rawGraph.getNodeAttribute(\n                id,\n                \"_visualize\"\n            );\n        }\n\n        this.updateVisualizeAttributeParser(\n            attribute,\n            oldAttributeVisualize as Attributes\n        );\n    }\n    /**\n     * update the _visualize object inside edge attribute and calls graph refresh\n     *\n     * @param {string} id\n     * @param {Attributes} attribute\n     * @memberof GraphMutation\n     */\n    updateEdgeVisualizeAttribute(\n        key: string,\n        attribute: Attributes,\n        oldAttributeVisualize: Attributes | null = null\n    ) {\n        if (oldAttributeVisualize === null) {\n            oldAttributeVisualize = State.graph.rawGraph.getEdgeAttribute(\n                key,\n                \"_visualize\"\n            );\n        }\n        this.updateVisualizeAttributeParser(\n            attribute,\n            oldAttributeVisualize as Attributes\n        );\n    }\n\n    /**\n     * update the _visualize object inside all the nodes attribute and calls graph refresh\n     *\n     * @param {Attributes} _attributeVisualize\n     * @memberof GraphMutation\n     */\n    updateNodesVisualizeAttribute(_attributeVisualize: Attributes) {\n        State.graph.rawGraph.updateEachNodeAttributes((node, attribute) => {\n            return {\n                ...attribute._visualize,\n                ..._attributeVisualize,\n            };\n        });\n    }\n\n    /**\n     *\n     * update the _visualize object inside all the edges attribute and calls graph refresh\n     *\n     * @param {Attributes} _attributeVisualize\n     * @memberof GraphMutation\n     */\n    updateEdgesVisualizeAttribute(_attributeVisualize: Attributes) {\n        State.graph.rawGraph.updateEachEdgeAttributes((node, attribute) => {\n            return {\n                ...attribute._visualize,\n                ..._attributeVisualize,\n            };\n        });\n    }\n\n    updateVisualizeAttributeParser(newAttribute: any, oldAttributes: any) {\n        if (newAttribute.hasOwnProperty(\"hovered\")) {\n            oldAttributes.hovered = newAttribute.hovered;\n        } else if (newAttribute.hasOwnProperty(\"selected\")) {\n            oldAttributes.selected = newAttribute.selected;\n        } else if (newAttribute.hasOwnProperty(\"multiSelected\")) {\n            oldAttributes.multiSelected = newAttribute.multiSelected;\n        }\n    }\n\n    /**\n     * should call this on every refresh of graph DS\n     *\n     */\n    flush() {\n        this.selectedNode = null;\n        this.selectedNodes = [];\n        this.selectedEdge = null;\n        this.selectedEdges = [];\n        this.currentlyHoveredNodeId = null;\n        this.previouslyHoveredNodeId = null;\n    }\n}\n","import { autorun, reaction } from \"mobx\";\n\nimport PreferencesStore from \"./PreferencesStore\";\nimport GraphStore from \"./GraphStore\";\nimport ImportStore from \"./ImportStore\";\nimport ProjectStore from \"./ProjectStore\";\nimport SearchStore from \"./SearchStore\";\nimport ClusterStore from \"./ClusterStore\";\nimport CssStore from \"./CssStore\";\nimport GraphDelegate from \"./GraphDelegate\";\nimport InteractionStore from \"./InteractionStore\";\n\nclass AppState {\n    static _instance: AppState | null = null;\n\n    preferences!: PreferencesStore;\n    graph!: GraphStore;\n    graphDelegate!: GraphDelegate;\n    interaction!: InteractionStore;\n    import!: ImportStore;\n    search!: SearchStore;\n    project!: ProjectStore;\n    cluster!: ClusterStore;\n    css!: CssStore;\n\n    private privateConstructor() {\n        this.preferences = new PreferencesStore();\n        this.graph = new GraphStore();\n        this.graphDelegate = new GraphDelegate();\n        this.interaction = new InteractionStore();\n        this.import = new ImportStore();\n        this.search = new SearchStore();\n        this.project = new ProjectStore();\n        this.cluster = new ClusterStore();\n        this.css = new CssStore();\n    }\n\n    // add singleton to prevent creating multiple instances of the State class\n    static get instance() {\n        if (AppState._instance === null) {\n            let instance = new AppState();\n            instance.privateConstructor();\n            AppState._instance = instance;\n            return instance;\n        } else {\n            return AppState._instance;\n        }\n    }\n}\n\nconst State = AppState.instance;\n\n// this is for easily debugging in runtime\n//@ts-ignore\nwindow._state = State;\n\n// extract CSV from selected edge File object and update related fields.\n// will auto run if selectedEdgeFileFromInput or delimiter or anything is changed.\nautorun(() => State.import.renderImportEdgePreview());\n\n// extract CSV from selected node File object and update related fields.\n// will auto run if selectedNodeFileFromInput or delimiter or anything is changed.\nautorun(() => State.import.renderImportNodePreview());\n\nautorun(\n    () =>\n        (State.cluster.rawGraph = State.search.rawGraph = State.graph.rawGraph)\n);\n\nautorun(() => {\n    if (State.css.isAnimating === true) {\n        State.graphDelegate.graphDelegateMethods?.resumeAnimation();\n    } else {\n        State.graphDelegate.graphDelegateMethods?.pauseAnimation();\n    }\n});\n\nreaction(\n    () => State.interaction.currentlyHoveredNodeId,\n    (currentlyHoveredNodeId) => {\n        console.log(\"currentlyHoveredNodeId\", currentlyHoveredNodeId);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (node === currentlyHoveredNodeId) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { hovered: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { hovered: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graph.rawGraph.forEachEdge((edge, oldAttributes) => {\n            if (\n                State.interaction.currentlyHoveredNodeNeighborEdges?.includes(\n                    edge\n                )\n            ) {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { hovered: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { hovered: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\nreaction(\n    () => State.interaction.selectedNodes.map((node) => node),\n    (selectedNodes) => {\n        console.log(\"selectedNodes\", selectedNodes);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (selectedNodes.includes(node)) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { multiSelected: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { multiSelected: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\nreaction(\n    () => State.interaction.selectedNode,\n    (selectedNode) => {\n        console.log(\"selectedNode\", selectedNode);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (selectedNode === node) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { selected: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { selected: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\nreaction(\n    () => State.interaction.selectedEdge,\n    (selectedEdge) => {\n        console.log(\"selectedEdge\", selectedEdge);\n        State.graph.rawGraph.forEachEdge((edge, oldAttributes) => {\n            if (selectedEdge === edge) {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { selected: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { selected: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\nexport default State;\n","import React, { MouseEventHandler } from \"react\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { Select } from \"@blueprintjs/select\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { copy } from \"copy-anything\";\n\ninterface Props {\n    /**\n     * whether or not to show the None\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    showNone: boolean;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     * if None is selected, the item props will be set to null\n     *\n     * @memberof Props\n     */\n    onSelect: (item: string | null) => void;\n\n    /**\n     * the selected to display will sync with this props\n     *\n     * @type {(string | null)}\n     * @memberof Props\n     */\n    syncWith: string | null;\n}\n\ninterface CustomIItemRendererProps {\n    handleClick: MouseEventHandler<HTMLElement>;\n}\n\n/**\n * this component can be used to choose the attribute among all the attributes, with addition none to choose (can be toggled to off)\n * to use it, you have to specify whether to add additional None to the list and onChange function to call when a candidate is selected\n */\nexport default observer(\n    class ClusterChooser extends React.Component<Props, {}> {\n        static defaultProps = {\n            showNone: true,\n        };\n\n        get fullProperties(): string[] {\n            let propertiesWithNone = copy(State.graph.metadata.nodeProperties);\n            if (State.graph.rawGraph.hasAttribute('cluster')){\n                propertiesWithNone.unshift(State.graph.rawGraph.getAttribute('cluster'));\n                propertiesWithNone.unshift(\"None\");\n            }else{\n            propertiesWithNone.unshift(\"None\");}\n            return propertiesWithNone;\n        }\n\n        itemRenderer = (\n            item: any,\n            props: CustomIItemRendererProps\n        ): JSX.Element | null => {\n            if (item === \"None\") {\n                return (\n                    <MenuItem\n                        intent=\"primary\"\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            } else {\n                return (\n                    <MenuItem\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            }\n        };\n\n        render() {\n            return (\n                <Select\n                    items={\n                        this.props.showNone\n                            ? this.fullProperties\n                            : State.graph.metadata.nodeProperties\n                    }\n                    itemRenderer={this.itemRenderer}\n                    filterable={false}\n                    onItemSelect={(item: string) => {\n                        let selected = item === \"None\" ? null : item;\n                        this.props.onSelect(selected);\n                    }}\n                >\n                    <Button text={this.props.syncWith ?? this.fullProperties[0]} />\n                </Select>\n            );\n        }\n    }\n);\n","export default __webpack_public_path__ + \"static/media/logo.25a51149.png\";","import React, { MouseEventHandler } from \"react\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { ItemPredicate, Select } from \"@blueprintjs/labs\";\nimport { observer } from \"mobx-react\";\n\ninterface Props {\n    items: any[];\n    onSelect: (\n        item: any,\n        event?: React.SyntheticEvent<HTMLElement, Event> | undefined\n    ) => void;\n    text: string;\n    small: boolean;\n    search: boolean;\n}\n\ninterface CustomIItemRendererProps {\n    handleClick: MouseEventHandler<HTMLElement>;\n}\n\nexport function CommonItemRenderer(\n    item: any,\n    props: CustomIItemRendererProps\n): JSX.Element | null {\n    return <MenuItem key={item} onClick={props.handleClick} text={item} />;\n}\n\nexport default observer(\n    class SimpleSelect extends React.Component<Props, {}> {\n        static defaultProps = {\n            small: false,\n            search: false,\n        };\n\n        itemPredicate: ItemPredicate<string> = (\n            query: string,\n            object: string\n        ) => {\n            return object.toLowerCase().indexOf(query.toLowerCase()) >= 0;\n        };\n        render() {\n            if (this.props.search) {\n                return (\n                    <Select\n                        items={this.props.items}\n                        itemPredicate={this.itemPredicate}\n                        itemRenderer={CommonItemRenderer}\n                        filterable={true}\n                        onItemSelect={this.props.onSelect}\n                        noResults={\n                            <MenuItem disabled={true} text=\"No results.\" />\n                        }\n                    >\n                        <Button\n                            text={this.props.text}\n                            small={this.props.small}\n                        />\n                    </Select>\n                );\n            } else {\n                return (\n                    <Select\n                        items={this.props.items}\n                        itemRenderer={CommonItemRenderer}\n                        filterable={false}\n                        onItemSelect={this.props.onSelect}\n                    >\n                        <Button\n                            text={this.props.text}\n                            small={this.props.small}\n                        />\n                    </Select>\n                );\n            }\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport {\n    Button,\n    ButtonGroup,\n    Classes,\n    Menu,\n    MenuDivider,\n    MenuItem,\n    Popover,\n    Position,\n    Switch,\n} from \"@blueprintjs/core\";\nimport ClusterChooser from \"./utils/ClusterChooser\";\nimport logo from \"../images/logo.png\";\nimport State from \"../state\";\nimport SimpleSelect from \"./utils/SimpleSelect\";\nimport ComponentRef from \"./ComponentRef\";\n\nexport default observer(\n    class Navbar extends React.Component {\n        render() {\n            return (\n                <nav className={classnames([Classes.NAVBAR])}>\n                    <div\n                        className={classnames([\n                            Classes.NAVBAR_GROUP,\n                            Classes.ALIGN_LEFT,\n                        ])}\n                    >\n                        <img\n                            title=\"PiperNet\"\n                            id=\"PiperNet Logo\"\n                            src={logo}\n                            width=\"35\"\n                            height=\"35\"\n                            alt=\"PiperNet Logo\"\n                        />\n                        <div className={classnames([Classes.NAVBAR_HEADING])}>\n                            {\" \"}\n                            PiperNet{\" \"}\n                        </div>\n\n                        <Popover\n                            content={\n                                <Menu>\n                                    <MenuItem\n                                        text=\"Load Sample\"\n                                        icon=\"graph\"\n                                        onClick={() => {\n                                            State.import.importSamplesDialogOpen = true;\n                                        }}\n                                    >\n                                        {/* {SAMPLE_GRAPH_SNAPSHOTS.map(\n                                            (sample) => {\n                                                const sampleSnapshotTitle =\n                                                    sample[0];\n                                                const sampleSnapshotUrl =\n                                                    sample[1];\n\n                                                return (\n                                                    <MenuItem\n                                                        icon=\"graph\"\n                                                        text={\n                                                            sampleSnapshotTitle\n                                                        }\n                                                        disabled={true}\n                                                        onClick={() => {\n                                                            fetchSampleGraph(\n                                                                sampleSnapshotUrl\n                                                            ).then((file) => {\n                                                                State.import.selectedGEXFFileFromInput = file;\n                                                                State.import\n                                                                    .importGraphFromGEXF()\n                                                                    .then(\n                                                                        (\n                                                                            res\n                                                                        ) => {\n                                                                            State.graph.rawGraph =\n                                                                                res.graph;\n                                                                            State.graph.metadata =\n                                                                                res.metadata;\n                                                                        }\n                                                                    );\n                                                            });\n                                                        }}\n                                                    />\n                                                );\n                                            }\n                                        )} */}\n                                    </MenuItem>\n                                    <MenuDivider />\n                                    <MenuItem\n                                        icon=\"import\"\n                                        text=\"Import from CSV...\"\n                                        onClick={() => {\n                                            State.import.importCSVDialogOpen = true;\n                                        }}\n                                    />\n                                    <MenuItem\n                                        icon=\"import\"\n                                        text=\"Import from GEXF...\"\n                                        onClick={() => {\n                                            State.import.importGEXFDialogOpen = true;\n                                        }}\n                                    />\n                                    <MenuDivider />\n                                    <MenuItem\n                                        icon=\"download\"\n                                        text=\"Export Graph\"\n                                        onClick={() => {\n                                            State.project.exportDialogOpen = true;\n                                        }}\n                                    />\n                                </Menu>\n                            }\n                            position={Position.BOTTOM}\n                        >\n                            <Button\n                                className={classnames([\n                                    Classes.BUTTON,\n                                    Classes.MINIMAL,\n                                ])}\n                                icon=\"document\"\n                            >\n                                Graph\n                            </Button>\n                        </Popover>\n                        <Popover\n                            content={\n                                <Menu>\n                                    <MenuItem\n                                        text=\"Node DataSheet\"\n                                        icon=\"ungroup-objects\"\n                                        onClick={() => {\n                                            State.preferences.nodeDataSheetDialogOpen = true;\n                                        }}\n                                    />\n                                    <MenuItem\n                                        text=\"Edge DataSheet\"\n                                        icon=\"link\"\n                                        onClick={() => {\n                                            State.preferences.edgeDataSheetDialogOpen = true;\n                                        }}\n                                    />\n                                    {/* <MenuItem\n                                        text=\"Statistics\"\n                                        icon=\"timeline-bar-chart\"\n                                        onClick={() => {\n                                            State.preferences.statisticsDialogOpen = true;\n                                        }}\n                                    /> */}\n                                </Menu>\n                            }\n                            position={Position.BOTTOM}\n                        >\n                            <Button\n                                className={classnames([\n                                    Classes.BUTTON,\n                                    Classes.MINIMAL,\n                                ])}\n                                icon=\"wrench\"\n                            >\n                                Tools\n                            </Button>\n                        </Popover>\n                        <Switch\n                            label=\"Graph Animation\"\n                            checked={State.css.isAnimating}\n                            onChange={() =>\n                                (State.css.isAnimating = !State.css.isAnimating)\n                            }\n                        />\n                    </div>\n                    {/* <div\n                    className={classnames([\n                        Classes.NAVBAR_GROUP,\n                        Classes.ALIGN_LEFT,\n                    ])}\n                >\n                    <span className={Classes.NAVBAR_DIVIDER} />\n                    {appState.graph.hasGraph && appState.graph.frame && (\n                        <div style={{ display: \"inline\" }}>\n                            <Tooltip\n                                content={\n                                    appState.graph.frame.paused\n                                        ? \"Resume Layout Algorithm\"\n                                        : \"Pause Layout Algorithm\"\n                                }\n                                position={Position.BOTTOM}\n                            >\n                                <Button\n                                    className={classnames([\n                                        Classes.BUTTON,\n                                        Classes.MINIMAL,\n                                    ])}\n                                    icon={\n                                        appState.graph.frame.paused\n                                            ? \"play\"\n                                            : \"pause\"\n                                    }\n                                    text={\n                                        appState.graph.frame.paused\n                                            ? \"Resume Layout\"\n                                            : \"Pause Layout\"\n                                    }\n                                    onClick={() => {\n                                        if (appState.graph.frame.paused) {\n                                            appState.graph.frame.resumeLayout();\n                                            this.forceUpdate();\n                                        } else {\n                                            appState.graph.frame.pauseLayout();\n                                            this.forceUpdate();\n                                        }\n                                    }}\n                                />\n                            </Tooltip>\n                        </div>\n                    )}\n                </div> */}\n                    <ButtonGroup>\n                        {/* <SimpleSelect\n                            className={classnames([Classes.ALERT_CONTENTS])}\n                            items={[\"3D\", \"2D\"]}\n                            value={State.preferences.view}\n                            onSelect={(it) => (State.preferences.view = it)}\n                        />\n                        <Divider /> */}\n                    </ButtonGroup>\n\n                    <div\n                        className={classnames([\n                            Classes.NAVBAR_GROUP,\n                            Classes.ALIGN_RIGHT,\n                        ])}\n                    >\n                        Clustered by\n                        <ClusterChooser\n                            onSelect={(cluster) => {\n                                State.cluster.setCluster(cluster);\n                            }}\n                            syncWith={State.cluster.clusterBy}\n                        />\n                        <span className={Classes.NAVBAR_DIVIDER} />\n                        <SimpleSelect\n                            items={[\"trackball\", \"orbit\", \"fly\"]}\n                            text={State.preferences.controlType}\n                            onSelect={(it) => {\n                                State.preferences.controlType = it;\n                                ComponentRef.visualizer.updateVisualizationGraph();\n                            }}\n                        />\n                        <span className={Classes.NAVBAR_DIVIDER} />\n                        <Button\n                            className={classnames([\n                                Classes.BUTTON,\n                                Classes.MINIMAL,\n                            ])}\n                            icon=\"cog\"\n                            disabled={true}\n                            onClick={() => {\n                                State.preferences.preferenceDialogOpen = true;\n                            }}\n                        />\n                        <Button\n                            className={classnames([\n                                Classes.BUTTON,\n                                Classes.MINIMAL,\n                            ])}\n                            icon=\"code\"\n                            onClick={() => {\n                                window.open(\n                                    \"https://github.com/grp202004/PiperNet\"\n                                );\n                            }}\n                        />\n                    </div>\n                </nav>\n            );\n        }\n    }\n);\n","import React, { ReactNode } from \"react\";\nimport { Button, Card, Classes, Collapse, Elevation } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\n\ninterface Props {\n    name: string;\n    isOpen: boolean;\n    onToggle: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n    children: ReactNode;\n}\n\nexport default observer(\n    class SimpleSelect extends React.Component<Props, {}> {\n        render() {\n            return (\n                <Card elevation={Elevation.THREE}>\n                    <Button\n                        className={classnames(\n                            Classes.LARGE,\n                            Classes.FILL,\n                            \"text-align-left\"\n                        )}\n                        rightIcon={\n                            this.props.isOpen ? \"chevron-up\" : \"chevron-down\"\n                        }\n                        onClick={this.props.onToggle}\n                    >\n                        {this.props.name}\n                    </Button>\n                    <Collapse isOpen={this.props.isOpen}>\n                        {this.props.children}\n                    </Collapse>\n                </Card>\n            );\n        }\n    }\n);\n","import convert from \"xml-js\";\n\nexport const GITHUB_URL = \"\";\n\nexport const SAMPLE_GRAPH_SNAPSHOTS = [\n    [\n        \"Les Miserables\",\n        \"source,target,value\\rNapoleon,Myriel,1\\rMlle.Baptistine,Myriel,8\\rMme.Magloire,Myriel,10\\rMme.Magloire,Mlle.Baptistine,6\\rCountessdeLo,Myriel,1\\rGeborand,Myriel,1\\rChamptercier,Myriel,1\\rCravatte,Myriel,1\\rCount,Myriel,2\\rOldMan,Myriel,1\\rValjean,Labarre,1\\rValjean,Mme.Magloire,3\\rValjean,Mlle.Baptistine,3\\rValjean,Myriel,5\\rMarguerite,Valjean,1\\rMme.deR,Valjean,1\\rIsabeau,Valjean,1\\rGervais,Valjean,1\\rListolier,Tholomyes,4\\rFameuil,Tholomyes,4\\rFameuil,Listolier,4\\rBlacheville,Tholomyes,4\\rBlacheville,Listolier,4\\rBlacheville,Fameuil,4\\rFavourite,Tholomyes,3\\rFavourite,Listolier,3\\rFavourite,Fameuil,3\\rFavourite,Blacheville,4\\rDahlia,Tholomyes,3\\rDahlia,Listolier,3\\rDahlia,Fameuil,3\\rDahlia,Blacheville,3\\rDahlia,Favourite,5\\rZephine,Tholomyes,3\\rZephine,Listolier,3\\rZephine,Fameuil,3\\rZephine,Blacheville,3\\rZephine,Favourite,4\\rZephine,Dahlia,4\\rFantine,Tholomyes,3\\rFantine,Listolier,3\\rFantine,Fameuil,3\\rFantine,Blacheville,3\\rFantine,Favourite,4\\rFantine,Dahlia,4\\rFantine,Zephine,4\\rFantine,Marguerite,2\\rFantine,Valjean,9\\rMme.Thenardier,Fantine,2\\rMme.Thenardier,Valjean,7\\rThenardier,Mme.Thenardier,13\\rThenardier,Fantine,1\\rThenardier,Valjean,12\\rCosette,Mme.Thenardier,4\\rCosette,Valjean,31\\rCosette,Tholomyes,1\\rCosette,Thenardier,1\\rJavert,Valjean,17\\rJavert,Fantine,5\\rJavert,Thenardier,5\\rJavert,Mme.Thenardier,1\\rJavert,Cosette,1\\rFauchelevent,Valjean,8\\rFauchelevent,Javert,1\\rBamatabois,Fantine,1\\rBamatabois,Javert,1\\rBamatabois,Valjean,2\\rPerpetue,Fantine,1\\rSimplice,Perpetue,2\\rSimplice,Valjean,3\\rSimplice,Fantine,2\\rSimplice,Javert,1\\rScaufflaire,Valjean,1\\rWoman1,Valjean,2\\rWoman1,Javert,1\\rJudge,Valjean,3\\rJudge,Bamatabois,2\\rChampmathieu,Valjean,3\\rChampmathieu,Judge,3\\rChampmathieu,Bamatabois,2\\rBrevet,Judge,2\\rBrevet,Champmathieu,2\\rBrevet,Valjean,2\\rBrevet,Bamatabois,1\\rChenildieu,Judge,2\\rChenildieu,Champmathieu,2\\rChenildieu,Brevet,2\\rChenildieu,Valjean,2\\rChenildieu,Bamatabois,1\\rCochepaille,Judge,2\\rCochepaille,Champmathieu,2\\rCochepaille,Brevet,2\\rCochepaille,Chenildieu,2\\rCochepaille,Valjean,2\\rCochepaille,Bamatabois,1\\rPontmercy,Thenardier,1\\rBoulatruelle,Thenardier,1\\rEponine,Mme.Thenardier,2\\rEponine,Thenardier,3\\rAnzelma,Eponine,2\\rAnzelma,Thenardier,2\\rAnzelma,Mme.Thenardier,1\\rWoman2,Valjean,3\\rWoman2,Cosette,1\\rWoman2,Javert,1\\rMotherInnocent,Fauchelevent,3\\rMotherInnocent,Valjean,1\\rGribier,Fauchelevent,2\\rMme.Burgon,Jondrette,1\\rGavroche,Mme.Burgon,2\\rGavroche,Thenardier,1\\rGavroche,Javert,1\\rGavroche,Valjean,1\\rGillenormand,Cosette,3\\rGillenormand,Valjean,2\\rMagnon,Gillenormand,1\\rMagnon,Mme.Thenardier,1\\rMlle.Gillenormand,Gillenormand,9\\rMlle.Gillenormand,Cosette,2\\rMlle.Gillenormand,Valjean,2\\rMme.Pontmercy,Mlle.Gillenormand,1\\rMme.Pontmercy,Pontmercy,1\\rMlle.Vaubois,Mlle.Gillenormand,1\\rLt.Gillenormand,Mlle.Gillenormand,2\\rLt.Gillenormand,Gillenormand,1\\rLt.Gillenormand,Cosette,1\\rMarius,Mlle.Gillenormand,6\\rMarius,Gillenormand,12\\rMarius,Pontmercy,1\\rMarius,Lt.Gillenormand,1\\rMarius,Cosette,21\\rMarius,Valjean,19\\rMarius,Tholomyes,1\\rMarius,Thenardier,2\\rMarius,Eponine,5\\rMarius,Gavroche,4\\rBaronessT,Gillenormand,1\\rBaronessT,Marius,1\\rMabeuf,Marius,1\\rMabeuf,Eponine,1\\rMabeuf,Gavroche,1\\rEnjolras,Marius,7\\rEnjolras,Gavroche,7\\rEnjolras,Javert,6\\rEnjolras,Mabeuf,1\\rEnjolras,Valjean,4\\rCombeferre,Enjolras,15\\rCombeferre,Marius,5\\rCombeferre,Gavroche,6\\rCombeferre,Mabeuf,2\\rProuvaire,Gavroche,1\\rProuvaire,Enjolras,4\\rProuvaire,Combeferre,2\\rFeuilly,Gavroche,2\\rFeuilly,Enjolras,6\\rFeuilly,Prouvaire,2\\rFeuilly,Combeferre,5\\rFeuilly,Mabeuf,1\\rFeuilly,Marius,1\\rCourfeyrac,Marius,9\\rCourfeyrac,Enjolras,17\\rCourfeyrac,Combeferre,13\\rCourfeyrac,Gavroche,7\\rCourfeyrac,Mabeuf,2\\rCourfeyrac,Eponine,1\\rCourfeyrac,Feuilly,6\\rCourfeyrac,Prouvaire,3\\rBahorel,Combeferre,5\\rBahorel,Gavroche,5\\rBahorel,Courfeyrac,6\\rBahorel,Mabeuf,2\\rBahorel,Enjolras,4\\rBahorel,Feuilly,3\\rBahorel,Prouvaire,2\\rBahorel,Marius,1\\rBossuet,Marius,5\\rBossuet,Courfeyrac,12\\rBossuet,Gavroche,5\\rBossuet,Bahorel,4\\rBossuet,Enjolras,10\\rBossuet,Feuilly,6\\rBossuet,Prouvaire,2\\rBossuet,Combeferre,9\\rBossuet,Mabeuf,1\\rBossuet,Valjean,1\\rJoly,Bahorel,5\\rJoly,Bossuet,7\\rJoly,Gavroche,3\\rJoly,Courfeyrac,5\\rJoly,Enjolras,5\\rJoly,Feuilly,5\\rJoly,Prouvaire,2\\rJoly,Combeferre,5\\rJoly,Mabeuf,1\\rJoly,Marius,2\\rGrantaire,Bossuet,3\\rGrantaire,Enjolras,3\\rGrantaire,Combeferre,1\\rGrantaire,Courfeyrac,2\\rGrantaire,Joly,2\\rGrantaire,Gavroche,1\\rGrantaire,Bahorel,1\\rGrantaire,Feuilly,1\\rGrantaire,Prouvaire,1\\rMotherPlutarch,Mabeuf,3\\rGueulemer,Thenardier,5\\rGueulemer,Valjean,1\\rGueulemer,Mme.Thenardier,1\\rGueulemer,Javert,1\\rGueulemer,Gavroche,1\\rGueulemer,Eponine,1\\rBabet,Thenardier,6\\rBabet,Gueulemer,6\\rBabet,Valjean,1\\rBabet,Mme.Thenardier,1\\rBabet,Javert,2\\rBabet,Gavroche,1\\rBabet,Eponine,1\\rClaquesous,Thenardier,4\\rClaquesous,Babet,4\\rClaquesous,Gueulemer,4\\rClaquesous,Valjean,1\\rClaquesous,Mme.Thenardier,1\\rClaquesous,Javert,1\\rClaquesous,Eponine,1\\rClaquesous,Enjolras,1\\rMontparnasse,Javert,1\\rMontparnasse,Babet,2\\rMontparnasse,Gueulemer,2\\rMontparnasse,Claquesous,2\\rMontparnasse,Valjean,1\\rMontparnasse,Gavroche,1\\rMontparnasse,Eponine,1\\rMontparnasse,Thenardier,1\\rToussaint,Cosette,2\\rToussaint,Javert,1\\rToussaint,Valjean,1\\rChild1,Gavroche,2\\rChild2,Gavroche,2\\rChild2,Child1,3\\rBrujon,Babet,3\\rBrujon,Gueulemer,3\\rBrujon,Thenardier,3\\rBrujon,Gavroche,1\\rBrujon,Eponine,1\\rBrujon,Claquesous,1\\rBrujon,Montparnasse,1\\rMme.Hucheloup,Bossuet,1\\rMme.Hucheloup,Joly,1\\rMme.Hucheloup,Grantaire,1\\rMme.Hucheloup,Bahorel,1\\rMme.Hucheloup,Courfeyrac,1\\rMme.Hucheloup,Gavroche,1\\rMme.Hucheloup,Enjolras,1\",\n    ],\n    [\"COVID-19 Citation Graph 06-02\", \"../samples/json/a.json\"],\n];\n\nexport async function fetchSampleGraph(url: string) {\n    try {\n        let response = await fetch(url, { mode: \"no-cors\" });\n        let gexfJson = await response.json();\n        return new File([convert.json2xml(gexfJson)], \"sample.gexf\", {\n            type: \"text/xml\",\n        });\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\nexport const NODE_AND_EDGE_FILE = \"both nodes and edges file\";\nexport const ONLY_EDGE_FILE = \"only edges file\";\n\nexport const COLOR_LIST = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32,\n};\n","import React from \"react\";\nimport {\n    Button,\n    Callout,\n    Classes,\n    Dialog,\n    Divider,\n    FileInput,\n    Intent,\n    Spinner,\n    Switch,\n    Tag,\n} from \"@blueprintjs/core\";\nimport { Cell, Column, Table } from \"@blueprintjs/table\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\n\nimport Collapsable from \"../utils/Collapsable\";\nimport SimpleSelect from \"../utils/SimpleSelect\";\nimport { NODE_AND_EDGE_FILE, ONLY_EDGE_FILE } from \"../../constants\";\nimport { IEdgeFileConfig, INodeFileConfig } from \"../../state/ImportStore\";\n\ninterface PreviewTableProps {\n    file: INodeFileConfig | IEdgeFileConfig;\n}\n\nlet PreviewTable = observer(\n    class PreviewTable extends React.Component<PreviewTableProps, {}> {\n        file = this.props.file;\n\n        renderWrapper = () => {\n            return this.file.parseError ? (\n                <Callout title={\"Error Parsing File\"} intent=\"warning\">\n                    Try with other options of <code>Delimiter</code> or review\n                    the file for import to find possible problems.\n                </Callout>\n            ) : (\n                <div>\n                    <Table\n                        className=\"import-preview-table\"\n                        numRows={this.file.topN.length}\n                        selectedRegions={Object.values(this.file.mapping)\n                            .map((it) => this.file.columns.indexOf(it))\n                            .map((it) => ({ rows: null, cols: [it, it] }))}\n                    >\n                        {this.file.columns.map((it) => (\n                            <Column\n                                key={it}\n                                name={it}\n                                cellRenderer={(i) => (\n                                    <Cell>{this.file.topN[i][it]}</Cell>\n                                )}\n                            />\n                        ))}\n                    </Table>\n                    <Tag>\n                        Only the top {this.file.topN.length} rows of the\n                        selected file are displayed.\n                    </Tag>\n                </div>\n            );\n        };\n\n        render() {\n            return this.renderWrapper();\n        }\n    }\n);\n\nexport default observer(\n    class ImportCSVDialog extends React.Component {\n        state = {\n            loading: false,\n            available: ONLY_EDGE_FILE,\n            nodesOpen: true,\n            edgesOpen: true,\n            delimiter: \",\",\n        };\n\n        // determine if this state is importable\n        canImport = () => {\n            if (this.state.available === NODE_AND_EDGE_FILE) {\n                return (\n                    State.import.importConfig.edgeFile.isReady &&\n                    State.import.importConfig.nodeFile.isReady\n                );\n            } else if (this.state.available === ONLY_EDGE_FILE) {\n                return State.import.importConfig.edgeFile.isReady;\n            }\n            return false;\n        };\n\n        renderNodesSelection = () => {\n            const nodeFile = State.import.importConfig.nodeFile;\n\n            // show blank if node file not relevant\n            if (this.state.available === ONLY_EDGE_FILE) {\n                return null;\n            }\n\n            return (\n                <Collapsable\n                    name=\"Nodes\"\n                    isOpen={this.state.nodesOpen}\n                    onToggle={() =>\n                        this.setState({ nodesOpen: !this.state.nodesOpen })\n                    }\n                >\n                    <br />\n                    <div className={classnames(Classes.CONTROL_GROUP)}>\n                        <div\n                            className={classnames(\n                                Classes.INPUT_GROUP,\n                                Classes.FILL\n                            )}\n                        >\n                            <FileInput\n                                text={State.import.nodeFileName}\n                                onInputChange={(event) => {\n                                    let target = event.target as HTMLInputElement;\n                                    if (\n                                        !target.files ||\n                                        target.files.length < 1\n                                    ) {\n                                        return;\n                                    }\n                                    State.import.nodeFileName =\n                                        target.files[0].name;\n                                    // after setting the selectedNodeFileFromInput, it will auto render the preview table\n                                    State.import.selectedNodeFileFromInput =\n                                        target.files[0];\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <br />\n                    <Switch\n                        label=\"Has Headers\"\n                        checked={nodeFile.hasHeader}\n                        onChange={() =>\n                            (nodeFile.hasHeader = !nodeFile.hasHeader)\n                        }\n                    />\n                    {nodeFile.isReady && (\n                        <div className=\"column-selection\">\n                            <PreviewTable file={nodeFile} />\n                            <br />\n                            Column for Node ID:\n                            <SimpleSelect\n                                items={nodeFile.columns}\n                                text={nodeFile.mapping.id}\n                                onSelect={(it) => (nodeFile.mapping.id = it)}\n                            />\n                        </div>\n                    )}\n                </Collapsable>\n            );\n        };\n\n        renderEdgesSelection = () => {\n            const edgeFile = State.import.importConfig.edgeFile;\n            return (\n                <Collapsable\n                    name=\"Edges\"\n                    isOpen={this.state.edgesOpen}\n                    onToggle={() =>\n                        this.setState({ edgesOpen: !this.state.edgesOpen })\n                    }\n                >\n                    <br />\n                    <div className={classnames(Classes.CONTROL_GROUP)}>\n                        <div\n                            className={classnames(\n                                Classes.INPUT_GROUP,\n                                Classes.FILL\n                            )}\n                        >\n                            <FileInput\n                                text={State.import.edgeFileName}\n                                onInputChange={(event) => {\n                                    let target = event.target as HTMLInputElement;\n                                    if (\n                                        !target.files ||\n                                        target.files.length < 1\n                                    ) {\n                                        return;\n                                    }\n                                    State.import.edgeFileName =\n                                        target.files[0].name;\n                                    State.import.selectedEdgeFileFromInput =\n                                        target.files[0];\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <br />\n                    <Switch\n                        label=\"Has Headers\"\n                        checked={edgeFile.hasHeader}\n                        onChange={() =>\n                            (edgeFile.hasHeader = !edgeFile.hasHeader)\n                        }\n                    />\n                    {edgeFile.isReady && (\n                        <div className=\"column-selection\">\n                            <PreviewTable file={edgeFile} />\n                            <br />\n                            Column for Source ID:\n                            <SimpleSelect\n                                items={edgeFile.columns}\n                                text={edgeFile.mapping.fromId}\n                                onSelect={(it) =>\n                                    (edgeFile.mapping.fromId = it)\n                                }\n                            />{\" \"}\n                            <br />\n                            Column for Target ID:\n                            <SimpleSelect\n                                items={edgeFile.columns}\n                                text={edgeFile.mapping.toId}\n                                onSelect={(it) => (edgeFile.mapping.toId = it)}\n                            />\n                        </div>\n                    )}\n                </Collapsable>\n            );\n        };\n\n        renderDelimiterSelection() {\n            return (\n                <div>\n                    Selected Delimiter\n                    <SimpleSelect\n                        items={[\",\", \"\\\\t\", \";\", \"[SPACE]\"]}\n                        text={this.state.delimiter}\n                        onSelect={(newDelimiter) => {\n                            this.setState({ delimiter: newDelimiter });\n\n                            if (newDelimiter === \"\\\\t\") {\n                                newDelimiter = \"\\t\";\n                            } else if (newDelimiter === \"[SPACE]\") {\n                                newDelimiter = \" \";\n                            }\n\n                            State.import.importConfig.edgeFile.delimiter = newDelimiter;\n                            State.import.importConfig.nodeFile.delimiter = newDelimiter;\n                        }}\n                    />{\" \"}\n                </div>\n            );\n        }\n\n        render() {\n            return (\n                <Dialog\n                    style={{ minWidth: \"80vw\" }}\n                    icon=\"import\"\n                    isOpen={State.import.importCSVDialogOpen}\n                    onClose={() => {\n                        State.import.importCSVDialogOpen = false;\n                    }}\n                    title=\"Import CSV\"\n                >\n                    {/* if is loading, then show Spinner */}\n                    {State.import.isLoading ? (\n                        <Spinner />\n                    ) : (\n                        <div>\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"import-dialog\"\n                                )}\n                            >\n                                I have:\n                                <SimpleSelect\n                                    items={[ONLY_EDGE_FILE, NODE_AND_EDGE_FILE]}\n                                    text={this.state.available}\n                                    onSelect={(targetValue) => {\n                                        State.import.importConfig.hasNodeFile = !(\n                                            targetValue === ONLY_EDGE_FILE\n                                        );\n                                        this.setState({\n                                            available: targetValue,\n                                        });\n                                    }}\n                                />\n                                <Divider />\n                                {this.renderNodesSelection()}\n                                <br />\n                                {this.renderEdgesSelection()}\n                                <br />\n                                {this.renderDelimiterSelection()}\n                            </div>\n                            <div className={Classes.DIALOG_FOOTER}>\n                                <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                                    <Button\n                                        className={classnames({\n                                            [Classes.DISABLED]: !this.canImport(),\n                                        })}\n                                        intent={Intent.PRIMARY}\n                                        onClick={() => {\n                                            State.import.isLoading = true;\n                                            State.import\n                                                .importGraphFromCSV()\n                                                .then((res) => {\n                                                    State.graph.setGraph(\n                                                        res.graph,\n                                                        res.metadata\n                                                    );\n\n                                                    if(State.cluster.rawGraph.hasAttribute('cluster')){\n                                                        State.cluster\n                                                        .setCluster(State.graph.rawGraph.getAttribute('cluster'));\n                                                    }\n\n                                                    State.import.isLoading = false;\n                                                    State.import.importCSVDialogOpen = false;\n                                                });\n                                        }}\n                                        text=\"Import\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </Dialog>\n            );\n        }\n    }\n);\n","/* eslint-disable jsx-a11y/label-has-for */\nimport React from \"react\";\nimport {\n    Button,\n    Classes,\n    Dialog,\n    FileInput,\n    Intent,\n    Spinner,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\n\nexport default observer(\n    class ImportGEXFDialog extends React.Component {\n        state = {\n            fileIsSelect: false,\n        };\n\n        renderImportButton() {\n            return (\n                <div className={Classes.DIALOG_FOOTER}>\n                    <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                        <Button\n                            className={classnames({\n                                [Classes.DISABLED]: !this.state.fileIsSelect,\n                            })}\n                            intent={Intent.PRIMARY}\n                            onClick={() => {\n                                State.import.isLoading = true;\n                                State.import\n                                    .importGraphFromGEXF()\n                                    .then((res) => {\n                                        State.graph.setGraph(\n                                            res.graph,\n                                            res.metadata\n                                        );\n\n                                        if(State.cluster.rawGraph.hasAttribute('cluster')){\n                                            State.cluster\n                                            .setCluster(State.graph.rawGraph.getAttribute('cluster'));\n                                        }\n\n                                        State.import.isLoading = false;\n                                        State.import.importGEXFDialogOpen = false;\n                                    });\n                            }}\n                            text=\"Import\"\n                        />\n                    </div>\n                </div>\n            );\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"import\"\n                    isOpen={State.import.importGEXFDialogOpen}\n                    onClose={() => {\n                        State.import.importGEXFDialogOpen = false;       \n                    }}\n                    title=\"Import GEXF\"\n                >\n                    {/* if is loading, then show Spinner */}\n                    {State.import.isLoading ? (\n                        <Spinner />\n                    ) : (\n                        <div\n                            className={classnames(\n                                Classes.DIALOG_BODY,\n                                \"import-dialog\"\n                            )}\n                        >\n                            <div>\n                                <div\n                                    className={classnames(\n                                        Classes.CONTROL_GROUP\n                                    )}\n                                >\n                                    <div\n                                        className={classnames(\n                                            Classes.INPUT_GROUP,\n                                            Classes.FILL\n                                        )}\n                                    >\n                                        <FileInput\n                                            text={State.import.gexfFileName}\n                                            onInputChange={(event) => {\n                                                let target = event.target as HTMLInputElement;\n                                                if (\n                                                    !target.files ||\n                                                    target.files.length < 1\n                                                ) {\n                                                    return;\n                                                }\n                                                State.import.gexfFileName =\n                                                    target.files[0].name;\n                                                // after setting the selectedNodeFileFromInput, it will auto render the preview table\n                                                State.import.selectedGEXFFileFromInput =\n                                                    target.files[0];\n\n                                                this.setState({\n                                                    fileIsSelect: true,\n                                                });\n                                            }}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                            {this.renderImportButton()}\n                        </div>\n                    )}\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Card,\n    Classes,\n    Dialog,\n    Divider,\n    Elevation,\n    H3,\n    Spinner,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport gexf from \"graphology-gexf/browser\";\nimport State from \"../../state\";\nimport { CSVLink } from \"react-csv\";\n\nexport default observer(\n    class ExportDialog extends React.Component {\n        state = {\n            ready: true,\n        };\n\n        computeGEXFFile() {\n            return gexf.write(State.graph.rawGraph);\n        }\n\n        computeNodeFile() {\n            let headers: {\n                label: string;\n                key: string;\n            }[] = [];\n            State.graph.metadata.nodeProperties.map((value) => {\n                headers.push({ label: value, key: value });\n                return null;\n            });\n            headers.push({ label: \"_id\", key: \"_id\" });\n            let exportData = State.graph.rawGraph.export();\n            let data: any[] = [];\n            exportData.nodes.forEach((node) => {\n                data.push({\n                    _id: node.key,\n                    ...node.attributes,\n                });\n            });\n            return { headers: headers, data: data };\n        }\n\n        computeEdgeFile() {\n            let headers: {\n                label: string;\n                key: string;\n            }[] = [\n                { label: \"source\", key: \"source\" },\n                { label: \"target\", key: \"target\" },\n            ];\n\n            let exportData = State.graph.rawGraph.export();\n            let data: any[] = [];\n            exportData.edges.forEach((edge) => {\n                data.push({\n                    source: edge.source,\n                    target: edge.target,\n                });\n            });\n            return { headers: headers, data: data };\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"projects\"\n                    isOpen={State.project.exportDialogOpen}\n                    onClose={() => {\n                        State.project.exportDialogOpen = false;\n                    }}\n                    title={`Export Graph`}\n                >\n                    {!this.state.ready ? (\n                        <Spinner />\n                    ) : (\n                        <div className={classnames(Classes.DIALOG_BODY)}>\n                            <Card interactive={false} elevation={Elevation.ONE}>\n                                <H3>\n                                    GEXF Export{\" \"}\n                                    <Button\n                                        icon=\"help\"\n                                        minimal={true}\n                                        onClick={() => {\n                                            window.open(\n                                                \"https://gephi.org/gexf/format/\"\n                                            );\n                                        }}\n                                    />\n                                </H3>\n                                <Divider />\n\n                                <CSVLink\n                                    data={this.computeGEXFFile()}\n                                    filename={\"Snapshot-GEXF.gexf\"}\n                                    className=\"btn btn-primary\"\n                                    target=\"_blank\"\n                                >\n                                    <Button>Download GEXF File</Button>\n                                </CSVLink>\n                            </Card>\n                            <br />\n                            <Card interactive={false} elevation={Elevation.ONE}>\n                                <H3>\n                                    CSV Export{\" \"}\n                                    <Button\n                                        icon=\"help\"\n                                        minimal={true}\n                                        onClick={() => {\n                                            window.open(\n                                                \"https://github.com/grp202004/PiperNet#data-import\"\n                                            );\n                                        }}\n                                    />\n                                </H3>\n\n                                <Divider />\n                                <ButtonGroup>\n                                    <CSVLink\n                                        data={this.computeNodeFile().data}\n                                        headers={this.computeNodeFile().headers}\n                                        separator={\",\"}\n                                        filename={\"Snapshot-Node.csv\"}\n                                        className=\"btn btn-primary\"\n                                        target=\"_blank\"\n                                    >\n                                        <Button>Download Node File</Button>\n                                    </CSVLink>\n                                    <Divider />\n                                    <CSVLink\n                                        data={this.computeEdgeFile().data}\n                                        headers={this.computeEdgeFile().headers}\n                                        separator={\",\"}\n                                        filename={\"Snapshot-Edge.csv\"}\n                                        className=\"btn btn-primary\"\n                                        target=\"_blank\"\n                                    >\n                                        <Button>Download Edge File</Button>\n                                    </CSVLink>\n                                </ButtonGroup>\n                            </Card>\n                        </div>\n                    )}\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Dialog } from \"@blueprintjs/core\";\nimport { Column, Table, TableLoadingOption } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\n\ninterface Props {\n    for: string;\n    children: React.ReactNode;\n}\n\nexport default observer(\n    class DataSheetDialogWrapper extends React.Component<Props, {}> {\n        state = {\n            loading: true,\n        };\n\n        renderTable() {\n            if (this.state.loading) {\n                return (\n                    <div className=\"argo-table-container\">\n                        <Table\n                            className=\"pt-bordered pt-striped\"\n                            numRows={20}\n                            loadingOptions={[\n                                TableLoadingOption.CELLS,\n                                TableLoadingOption.COLUMN_HEADERS,\n                                TableLoadingOption.ROW_HEADERS,\n                            ]}\n                        >\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                        </Table>\n                    </div>\n                );\n            } else {\n                return this.props.children;\n            }\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"database\"\n                    isOpen={\n                        this.props.for === \"node\"\n                            ? State.preferences.nodeDataSheetDialogOpen\n                            : State.preferences.edgeDataSheetDialogOpen\n                    }\n                    onOpened={() => {\n                        setTimeout(() => {\n                            this.setState({\n                                loading: false,\n                            });\n                        }, 100);\n                    }}\n                    onClose={() => {\n                        if (this.props.for === \"node\") {\n                            State.preferences.nodeDataSheetDialogOpen = false;\n                        } else {\n                            State.preferences.edgeDataSheetDialogOpen = false;\n                        }\n                        this.setState({\n                            loading: true,\n                        });\n                    }}\n                    title=\"Data Sheet\"\n                    style={{ minWidth: \"80vw\" }}\n                >\n                    <div className={classnames(Classes.DIALOG_BODY)}>\n                        {this.renderTable()}\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","import { Attributes } from \"graphology-types\";\nimport React from \"react\";\n\n/** Event handler that exposes the target element's value as a boolean. */\nexport function handleBooleanChange(handler: (checked: boolean) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler((event.target as HTMLInputElement).checked);\n}\n\n/** Event handler that exposes the target element's value as a string. */\nexport function handleStringChange(handler: (value: string) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler((event.target as HTMLInputElement).value);\n}\n\n/** Event handler that exposes the target element's value as an inferred generic type. */\nexport function handleValueChange<T>(handler: (value: T) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler(((event.target as HTMLInputElement).value as unknown) as T);\n}\n\n/** Event handler that exposes the target element's value as a number. */\nexport function handleNumberChange(handler: (value: number) => void) {\n    return handleStringChange((value) => handler(+value));\n}\n\nexport function stringifyNodeDetail(attributes: Attributes): string {\n    let res = \"\";\n    for (var attribute in attributes) {\n        if (\n            attributes.hasOwnProperty(attribute) &&\n            attribute !== \"_visualize\" &&\n            attribute !== \"_options\"\n        ) {\n            res += attribute + \" : \" + attributes[attribute] + \" ; \";\n        }\n    }\n\n    return res;\n}\n\nexport function parseNumberOrString(value: string): string | number {\n    let numberVal = Number(value);\n    if (isNaN(numberVal)) {\n        return value;\n    } else {\n        return numberVal;\n    }\n}\n","import React from \"react\";\nimport {\n    Alert,\n    Button,\n    ButtonGroup,\n    Callout,\n    Code,\n    Divider,\n    InputGroup,\n    Intent,\n} from \"@blueprintjs/core\";\nimport {\n    Cell,\n    Column,\n    EditableCell,\n    ICellRenderer,\n    Table,\n} from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport DataSheetDialogWrapper from \"../utils/DataSheetDialogWrapper\";\nimport {\n    handleStringChange,\n    parseNumberOrString,\n    stringifyNodeDetail,\n} from \"../utils/InputFormUtils\";\nimport { Attributes, SerializedNode } from \"graphology-types\";\n\nlet GraphNodeTable = observer(\n    class GraphNodeTable extends React.Component {\n        state = {\n            filterQuery: \"\",\n            addNodeDialogOpen: false,\n            deleteAlertOpen: false,\n            nodeToDelete: null as SerializedNode | null,\n        };\n\n        get filteredTable() {\n            let newTable: SerializedNode[] = [];\n            State.graph.rawGraph.export().nodes.forEach((node) => {\n                if (\n                    node.key\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    this.state.filterQuery === \"\"\n                ) {\n                    newTable.push(node);\n                }\n            });\n            return newTable;\n        }\n\n        nodeProperties = State.graph.metadata.nodeProperties;\n\n        renderColumns: any = () => {\n            const columns = this.nodeProperties.map((it, i) => {\n                if (it !== \"_options\") {\n                    return (\n                        <Column\n                            name={it}\n                            cellRenderer={(\n                                rowIndex: number,\n                                columnIndex: number\n                            ) => this.renderCell(rowIndex, it)}\n                        />\n                    );\n                }\n                return null;\n            });\n            return columns.filter((element) => {\n                return element !== undefined;\n            });\n        };\n\n        renderCell = (rowIndex: number, attribute: string) => {\n            let cellAttributes = this.filteredTable[rowIndex].attributes!!;\n            let cell = cellAttributes[attribute];\n\n            return (\n                <EditableCell\n                    value={cell}\n                    onChange={(newVal) =>\n                        this.setValue(newVal, rowIndex, attribute)\n                    }\n                    onConfirm={(newVal) =>\n                        this.setValue(newVal, rowIndex, attribute)\n                    }\n                    tooltip={cell}\n                />\n            );\n        };\n\n        // if the input is a number in string, it will convert the string into number to store\n        setValue = (value: string, rowIndex: number, attribute: string) => {\n            let id = this.filteredTable[rowIndex].key;\n            State.graph.rawGraph.setNodeAttribute(\n                id,\n                attribute,\n                parseNumberOrString(value)\n            );\n        };\n\n        deleteNodeRenderer: ICellRenderer = (rowIndex) => {\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                nodeToDelete: this.filteredTable[rowIndex],\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteNodeAlert = () => {\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropNode(\n                            this.state.nodeToDelete?.key as string\n                        );\n                        this.setState({ deleteAlertOpen: false });\n                    }}\n                    style={{ minWidth: \"60vw\" }}\n                >\n                    <p>\n                        Are you sure you want to delete the node with ID{\" \"}\n                        <Code>{this.state.nodeToDelete?.key}</Code> with\n                        attributes:\n                        <Code>\n                            {stringifyNodeDetail(\n                                this.state.nodeToDelete\n                                    ?.attributes as Attributes\n                            )}\n                        </Code>\n                        This action cannot be reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        style = {\n            textAlign: \"center\",\n        };\n\n        render() {\n            return (\n                <div>\n                    <Callout\n                        title={\n                            \"Try to click on a cell and type in something...\"\n                        }\n                        intent=\"primary\"\n                        icon=\"edit\"\n                    >\n                        The corresponding value of a node's attribute can be\n                        modified by clicking the cell and type in\n                    </Callout>\n\n                    <ButtonGroup>\n                        <Button\n                            onClick={() => this.forceUpdate()}\n                            icon=\"refresh\"\n                            intent=\"none\"\n                            text=\"Refresh\"\n                        />\n                        <Button\n                            onClick={() => {\n                                State.preferences.AddNodeDialogOpen = true;\n                            }}\n                            icon=\"new-object\"\n                            intent=\"primary\"\n                            text=\"Add Node\"\n                        />\n                        <Divider />\n                        <InputGroup\n                            style={{ width: \"40vw\" }}\n                            asyncControl={true}\n                            leftIcon=\"search\"\n                            onChange={handleStringChange((value) => {\n                                this.setState({ filterQuery: value });\n                            })}\n                            placeholder=\"Search any Node...\"\n                            value={this.state.filterQuery}\n                            fill={true}\n                        />\n                    </ButtonGroup>\n\n                    <hr />\n\n                    <Table\n                        className=\"argo-table\"\n                        defaultRowHeight={30}\n                        numRows={this.filteredTable.length}\n                    >\n                        <Column\n                            name=\"\"\n                            cellRenderer={this.deleteNodeRenderer}\n                            //@ts-ignore\n                            style={this.style}\n                        />\n                        <Column\n                            name=\"ID\"\n                            //@ts-ignore\n                            intent={Intent.SUCCESS}\n                            cellRenderer={(rowIndex) => {\n                                let id = this.filteredTable[rowIndex].key;\n                                return <Cell>{id}</Cell>;\n                            }}\n                        />\n                        {this.renderColumns()}\n                    </Table>\n                    {this.deleteNodeAlert()}\n                </div>\n            );\n        }\n    }\n);\n\nexport default observer(\n    class NodeDataSheetDialog extends React.Component {\n        render() {\n            return (\n                <DataSheetDialogWrapper for=\"node\">\n                    <GraphNodeTable />\n                </DataSheetDialogWrapper>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, FormGroup, MenuItem, Tooltip } from \"@blueprintjs/core\";\nimport { Select } from \"@blueprintjs/select\";\nimport { Attributes, SerializedNode } from \"graphology-types\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { stringifyNodeDetail } from \"./InputFormUtils\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * the text to be shown above the selectButton\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    text: string;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     * the {nodeId} is the id of the selected node\n     *\n     * @memberof Props\n     */\n    onChange: (nodeId: string) => void;\n}\n\n/**\n * this component can be used to choose the node among all the nodes, with basic search filters available\n * to use it, you have to specify the text shown above the selectButton as well as the onChange function to call when a candidate is selected\n */\nexport default observer(\n    class NodeChooser extends React.Component<Props, {}> {\n        state = {\n            select: \"Choose \" + this.props.text,\n        };\n\n        render() {\n            return (\n                <FormGroup\n                    label={this.props.text}\n                    labelFor=\"text-input\"\n                    labelInfo=\"(required)\"\n                >\n                    <Select\n                        filterable={true}\n                        items={State.graph.rawGraph.export().nodes}\n                        itemPredicate={(\n                            query: string,\n                            item: SerializedNode<Attributes>\n                        ) => {\n                            return item.key.includes(query);\n                        }}\n                        itemRenderer={(item: SerializedNode<Attributes>) => {\n                            return (\n                                <Tooltip\n                                    content={stringifyNodeDetail(\n                                        item.attributes ?? {}\n                                    )}\n                                >\n                                    <MenuItem\n                                        key={item.key}\n                                        text={item.key}\n                                        onClick={() => {\n                                            let key = item.key;\n                                            this.setState({ select: key });\n                                            this.props.onChange(key);\n                                        }}\n                                    />\n                                </Tooltip>\n                            );\n                        }}\n                        noResults={\n                            <MenuItem disabled={true} text=\"No results.\" />\n                        }\n                        onItemSelect={() => {}}\n                    >\n                        <Button\n                            text={this.state.select}\n                            rightIcon=\"double-caret-vertical\"\n                        />\n                    </Select>\n                </FormGroup>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Alert,\n    Button,\n    ButtonGroup,\n    Callout,\n    Classes,\n    Code,\n    Dialog,\n    Divider,\n    InputGroup,\n    Intent,\n} from \"@blueprintjs/core\";\nimport {\n    Cell,\n    Column,\n    ICellRenderer,\n    RenderMode,\n    Table,\n} from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport DataSheetDialogWrapper from \"../utils/DataSheetDialogWrapper\";\nimport { Attributes, SerializedEdge } from \"graphology-types\";\nimport { handleStringChange } from \"../utils/InputFormUtils\";\nimport NodeChooser from \"../utils/NodeChooser\";\n\nlet GraphEdgeTable = observer(\n    class GraphEdgeTable extends React.Component {\n        state = {\n            addEdgeDialogOpen: false,\n            deleteAlertOpen: false,\n            edgeToDelete: null as null | SerializedEdge<Attributes>,\n            filterQuery: null as null | string,\n            chosenSource: null as null | string,\n            chosenTarget: null as null | string,\n        };\n\n        get filteredTable() {\n            let newTable: SerializedEdge<Attributes>[] = [];\n            State.graph.rawGraph.export().edges.forEach((edge) => {\n                if (\n                    !this.state.filterQuery ||\n                    edge.source\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    edge.target\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    this.state.filterQuery === \"\"\n                ) {\n                    newTable.push(edge);\n                }\n            });\n            return newTable;\n        }\n\n        deleteEdgeRenderer: ICellRenderer = (rowIndex) => {\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                edgeToDelete: this.filteredTable[rowIndex],\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteEdgeAlert = () => {\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropEdge(\n                            this.state.edgeToDelete?.key as string\n                        );\n                        this.setState({ deleteAlertOpen: false });\n                    }}\n                >\n                    <p>\n                        Are you sure you want to delete the edge with ID{\" \"}\n                        <Code>{this.state.edgeToDelete?.key}</Code> from Node ID{\" \"}\n                        <Code>{this.state.edgeToDelete?.source}</Code> to Node\n                        ID <Code>{this.state.edgeToDelete?.target}</Code>. This\n                        action cannot be reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        addEdgeDialog = () => {\n            return (\n                <Dialog\n                    isOpen={this.state.addEdgeDialogOpen}\n                    icon=\"new-link\"\n                    onClose={() => this.setState({ addEdgeDialogOpen: false })}\n                    onClosed={() =>\n                        this.setState({\n                            chosenSource: null,\n                            chosenTarget: null,\n                        })\n                    }\n                    title=\"Add Edge\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add unique undirected edges to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> edge means there should only exist\n                            one edge that connects between the source and the\n                            target.\n                        </p>\n                        <ButtonGroup fill={true}>\n                            <NodeChooser\n                                text=\"Source Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenSource: value });\n                                }}\n                            />\n                            <Divider />\n                            <NodeChooser\n                                text=\"Target Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenTarget: value });\n                                }}\n                            />\n                        </ButtonGroup>\n                        <p>New edges are added to the end of the table.</p>\n                        {!this.canImport && (\n                            <Callout\n                                title=\"Invalid Edge\"\n                                intent=\"danger\"\n                                icon=\"edit\"\n                            >\n                                The new edge is invalid because either this is a\n                                edge that already in the graph or cannot form a\n                                valid undirected edge\n                            </Callout>\n                        )}\n                    </div>\n                    <div className={Classes.DIALOG_FOOTER}>\n                        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                            <Button\n                                onClick={() =>\n                                    this.setState({ addEdgeDialogOpen: false })\n                                }\n                            >\n                                Cancel\n                            </Button>\n                            <Button\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.graph.mutating.addEdge(\n                                        this.state.chosenSource!,\n                                        this.state.chosenTarget!\n                                    );\n                                    this.setState({ addEdgeDialogOpen: false });\n                                }}\n                                disabled={!this.canImport}\n                            >\n                                Confirm\n                            </Button>\n                        </div>\n                    </div>\n                </Dialog>\n            );\n        };\n\n        get canImport(): boolean {\n            if (!this.state.chosenSource || !this.state.chosenTarget) {\n                return false;\n            } else if (this.state.chosenSource === this.state.chosenTarget) {\n                return false;\n            } else {\n                return (\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenSource,\n                        this.state.chosenTarget\n                    ) &&\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenTarget,\n                        this.state.chosenSource\n                    )\n                );\n            }\n        }\n\n        style = {\n            textAlign: \"center\",\n        };\n\n        render() {\n            return (\n                <div>\n                    <ButtonGroup>\n                        <Button\n                            onClick={() => this.forceUpdate()}\n                            icon=\"refresh\"\n                            intent=\"none\"\n                            text=\"Refresh\"\n                        />\n                        <Button\n                            onClick={() =>\n                                this.setState({ addEdgeDialogOpen: true })\n                            }\n                            icon=\"new-link\"\n                            intent=\"primary\"\n                            text=\"Add Edge\"\n                        />\n                        <Divider />\n                        <InputGroup\n                            style={{ width: \"40vw\" }}\n                            asyncControl={true}\n                            leftIcon=\"search\"\n                            onChange={handleStringChange((value) => {\n                                this.setState({ filterQuery: value });\n                            })}\n                            placeholder=\"Search any Source or Target of an Edge...\"\n                            value={this.state.filterQuery ?? \"\"}\n                        />\n                    </ButtonGroup>\n\n                    <hr />\n                    <Table\n                        className=\"argo-table\"\n                        numRows={this.filteredTable.length}\n                        defaultRowHeight={30}\n                        renderMode={RenderMode.NONE}\n                    >\n                        <Column\n                            name=\"\"\n                            cellRenderer={this.deleteEdgeRenderer}\n                            //@ts-ignore\n                            style={this.style}\n                        />\n                        <Column\n                            name=\"Source\"\n                            //@ts-ignore\n                            intent={Intent.PRIMARY}\n                            cellRenderer={(rowIndex) => {\n                                return (\n                                    <Cell>\n                                        {this.filteredTable[rowIndex].source}\n                                    </Cell>\n                                );\n                            }}\n                        />\n                        <Column\n                            name=\"Target\"\n                            //@ts-ignore\n                            intent={Intent.PRIMARY}\n                            cellRenderer={(rowIndex) => {\n                                return (\n                                    <Cell>\n                                        {this.filteredTable[rowIndex].target}\n                                    </Cell>\n                                );\n                            }}\n                        />\n                    </Table>\n                    {this.deleteEdgeAlert()}\n                    {this.addEdgeDialog()}\n                </div>\n            );\n        }\n    }\n);\n\nexport default observer(\n    class EdgeDataSheetDialog extends React.Component {\n        render() {\n            return (\n                <DataSheetDialogWrapper for=\"edge\">\n                    <GraphEdgeTable />\n                </DataSheetDialogWrapper>\n            );\n        }\n    }\n);\n","import {\n    Button,\n    Card,\n    Elevation,\n    FormGroup,\n    H5,\n    InputGroup,\n    Tooltip,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport State from \"../../state\";\nimport { Attributes } from \"graphology-types\";\nimport { handleStringChange, parseNumberOrString } from \"./InputFormUtils\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * function to call when a new node is successfully added\n     * the {nodeId} is the id of the newly added node, {attributes} is the attributes of the newly added node\n     *\n     * @memberof Props\n     */\n    onAdded: (nodeId: string, attributes: Attributes) => void;\n}\n\nexport default observer(\n    class NodeAdder extends React.Component<Props, {}> {\n        state = {\n            newNodeId: \"\",\n            attributes: {} as Attributes,\n        };\n\n        get canImport() {\n            return (\n                !State.graph.rawGraph.hasNode(this.state.newNodeId) &&\n                this.state.newNodeId !== \"\"\n            );\n        }\n\n        canImportTag = () => {\n            return this.canImport ? (\n                <Tooltip\n                    content={\n                        \"This Node Id is not used by any existing node yet\"\n                    }\n                    intent=\"success\"\n                >\n                    <Button icon=\"tick\" intent=\"success\" minimal={true} />\n                </Tooltip>\n            ) : (\n                <Tooltip\n                    content={\n                        \"This Node Id is currently in use by other nodes, try with another one instead\"\n                    }\n                    intent=\"warning\"\n                >\n                    <Button icon=\"cross\" intent=\"warning\" minimal={true} />\n                </Tooltip>\n            );\n        };\n\n        renderAttributesForm = (attributes: string[]) => {\n            return attributes.map((attribute) => {\n                if (attribute !== \"_options\" && attribute !== \"_visualize\") {\n                    return (\n                        <FormGroup label={attribute}>\n                            <InputGroup\n                                asyncControl={true}\n                                placeholder={\n                                    \"Enter the value for attribute: \" +\n                                    attribute\n                                }\n                                onChange={handleStringChange((value) => {\n                                    let newValue = this.state.attributes;\n                                    newValue[attribute] = parseNumberOrString(\n                                        value\n                                    );\n                                    this.setState({ attributes: newValue });\n                                })}\n                                value={this.state.attributes[attribute]}\n                            />\n                        </FormGroup>\n                    );\n                } else {\n                    return null;\n                }\n            });\n        };\n\n        render() {\n            return (\n                <Card elevation={Elevation.ONE}>\n                    <FormGroup label=\"New Node ID\" labelInfo=\"(required)\">\n                        <InputGroup\n                            autoFocus={true}\n                            asyncControl={true}\n                            placeholder=\"Enter the new Node Id...\"\n                            intent={this.canImport ? \"success\" : \"warning\"}\n                            rightElement={this.canImportTag()}\n                            onChange={handleStringChange((value) =>\n                                this.setState({ newNodeId: value })\n                            )}\n                            value={this.state.newNodeId}\n                        />\n                    </FormGroup>\n                    <Card elevation={Elevation.ONE}>\n                        <H5>Attributes</H5>\n                        {this.renderAttributesForm(\n                            State.graph.metadata.nodeProperties\n                        )}\n                    </Card>\n                    <hr />\n                    <Button\n                        intent=\"primary\"\n                        onClick={() => {\n                            State.graph.decorateRawNode(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            State.graph.mutating.addNode(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            this.props.onAdded(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            State.preferences.AddNodeDialogOpen = false;\n                            // State.preferences.rightClickBackgroundPanelOpen = false;\n                            // this.forceUpdate();\n                            // State.graphDelegate.cameraFocusOn(this.state.newNodeId);\n                        }}\n                        disabled={!this.canImport}\n                    >\n                        Confirm\n                    </Button>\n                </Card>\n            );\n        }\n        componentDidMount = () => {\n            State.graph.metadata.nodeProperties.forEach((prop) => {\n                let newValue = this.state.attributes;\n                newValue[prop] = \"\";\n                this.setState({ attributes: newValue });\n            });\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Classes, Dialog, Tag } from \"@blueprintjs/core\";\nimport NodeAdder from \"../utils/NodeAdder\";\nimport State from \"../../state\";\n\nexport default observer(\n    class AddNodeDialog extends React.Component {\n        render() {\n            return (\n                <Dialog\n                    isOpen={State.preferences.AddNodeDialogOpen}\n                    icon=\"new-object\"\n                    onClose={() => {\n                        State.preferences.AddNodeDialogOpen = false;\n                    }}\n                    title=\"Add Node\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add node with unique node id to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> node means there should only exist\n                            one node that has the respective node id.\n                        </p>\n                        <Tag>New edges are added to the end of the table</Tag>\n                        <hr />\n                        <NodeAdder\n                            onAdded={() => {\n                                this.setState({ addNodeDialogOpen: false });\n                                this.forceUpdate();\n                            }}\n                        />\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Callout,\n    Classes,\n    Dialog,\n    Divider,\n    Intent,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport NodeChooser from \"../utils/NodeChooser\";\nexport default observer(\n    class AddEdgeDialog extends React.Component {\n        state = {\n            chosenSource: null as null | string,\n            chosenTarget: null as null | string,\n        };\n\n        get canImport(): boolean {\n            if (!this.state.chosenSource || !this.state.chosenTarget) {\n                return false;\n            } else if (this.state.chosenSource === this.state.chosenTarget) {\n                return false;\n            } else {\n                return (\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenSource,\n                        this.state.chosenTarget\n                    ) &&\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenTarget,\n                        this.state.chosenSource\n                    )\n                );\n            }\n        }\n\n        render() {\n            return (\n                <Dialog\n                    isOpen={State.preferences.AddEdgeDialogOpen}\n                    icon=\"new-link\"\n                    onClose={() => {\n                        State.preferences.AddEdgeDialogOpen = false;\n                    }}\n                    onClosed={() =>\n                        this.setState({\n                            chosenSource: null,\n                            chosenTarget: null,\n                        })\n                    }\n                    title=\"Add Edge\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add unique undirected edges to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> edge means there should only exist\n                            one edge that connects between the source and the\n                            target.\n                        </p>\n                        <ButtonGroup fill={true}>\n                            <NodeChooser\n                                text=\"Source Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenSource: value });\n                                }}\n                            />\n                            <Divider />\n                            <NodeChooser\n                                text=\"Target Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenTarget: value });\n                                }}\n                            />\n                        </ButtonGroup>\n                        <p>New edges are added to the end of the table.</p>\n                        {!this.canImport && (\n                            <Callout\n                                title=\"Invalid Edge\"\n                                intent=\"danger\"\n                                icon=\"edit\"\n                            >\n                                The new edge is invalid because either this is a\n                                edge that already in the graph or cannot form a\n                                valid undirected edge\n                            </Callout>\n                        )}\n                    </div>\n                    <div className={Classes.DIALOG_FOOTER}>\n                        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                            <Button\n                                onClick={() => {\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                            >\n                                Cancel\n                            </Button>\n                            {/* //todo:\n                            <Button\n                                onClick={() => {\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                            >\n                                Preview\n                            </Button> */}\n                            <Button\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.graph.mutating.addEdge(\n                                        this.state.chosenSource!,\n                                        this.state.chosenTarget!\n                                    );\n                                    this.forceUpdate();\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                                disabled={!this.canImport}\n                            >\n                                Confirm\n                            </Button>\n                        </div>\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\n// import PreferencesDialog from \"./PreferencesDialog\";\nimport ImportCSVDialog from \"./dialogs/ImportCSVDialog\";\nimport ImportGEXFDialog from \"./dialogs/ImportGEXFDialog\";\nimport ImportSamplesDialog from \"./dialogs/ImportGEXFDialog\";\nimport ExportDialog from \"./dialogs/ExportDialog\";\n// import ProjectDetailDialog from \"./ProjectDetailDialog\";\n// import RenameSnapshotDialog from \"./RenameSnapshotDialog\";\n// import StatisticsDialog from './StatisticsDialog';\n// import HelpDialog from './HelpDialog';\n// import NeighborDialog from './NeighborDialog';\nimport NodeDataSheetDialog from \"./dialogs/NodeDataSheetDialog\";\nimport EdgeDataSheetDialog from \"./dialogs/EdgeDataSheetDialog\";\nimport AddNodeDialog from \"./dialogs/AddNodeDialog\";\nimport AddEdgeDialog from \"./dialogs/AddEdgeDialog\";\n\nexport default class Dialogs extends React.Component {\n    render() {\n        return (\n            <div style={{ display: \"none\" }}>\n                {/* <PreferencesDialog /> */}\n                <ImportCSVDialog />\n                <ImportGEXFDialog />\n                <ImportSamplesDialog />\n                {/*\n                <ProjectDetailDialog />\n                <RenameSnapshotDialog />\n                <StatisticsDialog />\n                <HelpDialog />\n                <NeighborDialog />\\\n                */}\n                <AddNodeDialog />\n                <AddEdgeDialog />\n                <NodeDataSheetDialog />\n                <EdgeDataSheetDialog />\n                <ExportDialog />\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport ForceGraph3D, {\n    ForceGraphMethods,\n    LinkObject,\n    NodeObject,\n} from \"react-force-graph-3d\";\nimport ComponentRef from \"../ComponentRef\";\nimport State from \"../../state\";\nimport SpriteText from \"three-spritetext\";\nimport {\n    ICustomLinkObject,\n    ICustomNodeObject,\n} from \"../../state/GraphDelegate\";\n\ninterface Props {\n    controlType: \"trackball\" | \"orbit\" | \"fly\";\n}\n\nexport default observer(\n    class ThreeJSVis extends React.Component<Props, {}> {\n        state = {\n            visualizationGraph: State.graphDelegate.visualizationGraph(),\n        };\n        // @ts-ignore\n        graphRef: React.MutableRefObject<ForceGraphMethods> = React.createRef();\n\n        get graphMethods(): ForceGraphMethods {\n            return this.graphRef.current;\n        }\n\n        graphDelegate = State.graphDelegate;\n\n        hoverNodeCallback = (\n            node: NodeObject | null,\n            previousNode: NodeObject | null\n        ) => {\n            if (State.search.isPreviewing) return;\n            // to avoid frequent refresh\n\n            if (node === null) {\n                State.interaction.currentlyHoveredNodeId = null;\n            } else if (node !== previousNode) {\n                let current: string = node.id as string;\n                State.interaction.previouslyHoveredNodeId =\n                    State.interaction.currentlyHoveredNodeId;\n                State.interaction.currentlyHoveredNodeId = current;\n                State.interaction.chNodeIdforDisplay = current;\n            }\n            // console.log(State.graph.rawGraph);\n        };\n\n        nodeLeftClickCallback = (node: NodeObject, event: MouseEvent) => {\n            let nodeId = node.id as string;\n            if (event.ctrlKey || event.shiftKey) {\n                // multi-selection\n                let index;\n                // if already in the list of selected, remove\n                if (\n                    (index = State.interaction.selectedNodes.indexOf(\n                        nodeId\n                    )) !== -1\n                ) {\n                    State.interaction.selectedNodes.splice(index, 1);\n                } else {\n                    // if not in the list, add\n                    State.interaction.selectedNodes.push(nodeId);\n                }\n            } else {\n                // single select\n                State.interaction.selectedNode = node.id as string;\n            }\n        };\n\n        nodeRightClickCallback = (node: NodeObject, event: MouseEvent) => {\n            State.interaction.selectedNode = node.id as string;\n            State.preferences.rightClickPositionX = event.x;\n            State.preferences.rightClickPositionY = event.y;\n            State.preferences.rightClickBackgroundPanelOpen = false;\n            State.preferences.rightClickNodePanelOpen = true;\n            this.closeAllPanel();\n        };\n\n        backgroundClickCallback = (event: MouseEvent) => {\n            // cancel all selection\n            // State.interaction.selectedNodes = [];\n            State.preferences.rightClickNodePanelOpen = false;\n            State.preferences.rightClickBackgroundPanelOpen = false;\n            this.closeAllPanel();\n        };\n\n        backgroundRightClickCallback = (event: MouseEvent) => {\n            State.preferences.rightClickPositionX = event.x;\n            State.preferences.rightClickPositionY = event.y;\n            State.preferences.rightClickNodePanelOpen = false;\n            State.preferences.rightClickBackgroundPanelOpen = true;\n            this.closeAllPanel();\n        };\n\n        computeNodeColor(_node: NodeObject) {\n            let node = _node as ICustomNodeObject;\n            if (node.hovered) {\n                return State.css.node.highlightColor;\n            } else if (node.selected) {\n                return State.css.node.selectedColor;\n            } else if (node.multiSelected) {\n                return State.css.node.multiSelectedColor;\n            } else {\n                return State.css.node.defaultColor;\n            }\n        }\n\n        computeEdgeColor(_edge: LinkObject) {\n            let edge = _edge as ICustomLinkObject;\n            if (edge.hovered) {\n                return State.css.edge.highlightColor;\n            } else if (edge.selected) {\n                return State.css.edge.selectedColor;\n            } else {\n                return State.css.edge.defaultColor;\n            }\n        }\n        computeEdgeWidth(_edge: LinkObject) {\n            let edge = _edge as ICustomLinkObject;\n            if (edge.hovered) {\n                return State.css.edge.highlightWidth;\n            } else if (edge.selected) {\n                return State.css.edge.highlightWidth;\n            } else {\n                return State.css.edge.defaultWidth;\n            }\n        }\n        renderGraph = () => {\n            if (State.preferences.view === \"3D\") {\n                return (\n                    <ForceGraph3D\n                        // Data Segment\n                        ref={this.graphRef}\n                        graphData={this.state.visualizationGraph}\n                        controlType={this.props.controlType}\n                        // Node Visualization Segment\n                        nodeLabel=\"id\"\n                        nodeRelSize={State.css.node.size}\n                        nodeColor={this.computeNodeColor}\n                        nodeVisibility={this.graphDelegate.nodeVisibility}\n                        nodeResolution={State.css.node.resolution}\n                        nodeThreeObjectExtend={true}\n                        nodeThreeObject={(node) => {\n                            const sprite = new SpriteText(`${node.id}`);\n                            sprite.color = State.css.label.color;\n                            sprite.textHeight = State.css.label.size;\n                            sprite.visible = State.css.label.show;\n                            return sprite;\n                        }}\n                        // Node Manipulation Segment\n                        onNodeHover={this.hoverNodeCallback}\n                        onNodeClick={this.nodeLeftClickCallback}\n                        onNodeRightClick={this.nodeRightClickCallback}\n                        onNodeDragEnd={(node) => {\n                            node.fx = node.x;\n                            node.fy = node.y;\n                            node.fz = node.z;\n                        }}\n                        // Link Visualization Segment\n                        linkVisibility={this.graphDelegate.linkVisibility}\n                        linkWidth={this.computeEdgeWidth}\n                        linkColor={this.computeEdgeColor}\n                        // Graph Manipulation Segment\n                        onBackgroundRightClick={\n                            this.backgroundRightClickCallback\n                        }\n                        onBackgroundClick={this.backgroundClickCallback}\n                        // Engine\n                        onEngineTick={() =>\n                            this.graphDelegate.clusterObject.clusterDelegation()\n                        }\n                    />\n                );\n                // } else {\n                //     return (\n                //         <ForceGraph2D\n                //             graphData={State.graph.adapterGraph}\n                //             dagMode={\"td\"}\n                //             // dagLevelDistance={300}\n                //             // backgroundColor=\"#101020\"\n                //             nodeRelSize={1}\n                //             // nodeId=\"path\"\n                //             // nodeVal={(node) => 100 / (node.level + 1)}\n                //             // nodeLabel=\"path\"\n                //             // nodeAutoColorBy=\"module\"\n                //             // linkDirectionalParticles={2}\n                //             // linkDirectionalParticleWidth={2}\n                //             d3VelocityDecay={0.3}\n                //         />\n                //     );\n            }\n        };\n\n        render() {\n            return <div>{this.renderGraph()}</div>;\n        }\n\n        updateVisualizationGraph() {\n            this.setState({\n                visualizationGraph: State.graphDelegate.visualizationGraph(),\n            });\n            // this.graphMethods.refresh();\n        }\n\n        closeAllPanel() {\n            State.preferences.deleteEdgePanelOpen = false;\n        }\n\n        componentDidMount() {\n            this.graphDelegate.mountDelegateMethods(this.graphMethods);\n            ComponentRef.visualizer = this;\n        }\n    }\n);\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Classes } from \"@blueprintjs/core\";\nimport { Cell, Column, EditableCell, Table } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state/index\";\nimport ComponentRef from \"../ComponentRef\";\n\ninterface Props {\n    /**\n     * the node id of the select node\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    onNode: string;\n}\n\nexport default observer(\n    class NodeDetail extends React.Component<Props, {}> {\n        cellRenderer_property = (rowIndex: number) => {\n            return <Cell>{State.graph.metadata.nodeProperties[rowIndex]}</Cell>;\n        };\n\n        cellRenderer_value = (rowIndex: number) => {\n            let data = State.graph.rawGraph.getNodeAttribute(\n                this.props.onNode,\n                State.graph.metadata.nodeProperties[rowIndex]\n            );\n            // return a Editable Cell where user can edit the value of certain property;\n            return (\n                <EditableCell\n                    value={data}\n                    onChange={(newVal) =>\n                        State.graph.rawGraph.setNodeAttribute(\n                            this.props.onNode,\n                            State.graph.metadata.nodeProperties[rowIndex],\n                            newVal\n                        )\n                    }\n                    onConfirm={(newVal) =>\n                        State.graph.rawGraph.setNodeAttribute(\n                            this.props.onNode,\n                            State.graph.metadata.nodeProperties[rowIndex],\n                            newVal\n                        )\n                    }\n                    tooltip={data}\n                />\n            );\n        };\n\n        formatLongFloat = (nodeAttributeValue: any) => {\n            const num = Number(nodeAttributeValue);\n            if (Number.isNaN(num) || num > 1 || num < 0) {\n                // Do not format just return original\n                return nodeAttributeValue;\n            }\n            // Format to no more than 3 significant digit.\n            return Number.parseFloat(num.toString()).toPrecision(3);\n        };\n\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"right-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <div\n                        className={classnames(\n                            Classes.CARD,\n                            \"node-details-table\"\n                        )}\n                    >\n                        <Table\n                            numRows={State.graph.metadata.nodeProperties.length}\n                            enableRowHeader={false}\n                        >\n                            <Column\n                                name=\"Properties\"\n                                cellRenderer={this.cellRenderer_property}\n                            />\n                            <Column\n                                name=\"Value\"\n                                cellRenderer={this.cellRenderer_value}\n                            />\n                        </Table>\n                    </div>\n                </div>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.nodeDetail = this;\n        };\n    }\n);\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Classes, Button } from \"@blueprintjs/core\";\nimport { Cell, Column, Table } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport ComponentRef from \"../ComponentRef\";\nimport State from \"../../state/index\";\n\nexport default observer(\n    class MultipleNodeDetail extends React.Component {\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"left-bottom-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <div className={classnames(Classes.CARD)}>\n                        <Table numRows={State.interaction.selectedNodes.length}>\n                            {State.graph.metadata.nodeProperties.map((it) => (\n                                <Column\n                                    key={it}\n                                    name={it}\n                                    cellRenderer={(i) => (\n                                        <Cell>\n                                            {State.graph.rawGraph.getNodeAttribute(\n                                                State.interaction.selectedNodes[\n                                                    i\n                                                ] as string,\n                                                it as string\n                                            )}\n                                        </Cell>\n                                    )}\n                                />\n                            ))}\n                        </Table>\n                    </div>\n                </div>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.multiNodeDetail = this;\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { InputGroup, Menu, MenuItem } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport { handleStringChange } from \"../utils/InputFormUtils\";\n\nexport default observer(\n    class SearchPanel extends React.Component {\n        renderSearchResults = () => {\n            return State.search.candidates.map((it) => {\n                return (\n                    <MenuItem\n                        text={it}\n                        onMouseOver={() => {\n                            State.search.isPreviewing = true;\n                            State.interaction.currentlyHoveredNodeId = it;\n                            State.graphDelegate.cameraFocusOn(it);\n                        }}\n                    />\n                );\n            });\n        };\n\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"bottom-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <div className={classnames(\"search\")}>\n                        {State.search.candidates.length !== 0 && (\n                            <Menu\n                                large={true}\n                                className={classnames(\"search-menu\")}\n                                onMouseLeave={() => {\n                                    State.search.isPreviewing = false;\n                                }}\n                            >\n                                {this.renderSearchResults()}\n                            </Menu>\n                        )}\n                        <InputGroup\n                            asyncControl={true}\n                            large={true}\n                            leftIcon=\"search\"\n                            onChange={handleStringChange(\n                                (value) => (State.search.searchStr = value)\n                            )}\n                            placeholder=\"Search any Node...\"\n                            value={State.search.searchStr}\n                        />\n                    </div>\n                </div>\n            );\n        }\n    }\n);\n// export default EdgesPanel;\n","import React from \"react\";\nimport { Classes, Menu, MenuDivider, MenuItem } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\nimport { computed, makeObservable } from \"mobx\";\n\nexport default observer(\n    class RightClickNodePanel extends React.Component {\n        constructor(props: any) {\n            super(props);\n            makeObservable(this, {\n                stylePosition: computed,\n            });\n        }\n        get stylePosition() {\n            return {\n                top: State.preferences.rightClickPositionY + 10 + \"px\",\n                left: State.preferences.rightClickPositionX + 10 + \"px\",\n            };\n        }\n\n        render() {\n            return (\n                <Menu\n                    className={classnames(\n                        Classes.ELEVATION_1,\n                        \"right-click-panel\"\n                    )}\n                    style={this.stylePosition}\n                >\n                    <MenuDivider\n                        title={\n                            (\"Node ID: \" +\n                                State.interaction.chNodeIdforDisplay) as string\n                        }\n                    />\n                    <MenuItem\n                        icon=\"graph-remove\"\n                        text=\"Delete Node\"\n                        onClick={() => {\n                            State.graph.mutating.dropNode(\n                                State.interaction.chNodeIdforDisplay as string\n                            );\n                            State.preferences.rightClickNodePanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                    <MenuItem\n                        icon=\"circle\"\n                        text=\"CLuster Node\"\n                        onClick={() => {\n                            let clusterId: number =\n                                State.graph.numberOfClusters + 1;\n                            State.interaction.selectedNodes.map((nodeid) => {\n                                let after = State.graph.rawGraph.setNodeAttribute(\n                                    nodeid,\n                                    \"cluster\",\n                                    clusterId\n                                );\n                            });\n                            State.graph.numberOfClusters++;\n                            State.preferences.rightClickNodePanelOpen = false;\n                            State.cluster.setCluster(\"cluster\");\n                        }}\n                        disabled={State.interaction.selectedNodes.length === 0}\n                    />\n                    <MenuItem\n                        icon=\"undo\"\n                        text=\"cancel multiple select\"\n                        onClick={() => {\n                            State.interaction.selectedNodes = [];\n                            State.preferences.rightClickNodePanelOpen = false;\n                        }}\n                        disabled={State.interaction.selectedNodes.length === 0}\n                    />\n                    <MenuItem\n                        icon=\"graph-remove\"\n                        text=\"Delete selected Nodes\"\n                        onClick={() => {\n                            State.interaction.selectedNodes.forEach((node) => {\n                                State.graph.mutating.dropNode(node);\n                            });\n                            // State.graph.mutating.dropNode(\n                            //     State.interaction.chNodeIdforDisplay as string\n                            // );\n                            State.preferences.rightClickNodePanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                    <MenuItem\n                        icon=\"new-link\"\n                        text=\"Add Edge\"\n                        onClick={() => {\n                            State.preferences.AddEdgeDialogOpen = true;\n                        }}\n                    />\n                    <MenuItem\n                        icon=\"cross\"\n                        text=\"Delete Edge\"\n                        onClick={() => {\n                            State.preferences.deleteEdgePanelOpen = true;\n                            State.preferences.rightClickNodePanelOpen = false;\n                        }}\n                    />\n                </Menu>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Menu, MenuDivider, MenuItem } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\nimport { computed, makeObservable } from \"mobx\";\n\nexport default observer(\n    class RightClickBackgroundPanel extends React.Component {\n        constructor(props: any) {\n            super(props);\n            makeObservable(this, {\n                stylePosition: computed,\n            });\n        }\n        get stylePosition() {\n            return {\n                top: State.preferences.rightClickPositionY + 10 + \"px\",\n                left: State.preferences.rightClickPositionX + 10 + \"px\",\n            };\n        }\n\n        render() {\n            return (\n                <Menu\n                    className={classnames(\n                        Classes.ELEVATION_1,\n                        \"right-click-panel\"\n                    )}\n                    style={this.stylePosition}\n                >\n                    <MenuItem\n                        icon=\"new-object\"\n                        text=\"Add Node\"\n                        onClick={() => {\n                            State.preferences.AddNodeDialogOpen = true;\n                            State.preferences.rightClickBackgroundPanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                </Menu>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Alert, Button, Card, Code, H6, Intent } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\nimport {\n    Cell,\n    Column,\n    ICellRenderer,\n    RenderMode,\n    Table,\n} from \"@blueprintjs/table\";\n\ninterface Props {\n    /**\n     * the node id of the select node to delete Edge\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    onNode: string;\n}\n\nexport default observer(\n    class DeleteEdgeInteractionPanel extends React.Component<Props, {}> {\n        state = {\n            targetNode: null as string | null,\n            deleteAlertOpen: false,\n        };\n\n        get neighbors(): string[] {\n            return State.graph.rawGraph.neighbors(this.props.onNode);\n        }\n\n        deleteEdgeRenderer: ICellRenderer = (rowIndex) => {\n            let targetNode = this.neighbors[rowIndex];\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                targetNode: targetNode,\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteEdgeAlert = () => {\n            if (this.state.targetNode === null) {\n                return null;\n            }\n\n            let edgeToDelete: string | undefined;\n\n            if (\n                (edgeToDelete = State.graph.rawGraph.edge(\n                    this.state.targetNode,\n                    this.props.onNode\n                )) === undefined\n            ) {\n                edgeToDelete = State.graph.rawGraph.edge(\n                    this.props.onNode,\n                    this.state.targetNode\n                );\n            }\n\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropEdge(edgeToDelete as string);\n                        this.setState({ deleteAlertOpen: false });\n                        State.preferences.deleteEdgePanelOpen = false;\n                    }}\n                >\n                    <p>\n                        Are you sure you want to delete the edge with Key{\" \"}\n                        <Code>{edgeToDelete as string}</Code> between Node ID{\" \"}\n                        <Code>{this.state.targetNode}</Code> and Node ID{\" \"}\n                        <Code>{this.props.onNode}</Code>. This action cannot be\n                        reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        neighborsRenderer: ICellRenderer = (rowIndex: number) => {\n            return (\n                <Cell interactive={true}>\n                    <div\n                        onMouseEnter={() => {\n                            State.graphDelegate.cameraFocusOn(\n                                this.props.onNode,\n                                400\n                            );\n                            State.interaction.selectedEdge = State.interaction.getEdgeKey(\n                                this.props.onNode,\n                                this.neighbors[rowIndex]\n                            ) as string;\n                        }}\n                    >\n                        {this.neighbors[rowIndex]}\n                    </div>\n                </Cell>\n            );\n        };\n\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"right-bottom-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <Card className={classnames(\"node-details-table\")}>\n                        <Button\n                            icon=\"cross\"\n                            onClick={() => {\n                                State.preferences.deleteEdgePanelOpen = false;\n                                State.interaction.selectedEdge = null;\n                                State.graphDelegate.graphDelegateMethods.refresh(); // update color of selected edges\n                            }}\n                        >\n                            Close\n                        </Button>\n                        <H6> Node ID: {this.props.onNode}</H6>\n                        <Table\n                            numRows={this.neighbors.length}\n                            defaultRowHeight={30}\n                            renderMode={RenderMode.NONE}\n                        >\n                            <Column\n                                name=\"\"\n                                cellRenderer={this.deleteEdgeRenderer}\n                                //@ts-ignore\n                                style={this.style}\n                            />\n                            <Column\n                                name=\"Node ID\"\n                                //@ts-ignore\n                                intent={Intent.PRIMARY}\n                                cellRenderer={this.neighborsRenderer}\n                            />\n                        </Table>\n                        {this.deleteEdgeAlert()}\n                    </Card>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Classes, Slider } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport Collapsable from \"../utils/Collapsable\";\nimport SimpleSelect from \"../utils/SimpleSelect\";\n\nexport default observer(\n    class ClusterPanel extends React.Component {\n        state = {\n            shapeOptionOpen: false,\n            forceOptionOpen: false,\n        };\n\n        forceCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Force\"\n                    isOpen={this.state.forceOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            forceOptionOpen: !this.state.forceOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Cluster Force Distance:\n                        <br />\n                        <Slider\n                            min={0}\n                            max={100}\n                            stepSize={10}\n                            labelStepSize={20}\n                            onChange={(value) => {\n                                State.css.cluster.clusterForce = value;\n                                State.graphDelegate.updateClusterForce();\n                            }}\n                            value={State.css.cluster.clusterForce}\n                        />\n                    </div>\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Normal Force Distance:\n                        <br />\n                        <Slider\n                            min={0}\n                            max={100}\n                            stepSize={10}\n                            labelStepSize={20}\n                            onChange={(value) => {\n                                State.css.cluster.normalForce = value;\n                                State.graphDelegate.updateClusterForce();\n                            }}\n                            value={State.css.cluster.normalForce}\n                        />\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        shapeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Shape\"\n                    isOpen={this.state.shapeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            shapeOptionOpen: !this.state.shapeOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        <p style={{ textAlign: \"left\" }}>\n                            Cluster Shape:\n                            <span style={{ float: \"right\" }}>\n                                <SimpleSelect\n                                    items={[\"convexHull\", \"sphere\"]}\n                                    text={State.css.cluster.shape}\n                                    onSelect={(it) =>\n                                        (State.css.cluster.shape = it)\n                                    }\n                                    small={true}\n                                />\n                            </span>\n                        </p>\n                    </div>\n                    {State.css.cluster.shape === \"sphere\" && (\n                        <div className={classnames(Classes.CARD, \"sub-option\")}>\n                            Cluster Resolution:\n                            <br />\n                            <Slider\n                                min={2}\n                                max={20}\n                                stepSize={1}\n                                labelStepSize={5}\n                                onChange={(value) => {\n                                    State.css.cluster.resolution = value;\n                                }}\n                                value={State.css.cluster.resolution}\n                            />\n                        </div>\n                    )}\n                </Collapsable>\n            );\n        };\n\n        render() {\n            return (\n                <div>\n                    <div>\n                        <p>Modifying All Clusters</p>\n                    </div>\n                    {this.forceCollapse()}\n                    {this.shapeCollapse()}\n                </div>\n            );\n        }\n    }\n);\n// export default EdgesPanel;\n","import React from \"react\";\nimport {\n    Button,\n    Popover,\n    PopoverInteractionKind,\n    Position,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport { ColorResult, SketchPicker } from \"react-color\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * the color to be previewed on the button\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    color: string;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     *\n     * @memberof Props\n     */\n    onChange: (color: ColorResult) => void;\n}\n\n/**\n * this component can be used to choose the node among all the nodes, with basic search filters available\n * to use it, you have to specify the text shown above the selectButton as well as the onChange function to call when a candidate is selected\n */\nexport default observer(\n    class ColorPicker extends React.Component<Props, {}> {\n        render() {\n            return (\n                <Popover\n                    interactionKind={PopoverInteractionKind.CLICK}\n                    popoverClassName=\"bp3-popover-content-sizing\"\n                    position={Position.RIGHT}\n                >\n                    <Button\n                        text=\"  \"\n                        style={{\n                            backgroundColor: this.props.color,\n                        }}\n                        small={true}\n                    />\n                    <div>\n                        <SketchPicker\n                            color={this.props.color}\n                            onChange={(it) => {\n                                this.props.onChange(it);\n                            }}\n                        />\n                    </div>\n                </Popover>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Classes } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport Collapsable from \"../utils/Collapsable\";\nimport ColorPicker from \"../utils/ColorPicker\";\n\nexport default observer(\n    class EdgesPanel extends React.Component {\n        state = {\n            sizeOptionOpen: false,\n            thicknessOptionOpen: false,\n            colorOptionOpen: false,\n            forceOptionOpen: false,\n        };\n\n        render() {\n            return (\n                <div>\n                    <p>{`Modifying All Edges`}</p>\n\n                    {/* Collapsable Option: Color */}\n                    <Collapsable\n                        name=\"Color\"\n                        isOpen={this.state.colorOptionOpen}\n                        onToggle={() =>\n                            this.setState({\n                                colorOptionOpen: !this.state.colorOptionOpen,\n                            })\n                        }\n                    >\n                        <div className={classnames(Classes.CARD, \"sub-option\")}>\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Default Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={State.css.edge.defaultColor}\n                                            onChange={(it) => {\n                                                State.css.edge.defaultColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Selected Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={State.css.edge.selectedColor}\n                                            onChange={(it) => {\n                                                State.css.edge.selectedColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Highlight Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={\n                                                State.css.edge.highlightColor\n                                            }\n                                            onChange={(it) => {\n                                                State.css.edge.highlightColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n                        </div>\n                    </Collapsable>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Slider, Switch } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport classnames from \"classnames\";\nimport ColorPicker from \"../utils/ColorPicker\";\n\nexport default observer(\n    class LabelsPanel extends React.Component {\n        render() {\n            return (\n                <div>\n                    <Switch\n                        label=\"Show Node Label\"\n                        checked={State.css.label.show}\n                        onChange={() => {\n                            State.css.label.show = !State.css.label.show;\n                            State.graphDelegate.graphDelegateMethods.refresh();\n                        }}\n                    />\n                    <br />\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Label Size:\n                        <br />\n                        <Slider\n                            min={1}\n                            max={10}\n                            stepSize={1}\n                            labelStepSize={2}\n                            onChange={(value) => {\n                                State.css.label.size = value;\n                                State.graphDelegate.graphDelegateMethods.refresh();\n                            }}\n                            value={State.css.label.size}\n                        />\n                        <br />\n                        <p style={{ textAlign: \"left\" }}>\n                            Label Color:\n                            <span style={{ float: \"right\" }}>\n                                <ColorPicker\n                                    color={State.css.label.color}\n                                    onChange={(it) => {\n                                        State.css.label.color = it.hex;\n                                        State.graphDelegate.graphDelegateMethods.refresh();\n                                    }}\n                                />\n                            </span>\n                        </p>\n                    </div>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Classes, Slider } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport Collapsable from \"../utils/Collapsable\";\nimport ColorPicker from \"../utils/ColorPicker\";\n\nexport default observer(\n    class NodesPanel extends React.Component {\n        state = {\n            timeOutRef: null,\n            colorOptionOpen: false,\n            sizeOptionOpen: false,\n            shapeOptionOpen: false,\n        };\n\n        colorCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Color\"\n                    isOpen={this.state.colorOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            colorOptionOpen: !this.state.colorOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Default Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.defaultColor}\n                                        onChange={(it) => {\n                                            State.css.node.defaultColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Selected Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.selectedColor}\n                                        onChange={(it) => {\n                                            State.css.node.selectedColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Highlight Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.highlightColor}\n                                        onChange={(it) => {\n                                            State.css.node.highlightColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        sizeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Size\"\n                    isOpen={this.state.sizeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            sizeOptionOpen: !this.state.sizeOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Node Size:\n                        <br />\n                        <Slider\n                            min={1}\n                            max={20}\n                            stepSize={1}\n                            labelStepSize={5}\n                            onChange={(value) => {\n                                State.css.node.size = value;\n                                State.graphDelegate.graphDelegateMethods.refresh();\n                            }}\n                            value={State.css.node.size}\n                        />\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        shapeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Shape\"\n                    isOpen={this.state.shapeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            shapeOptionOpen: !this.state.shapeOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Node Resolution:\n                        <br />\n                        <Slider\n                            min={2}\n                            max={20}\n                            stepSize={1}\n                            labelStepSize={5}\n                            onChange={(value) => {\n                                State.css.node.resolution = value;\n                            }}\n                            value={State.css.node.resolution}\n                        />\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        render() {\n            return (\n                <div>\n                    <div>\n                        <p>Modifying All Nodes</p>\n                    </div>\n                    {this.colorCollapse()}\n                    {this.sizeCollapse()}\n                    {this.shapeCollapse()}\n                </div>\n            );\n        }\n    }\n);\n","import { H3, Tab, Tabs } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport ClusterPanel from \"./ClusterPanel\";\nimport EdgesPanel from \"./EdgesPanel\";\nimport LabelsPanel from \"./LabelsPanel\";\nimport NodesPanel from \"./NodesPanel\";\n\nexport default observer(\n    class RenderOptionsCard extends React.Component {\n        render() {\n            return (\n                <div>\n                    <H3>Graph Options</H3>\n                    <Tabs animate={true}>\n                        <Tab id=\"nodes\" title=\"Nodes\" panel={<NodesPanel />} />\n                        <Tab id=\"edges\" title=\"Edges\" panel={<EdgesPanel />} />\n                        <Tab\n                            id=\"labels\"\n                            title=\"Labels\"\n                            panel={<LabelsPanel />}\n                        />\n                        <Tab\n                            id=\"clusters\"\n                            title=\"Clusters\"\n                            panel={<ClusterPanel />}\n                        />\n\n                        <Tabs.Expander />\n                    </Tabs>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, Classes } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport State from \"../state\";\nimport NodeDetailPanel from \"./panels/NodeDetailPanel\";\nimport MultiDetailPanel from \"./panels/MultiDetailPanel\";\nimport SearchPanel from \"./panels/SearchPanel\";\nimport RightClickNodePanel from \"./panels/RightClickNodePanel\";\nimport RightClickBackgroundPanel from \"./panels/RightClickBackgroundPanel\";\nimport DeleteEdgeInteractionPanel from \"./panels/DeleteEdgeInteractionPanel\";\nimport GraphOptionsCard from \"./panels/GraphOptionsCard\";\n\nexport default observer(\n    class FloatingCards extends React.Component {\n        optionsVisible = {\n            left: \"0em\",\n        };\n        optionsInvisible = {\n            left: \"-2200em\",\n        };\n        sideButtonVis = {\n            marginLeft: \"50px\",\n        };\n        sideButtonInv = {\n            marginLeft: \"-15px\",\n        };\n        toggleOptions = () => {\n            State.preferences.isGraphOptionsCardHidden = !State.preferences\n                .isGraphOptionsCardHidden;\n        };\n        render() {\n            return (\n                <div className=\"floating-overlay\">\n                    <div className=\"left-cards\">\n                        <div\n                            className={classnames(\n                                Classes.CARD,\n                                Classes.ELEVATION_2,\n                                \"overlay-card\",\n                                \"transparent-frame\",\n                                \"left-cards\"\n                            )}\n                            style={\n                                State.preferences.isGraphOptionsCardHidden\n                                    ? this.optionsInvisible\n                                    : this.optionsVisible\n                            }\n                        >\n                            <br />\n                            <Button\n                                className=\"openbtn2\"\n                                icon=\"chevron-left\"\n                                onClick={this.toggleOptions}\n                            />\n                            <br />\n                            <GraphOptionsCard />\n                        </div>\n                        <div\n                            className={classnames(\n                                Classes.CARD,\n                                Classes.ELEVATION_2,\n                                \"overlay-card\",\n                                \"transparent-frame\"\n                            )}\n                            style={{\n                                width: \"1em\",\n                                paddingTop: \"1em\",\n                                paddingRight: \"0.7em\",\n                                paddingBottom: \"0.5em\",\n                                marginLeft: \"-5.4em\",\n                            }}\n                        >\n                            <Button\n                                icon=\"more\"\n                                className=\"openbtn\"\n                                onClick={this.toggleOptions}\n                                style={\n                                    State.preferences.isGraphOptionsCardHidden\n                                        ? this.sideButtonVis\n                                        : this.sideButtonInv\n                                }\n                            />\n                        </div>\n                    </div>\n\n                    {/* single selected */}\n                    {/* {State.graph.selectedNodes.length === 1 && (\n                        <NodeDetail node={State.graph.currentlyHoveredId} />\n                    )} */}\n                    {State.interaction.currentlyHoveredNodeId &&\n                        State.interaction.selectedNodes.length === 0 && (\n                            <NodeDetailPanel\n                                onNode={\n                                    State.interaction.currentlyHoveredNodeId\n                                }\n                            />\n                        )}\n\n                    {/* multiple selected */}\n                    {/* {State.graph.selectedNodes.length !== 1 && State.graph.currentlyHovered && (\n                        <NodeDetail node={State.graph.currentlyHovered.data.ref} />\n                    )} */}\n                    {State.interaction.selectedNodes.length !== 0 && (\n                        <MultiDetailPanel />\n                    )}\n\n                    <SearchPanel />\n                    {State.preferences.rightClickNodePanelOpen && (\n                        <RightClickNodePanel />\n                    )}\n\n                    {State.preferences.rightClickBackgroundPanelOpen && (\n                        <RightClickBackgroundPanel />\n                    )}\n                    {State.preferences.deleteEdgePanelOpen &&\n                        State.interaction.selectedNode && (\n                            <DeleteEdgeInteractionPanel\n                                onNode={State.interaction.selectedNode}\n                            />\n                        )}\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Classes } from \"@blueprintjs/core\";\nimport Navbar from \"./components/Navbar\";\nimport Dialogs from \"./components/Dialogs\";\nimport ThreeJSVis from \"./components/visualize/visualizer\";\n// import NodeDetail from \"./components/panels/NodeDetailPanel\";\n// import State from \"./state\";\n// import EdgesPanel from \"./components/panels/EdgesPanel\";\n// import LabelsPanel from \"./components/panels/LabelsPanel\";\n// import SelectionPanel from \"./components/panels/SelectionPanel\";\n// import GlobalPanel from \"./components/panels/GlobalPanel\";\n// import NodesPanel from \"./components/panels/NodesPanel\";\nimport FloatingCards from \"./components/FloatingCards\";\n\nfunction App() {\n    return (\n        <div\n            className={classnames({\n                \"app-wrapper\": true,\n                [Classes.DARK]: true,\n            })}\n        >\n            <Navbar />\n            <main className=\"main\">\n                <ThreeJSVis />\n            </main>\n            <FloatingCards />\n            <Dialogs />\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import(\"web-vitals\").then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/table/lib/css/table.css\";\nimport \"@blueprintjs/select/lib/css/blueprint-select.css\";\nimport \"normalize.css\";\nimport \"./App.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}