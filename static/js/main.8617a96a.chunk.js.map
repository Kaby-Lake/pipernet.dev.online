{"version":3,"sources":["state/PreferencesStore.ts","state/Cluster3dObjectStore.ts","state/GraphDelegate.ts","components/ComponentRef.tsx","state/GraphMutation.ts","state/GraphStore.ts","state/ImportStore.ts","state/SearchStore.ts","state/ClusterStore.ts","state/CssStore.ts","state/NodeInteractionStore.ts","state/ClusterInteractionStore.ts","state/HelperStackPanelStore.ts","state/index.ts","components/utils/ClusterChooser.tsx","images/logo.png","components/utils/InputFormUtils.ts","components/panels/SearchPanel.tsx","components/Navbar.tsx","components/utils/SimpleSelect.tsx","components/dialogs/importDialog.tsx","components/dialogs/ExportDialog.tsx","components/utils/DataSheetDialogWrapper.tsx","components/dialogs/NodeDataSheetDialog.tsx","components/utils/NodeChooser.tsx","components/dialogs/EdgeDataSheetDialog.tsx","components/utils/NodeAdder.tsx","components/dialogs/AddNodeDialog.tsx","components/dialogs/AddEdgeDialog.tsx","components/dialogs/ImportGEXFDialog.tsx","components/Dialogs.tsx","components/panels/SelectionBox.tsx","state/utils/MouseEventUtils.ts","components/panels/CanvasDrawPanel.tsx","state/utils/ToasterUtils.ts","components/panels/CanvasDrawStraightLinePanel.tsx","components/visualize/Visualizer.tsx","components/panels/NodeDetailPanel.tsx","components/panels/MultiDetailPanel.tsx","components/panels/DeleteEdgeInteractionPanel.tsx","components/utils/Collapsable.tsx","components/panels/ClusterPanel.tsx","components/utils/ColorPicker.tsx","components/panels/EdgesPanel.tsx","components/panels/LabelsPanel.tsx","components/panels/NodesPanel.tsx","components/panels/GraphOptionsCard.tsx","components/panels/InteractionModePanel/ClusterSplittingPanelStack.tsx","components/panels/InteractionModePanel/NodeSelectionPanel.tsx","components/panels/InteractionModePanel/InteractionModePanel.tsx","components/panels/RightClickPanel.tsx","components/FloatingCards.tsx","App.tsx","reportWebVitals.js","index.js"],"names":["VisualizationMode","PreferencesStore","rightClickPositionX","rightClickPositionY","exportDialogOpen","preferenceDialogOpen","statisticsDialogOpen","AddNodeDialogOpen","AddEdgeDialogOpen","nodeDataSheetDialogOpen","edgeDataSheetDialogOpen","rightClickOn","rightClickPanelOpen","deleteEdgePanelOpen","graphOptionsCardOpen","view","controlType","visualizationMode","Normal","makeAutoObservable","this","except","Cluster3dObjectStore","threeScene","fusionClusterObjects","clusterObjectsMap","UUID2ClusterValueMap","remove","dispose","State","cluster","clusterBy","Map","initialMap","attributePoints","forEach","value","key","set","createMesh","THREE","add","convexHullObjects","initEmptyMapAndFusion","mesh","geometry","copy","convexHullObject","uuid","res","children","every","item","material","newMap","points","get","length","sphere","SphereGeometry","css","node","size","resolution","translate","x","y","z","tempArray","vector","push","positions","Float32Array","setAttribute","computeBoundingSphere","sphereGeo","boundingSphere","radius","center","shape","ConvexGeometry","Array","from","convexGeometry","geom","name","meshMaterial","color","attributeColor","transparent","opacity","side","depthWrite","oldOpacity","setTimeout","_object","meshId","clusterInteraction","currentlyHoveredClusterId","selectedClusters","includes","meshSelectedMaterial","meshNormalMaterial","meshHighlightMaterial","createCustomNodeObject","_id","_cluster","id","hovered","selected","multiSelected","isClusterNode","createCustomLinkObject","_source","_target","source","target","isClusterLink","GraphDelegate","graphDelegateMethods","clusterObject","_graphDelegateMethods","scene","newGraph","graph","rawGraph","addInvisibleClusterNode","decorateRawGraph","tempGraph","nodes","links","forEachNode","attributes","forEachEdge","edge","oldGraph","graphCopy","names","index","getAttributeValues","attribute","clusterID","addNode","_visualize","attributeKeys","addEdgeWithKey","nodeObject","linkObject","nodeId","distance","getNodeAttribute","distRatio","Math","hypot","cameraPosition","d3Force","link","clusterForce","normalForce","d3ReheatSimulation","ComponentRef","nodeDetail","multiNodeDetail","visualizer","canvasDrawPanel","canvasDrawStraightLinePanel","clusterSplittingPanelStack","_instance","instance","reaction","interaction","currentlyHoveredNodeId","forceUpdate","GraphMutation","_this","that","newAttributes","hasOwnProperty","decorateRawNode","refreshGraph","dropNode","decorateRawEdge","addEdge","dropEdge","GraphStore","Graph","allowSelfLoops","multi","type","numberOfClusters","mutating","metadata","snapshotName","nodeProperties","_rawGraph","_metadata","flush","updateVisualizationGraph","ImportStore","isLoading","edgeFileName","nodeFileName","gexfFileName","importDialogOpen","importGEXFDialogOpen","selectedEdgeFileFromInput","selectedNodeFileFromInput","selectedGEXFFileFromInput","importConfig","hasNodeFile","nodeFile","isReady","parseError","path","hasHeader","topN","columns","mapping","delimiter","edgeFile","fromId","toId","fileObject","file","reader","FileReader","readAsText","Promise","resolve","reject","onload","content","result","replace","parse","comment","trim","auto_parse","skip_empty_lines","undefined","err","Toaster","create","position","Position","TOP","show","message","intent","Intent","DANGER","timeout","gexf","readCSV","config","fromColumn","parseInt","toColumn","tempNodes","readNodeCSV","toString","Object","assign","readEdgeCSV","idx","hasNode","keys","readGEXF","entries","getNodeAttributes","edgeFileConfig","fileAsString","lines","split","topLinesAsString","map","l","slice","join","console","log","it","onerror","error","action","onClick","window","location","reload","text","nodeFileConfig","SearchStore","isPreviewing","searchStr","filterProps","observable","ref","outputList","searchStrIgnoreCase","toLocaleLowerCase","searchAttr","ClusterStore","to","setCluster","graphDelegate","keyValueMap","Set","keyAttribute","values","attributeKeysMap","colors","randomcolor","seed","count","NodeGlobalConfig","defaultColor","selectedColor","multiSelectedColor","highlightColor","EdgeGlobalConfig","defaultWidth","highlightWidth","LabelConfig","ClusterConfig","CssStore","label","isAnimating","InteractionStore","selectedNode","selectedNodes","selectedEdge","selectedEdges","boxSelectionOpen","boxSelection_startPoint","boxSelection_endPoint","left","min","top","right","max","down","Attributes","coords","graph2ScreenCoords","neighbors","getNodeNeighborEdges","neighbor","getEdgeKey","node1","node2","go","back","oldAttributeVisualize","updateVisualizeAttributeParser","getEdgeAttribute","newAttribute","oldAttributes","ClusterInteractionStore","selectedCluster","drawPanelActivate","drawStraightLine","lineSegment","confirmClusterSplittingTempData","event","meshSpotlightMaterial","getObjectById","indexOf","splice","preferences","closeAllPanel","date","Date","toLocaleString","clusterId","_","clusterValue","setNodeAttribute","screenCoords","coord","tempLineSegment","point","polygonContains","updateNodeVisualizeAttribute","refresh","anotherClusterId","thisCluster","nodesToAlter","HelperStackPanelStore","clusterSplittingPanelStackOpen","clusterSplittingCurrentStep","NodeSelectionPanelOpen","AppState","import","search","helper","NodeInteractionStore","privateConstructor","_state","autorun","renderImportEdgePreview","renderImportNodePreview","resumeAnimation","pauseAnimation","ClusterSplitting","step","clearDrawing","order","number","fireImmediately","updateAllMaterials","currentlyHoveredNodeNeighborEdges","updateEdgeVisualizeAttribute","observer","itemRenderer","props","handleClick","propertiesWithNone","unshift","items","showNone","fullProperties","filterable","onItemSelect","onSelect","syncWith","React","Component","defaultProps","handleStringChange","handler","stringifyNodeDetail","parseNumberOrString","numberVal","Number","isNaN","state","filter","prefix","disabled","FILTER_OPTIONS","setState","icon","inputValueRenderer","a","query","onQueryChange","itemListPredicate","candidates","usePortal","onMouseOver","cameraFocusOn","onMouseLeave","openOnKeyDown","noResults","popoverProps","minimal","style","zIndex","align","Alignment","LEFT","title","src","logo","width","height","alt","placement","BOTTOM","marginTop","marginLeft","checked","onChange","RIGHT","marginRight","open","CommonItemRenderer","itemPredicate","object","toLowerCase","small","PreviewTable","renderWrapper","className","numRows","selectedRegions","rows","cols","cellRenderer","i","multiDialogRef","createRef","canImport","renderNodesSelection","onInputChange","files","renderEdgesSelection","importedNodes","importedEdges","closeDialog","finalButtonProps","importGraphFromCSV","then","setGraph","hasAttribute","getAttribute","newDelimiter","classnames","isOpen","onClose","panel","Classes","DIALOG_BODY","justifyContent","alignItems","display","maxWidth","renderDelimiterSelection","large","ready","_node","_edge","write","headers","exportData","export","data","edges","interactive","elevation","Elevation","ONE","computeGEXFFile","filename","computeNodeFile","separator","computeEdgeFile","loading","loadingOptions","TableLoadingOption","CELLS","COLUMN_HEADERS","ROW_HEADERS","for","onOpened","minWidth","renderTable","GraphNodeTable","filterQuery","addNodeDialogOpen","deleteAlertOpen","nodeToDelete","renderColumns","rowIndex","columnIndex","renderCell","element","cell","filteredTable","newVal","setValue","onConfirm","tooltip","deleteNodeRenderer","deleteNodeAlert","cancelButtonText","confirmButtonText","onCancel","textAlign","newTable","asyncControl","leftIcon","placeholder","fill","defaultRowHeight","SUCCESS","select","labelFor","labelInfo","rightIcon","GraphEdgeTable","addEdgeDialogOpen","edgeToDelete","chosenSource","chosenTarget","deleteEdgeRenderer","deleteEdgeAlert","addEdgeDialog","onClosed","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","PRIMARY","hasEdge","renderMode","RenderMode","NONE","newNodeId","canImportTag","renderAttributesForm","newValue","componentDidMount","prop","autoFocus","rightElement","onAdded","fileIsSelect","DISABLED","importGraphFromGEXF","CONTROL_GROUP","INPUT_GROUP","FILL","renderImportButton","Dialogs","boxStyle","startPoint","endPoint","mouseDown","onMouseDownCallback","startpoint","clientX","clientY","onMouseMoveCallback","_calculateSelectionBox","onMouseUpCallback","boxSelectNode","abs","onMouseDown","onMouseMove","onMouseUp","onDocumentLeftClick","ReactDOM","findDOMNode","box","getBoundingClientRect","camera","unproject","intersects","sub","normalize","intersectObjects","clusterLeftClickCallback","onDocumentRightClick","clusterRightClickCallback","onDocumentMouseMove","clusterHoverCallback","canvasRef","current","JSON","canvasMethods","getSaveData","exportDrawing","canvas","canvasHeight","canvasWidth","lazyRadius","brushRadius","brushColor","catenaryColor","drawPoints","reverse","computeSplitCluster","clear","createToaster","componentRef","ctx","lineJoin","lineCap","clearRect","lineWidth","beginPath","moveTo","lineTo","strokeStyle","stroke","getContext","visualizationGraph","nodePointerInteraction","graphRef","hoverNodeCallback","previousNode","nodeLeftClickCallback","NodeSelection","nodeRightClickCallback","backgroundClickCallback","backgroundRightClickCallback","renderDrawCanvas","renderGraph","graphData","nodeLabel","nodeRelSize","nodeColor","computeNodeColor","nodeVisibility","nodeResolution","nodeThreeObjectExtend","nodeThreeObject","sprite","SpriteText","textHeight","visible","backgroundColor","translateX","onNodeHover","onNodeClick","onNodeRightClick","onNodeDragEnd","fx","fy","fz","linkVisibility","linkWidth","computeEdgeWidth","linkColor","computeEdgeColor","onBackgroundRightClick","onBackgroundClick","enablePointerInteraction","onEngineTick","clusterDelegation","document","addEventListener","CustomMouseEvent","removeEventListener","mountDelegateMethods","graphMethods","clusterInteractionListener","ClusterSelection","cellRenderer_property","cellRenderer_value","onNode","formatLongFloat","nodeAttributeValue","num","parseFloat","toPrecision","CARD","enableRowHeader","targetNode","neighborsRenderer","onMouseEnter","LARGE","onToggle","shapeOptionOpen","forceOptionOpen","forceCollapse","Collapsable","stepSize","labelStepSize","updateClusterForce","shapeCollapse","float","interactionKind","PopoverInteractionKind","CLICK","popoverClassName","sizeOptionOpen","thicknessOptionOpen","colorOptionOpen","hex","timeOutRef","colorCollapse","sizeCollapse","animate","Expander","allPanelStacks","component","selectedValue","splitCluster","CustomPanel","panelNumber","firstPanel","renderPanel","secondPanel","thirdPanel","renderPanelStack","initialPanel","stack","currentPanelStack","getMessage","BUTTON","MINIMAL","active","handleChange","WARNING","mode","getIntent","currentStep","makeObservable","stylePosition","computed","newClusterAttributeValue","clusterName","ELEVATION_1","formNewCluster","releaseFromCluster","mergeSelectedCluster","on","renderNodeMenu","renderClusterMenu","renderBackgroundMenu","optionsVisible","optionsInvisible","sideButtonVis","sideButtonInv","toggleOptions","ELEVATION_2","GraphOptionsCard","paddingTop","paddingRight","paddingBottom","NodeDetailPanel","MultiDetailPanel","App","DARK","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8617a96a.chunk.js","sourcesContent":["import { makeAutoObservable } from \"mobx\";\n\nexport enum VisualizationMode {\n    Normal = \"Normal\", // normal state\n    ClusterSelection = \"Cluster Selection\", // selecting the cluster to be Merged\n    NodeSelection = \"Node Selection\", // multi-selecting the node\n    ClusterSplitting = \"Cluster Splitting\", // drawing the line to split the cluster\n}\n\n/**\n * @description it controls the open/close of dialogs/panels\n * and the VisualizationMode(Normal/NodeSelection/ClusterSelection/ClusterSplitting) as well\n * @author Zichen XU\n * @export\n * @class PreferencesStore\n */\nexport default class PreferencesStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    // Right Click Position\n\n    rightClickPositionX = 30;\n    rightClickPositionY = 30;\n\n    // Dialog\n    exportDialogOpen = false;\n    preferenceDialogOpen = false;\n    statisticsDialogOpen = false;\n\n    AddNodeDialogOpen = false;\n    AddEdgeDialogOpen = false;\n\n    nodeDataSheetDialogOpen = false;\n    edgeDataSheetDialogOpen = false;\n\n    // Panel\n\n    rightClickOn = null as null | \"Node\" | \"Cluster\" | \"Background\";\n    rightClickPanelOpen = false;\n    deleteEdgePanelOpen = false;\n\n    graphOptionsCardOpen = false;\n\n    closeAllPanel(except?: string) {\n        this.deleteEdgePanelOpen = false;\n        this.graphOptionsCardOpen = false;\n        if (except !== \"rightClickPanel\") {\n            this.rightClickPanelOpen = false;\n        }\n    }\n\n    // 3D Graph\n\n    view = \"3D\";\n    controlType: \"trackball\" | \"orbit\" | \"fly\" = \"trackball\";\n\n    visualizationMode: VisualizationMode = VisualizationMode.Normal;\n}\n","import { makeAutoObservable } from \"mobx\";\nimport * as THREE from \"three\";\nimport { SphereGeometry } from \"three\";\nimport { ConvexGeometry } from \"three/examples/jsm/geometries/ConvexGeometry\";\nimport State from \".\";\n\nexport default class Cluster3dObjectStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * the THREE.js WebGL Scene of the visualization\n     *\n     */\n    threeScene!: THREE.Scene;\n\n    /**\n     * all the clusters should form a 3D Group to be imported into Scene\n     * if no cluster attribute is set, this will be set to null\n     *\n     * each children is a THREE.Mesh\n     *\n     * @type {THREE.Group}\n     */\n    fusionClusterObjects: THREE.Group | null = null;\n\n    /**\n     * the map between attribute value and its corresponding Mesh Group\n     * if you want to update the geometry, plz update all the children inside which Mesh Group\n     * if no cluster attribute is set, this will be set to null\n     *\n     * @type {(Map<string | number, THREE.Group> | null)}\n     */\n    clusterObjectsMap: Map<string | number, THREE.Mesh> | null = null;\n\n    /**\n     * create empty BufferGeometry and mesh with colour\n     * then initialize $fusionClusterObjects and $clusterObjectsMap with it\n     * and then add the THREE.Group to the Scene\n     *\n     */\n    initEmptyMapAndFusion() {\n        if (this.fusionClusterObjects) {\n            this.threeScene.remove(this.fusionClusterObjects);\n            this.dispose();\n        }\n        if (State.cluster.clusterBy === null) {\n            return;\n        }\n        this.UUID2ClusterValueMap = new Map<string, string | number>();\n        let initialMap = new Map<string | number, THREE.Mesh>();\n        State.cluster.attributePoints.forEach((value, key) => {\n            initialMap.set(\n                key,\n                this.createMesh(new THREE.BufferGeometry(), key)\n            );\n        });\n\n        this.clusterObjectsMap = initialMap;\n        this.fusionClusterObjects = new THREE.Group();\n        initialMap.forEach((value) => {\n            this.fusionClusterObjects?.add(value);\n        });\n        this.threeScene.add(this.fusionClusterObjects);\n    }\n\n    /**\n     * should be called on each render frame\n     * will update the geometry inside each cluster object\n     *\n     * if is the first time (both are null), will run initEmptyMapAndFusion() first\n     *\n     * if meet with clusterBy == null, will dispose all Object3d\n     *\n     */\n    clusterDelegation() {\n        if (State.cluster.clusterBy === null) {\n            return;\n        } else {\n            if (\n                this.fusionClusterObjects == null ||\n                this.convexHullObjects == null\n            ) {\n                this.initEmptyMapAndFusion();\n            }\n            this.clusterObjectsMap?.forEach(\n                (mesh: THREE.Mesh, key: string | number) => {\n                    mesh.geometry.copy(this.convexHullObject(key));\n                }\n            );\n        }\n    }\n\n    getObjectById(uuid: string): THREE.Mesh | null {\n        let res: THREE.Object3D | null = null;\n        this.fusionClusterObjects?.children.every((item: THREE.Object3D) => {\n            if (item.uuid === uuid) {\n                res = item;\n                return false;\n            } else {\n                return true;\n            }\n        });\n        return res;\n    }\n\n    /**\n     * dispose the geometries and materials in every clusterObject\n     * and set these props to be null, which indicates that no additional 3d object is added into Scene\n     *\n     */\n    dispose() {\n        this.clusterObjectsMap?.forEach((mesh: THREE.Mesh) => {\n            let material = mesh.material as THREE.Material;\n            material.dispose();\n            mesh.geometry.dispose();\n        });\n        this.clusterObjectsMap = null;\n        this.fusionClusterObjects = null;\n        this.UUID2ClusterValueMap = new Map<string, string | number>();\n    }\n\n    /**\n     * the map between the value of the cluster and the BufferGeometry that this cluster created\n     *\n     * @readonly\n     * @type {(Map<string | number, THREE.Group>)}\n     */\n    get convexHullObjects(): Map<string | number, THREE.BufferGeometry> {\n        let newMap = new Map<string | number, THREE.BufferGeometry>();\n        State.cluster.attributePoints.forEach((value, key) => {\n            newMap.set(key, this.convexHullObject(key));\n        });\n        return newMap;\n    }\n\n    /**\n     * get the computed convexHull BufferGeometry of the specified attribute value\n     *\n     * @param {(string | number)} key\n     * @returns {*}  {THREE.BufferGeometry}\n     */\n    convexHullObject(key: string | number): THREE.BufferGeometry {\n        let points = State.cluster.attributePoints.get(key) as THREE.Vector3[];\n\n        if (!points || points.length === 0) {\n            return new THREE.BufferGeometry();\n        } else if (points.length === 1) {\n            let sphere = new SphereGeometry(\n                State.css.node.size + 5,\n                State.css.cluster.resolution,\n                State.css.cluster.resolution\n            );\n            sphere.translate(points[0].x, points[0].y, points[0].z);\n            return sphere;\n        } else if (points.length < 4) {\n            // there are 2 or 3 points in this cluster\n            let geometry = new THREE.BufferGeometry();\n            let tempArray: number[] = [];\n            points.forEach((vector) => {\n                tempArray.push(vector.x, vector.y, vector.z);\n            });\n            const positions = new Float32Array(tempArray);\n            geometry.setAttribute(\n                \"position\",\n                new THREE.BufferAttribute(positions, 3)\n            );\n            geometry.computeBoundingSphere();\n            let sphereGeo = geometry.boundingSphere as THREE.Sphere;\n            let sphere = new SphereGeometry(\n                sphereGeo.radius + 5,\n                State.css.cluster.resolution,\n                State.css.cluster.resolution\n            );\n            sphere.translate(\n                sphereGeo.center.x,\n                sphereGeo.center.y,\n                sphereGeo.center.z\n            );\n            return sphere;\n        } else {\n            if (State.css.cluster.shape === \"convexHull\") {\n                // when there are more than 3 points, simply gnerate a convexgeometry\n                return new ConvexGeometry(Array.from(points));\n            } else {\n                // State.css.clusterShape === \"Sphere\"\n                let convexGeometry = new ConvexGeometry(Array.from(points));\n                convexGeometry.computeBoundingSphere();\n                let sphereGeo = convexGeometry.boundingSphere as THREE.Sphere;\n                let sphere = new SphereGeometry(\n                    sphereGeo.radius + 5,\n                    State.css.cluster.resolution,\n                    State.css.cluster.resolution\n                );\n                sphere.translate(\n                    sphereGeo.center.x,\n                    sphereGeo.center.y,\n                    sphereGeo.center.z\n                );\n                return sphere;\n            }\n        }\n    }\n\n    /**\n     * create a Three.Group, which contains 2 Three.Mesh, of the input geometry\n     *\n     * @private\n     * @param {THREE.BufferGeometry} geom\n     * @param {(string | number)} name\n     * @returns {*}  {THREE.Group}\n     *\n     * @see THREE.Mesh\n     */\n    private createMesh(\n        geom: THREE.BufferGeometry,\n        name: string | number\n    ): THREE.Mesh {\n        const meshMaterial = new THREE.MeshBasicMaterial({\n            color: State.cluster.attributeColor.get(name),\n            transparent: true,\n            opacity: 0.15,\n        });\n        meshMaterial.side = THREE.DoubleSide; //\n        meshMaterial.depthWrite = false;\n\n        let mesh = new THREE.Mesh(geom, meshMaterial);\n        this.UUID2ClusterValueMap.set(mesh.uuid, name);\n        mesh.name = \"THREE_CLUSTER_\" + name;\n        return mesh;\n    }\n\n    UUID2ClusterValueMap!: Map<string, string | number>;\n\n    meshSpotlightMaterial(mesh: THREE.Mesh) {\n        let material = mesh.material as THREE.Material;\n        const oldOpacity = material.opacity;\n        material.opacity = 0.7;\n        setTimeout(() => {\n            material.opacity = oldOpacity;\n        }, 100);\n    }\n\n    private static meshHighlightMaterial(mesh: THREE.Mesh) {\n        let material = mesh.material as THREE.Material;\n        material.opacity = 0.5;\n    }\n\n    private static meshSelectedMaterial(mesh: THREE.Mesh) {\n        let material = mesh.material as THREE.Material;\n        material.opacity = 0.3;\n    }\n\n    private static meshNormalMaterial(mesh: THREE.Mesh) {\n        let material = mesh.material as THREE.Material;\n        material.opacity = 0.15;\n    }\n\n    updateAllMaterials() {\n        this.fusionClusterObjects?.children.forEach((_object) => {\n            let mesh = _object as THREE.Mesh;\n            const meshId = mesh.uuid;\n            if (State.clusterInteraction.currentlyHoveredClusterId === meshId) {\n                Cluster3dObjectStore.meshHighlightMaterial(mesh);\n                return;\n            } else if (\n                State.clusterInteraction.selectedClusters.includes(meshId)\n            ) {\n                Cluster3dObjectStore.meshSelectedMaterial(mesh);\n                return;\n            } else {\n                Cluster3dObjectStore.meshNormalMaterial(mesh);\n            }\n        });\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport State from \".\";\nimport { ForceGraphMethods, LinkObject, NodeObject } from \"react-force-graph-3d\";\nimport Cluster3dObjectStore from \"./Cluster3dObjectStore\";\n\n/**\n * hovered: false, selected: false: DefaultColor;\n * hovered: false, selected: true: SelectedColor;\n * hovered: true, selected: false: HighlightColor;\n * hovered: true, selected: true: HighlightColor;\n *\n *\n * @interface ICustomNodeObject\n * @extends {NodeObject}\n */\nexport interface ICustomNodeObject extends NodeObject {\n    hovered: boolean;\n    selected: boolean;\n    multiSelected: boolean;\n    isClusterNode?: boolean;\n}\n/**\n * hovered: false, selected: false: DefaultColor;\n * hovered: false, selected: true: SelectedColor;\n * hovered: true, selected: false: HighlightColor;\n * hovered: true, selected: true: HighlightColor;\n *\n *\n * @interface ICustomLinkObject\n * @extends {LinkObject}\n */\nexport interface ICustomLinkObject extends LinkObject {\n    hovered: boolean;\n    selected: boolean;\n    isClusterLink?: boolean;\n}\n\nexport function createCustomNodeObject(\n    _id: string,\n    _cluster: boolean = false\n): ICustomNodeObject {\n    return {\n        id: _id,\n        hovered: false,\n        selected: false,\n        multiSelected: false,\n        isClusterNode: _cluster,\n    };\n}\n\nexport function createCustomLinkObject(\n    _source: string,\n    _target: string,\n    _cluster: boolean = false\n): ICustomLinkObject {\n    return {\n        source: _source,\n        target: _target,\n        hovered: false,\n        selected: false,\n        isClusterLink: _cluster,\n    };\n}\n\nexport default class GraphDelegate {\n    constructor() {\n        makeAutoObservable(this);\n        this.clusterObject = new Cluster3dObjectStore();\n    }\n\n    /**\n     * assign the force-graph methods to this class\n     * should be called as long as the visualizer react component is mounted\n     *\n     * @param {ForceGraphMethods} _graphDelegateMethods\n     */\n    mountDelegateMethods(_graphDelegateMethods: ForceGraphMethods) {\n        this.graphDelegateMethods = _graphDelegateMethods;\n        this.clusterObject.threeScene = this.graphDelegateMethods.scene();\n    }\n\n    /**\n     * the ForceGraphMethods exposed by the visualization force-graph\n     *\n     * @see ForceGraphMethods\n     *\n     * @type {ForceGraphMethods}\n     */\n    graphDelegateMethods!: ForceGraphMethods;\n\n    /**\n     * compute the delegate graph that will be used by the ForceGraph3D\n     * will add invisible cluster nodes and edges to balance the clustered graph and adjust force\n     * the NodeObject and LinkObject inside attributes (named _visualize) will be used.\n     *\n     * nodes and edges with the show=false will be ignored in this case\n     *\n     */\n\n    visualizationGraph() {\n        let newGraph: Graph;\n        if (State.cluster.clusterBy === null) {\n            newGraph = State.graph.rawGraph;\n        } else {\n            newGraph = this.addInvisibleClusterNode(\n                State.graph.decorateRawGraph(State.graph.rawGraph)\n            );\n        }\n        let tempGraph = {\n            nodes: [] as ICustomLinkObject[],\n            links: [] as ICustomLinkObject[],\n        };\n        newGraph.forEachNode((node, attributes) => {\n            tempGraph.nodes.push(attributes[\"_visualize\"]);\n        });\n\n        newGraph.forEachEdge((edge, attributes) => {\n            tempGraph.links.push(attributes[\"_visualize\"]);\n        });\n        return tempGraph;\n    }\n\n    /**\n     * return a new graph that contains the invisible clusters, formed as nodes\n     * as well as the edges that connected to the cluster node to simulate the force within the same cluster\n     * the new graph is a deep copy of the old node, so no worries of the original graph DS\n     *\n     * @private\n     * @param {Graph} oldGraph\n     * @returns {*}  {Graph}\n     */\n    private addInvisibleClusterNode(oldGraph: Graph): Graph {\n        let graphCopy = oldGraph.copy();\n        let names = [\n            \"_CLUSTER_1_\",\n            \"_CLUSTER_2_\",\n            \"_CLUSTER_3_\",\n            \"_CLUSTER_4_\",\n            \"_CLUSTER_5_\",\n            \"_CLUSTER_6_\",\n            \"_CLUSTER_7_\",\n            \"_CLUSTER_8_\",\n            \"_CLUSTER_9_\",\n            \"_CLUSTER_10_\",\n        ];\n        for (let index = 0; index < names.length; index++) {\n            State.cluster.getAttributeValues.forEach(\n                (attribute: string | number) => {\n                    // if a node does not belong to any cluster, a undefined will be formed with no cluster to generate\n                    if (attribute === \"undefined\") return;\n\n                    let clusterID = names[index] + attribute;\n                    graphCopy.addNode(clusterID, {\n                        _visualize: createCustomNodeObject(clusterID, true),\n                    });\n\n                    // add edges to simulate the force of the same cluster\n                    State.cluster.attributeKeys\n                        .get(attribute)\n                        ?.forEach((target) => {\n                            graphCopy.addEdgeWithKey(\n                                `${clusterID}-${target}`,\n                                clusterID,\n                                target,\n                                {\n                                    _visualize: createCustomLinkObject(\n                                        clusterID,\n                                        target,\n                                        true\n                                    ),\n                                }\n                            );\n                        });\n                }\n            );\n        }\n\n        return graphCopy;\n    }\n\n    /**\n     * determine whether this Node is the cluster delegate node\n     *\n     * @param {NodeObject} nodeObject\n     */\n    nodeVisibility(nodeObject: NodeObject) {\n        let node = nodeObject as ICustomNodeObject;\n        return !node.isClusterNode;\n    };\n\n    /**\n     * determine whether this edge is the cluster delegate edge\n     *\n     * @param {LinkObject} linkObject\n     */\n    linkVisibility (linkObject: LinkObject) {\n        let link = linkObject as ICustomLinkObject;\n        return !link.isClusterLink;\n    };\n\n    ////\n\n    clusterObject: Cluster3dObjectStore;\n\n    ////\n\n    /**\n     * this will re-position the camera to focus on the specified node\n     * if distance not specified, a default of 40 will be used\n     *\n     * @param {string} nodeId the node to be focused\n     * @param {number} [distance=40] the ending distance between the camera and the node\n     * @returns {*}\n     */\n    cameraFocusOn(nodeId: string, distance: number = 40) {\n        let node = State.graph.rawGraph.getNodeAttribute(nodeId, \"_visualize\");\n        if (!(node.x && node.y && node.z)) return;\n        // Aim at node from outside it\n        const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);\n\n        this.graphDelegateMethods.cameraPosition(\n            {\n                x: node.x * distRatio,\n                y: node.y * distRatio,\n                z: node.z * distRatio,\n            }, // new position\n            { x: node.x, y: node.y, z: node.z }, // lookAt ({ x, y, z })\n            3000 // ms transition duration\n        );\n    }\n\n    ////\n\n    /**\n     * set the force inside each cluster in the ForceGraph\n     *\n     */\n    updateClusterForce() {\n        this.graphDelegateMethods\n            ?.d3Force(\"link\")\n            //@ts-ignore\n            ?.distance((link: CustomLinkObject) => {\n                return link.isClusterLink\n                    ? State.css.cluster.clusterForce\n                    : State.css.cluster.normalForce;\n            });\n        this.graphDelegateMethods.d3ReheatSimulation();\n    }\n}\n","import { makeAutoObservable, reaction } from \"mobx\";\nimport State from \"../state\";\n\nclass ComponentRef {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    static _instance: ComponentRef | null = null;\n\n    nodeDetail!: React.Component | any;\n\n    multiNodeDetail!: React.Component | any;\n\n    visualizer!: React.Component | any;\n\n    canvasDrawPanel!: React.Component | any;\n\n    canvasDrawStraightLinePanel!: React.Component | any;\n\n    clusterSplittingPanelStack!: React.Component | any;\n\n    // add singleton to prevent creating multiple instances of the State class\n    static get instance() {\n        if (ComponentRef._instance === null) {\n            let instance = new ComponentRef();\n            ComponentRef._instance = instance;\n            return instance;\n        } else {\n            return ComponentRef._instance;\n        }\n    }\n}\n\nreaction(\n    () => State.interaction.currentlyHoveredNodeId,\n    () => ComponentRef.instance.nodeDetail?.forceUpdate()\n);\n\nexport default ComponentRef.instance;\n","import { Attributes, EdgeKey, NodeKey } from \"graphology-types\";\nimport { makeAutoObservable } from \"mobx\";\nimport State from \".\";\nimport GraphStore from \"./GraphStore\";\n\n/**\n * the wrapper mutating function that relates to the mutation of the rawGraph DS\n * all the mutation of the Graph should all go through this API rather than calling on rawGraph directly.\n *\n * @export\n * @class GraphMutation\n */\nexport default class GraphMutation {\n    constructor(_this: GraphStore) {\n        makeAutoObservable(this);\n        this.that = _this;\n    }\n\n    private that!: GraphStore;\n\n    /**\n     * add the node with this attribute to the Graph and refresh the 3d Graph\n     * if not specify attributes._visualize , then will add it into the attributes before adding to Graph\n     *\n     * @param {NodeKey} node\n     * @param {Attributes} [attributes]\n     */\n    public addNode(node: NodeKey, attributes?: Attributes): void {\n        let newAttributes: Attributes;\n        if (!attributes) {\n            newAttributes = {};\n            State.graph.decorateRawNode(node as string, newAttributes);\n        } else if (!attributes.hasOwnProperty(\"_visualize\")) {\n            newAttributes = attributes;\n            State.graph.decorateRawNode(node as string, newAttributes);\n        } else {\n            newAttributes = attributes;\n        }\n        this.that.rawGraph.addNode(node, newAttributes);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * delete the node with this nodeId in the Graph and refresh the 3d Graph\n     *\n     * @param {string} nodeId\n     */\n    public dropNode(nodeId: string): void {\n        this.that.rawGraph.dropNode(nodeId);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * add the edge with this attribute to the Graph and refresh the 3d Graph\n     * if not specify attributes._visualize , then will add it into the attributes before adding to Graph\n     *\n     * @param {NodeKey} source\n     * @param {NodeKey} target\n     * @param {Attributes} [attributes]\n     */\n    public addEdge(\n        source: NodeKey,\n        target: NodeKey,\n        attributes?: Attributes\n    ): void {\n        let newAttributes: Attributes;\n        if (!attributes) {\n            newAttributes = {};\n            State.graph.decorateRawEdge(\n                source as string,\n                target as string,\n                newAttributes\n            );\n        } else if (!attributes.hasOwnProperty(\"_visualize\")) {\n            newAttributes = attributes;\n            State.graph.decorateRawEdge(\n                source as string,\n                target as string,\n                newAttributes\n            );\n        } else {\n            newAttributes = attributes;\n        }\n        this.that.rawGraph.addEdge(source, target, newAttributes);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * delete the edge with this key in the Graph and refresh the 3d Graph\n     *\n     * @param {EdgeKey} edge\n     */\n    public dropEdge(edge: EdgeKey): void {\n        this.that.rawGraph.dropEdge(edge);\n        this.that.refreshGraph();\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport { Attributes } from \"graphology-types\";\nimport {\n    createCustomNodeObject,\n    createCustomLinkObject,\n} from \"./GraphDelegate\";\nimport ComponentRef from \"../components/ComponentRef\";\nimport State from \".\";\nimport GraphMutation from \"./GraphMutation\";\n\nexport interface IMetaData {\n    snapshotName: string;\n\n    // attributes of nodes in imported graph\n    nodeProperties: string[];\n}\n\n/**\n * the class to store a raw graph as well as the related information\n \n * @export\n * @class GraphStore\n */\nexport default class GraphStore {\n    constructor() {\n        makeAutoObservable(this);\n        this.mutating = new GraphMutation(this);\n    }\n\n    /**\n     * the graphology data structure to store a graph.\n     * has a lot of APIs to manipulate as well as iterate through the graph\n     *\n     * @see graphology\n     *\n     * @type {Graph}\n     */\n    rawGraph: Graph = new Graph({\n        allowSelfLoops: true,\n        multi: false,\n        type: \"undirected\",\n    });\n\n    /**\n     * should be called when individual nodes are added to the graph.\n\n     * add the CustomNodeObject to node attributes stored in the data structure\n     * @see CustomNodeObject\n     * name as @code _visualize in attributes\n     *\n     * @param {string} node\n     * @param {Attributes} attributes\n     */\n    decorateRawNode(node: string, attributes: Attributes) {\n        attributes._visualize = createCustomNodeObject(node, false);\n    }\n\n    /**\n     * used in \"cluster node\" in rightclick panel\n     */\n    numberOfClusters: number = 0;\n\n    /**\n     * should be called when individual edges are added to the graph.\n     *\n     * add the CustomLinkObject to node attributes stored in the data structure\n     * @see CustomLinkObject\n     * name as @code _visualize in attributes\n     *\n     * @param {string} source\n     * @param {string} target\n     * @param {Attributes} attributes\n     */\n    decorateRawEdge(source: string, target: string, attributes: Attributes) {\n        attributes._visualize = createCustomLinkObject(source, target, false);\n    }\n\n    /**\n     * should be called on every graph import\n     * add the the _visualize to every links inside the specified graph\n     *\n     * the _visualize is for storing the object to be send to front-end to render the graph\n     *\n     * @param {Graph} _rawGraph\n     * @return {*}  {Graph}\n     */\n    decorateRawGraph(_rawGraph: Graph): Graph {\n        _rawGraph.forEachNode((node, attributes) =>\n            this.decorateRawNode(node, attributes)\n        );\n\n        _rawGraph.forEachEdge((edge, attributes, source, target) =>\n            this.decorateRawEdge(source, target, attributes)\n        );\n        return _rawGraph;\n    }\n\n    /**\n     * proxy method to set the new graph\n     * if intend to set a new graph, please use this method instead of directly modify GraphStore\n     *\n     * @param {Graph} _rawGraph\n     * @param {IMetaData} _metadata\n     */\n    public setGraph(_rawGraph: Graph, _metadata: IMetaData | null = null) {\n        this.rawGraph = this.decorateRawGraph(_rawGraph);\n        if (_metadata) {\n            this.metadata = _metadata;\n        }\n        State.interaction.flush();\n        State.cluster.clusterBy = null;\n        ComponentRef.visualizer.updateVisualizationGraph();\n    }\n\n    /**\n     * should be called when the graph gets updated (the data inside the graph gets updated, or the attribute to be clustered has changed)\n     *\n     * @memberof GraphStore\n     */\n    public refreshGraph() {\n        State.interaction.flush();\n        ComponentRef.visualizer.updateVisualizationGraph();\n    }\n\n    /**\n     * the wrapper methods to mutate the graph\n     * all the mutations of the graph should go through this API rather than calling this.rawGraph.[mutate]\n     *\n     * has basic functions like addNode, dropNode, addEdge, dropEdge...\n     *\n     * @see {GraphMutation}\n     */\n    mutating: GraphMutation;\n\n    /**\n     * the metadata related to the raw graph\n     * should be updated if a new graph is imported\n     *\n     */\n    metadata: IMetaData = {\n        snapshotName: \"SNAPSHOT\",\n        nodeProperties: [],\n    };\n}\n","import { Intent, Position, Toaster } from \"@blueprintjs/core\";\nimport { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport gexf from \"graphology-gexf\";\nimport parse from \"csv-parse/lib/sync\";\nimport { IMetaData } from \"./GraphStore\";\n\nexport interface INodeFileConfig {\n    // the file is successfully parsed and ready for display\n    isReady: boolean;\n    parseError: boolean;\n    path: string;\n\n    // has header at the top\n    hasHeader: boolean;\n\n    // Get top 20 lines. Or if there's less than 10 line, get all the lines.\n    topN: any[];\n    //names for the columns of this csv\n    columns: string[];\n    mapping: {\n        id: string;\n    };\n    delimiter: string;\n}\n\nexport interface IEdgeFileConfig {\n    isReady: boolean;\n    parseError: boolean;\n\n    // should save the csv to temp for further change the cluster attribute\n    path: string;\n    hasHeader: boolean;\n\n    // array of objects storing the\n    topN: any[];\n    columns: string[];\n    mapping: {\n        fromId: string;\n        toId: string;\n    };\n    delimiter: string;\n}\n\n/**\n * @description this class defines some necessary configs for the graph-importing procedures\n * such as the `INodeFileConfig` and `IEdgeFileConfig` for customizing the csv/gexf file parsing procedure\n * Other functions like `renderImportNode/EdgePreview` renders the preview table in the ImportDialog\n * and `importGraphFromCSV/GEXF` reads the file input and produce the `graphology` object to be assigned to `GraphStore`\n * with some basic error handling strategies\n * These functions are designed to be synchronized to prevent frozen of UI.\n * @author Zichen XU\n * @export\n * @class ImportStore\n */\nexport default class ImportStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    // whether the graph is in importing\n    isLoading = false;\n    //name of the edge file\n    edgeFileName = \"Choose Edge File ...\";\n\n    //name of the node file\n    nodeFileName = \"Choose Node File ...\";\n\n    //name of the GEXF file\n    gexfFileName = \"Choose GEXF File ...\";\n\n    importDialogOpen = false;\n\n    importGEXFDialogOpen = false;\n\n    // specific: File object selected via the file input.\n    selectedEdgeFileFromInput!: File;\n    selectedNodeFileFromInput!: File;\n\n    selectedGEXFFileFromInput!: File;\n\n    importConfig = {\n        hasNodeFile: false,\n        nodeFile: {\n            // the file is successfully parsed and ready for display\n            isReady: false,\n            parseError: false,\n            path: \"\",\n\n            // has header at the top\n            hasHeader: true,\n\n            // Get top 20 lines. Or if there's less than 10 line, get all the lines.\n            topN: [],\n            //names for the columns of this csv\n            columns: [],\n            mapping: {\n                id: \"Unknown\",\n            },\n            delimiter: \",\",\n        } as INodeFileConfig,\n        edgeFile: {\n            isReady: false,\n            parseError: false,\n\n            // should save the csv to temp for further change the cluster attribute\n            path: \"\",\n            hasHeader: true,\n\n            // array of objects storing the\n            topN: [],\n            columns: [],\n            mapping: {\n                fromId: \"Unknown\",\n                toId: \"Unknown\",\n            },\n            delimiter: \",\",\n        } as IEdgeFileConfig,\n    };\n\n    /**\n     * read the CSV file specified by fileObject, with options defined by other paras\n     * and return a list of objects containing the key-value pair of attribute-value\n     *\n     * @param {File} fileObject\n     * @param {boolean} hasHeader\n     * @param {string} delimiter\n     * @return {*}  {Promise<Object[]>}\n     * where Object is of { attribute: number | string, anotherAttribute: number | string, ... } type\n     */\n    private async readCSV(\n        fileObject: File,\n        hasHeader: boolean,\n        delimiter: string\n    ): Promise<any[]> {\n        const file = fileObject;\n        const reader = new FileReader();\n        reader.readAsText(file);\n        return new Promise((resolve, reject) => {\n            reader.onload = () => {\n                let content: any = reader.result;\n                content = content.replace(/\\r\\n/g, \"\\n\");\n                content = content.replace(/\\r/g, \"\\n\");\n                try {\n                    if (hasHeader) {\n                        resolve(\n                            parse(content, {\n                                comment: \"#\",\n                                trim: true,\n                                auto_parse: true,\n                                skip_empty_lines: true,\n                                columns: hasHeader,\n                                delimiter,\n                            })\n                        );\n                    }\n                    resolve(\n                        parse(content, {\n                            comment: \"#\",\n                            trim: true,\n                            auto_parse: true,\n                            skip_empty_lines: true,\n                            columns: undefined,\n                            delimiter,\n                        })\n                    );\n                } catch (err) {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: \" + err.message,\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                }\n            };\n        });\n    }\n\n    /**\n     * parse the graph from import GEXF file specified in selectedGEXFFileFromInput\n     * and return a Graph object\n     *\n     * @private\n     * @return {*}  {Promise<Graph>}\n     */\n    private async readGEXF(): Promise<Graph> {\n        const file = this.selectedGEXFFileFromInput;\n        const reader = new FileReader();\n        reader.readAsText(file);\n        return new Promise((resolve, reject) => {\n            reader.onload = () => {\n                try {\n                    resolve(gexf.parse(Graph, reader.result as string));\n                } catch (err) {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: \" + err.message,\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    this.isLoading = false;\n                }\n            };\n        });\n    }\n\n    public readEdgeCSV(): Promise<any[]> {\n        return this.readCSV(\n            this.selectedEdgeFileFromInput,\n            this.importConfig.edgeFile.hasHeader,\n            this.importConfig.edgeFile.delimiter\n        );\n    }\n\n    public readNodeCSV(): Promise<any[]> {\n        return this.readCSV(\n            this.selectedNodeFileFromInput,\n            this.importConfig.nodeFile.hasHeader,\n            this.importConfig.nodeFile.delimiter\n        );\n    }\n\n    /**\n     * will create a Graph structure to store the nodes and edges in the imported File\n     * should handle whether or not have the NodeFile, whether or not have the header of each file\n     * if successfully imported, change the .isReady to be true\n     *\n     * @return {*}\n     */\n    public async importGraphFromCSV() {\n        const config = this.importConfig;\n\n        // the CSV lib we use uses int index when there's not header/column names specified\n        const fromColumn = config.edgeFile.hasHeader\n            ? config.edgeFile.mapping.fromId\n            : parseInt(config.edgeFile.mapping.fromId);\n        const toColumn = config.edgeFile.hasHeader\n            ? config.edgeFile.mapping.toId\n            : parseInt(config.edgeFile.mapping.toId);\n\n        let tempNodes: any[] = [];\n        let tempEdges: any[] = [];\n\n        const graph = new Graph({\n            allowSelfLoops: true,\n            multi: true,\n            type: \"undirected\",\n        });\n\n        // parse Node file and store into the Graph DS\n        if (config.hasNodeFile) {\n            if (this.importConfig.nodeFile.hasHeader) {\n                // if has header, then tempNodes returns an array of objects\n                tempNodes = (await this.readNodeCSV()) as Object[];\n                tempNodes.forEach((node) => {\n                    let nodeId = node[config.nodeFile.mapping.id].toString();\n                    delete node[config.nodeFile.mapping.id];\n                    graph.addNode(nodeId, node);\n                });\n            } else {\n                // if no header, then tempNodes returns an array of array\n                tempNodes = (await this.readNodeCSV()) as any[][];\n                tempNodes.forEach((node) => {\n                    let nodeId = node[config.nodeFile.mapping.id].toString();\n                    let attributes = Object.assign({}, node);\n                    delete attributes[config.nodeFile.mapping.id];\n                    graph.addNode(nodeId, attributes);\n                });\n            }\n        }\n\n        // parse Edge file and store into the Graph DS\n        tempEdges = await this.readEdgeCSV();\n        tempEdges.forEach((edge, idx) => {\n            let fromId = edge[fromColumn].toString();\n            let toId = edge[toColumn].toString();\n\n            if (!graph.hasNode(fromId)) {\n                graph.addNode(fromId, {});\n            }\n            if (!graph.hasNode(toId)) {\n                graph.addNode(toId, {});\n            }\n            graph.addEdgeWithKey(idx, fromId, toId);\n        });\n\n        config.edgeFile.isReady = true;\n\n        let nodeProperties = config.hasNodeFile\n            ? Object.keys(tempNodes[0])\n            : [\"id\"];\n\n        return {\n            graph: graph,\n            metadata: {\n                snapshotName: \"Untitled\",\n                nodeProperties: nodeProperties,\n            } as IMetaData,\n        };\n    }\n\n    public async importGraphFromGEXF() {\n        let graph = await this.readGEXF();\n        let nodeProperties: string[] = [];\n        for (const [key] of Object.entries(\n            graph.getNodeAttributes(graph.nodes()[0])\n        )) {\n            nodeProperties.push(key);\n        }\n\n        return {\n            graph: graph,\n            metadata: {\n                snapshotName: \"Untitled\",\n                nodeProperties: nodeProperties,\n            } as IMetaData,\n        };\n    }\n\n    /**\n     * change the importConfig.edgeFile.topN to be the top 10 parsed elements in the input edge file\n     * change the importConfig.edgeFile.columns to be the attributes of the imported edge file\n     * set the .mapping.fromId and .mapping.toId to be the first and second (if have) attribute of the input edge file.\n     *\n     * if successfully parsed, set the .isReady to be true, else set the.parseError\n     *\n     * This function will autorun if user specify the selectedEdgeFileFromInput and the changes that this function will make is to get ready for the rendering of preview Table in the ImportDialog\n     *\n     * @return {*}\n     */\n    public async renderImportEdgePreview() {\n        let file = this.selectedEdgeFileFromInput;\n        let edgeFileConfig = this.importConfig.edgeFile;\n        let hasHeader = edgeFileConfig.hasHeader;\n        let delimiter = edgeFileConfig.delimiter;\n\n        edgeFileConfig.parseError = false;\n\n        return new Promise<void>((resolve, reject): void => {\n            if (!file) {\n                return;\n            }\n            const reader = new FileReader();\n            reader.readAsText(file);\n\n            reader.onload = () => {\n                // Read entire CSV into memory as string\n                let fileAsString = reader.result as string;\n\n                // if the file is not regularly formatted, replace the EOL character\n                fileAsString = fileAsString.replace(/\\r\\n/g, \"\\n\");\n                fileAsString = fileAsString.replace(/\\r/g, \"\\n\");\n\n                // Get top 10 lines. Or if there's less than 10 line, get all the lines.\n                const lines = fileAsString.split(\"\\n\");\n                const topLinesAsString = lines\n                    .map((l) => l.trim())\n                    .slice(0, lines.length < 10 ? lines.length : 10)\n                    .join(\"\\n\");\n                console.log(topLinesAsString);\n\n                // Parse the top lines\n                try {\n                    const it = hasHeader\n                        ? parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: hasHeader,\n                              delimiter: delimiter,\n                          })\n                        : parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: undefined,\n                              delimiter: delimiter,\n                          });\n                    edgeFileConfig.topN = it;\n                    edgeFileConfig.columns = Object.keys(it[0]).map(\n                        (key) => `${key}`\n                    );\n\n                    // if there exists two or more columns in the parsed edge file\n                    if (edgeFileConfig.columns.length >= 2) {\n                        edgeFileConfig.mapping.fromId =\n                            edgeFileConfig.columns[0];\n                        edgeFileConfig.mapping.toId = edgeFileConfig.columns[1];\n                        edgeFileConfig.isReady = true;\n                    } else if (edgeFileConfig.columns.length === 1) {\n                        edgeFileConfig.mapping.fromId = edgeFileConfig.mapping.toId =\n                            edgeFileConfig.columns[0];\n                        edgeFileConfig.isReady = true;\n                    } else {\n                        Toaster.create({\n                            position: Position.TOP,\n                        }).show({\n                            message: \"Error: Fails to parse file\",\n                            intent: Intent.DANGER,\n                            timeout: -1,\n                        });\n                        edgeFileConfig.parseError = true;\n                    }\n                    resolve();\n                } catch {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: Fails to parse file\",\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    edgeFileConfig.parseError = true;\n                    reject();\n                }\n            };\n\n            reader.onerror = () => {\n                console.error(reader.error);\n                Toaster.create({\n                    position: Position.TOP,\n                }).show({\n                    action: {\n                        onClick: () => window.location.reload(),\n                        text: \"Refresh Page\",\n                    },\n                    message: \"Error: Fails to open file\",\n                    intent: Intent.DANGER,\n                    timeout: -1,\n                });\n                reject();\n            };\n        });\n    }\n\n    /**\n     * change the importConfig.nodeFile.topN to be the top 10 parsed elements in the input node file\n     * change the importConfig.nodeFile.columns to be the attributes of the imported node file\n     * set the .mapping.id .mapping.cluster to be the first and second (if have) attribute of the input edge file.\n     *\n     * if successfully parsed, set the .isReady to be true, else set the.parseError\n     *\n     * This function will autorun if user specify the selectedNodeFileFromInput and the changes that this function will make is to get ready for the rendering of preview Table in the ImportDialog\n     *\n     * @return {*}\n     */\n    public async renderImportNodePreview() {\n        let file = this.selectedNodeFileFromInput;\n        let nodeFileConfig = this.importConfig.nodeFile;\n        let hasHeader = nodeFileConfig.hasHeader;\n        let delimiter = nodeFileConfig.delimiter;\n\n        nodeFileConfig.parseError = false;\n\n        return new Promise<void>((resolve, reject): void => {\n            if (!file) {\n                return;\n            }\n            const reader = new FileReader();\n            reader.readAsText(file);\n\n            reader.onload = () => {\n                // Read entire CSV into memory as string\n                let fileAsString = reader.result as string;\n\n                // if the file is not regularly formatted, replace the EOL character\n                fileAsString = fileAsString.replace(/\\r\\n/g, \"\\n\");\n                fileAsString = fileAsString.replace(/\\r/g, \"\\n\");\n\n                // Get top 10 lines. Or if there's less than 10 line, get all the lines.\n                const lines = fileAsString.split(\"\\n\");\n                const topLinesAsString = lines\n                    .map((l) => l.trim())\n                    .slice(0, lines.length < 10 ? lines.length : 10)\n                    .join(\"\\n\");\n                console.log(topLinesAsString);\n\n                // Parse the top lines\n                try {\n                    const it = hasHeader\n                        ? parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: hasHeader,\n                              delimiter,\n                          })\n                        : parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: undefined,\n                              delimiter,\n                          });\n                    nodeFileConfig.topN = it;\n                    nodeFileConfig.columns = Object.keys(it[0]).map(\n                        (key) => `${key}`\n                    );\n\n                    // if there exists two or more columns in the parsed edge file\n                    if (nodeFileConfig.columns.length >= 1) {\n                        nodeFileConfig.mapping.id = nodeFileConfig.columns[0];\n                        nodeFileConfig.isReady = true;\n                    } else {\n                        Toaster.create({\n                            position: Position.TOP,\n                        }).show({\n                            message: \"Error: Fails to parse file\",\n                            intent: Intent.DANGER,\n                            timeout: -1,\n                        });\n                        nodeFileConfig.parseError = true;\n                    }\n                    resolve();\n                } catch {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: Fails to parse file\",\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    nodeFileConfig.parseError = true;\n                    reject();\n                }\n            };\n\n            reader.onerror = () => {\n                console.error(reader.error);\n                Toaster.create({\n                    position: Position.TOP,\n                }).show({\n                    action: {\n                        onClick: () => window.location.reload(),\n                        text: \"Refresh Page\",\n                    },\n                    message: \"Error: Fails to open file\",\n                    intent: Intent.DANGER,\n                    timeout: -1,\n                });\n                reject();\n            };\n        });\n    }\n}\n","import Graph from \"graphology\";\nimport { makeAutoObservable, observable } from \"mobx\";\n\n/**\n * @description this file is the backend support for the NodeSearch feature\n * and will compute the possible searching candidates according to the query parameters\n * @author Zichen XU\n * @export\n * @class SearchStore\n */\nexport default class SearchStore {\n    constructor() {\n        makeAutoObservable(this, {\n            rawGraph: observable.ref,\n        });\n    }\n\n    //\n    /**\n     * @description if is previewing, ignore all mouse hovers detected by NodeDetailPanel\n     * because it is showing the detail of selected node\n     * @author Zichen XU\n     */\n    isPreviewing = false;\n\n    /**\n     * @description the search string typed in by user\n     * can use defined regex like:\n     * id:123\n     * attr:color:red\n     * @author Zichen XU\n     */\n    searchStr = \"\";\n\n    /**\n     * @description if filter search is selected\n     * null will be to search on id, and others will be to search based on that attribute value\n     * @author Zichen XU\n     * @type {(string | null)}\n     */\n    filterProps: string | null = null;\n\n    /**\n     * @observable .ref\n     * the reference bounded to the GraphStore/rawGraph\n     *\n     * @type {Graph}\n     */\n    rawGraph!: Graph;\n\n    // contains node ids\n\n    /**\n     * @description compute a list of nodeids queried by the searchStr\n     * @author Zichen XU\n     * @type {string[]}\n     */\n    get candidates(): string[] {\n        let outputList: string[] = [];\n        let searchStrIgnoreCase = this.searchStr.toLocaleLowerCase();\n        if (this.filterProps === null) {\n            // search on id\n            this.rawGraph.forEachNode((node) => {\n                if (node.toLocaleLowerCase().includes(searchStrIgnoreCase)) {\n                    outputList.push(node);\n                }\n            });\n        } else {\n            // have specify the attribute\n            const searchAttr = this.filterProps as string;\n            this.rawGraph.forEachNode((node, attributes) => {\n                if (\n                    attributes.hasOwnProperty(searchAttr) &&\n                    (attributes[searchAttr] as string)\n                        .toLocaleLowerCase()\n                        .includes(searchStrIgnoreCase)\n                ) {\n                    outputList.push(node);\n                }\n            });\n        }\n        return outputList;\n    }\n}\n","import { makeAutoObservable, observable } from \"mobx\";\nimport Graph from \"graphology\";\nimport * as THREE from \"three\";\nimport randomcolor from \"randomcolor\";\nimport State from \".\";\n\n/**\n * all the computed values get from the rawGraph\n *\n * @export\n * @class ClusterStore\n */\nexport default class ClusterStore {\n    constructor() {\n        makeAutoObservable(this, {\n            rawGraph: observable.ref,\n        });\n    }\n    /**\n     * @observable\n     *\n     * attention: please use setCluster() to alter this data\n     * Specify which attribute to be clustered\n     * the default value should be null, and front-end graph will interpret this to Not-Cluster\n     *\n     *\n     */\n    clusterBy: string | null = null;\n\n    /**\n     * the setter of clusterBy\n     * will update the front-end 3d graph about the cluster changes\n     *\n     * @param {string | null} to\n     * @param {boolean = false} forceUpdate\n     */\n    setCluster(to: string | null, forceUpdate: boolean = false) {\n        if (forceUpdate) {\n            this.setCluster(null);\n            this.setCluster(to);\n        } else {\n            this.clusterBy = to;\n            State.graphDelegate.clusterObject.initEmptyMapAndFusion();\n            State.graph.refreshGraph();\n            State.graph.rawGraph.setAttribute(\"default\", to);\n        }\n    }\n\n    /**\n     * @observable .ref\n     * the reference bounded to the GraphStore/rawGraph\n     *\n     * @type {Graph}\n     */\n    rawGraph!: Graph;\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the id of a Node -> the value of the attribute specified by $clusterBy]\n     *\n     * @readonly\n     * @type {(Map<string, string | number>)}\n     */\n    get keyAttribute(): Map<string, string | number> {\n        const keyValueMap = new Map<string, string | number>();\n        if (this.clusterBy === null) {\n            return keyValueMap;\n        }\n        const attribute = this.clusterBy as string;\n\n        this.rawGraph?.forEachNode((key, attributes) => {\n            // if this attribute is defined\n            if (attributes.hasOwnProperty(attribute)) {\n                if (attributes[attribute] === \"\") {\n                    // ignore those which empty attribute\n                } else {\n                    keyValueMap.set(key, attributes[attribute]);\n                }\n            } else {\n                // this attribute is undefined in this node\n            }\n        });\n        return keyValueMap;\n    }\n\n    /**\n     * the possible attribute values of the attribute defined by $clusterBy\n     *\n     * @readonly\n     * @type {((string | number)[])}\n     */\n    get getAttributeValues(): (string | number)[] {\n        return Array.from(new Set(this.keyAttribute.values()));\n    }\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> a list of Node ids]\n     *\n     * @readonly\n     * @type {(Map<string | number, string[]>)}\n     */\n    get attributeKeys(): Map<string | number, string[]> {\n        const attributeKeysMap = new Map<string | number, string[]>();\n        this.getAttributeValues.forEach((value) => {\n            attributeKeysMap.set(value, []);\n        });\n        this.keyAttribute.forEach((value, key) => {\n            attributeKeysMap.get(value)?.push(key);\n        });\n        return attributeKeysMap;\n    }\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> the random colour of this cluster]\n     * used to avoid re-compute the colours on every frame refresh\n     *\n     * @readonly\n     * @type {(Map<string | number, string>)}\n     */\n    get attributeColor(): Map<string | number, string> {\n        let colors = randomcolor({\n            seed: 1,\n            count: this.getAttributeValues.length,\n        });\n        let position = 0;\n        let map = new Map<string | number, string>();\n        this.getAttributeValues.forEach((attribute) => {\n            map.set(attribute, colors[position++]);\n        });\n        return map;\n    }\n\n    /**\n     * @computed\n     * a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> the Nodes points in that cluster]\n     * will change on every frame refresh as the Node's position keeps changing.\n     *\n     * @readonly\n     * @type {(Map<string | number, THREE.Vector3[]>)}\n     */\n    get attributePoints(): Map<string | number, THREE.Vector3[]> {\n        let map = new Map<string | number, THREE.Vector3[]>();\n        this.getAttributeValues.forEach((attribute) => {\n            let vectorList: THREE.Vector3[] = [];\n            map.set(attribute, vectorList);\n        });\n        this.rawGraph.forEachNode((key, attributes) => {\n            map.get(this.keyAttribute.get(key) as string | number)?.push(\n                new THREE.Vector3(\n                    attributes._visualize.x,\n                    attributes._visualize.y,\n                    attributes._visualize.z\n                )\n            );\n        });\n        return map;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\n\n/**\n * changing the config inside .global will cause to change every config of every node iteratively\n *\n * but changing the else does not\n *\n * @class NodeGlobalConfig\n */\nclass NodeGlobalConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n    defaultColor: string = \"#808080\";\n    selectedColor: string = \"#ffffAA\";\n    multiSelectedColor: string = \"white\";\n    highlightColor: string = \"#ff6060\";\n\n    resolution = 12;\n\n    size = 4;\n}\n\n/**\n * changing the config inside .global will cause to change every config of every edge iteratively\n *\n * but changing the else does not\n *\n * @class EdgeGlobalConfig\n */ class EdgeGlobalConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    defaultColor = \"#ffffff\";\n\n    selectedColor = \"#ffff00\";\n    highlightColor = \"#ff8E8E\";\n\n    defaultWidth: number = 1;\n\n    highlightWidth: number = 2;\n\n    resolution = 6;\n}\nclass LabelConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    show = true;\n    color = \"#d3d3d3\";\n    size = 4;\n}\n\nclass ClusterConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    clusterForce = 20;\n    normalForce = 50;\n    resolution = 10;\n    shape: \"convexHull\" | \"sphere\" = \"convexHull\";\n}\n/**\n * the configurations to set to cascade the graph\n *\n * @export\n * @class CssStore\n */\nexport default class CssStore {\n    constructor() {\n        makeAutoObservable(this);\n        this.node = new NodeGlobalConfig();\n        this.edge = new EdgeGlobalConfig();\n        this.label = new LabelConfig();\n        this.cluster = new ClusterConfig();\n    }\n\n    node!: NodeGlobalConfig;\n\n    edge!: EdgeGlobalConfig;\n\n    label!: LabelConfig;\n\n    cluster!: ClusterConfig;\n\n    isAnimating: boolean = true;\n}\n","import { Attributes } from \"graphology-types\";\nimport { makeAutoObservable } from \"mobx\";\nimport State from \".\";\nexport default class InteractionStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    selectedNode: string | null = null;\n\n    /**\n     * the currently selected node ids\n     * the singleNodeDetailPanel will render and refresh if this changes\n     *\n     * @type {string[]}\n     */\n    selectedNodes: string[] = [];\n\n    selectedEdge: string | null = null;\n\n    selectedEdges: string[] = [];\n    /**\n     * when the menuItem 'box-select Node' of RightClickPanel is clicked, then this will be set to true,\n     *  and the component'SelectionBox' will be  visualized only the mode is 'Node Selection' and this variable is true\n     */\n    boxSelectionOpen: boolean = false;\n    /**\n     * this stores the x and y coordinates when mouse clicked down for box selection\n     */\n    boxSelection_startPoint: Attributes = {\n        x: 0,\n        y: 0,\n    };\n\n    /**\n     * this stores the x and y coordinates when mouse clicked up for box selection\n     */\n    boxSelection_endPoint: Attributes = {\n        x: 0,\n        y: 0,\n    };\n\n    boxSelectNode() {\n        //clear selectedNodes\n        State.interaction.selectedNodes = [];\n\n        //calculate the box\n        let left = Math.min(\n            this.boxSelection_startPoint.x,\n            this.boxSelection_endPoint.x\n        );\n        let top = Math.min(\n            this.boxSelection_startPoint.y,\n            this.boxSelection_endPoint.y\n        );\n        let right = Math.max(\n            this.boxSelection_startPoint.x,\n            this.boxSelection_endPoint.x\n        );\n        let down = Math.max(\n            this.boxSelection_startPoint.y,\n            this.boxSelection_endPoint.y\n        );\n\n        //check which node is inside the box,if true push them into selectedNodes\n        State.graph.rawGraph.forEachNode((node, Attributes) => {\n            let coords = State.graphDelegate.graphDelegateMethods.graph2ScreenCoords(\n                Attributes._visualize.x,\n                Attributes._visualize.y,\n                Attributes._visualize.z\n            );\n            if (\n                left <= coords.x &&\n                coords.x <= right &&\n                top <= coords.y &&\n                down >= coords.y\n            ) {\n                State.interaction.selectedNodes.push(node);\n            }\n        });\n    }\n\n    /**\n     * the currently hovered node id\n     * the multiNodeDetailPanel will render and refresh if this changes\n     *\n     * @type {string}\n     */\n    currentlyHoveredNodeId: string | null = null;\n\n    /**\n     * the currently hovered node id that used for display at RightClickPanel\n     */\n\n    get currentlyHoveredNodeNeighbors(): string[] | null {\n        if (this.currentlyHoveredNodeId === null) {\n            return null;\n        } else {\n            return State.graph.rawGraph.neighbors(this.currentlyHoveredNodeId);\n        }\n    }\n\n    get currentlyHoveredNodeNeighborEdges(): string[] | null {\n        if (this.currentlyHoveredNodeId === null) {\n            return null;\n        } else {\n            return this.getNodeNeighborEdges(this.currentlyHoveredNodeId);\n        }\n    }\n\n    getNodeNeighborEdges(node: string): string[] {\n        let neighbors = State.graph.rawGraph.neighbors(node);\n        return neighbors?.map((neighbor: string) => {\n            return this.getEdgeKey(\n                neighbor,\n                this.currentlyHoveredNodeId as string\n            ) as string;\n        });\n    }\n\n    getEdgeKey(node1: string, node2: string): string | null {\n        let go: string | undefined = State.graph.rawGraph.edge(node1, node2);\n        if (go === undefined) {\n            let back: string | undefined = State.graph.rawGraph.edge(\n                node2,\n                node1\n            );\n            if (back === undefined) {\n                return null;\n            } else {\n                return back;\n            }\n        } else {\n            return go;\n        }\n    }\n\n    /**\n     * update the _visualize object inside node attribute and calls graph refresh\n     *\n     * @param {string} id\n     * @param {Attributes} attribute\n     * @param {Attributes | null = null} oldAttributeVisualize\n     * @memberof GraphMutation\n     */\n    updateNodeVisualizeAttribute(\n        id: string,\n        attribute: Attributes,\n        oldAttributeVisualize: Attributes | null = null\n    ) {\n        if (oldAttributeVisualize === null) {\n            oldAttributeVisualize = State.graph.rawGraph.getNodeAttribute(\n                id,\n                \"_visualize\"\n            );\n        }\n\n        this.updateVisualizeAttributeParser(\n            attribute,\n            oldAttributeVisualize as Attributes\n        );\n    }\n    /**\n     * update the _visualize object inside edge attribute and calls graph refresh\n     *\n     * @param {string} key\n     * @param {Attributes} attribute\n     * @param {Attributes | null = null} oldAttributeVisualize\n     * @memberof GraphMutation\n     */\n    updateEdgeVisualizeAttribute(\n        key: string,\n        attribute: Attributes,\n        oldAttributeVisualize: Attributes | null = null\n    ) {\n        if (oldAttributeVisualize === null) {\n            oldAttributeVisualize = State.graph.rawGraph.getEdgeAttribute(\n                key,\n                \"_visualize\"\n            );\n        }\n        this.updateVisualizeAttributeParser(\n            attribute,\n            oldAttributeVisualize as Attributes\n        );\n    }\n\n    updateVisualizeAttributeParser(newAttribute: any, oldAttributes: any) {\n        if (newAttribute.hasOwnProperty(\"hovered\")) {\n            oldAttributes.hovered = newAttribute.hovered;\n        } else if (newAttribute.hasOwnProperty(\"selected\")) {\n            oldAttributes.selected = newAttribute.selected;\n        } else if (newAttribute.hasOwnProperty(\"multiSelected\")) {\n            oldAttributes.multiSelected = newAttribute.multiSelected;\n        }\n    }\n\n    /**\n     * should call this on every refresh of graph DS\n     *\n     */\n    flush() {\n        this.selectedNode = null;\n        this.selectedNodes = [];\n        this.selectedEdge = null;\n        this.selectedEdges = [];\n        this.currentlyHoveredNodeId = null;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport * as THREE from \"three\";\nimport { polygonContains } from \"d3-polygon\";\nimport State from \".\";\n\n/**\n * @description the cluster-mouse-interaction related filed and functions are hereby written in this class\n * such as `currentlyHoveredClusterId`, `selectedCluster` and `selectedClusters`,\n * these selection should be `flush()` after using(or before entering another interaction mode)\n * the callback functions of mouse events are presented as well to handle events like hover/left/rightClick.\n * There are also helper methods to deal with features like mergeCluster and SplitCluster.\n *\n * In the cluster splitting procedure, after user draw a curved link,\n * the segment of that line will be stored in the `lineSegment` and `computeSplitCluster` will be called to compute the two stack of split nodes,\n * the result will be stored inside `confirmClusterSplittingTempData` waiting for the final `splitCluster()` function to confirm this operation\n * @author Zichen XU\n * @export\n * @class ClusterInteractionStore\n */\nexport default class ClusterInteractionStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * @description the cluster UUID (assigned by THREE.js) of the hovered cluster\n     * @author Zichen XU\n     * @type {(string | null)}\n     */\n    currentlyHoveredClusterId: string | null = null;\n\n    /**\n     * @description the selected Cluster UUID used in choosing which cluster to be split\n     * @author Zichen XU\n     * @type {(string | null)}\n     */\n    selectedCluster: string | null = null;\n\n    /**\n     * @description the selected Clusters UUID used in choosing which clusters to be merged\n     * @author Zichen XU\n     * @type {string[]}\n     */\n    selectedClusters: string[] = [];\n\n    /**\n     * @description flush the above fields in situations like switching VisualizationMode\n     * re-import or after graph mutation\n     * @author Zichen XU\n     */\n    flush() {\n        this.currentlyHoveredClusterId = null;\n        this.selectedCluster = null;\n        this.selectedClusters = [];\n    }\n\n    /**\n     * @description this will only be active in the ClusterSelection and ClusterSplit\n     * it will set the selectedCluster and add/remove this cluster in the selectedClusters list\n     * @author Zichen XU\n     * @param {string} uuid uuid of the custer on left-click\n     * @param {MouseEvent} event\n     */\n    clusterLeftClickCallback(uuid: string, event: MouseEvent) {\n        State.graphDelegate.clusterObject.meshSpotlightMaterial(\n            State.graphDelegate.clusterObject.getObjectById(uuid) as THREE.Mesh\n        );\n        // multi-selection\n        let index;\n\n        State.clusterInteraction.selectedCluster = uuid;\n\n        // if already in the list of selected, remove\n        if (\n            (index = State.clusterInteraction.selectedClusters.indexOf(\n                uuid\n            )) !== -1\n        ) {\n            State.clusterInteraction.selectedClusters.splice(index, 1);\n        } else {\n            // if not in the list, add\n            State.clusterInteraction.selectedClusters.push(uuid);\n        }\n    }\n\n    /**\n     * @description this will only be active in the ClusterSelection and ClusterSplit\n     * it will set the currentlyHoveredClusterId to this cluster\n     * @author Zichen XU\n     * @param {(string | null)} uuid of the custer on mouse hover\n     * @param {MouseEvent} event\n     */\n    clusterHoverCallback(uuid: string | null, event: MouseEvent) {\n        State.clusterInteraction.currentlyHoveredClusterId = uuid;\n    }\n\n    /**\n     * @description this will only be active in the ClusterSelection\n     * it will set the selectedCluster to this cluster and open the rightClickPanel\n     * @author Zichen XU\n     * @param {(string | null)} uuid of the custer on mouse hover\n     * @param {MouseEvent} event\n     */\n    clusterRightClickCallback(uuid: string | null, event: MouseEvent) {\n        State.clusterInteraction.selectedCluster = uuid;\n        State.preferences.rightClickPositionX = event.x;\n        State.preferences.rightClickPositionY = event.y;\n        if (uuid) {\n            State.preferences.rightClickOn = \"Cluster\";\n        } else {\n            State.preferences.rightClickOn = \"Background\";\n        }\n        State.preferences.rightClickPanelOpen = true;\n        State.preferences.closeAllPanel(\"rightClickPanel\");\n    }\n\n    /**\n     * @description loop through the selected clusters and set the nodes within that cluster\n     * the newly-formed attribute is named _merge-cluster\n     * and the value to that attribute is the Time() of this time\n     * other nodes unrelated will be set to empty string in this attribute\n     * @author Zichen XU\n     */\n    mergeSelectedCluster() {\n        let date = new Date().toLocaleString(\"en\");\n        let clusterId: string = `Cluster Merged @ ${date}`;\n        if (!State.graph.metadata.nodeProperties.includes(\"_merge-cluster\")) {\n            State.graph.metadata.nodeProperties.push(\"_merge-cluster\");\n        }\n        State.graph.rawGraph.forEachNode((_, attributes) => {\n            attributes[\"_merge-cluster\"] = \"\";\n        });\n        this.selectedClusters.forEach((uuid) => {\n            const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n                uuid\n            ) as string | number;\n            const keys = State.cluster.attributeKeys.get(clusterValue);\n            keys?.forEach((nodeId) => {\n                State.graph.rawGraph.setNodeAttribute(\n                    nodeId,\n                    \"_merge-cluster\",\n                    clusterId\n                );\n            });\n        });\n        State.cluster.setCluster(\"_merge-cluster\");\n        this.flush();\n    }\n\n    /**\n     * @description whether the drawing panel used in ClusterSplit is active\n     * @author Zichen XU\n     * @type {boolean}\n     */\n    drawPanelActivate: boolean = false;\n\n    /**\n     * whether to draw a straight line or a curved line when clustering\n     *\n     * @author Zichen XU\n     * @type {boolean}\n     * @memberof ClusterInteractionStore\n     */\n    drawStraightLine: boolean = false;\n\n    /**\n     * @description the line segments returned by drawing a line\n     * it has the left/right-top points as well to form a polygon\n     * @author Zichen XU\n     * @type {any[]}\n     */\n    lineSegment!: any[];\n\n    /**\n     * @description the temp data returned by splitting the cluster\n     * the value attribute is either 0 or 1 to form two clusters\n     * this data is saved to preview the split to user and wait for final confirmation\n     * @author Zichen XU\n     * @type {({\n     *               value: number;\n     *               id: string;\n     *               x: number;\n     *               y: number;\n     *           }[]\n     *         | null)}\n     */\n    confirmClusterSplittingTempData:\n        | {\n              value: number;\n              id: string;\n              x: number;\n              y: number;\n          }[]\n        | null = null;\n\n    /**\n     * @description compute the clusterSplittingTempData based on the lineSegment data\n     * using the polygonContains to determine which node is in selection\n     * the value attribute is either 0 or 1 to form two clusters\n     * this data is saved to preview the split to user and wait for final confirmation\n     * @author Zichen XU\n     */\n    computeSplitCluster() {\n        let screenCoords = [] as {\n            id: string;\n            x: number;\n            y: number;\n            value: number;\n        }[];\n        const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n            State.clusterInteraction.selectedCluster as string\n        );\n        console.log(clusterValue);\n        let keys = State.cluster.attributeKeys.get(clusterValue!) as string[];\n        keys.forEach((node) => {\n            let attribute = State.graph.rawGraph.getNodeAttributes(node);\n            let coord = State.graphDelegate.graphDelegateMethods.graph2ScreenCoords(\n                attribute._visualize.x,\n                attribute._visualize.y,\n                attribute._visualize.z\n            );\n            screenCoords.push({ id: node, x: coord.x, y: coord.y, value: 0 });\n        });\n\n        let tempLineSegment: [number, number][] = this.lineSegment.map(\n            (value) => {\n                return [value.x, value.y];\n            }\n        );\n\n        screenCoords.forEach((point) => {\n            let inside = polygonContains(tempLineSegment, [point.x, point.y]);\n\n            if (inside) {\n                State.interaction.updateNodeVisualizeAttribute(point.id, {\n                    selected: true,\n                });\n                point.value = 1;\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(point.id, {\n                    selected: false,\n                });\n                point.value = 0;\n            }\n        });\n\n        State.graphDelegate.graphDelegateMethods.refresh();\n        this.confirmClusterSplittingTempData = screenCoords;\n    }\n\n    /**\n     * @description this will be called when user confirm the cluster split\n     * it will set the attribute of these two groups to be different\n     * and clear the tempData\n     * @author Zichen XU\n     */\n    splitCluster() {\n        let date = new Date().toLocaleString(\"en\");\n        const clusterId: string = `Cluster Split @ ${date}`;\n        const anotherClusterId: string = `Another Cluster Split @ ${date}`;\n        const thisCluster = State.cluster.clusterBy;\n\n        const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n            this.selectedCluster as string\n        ) as string | number;\n        const nodesToAlter = State.cluster.attributeKeys.get(\n            clusterValue\n        ) as string[];\n        this.confirmClusterSplittingTempData?.forEach((node) => {\n            if (nodesToAlter.includes(node.id)) {\n                State.graph.rawGraph.setNodeAttribute(\n                    node.id,\n                    thisCluster as string,\n                    node.value === 1 ? clusterId : anotherClusterId\n                );\n            }\n        });\n        this.confirmClusterSplittingTempData = null;\n        State.cluster.setCluster(thisCluster, true);\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\n\nexport default class HelperStackPanelStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    // Cluster Splitting\n\n    clusterSplittingPanelStackOpen: boolean = false;\n\n    /**\n     *\n     * can back to any step, and UI should refresh accordingly\n     *\n     * @type {(1 | 2 | 3)}\n     * @memberof HelperStackPanelStore\n     */\n    clusterSplittingCurrentStep: 1 | 2 | 3 = 1;\n\n    NodeSelectionPanelOpen: boolean = false;\n}\n","import { autorun, reaction } from \"mobx\";\n\nimport PreferencesStore, { VisualizationMode } from \"./PreferencesStore\";\nimport GraphStore from \"./GraphStore\";\nimport ImportStore from \"./ImportStore\";\nimport SearchStore from \"./SearchStore\";\nimport ClusterStore from \"./ClusterStore\";\nimport CssStore from \"./CssStore\";\nimport GraphDelegate from \"./GraphDelegate\";\nimport NodeInteractionStore from \"./NodeInteractionStore\";\nimport ClusterInteractionStore from \"./ClusterInteractionStore\";\nimport HelperStackPanelStore from \"./HelperStackPanelStore\";\nimport ComponentRef from \"../components/ComponentRef\";\n\nclass AppState {\n    static _instance: AppState | null = null;\n\n    preferences!: PreferencesStore;\n    graph!: GraphStore;\n    graphDelegate!: GraphDelegate;\n    interaction!: NodeInteractionStore;\n    clusterInteraction!: ClusterInteractionStore;\n    import!: ImportStore;\n    search!: SearchStore;\n    cluster!: ClusterStore;\n    helper!: HelperStackPanelStore;\n    css!: CssStore;\n\n    private privateConstructor() {\n        this.preferences = new PreferencesStore();\n        this.graph = new GraphStore();\n        this.graphDelegate = new GraphDelegate();\n        this.interaction = new NodeInteractionStore();\n        this.clusterInteraction = new ClusterInteractionStore();\n        this.import = new ImportStore();\n        this.search = new SearchStore();\n        this.cluster = new ClusterStore();\n        this.helper = new HelperStackPanelStore();\n        this.css = new CssStore();\n    }\n\n    // add singleton to prevent creating multiple instances of the State class\n    static get instance() {\n        if (AppState._instance === null) {\n            let instance = new AppState();\n            instance.privateConstructor();\n            AppState._instance = instance;\n            return instance;\n        } else {\n            return AppState._instance;\n        }\n    }\n}\n\nconst State = AppState.instance;\n\n// this is for easily debugging in runtime\n//@ts-ignore\nwindow._state = State;\n\n// extract CSV from selected edge File object and update related fields.\n// will auto run if selectedEdgeFileFromInput or delimiter or anything is changed.\nautorun(() => State.import.renderImportEdgePreview());\n\n// extract CSV from selected node File object and update related fields.\n// will auto run if selectedNodeFileFromInput or delimiter or anything is changed.\nautorun(() => State.import.renderImportNodePreview());\n\n// sync the rawGraph bi-directionally\nautorun(\n    () =>\n        (State.cluster.rawGraph = State.search.rawGraph = State.graph.rawGraph)\n);\n\n// set the graph to suspend animating according to State.css.isAnimating\nautorun(() => {\n    if (State.css.isAnimating) {\n        State.graphDelegate.graphDelegateMethods?.resumeAnimation();\n    } else {\n        State.graphDelegate.graphDelegateMethods?.pauseAnimation();\n    }\n});\n\n// if cluster selected, goto step 2\nautorun(() => {\n    if (\n        State.preferences.visualizationMode ===\n        VisualizationMode.ClusterSplitting\n    ) {\n        if (State.clusterInteraction.selectedCluster) {\n            State.helper.clusterSplittingCurrentStep = 2;\n            State.clusterInteraction.drawPanelActivate = true;\n            console.log(\"cluster selected\");\n        }\n    } else {\n        State.clusterInteraction.drawPanelActivate = false;\n    }\n});\n\n// the preparation and cleaning when changing of Step\nreaction(\n    () => State.helper.clusterSplittingCurrentStep,\n    (step) => {\n        console.log(`Graph Splitting change to step ${step}`);\n        switch (step) {\n            case 1:\n                State.clusterInteraction.confirmClusterSplittingTempData = null;\n                State.interaction.flush();\n                State.clusterInteraction.flush();\n                State.graphDelegate.graphDelegateMethods.refresh();\n                break;\n\n            case 2:\n                if (State.clusterInteraction.drawStraightLine) {\n                    ComponentRef?.canvasDrawStraightLinePanel.clearDrawing();\n                } else {\n                    ComponentRef?.canvasDrawPanel.clearDrawing();\n                }\n\n                State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n                    State.interaction.updateNodeVisualizeAttribute(\n                        node,\n                        { selected: false },\n                        oldAttributes._visualize\n                    );\n                });\n                State.clusterInteraction.confirmClusterSplittingTempData = null;\n                State.interaction.flush();\n                State.graphDelegate.graphDelegateMethods.refresh();\n\n                break;\n\n            case 3:\n                break;\n        }\n    }\n);\n\n// if graph is empty, suspend the animation to save computing power\nreaction(\n    () => State.graph.rawGraph?.order,\n    (number) => {\n        if (number === 0) {\n            State.css.isAnimating = false;\n            console.log(\"Pause Animating\");\n        } else {\n            State.css.isAnimating = true;\n            console.log(\"Resume Animating\");\n        }\n    },\n    { fireImmediately: true }\n);\n\n// auto highlight the hovered Cluster\nreaction(\n    () => State.clusterInteraction.currentlyHoveredClusterId,\n    (currentlyHoveredClusterId) => {\n        console.log(\"currentlyHoveredNodeId\", currentlyHoveredClusterId);\n        State.graphDelegate.clusterObject.updateAllMaterials();\n    }\n);\n\n// auto highlight the selected Cluster\nreaction(\n    () => State.clusterInteraction.selectedCluster,\n    () => {\n        State.graphDelegate.clusterObject.updateAllMaterials();\n    }\n);\n\n// auto highlight the selected Clusters\nreaction(\n    () => State.clusterInteraction.selectedClusters,\n    () => {\n        State.graphDelegate.clusterObject.updateAllMaterials();\n    }\n);\n\n// auto highlight the hovered Node\nreaction(\n    () => State.interaction.currentlyHoveredNodeId,\n    (currentlyHoveredNodeId) => {\n        console.log(\"currentlyHoveredNodeId\", currentlyHoveredNodeId);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (node === currentlyHoveredNodeId) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { hovered: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { hovered: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graph.rawGraph.forEachEdge((edge, oldAttributes) => {\n            if (\n                State.interaction.currentlyHoveredNodeNeighborEdges?.includes(\n                    edge\n                )\n            ) {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { hovered: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { hovered: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\n// auto highlight the selected nodes\nreaction(\n    () => State.interaction.selectedNodes.map((node) => node),\n    (selectedNodes) => {\n        console.log(\"selectedNodes\", selectedNodes);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (selectedNodes.includes(node)) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { multiSelected: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { multiSelected: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\n// auto highlight the selected node\nreaction(\n    () => State.interaction.selectedNode,\n    (selectedNode) => {\n        console.log(\"selectedNode\", selectedNode);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (selectedNode === node) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { selected: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { selected: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\n// auto highlight the selected edges\nreaction(\n    () => State.interaction.selectedEdge,\n    (selectedEdge) => {\n        console.log(\"selectedEdge\", selectedEdge);\n        State.graph.rawGraph.forEachEdge((edge, oldAttributes) => {\n            if (selectedEdge === edge) {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { selected: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { selected: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\nexport default State;\n","import React, { MouseEventHandler } from \"react\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { Select } from \"@blueprintjs/select\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { copy } from \"copy-anything\";\n\ninterface Props {\n    /**\n     * whether or not to show the None\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    showNone: boolean;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     * if None is selected, the item props will be set to null\n     *\n     * @memberof Props\n     */\n    onSelect: (item: string | null) => void;\n\n    /**\n     * the selected to display will sync with this props\n     *\n     * @type {(string | null)}\n     * @memberof Props\n     */\n    syncWith: string | null;\n}\n\ninterface CustomIItemRendererProps {\n    handleClick: MouseEventHandler<HTMLElement>;\n}\n\n/**\n * this component can be used to choose the attribute among all the attributes, with addition none to choose (can be toggled to off)\n * to use it, you have to specify whether to add additional None to the list and onChange function to call when a candidate is selected\n */\nexport default observer(\n    class ClusterChooser extends React.Component<Props, {}> {\n        static defaultProps = {\n            showNone: true,\n        };\n\n        get fullProperties(): string[] {\n            let propertiesWithNone = copy(State.graph.metadata.nodeProperties);\n            propertiesWithNone.unshift(\"None\");\n            return propertiesWithNone;\n        }\n\n        itemRenderer = (\n            item: any,\n            props: CustomIItemRendererProps\n        ): JSX.Element | null => {\n            if (item === \"None\") {\n                return (\n                    <MenuItem\n                        intent=\"primary\"\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            } else {\n                return (\n                    <MenuItem\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            }\n        };\n\n        render() {\n            return (\n                <Select\n                    items={\n                        this.props.showNone\n                            ? this.fullProperties\n                            : State.graph.metadata.nodeProperties\n                    }\n                    itemRenderer={this.itemRenderer}\n                    filterable={false}\n                    onItemSelect={(item: string) => {\n                        let selected = item === \"None\" ? null : item;\n                        this.props.onSelect(selected);\n                    }}\n                >\n                    <Button\n                        text={this.props.syncWith ?? this.fullProperties[0]}\n                    />\n                </Select>\n            );\n        }\n    }\n);\n","export default __webpack_public_path__ + \"static/media/logo.25a51149.png\";","import { Attributes } from \"graphology-types\";\nimport React from \"react\";\n\n/** Event handler that exposes the target element's value as a boolean. */\nexport function handleBooleanChange(handler: (checked: boolean) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler((event.target as HTMLInputElement).checked);\n}\n\n/** Event handler that exposes the target element's value as a string. */\nexport function handleStringChange(handler: (value: string) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler((event.target as HTMLInputElement).value);\n}\n\n/** Event handler that exposes the target element's value as an inferred generic type. */\nexport function handleValueChange<T>(handler: (value: T) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler(((event.target as HTMLInputElement).value as unknown) as T);\n}\n\n/** Event handler that exposes the target element's value as a number. */\nexport function handleNumberChange(handler: (value: number) => void) {\n    return handleStringChange((value) => handler(+value));\n}\n\nexport function stringifyNodeDetail(attributes: Attributes): string {\n    let res = \"\";\n    for (var attribute in attributes) {\n        if (\n            attributes.hasOwnProperty(attribute) &&\n            attribute !== \"_visualize\" &&\n            attribute !== \"_options\"\n        ) {\n            res += attribute + \" : \" + attributes[attribute] + \" ; \";\n        }\n    }\n\n    return res;\n}\n\nexport function parseNumberOrString(value: string): string | number {\n    if (value === \"\") {\n        return \"\";\n    }\n    let numberVal = Number(value);\n    if (isNaN(numberVal)) {\n        return value;\n    } else {\n        return numberVal;\n    }\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Button, ControlGroup, MenuItem } from \"@blueprintjs/core\";\nimport { Select, Suggest } from \"@blueprintjs/select\";\nimport { CustomIItemRendererProps } from \"../utils/SimpleSelect\";\nimport { Tooltip2 } from \"@blueprintjs/popover2\";\nimport { stringifyNodeDetail } from \"../utils/InputFormUtils\";\n\ninterface IFilterOption {\n    text: React.ReactNode;\n    disabled: boolean;\n    attribute?: string;\n}\n\nexport default observer(\n    class SearchPanel extends React.Component {\n        get FILTER_OPTIONS(): IFilterOption[] {\n            let prefix: IFilterOption[] = [\n                { text: \"ID includes\", disabled: false },\n                { text: <b>Or Search Attributes</b>, disabled: true },\n            ];\n            State.graph.metadata.nodeProperties.forEach((it) =>\n                prefix.push({\n                    text: `Attribute: ${it}`,\n                    disabled: false,\n                    attribute: it,\n                })\n            );\n            return prefix;\n        }\n\n        state = {\n            filter: \"ID includes\" as string,\n        };\n\n        private itemRenderer(\n            item: IFilterOption,\n            props: CustomIItemRendererProps\n        ): JSX.Element | null {\n            return (\n                <MenuItem\n                    key={item.text?.toString()}\n                    disabled={item.disabled}\n                    onClick={props.handleClick}\n                    text={item.text}\n                />\n            );\n        }\n\n        render() {\n            return (\n                <div>\n                    <ControlGroup>\n                        <Select\n                            items={this.FILTER_OPTIONS}\n                            itemRenderer={this.itemRenderer}\n                            filterable={false}\n                            onItemSelect={(item) => {\n                                this.setState({\n                                    filter: item.text,\n                                });\n                                State.search.filterProps =\n                                    item.attribute ?? null;\n                            }}\n                        >\n                            <Button icon=\"filter\">{this.state.filter}</Button>\n                        </Select>\n                        <Suggest\n                            inputValueRenderer={(a) => a}\n                            query={State.search.searchStr}\n                            onQueryChange={(value) =>\n                                (State.search.searchStr = value)\n                            }\n                            itemListPredicate={() => State.search.candidates}\n                            itemRenderer={(value: string) => (\n                                <Tooltip2\n                                    usePortal={false}\n                                    content={stringifyNodeDetail(\n                                        State.graph.rawGraph.getNodeAttributes(\n                                            value\n                                        )\n                                    )}\n                                >\n                                    <MenuItem\n                                        text={value}\n                                        onMouseOver={() => {\n                                            State.search.isPreviewing = true;\n                                            State.interaction.currentlyHoveredNodeId = value;\n                                            State.graphDelegate.cameraFocusOn(\n                                                value\n                                            );\n                                        }}\n                                        onMouseLeave={() => {\n                                            State.search.isPreviewing = false;\n                                        }}\n                                    />\n                                </Tooltip2>\n                            )}\n                            items={State.search.candidates}\n                            openOnKeyDown={true}\n                            noResults={\n                                <MenuItem disabled={true} text=\"No results.\" />\n                            }\n                            popoverProps={{ minimal: true }}\n                        />\n                    </ControlGroup>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport {\n    Button,\n    Menu,\n    MenuDivider,\n    MenuItem,\n    Position,\n    Switch,\n    Navbar as BlueprintNavbar,\n    NavbarGroup,\n    Alignment,\n    NavbarHeading,\n    NavbarDivider,\n} from \"@blueprintjs/core\";\nimport ClusterChooser from \"./utils/ClusterChooser\";\nimport logo from \"../images/logo.png\";\nimport State from \"../state\";\nimport { Popover2 } from \"@blueprintjs/popover2\";\nimport SearchPanel from \"./panels/SearchPanel\";\n\nexport default observer(\n    class Navbar extends React.Component {\n        render() {\n            return (\n                <BlueprintNavbar\n                    //@ts-ignore\n                    style={{ zIndex: 2 }}\n                >\n                    <NavbarGroup align={Alignment.LEFT}>\n                        <img\n                            title=\"PiperNet\"\n                            id=\"PiperNet Logo\"\n                            src={logo}\n                            width=\"35\"\n                            height=\"35\"\n                            alt=\"PiperNet Logo\"\n                        />\n                        <NavbarHeading> PiperNet </NavbarHeading>\n                        <Popover2\n                            content={\n                                <Menu>\n                                    <MenuItem\n                                        text=\"Import from CSV\"\n                                        icon=\"import\"\n                                        onClick={() => {\n                                            State.import.importDialogOpen = true;\n                                        }}\n                                    >\n                                        {/* {SAMPLE_GRAPH_SNAPSHOTS.map(\n                                            (sample) => {\n                                                const sampleSnapshotTitle =\n                                                    sample[0];\n                                                const sampleSnapshotUrl =\n                                                    sample[1];\n\n                                                return (\n                                                    <MenuItem\n                                                        icon=\"graph\"\n                                                        text={\n                                                            sampleSnapshotTitle\n                                                        }\n                                                        disabled={true}\n                                                        onClick={() => {\n                                                            fetchSampleGraph(\n                                                                sampleSnapshotUrl\n                                                            ).then((file) => {\n                                                                State.import.selectedGEXFFileFromInput = file;\n                                                                State.import\n                                                                    .importGraphFromGEXF()\n                                                                    .then(\n                                                                        (\n                                                                            res\n                                                                        ) => {\n                                                                            State.graph.rawGraph =\n                                                                                res.graph;\n                                                                            State.graph.metadata =\n                                                                                res.metadata;\n                                                                        }\n                                                                    );\n                                                            });\n                                                        }}\n                                                    />\n                                                );\n                                            }\n                                        )} */}\n                                    </MenuItem>\n\n                                    <MenuItem\n                                        icon=\"import\"\n                                        text=\"Open GEXF\"\n                                        onClick={() => {\n                                            State.import.importGEXFDialogOpen = true;\n                                        }}\n                                    />\n                                    <MenuDivider />\n                                    <MenuItem\n                                        icon=\"download\"\n                                        text=\"Export Graph\"\n                                        onClick={() => {\n                                            State.preferences.exportDialogOpen = true;\n                                        }}\n                                    />\n                                </Menu>\n                            }\n                            placement={Position.BOTTOM}\n                        >\n                            <Button minimal={true} icon=\"document\">\n                                Graph\n                            </Button>\n                        </Popover2>\n                        <Popover2\n                            content={\n                                <Menu>\n                                    <MenuItem\n                                        text=\"Node DataSheet\"\n                                        icon=\"ungroup-objects\"\n                                        onClick={() => {\n                                            State.preferences.nodeDataSheetDialogOpen = true;\n                                        }}\n                                    />\n                                    <MenuItem\n                                        text=\"Edge DataSheet\"\n                                        icon=\"link\"\n                                        onClick={() => {\n                                            State.preferences.edgeDataSheetDialogOpen = true;\n                                        }}\n                                    />\n                                    {/* <MenuItem\n                                        text=\"Statistics\"\n                                        icon=\"timeline-bar-chart\"\n                                        onClick={() => {\n                                            State.preferences.statisticsDialogOpen = true;\n                                        }}\n                                    /> */}\n                                </Menu>\n                            }\n                            placement={Position.BOTTOM}\n                        >\n                            <Button minimal={true} icon=\"wrench\">\n                                Tools\n                            </Button>\n                        </Popover2>\n                        <Switch\n                            style={{ marginTop: 10, marginLeft: 8 }}\n                            label=\"Graph Animation\"\n                            checked={State.css.isAnimating}\n                            onChange={() =>\n                                (State.css.isAnimating = !State.css.isAnimating)\n                            }\n                        />\n                    </NavbarGroup>\n\n                    {/* <ButtonGroup>\n                        <SimpleSelect\n                            className={classnames([Classes.ALERT_CONTENTS])}\n                            items={[\"3D\", \"2D\"]}\n                            value={State.preferences.view}\n                            onSelect={(it) => (State.preferences.view = it)}\n                        />\n                        <Divider />\n                    </ButtonGroup> */}\n\n                    <NavbarGroup align={Alignment.RIGHT}>\n                        <SearchPanel />\n                        <NavbarDivider />\n                        <div style={{ marginRight: 6 }}>Clustered by</div>\n                        <ClusterChooser\n                            onSelect={(cluster) => {\n                                State.cluster.setCluster(cluster);\n                            }}\n                            syncWith={State.cluster.clusterBy}\n                        />\n                        <NavbarDivider />\n                        {/* <SimpleSelect\n                            items={[\"trackball\", \"orbit\", \"fly\"]}\n                            text={State.preferences.controlType}\n                            onSelect={(it) => {\n                                State.preferences.controlType = it;\n                                ComponentRef.visualizer.updateVisualizationGraph();\n                            }}\n                        />\n                        <NavbarDivider />\n                        <Button\n                            minimal={true}\n                            icon=\"cog\"\n                            disabled={true}\n                            onClick={() => {\n                                State.preferences.preferenceDialogOpen = true;\n                            }}\n                        /> */}\n                        <Button\n                            minimal={true}\n                            icon=\"code\"\n                            onClick={() => {\n                                window.open(\n                                    \"https://github.com/grp202004/PiperNet\"\n                                );\n                            }}\n                        />\n                    </NavbarGroup>\n                </BlueprintNavbar>\n            );\n        }\n    }\n);\n","import React, { MouseEventHandler } from \"react\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { ItemPredicate, Select } from \"@blueprintjs/labs\";\nimport { observer } from \"mobx-react\";\n\ninterface Props {\n    items: any[];\n    onSelect: (\n        item: any,\n        event?: React.SyntheticEvent<HTMLElement, Event> | undefined\n    ) => void;\n    text: string;\n    small: boolean;\n    search: boolean;\n}\n\nexport interface CustomIItemRendererProps {\n    handleClick: MouseEventHandler<HTMLElement>;\n}\n\nexport function CommonItemRenderer(\n    item: any,\n    props: CustomIItemRendererProps\n): JSX.Element | null {\n    return <MenuItem key={item} onClick={props.handleClick} text={item} />;\n}\n\nexport default observer(\n    class SimpleSelect extends React.Component<Props, {}> {\n        static defaultProps = {\n            small: false,\n            search: false,\n        };\n\n        itemPredicate: ItemPredicate<string> = (\n            query: string,\n            object: string\n        ) => {\n            return object.toLowerCase().indexOf(query.toLowerCase()) >= 0;\n        };\n        render() {\n            if (this.props.search) {\n                return (\n                    <Select\n                        items={this.props.items}\n                        itemPredicate={this.itemPredicate}\n                        itemRenderer={CommonItemRenderer}\n                        filterable={true}\n                        onItemSelect={this.props.onSelect}\n                        noResults={\n                            <MenuItem disabled={true} text=\"No results.\" />\n                        }\n                    >\n                        <Button\n                            text={this.props.text}\n                            small={this.props.small}\n                        />\n                    </Select>\n                );\n            } else {\n                return (\n                    <Select\n                        items={this.props.items}\n                        itemRenderer={CommonItemRenderer}\n                        filterable={false}\n                        onItemSelect={this.props.onSelect}\n                    >\n                        <Button\n                            text={this.props.text}\n                            small={this.props.small}\n                        />\n                    </Select>\n                );\n            }\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Callout,\n    Classes,\n    FileInput,\n    Spinner,\n    Switch,\n    Tag,\n    MultistepDialog,\n    DialogStep,\n    IButtonProps,\n    H4,\n    H2,\n} from \"@blueprintjs/core\";\nimport { Cell, Column, Table } from \"@blueprintjs/table\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport SimpleSelect from \"../utils/SimpleSelect\";\nimport { IEdgeFileConfig, INodeFileConfig } from \"../../state/ImportStore\";\n\ninterface PreviewTableProps {\n    file: INodeFileConfig | IEdgeFileConfig;\n}\n\nlet PreviewTable = observer(\n    class PreviewTable extends React.Component<PreviewTableProps, {}> {\n        file = this.props.file;\n\n        renderWrapper = () => {\n            return this.file.parseError ? (\n                <Callout title={\"Error Parsing File\"} intent=\"warning\">\n                    Try with other options of <code>Delimiter</code> or review\n                    the file for import to find possible problems.\n                </Callout>\n            ) : (\n                <div>\n                    <Table\n                        className=\"import-preview-table\"\n                        numRows={this.file.topN.length}\n                        selectedRegions={Object.values(this.file.mapping)\n                            .map((it) => this.file.columns.indexOf(it))\n                            .map((it) => ({ rows: null, cols: [it, it] }))}\n                    >\n                        {this.file.columns.map((it) => (\n                            <Column\n                                key={it}\n                                name={it}\n                                cellRenderer={(i) => (\n                                    <Cell>{this.file.topN[i][it]}</Cell>\n                                )}\n                            />\n                        ))}\n                    </Table>\n                    <Tag>\n                        Only the top {this.file.topN.length} rows of the\n                        selected file are displayed.\n                    </Tag>\n                </div>\n            );\n        };\n\n        render() {\n            return this.renderWrapper();\n        }\n    }\n);\n\nexport default observer(\n    class ImportDialog extends React.Component {\n        private multiDialogRef = React.createRef<MultistepDialog>();\n\n        state = {\n            delimiter: \",\",\n            step: 0,\n        };\n\n        // nextButtonProps = {\n        //     disabled:\n        //         (this.state.step === 0 &&\n        //             !State.import.importConfig.edgeFile.isReady) ||\n        //         !(\n        //             this.state.step === 2 &&\n        //             (!State.import.importConfig.hasNodeFile ||\n        //                 (State.import.importConfig.hasNodeFile &&\n        //                     State.import.importConfig.nodeFile.isReady))\n        //         ),\n        // };\n\n        canImport = () => {\n            if (State.import.importConfig.hasNodeFile) {\n                return (\n                    State.import.importConfig.edgeFile.isReady &&\n                    State.import.importConfig.nodeFile.isReady\n                );\n            } else {\n                return State.import.importConfig.edgeFile.isReady;\n            }\n        };\n\n        renderNodesSelection = () => {\n            const nodeFile = State.import.importConfig.nodeFile;\n\n            return State.import.importConfig.hasNodeFile ? (\n                <>\n                    <FileInput\n                        text={State.import.nodeFileName}\n                        onInputChange={(event) => {\n                            let target = event.target as HTMLInputElement;\n                            if (!target.files || target.files.length < 1) {\n                                return;\n                            }\n                            State.import.importConfig.hasNodeFile = true;\n                            State.import.nodeFileName = target.files[0].name;\n                            // after setting the selectedNodeFileFromInput, it will auto render the preview table\n                            State.import.selectedNodeFileFromInput =\n                                target.files[0];\n                        }}\n                    />\n\n                    <Switch\n                        label=\"Has Headers\"\n                        checked={nodeFile.hasHeader}\n                        onChange={() =>\n                            (nodeFile.hasHeader = !nodeFile.hasHeader)\n                        }\n                    />\n                    {nodeFile.isReady && (\n                        <div className=\"column-selection\">\n                            <PreviewTable file={nodeFile} />\n                            <br />\n                            Column for Node ID:\n                            <SimpleSelect\n                                items={nodeFile.columns}\n                                text={nodeFile.mapping.id}\n                                onSelect={(it) => (nodeFile.mapping.id = it)}\n                            />\n                        </div>\n                    )}\n                </>\n            ) : (\n                <H4>You don't need to import node file</H4>\n            );\n        };\n\n        renderEdgesSelection = () => {\n            const edgeFile = State.import.importConfig.edgeFile;\n            return (\n                <>\n                    <FileInput\n                        text={State.import.edgeFileName}\n                        onInputChange={(event) => {\n                            let target = event.target as HTMLInputElement;\n                            if (!target.files || target.files.length < 1) {\n                                return;\n                            }\n                            State.import.edgeFileName = target.files[0].name;\n                            State.import.selectedEdgeFileFromInput =\n                                target.files[0];\n                        }}\n                    />\n                    <Switch\n                        label=\"Has Headers\"\n                        checked={edgeFile.hasHeader}\n                        onChange={() =>\n                            (edgeFile.hasHeader = !edgeFile.hasHeader)\n                        }\n                    />\n                    {edgeFile.isReady && (\n                        <div>\n                            <PreviewTable file={edgeFile} />\n                            <br />\n                            Column for Source ID:\n                            <SimpleSelect\n                                items={edgeFile.columns}\n                                text={edgeFile.mapping.fromId}\n                                onSelect={(it) =>\n                                    (edgeFile.mapping.fromId = it)\n                                }\n                            />\n                            <br />\n                            Column for Target ID:\n                            <SimpleSelect\n                                items={edgeFile.columns}\n                                text={edgeFile.mapping.toId}\n                                onSelect={(it) => (edgeFile.mapping.toId = it)}\n                            />\n                        </div>\n                    )}\n                </>\n            );\n        };\n\n        renderDelimiterSelection() {\n            return (\n                <div>\n                    Selected Delimiter\n                    <SimpleSelect\n                        items={[\",\", \"\\\\t\", \";\", \"[SPACE]\"]}\n                        text={this.state.delimiter}\n                        onSelect={(newDelimiter) => {\n                            this.setState({ delimiter: newDelimiter });\n\n                            if (newDelimiter === \"\\\\t\") {\n                                newDelimiter = \"\\t\";\n                            } else if (newDelimiter === \"[SPACE]\") {\n                                newDelimiter = \" \";\n                            }\n\n                            State.import.importConfig.edgeFile.delimiter = newDelimiter;\n                            State.import.importConfig.nodeFile.delimiter = newDelimiter;\n                        }}\n                    />{\" \"}\n                </div>\n            );\n        }\n\n        importedNodes = () => {\n            return <Cell>{State.graph.rawGraph.order}</Cell>;\n        };\n\n        importedEdges = () => {\n            return <Cell>{State.graph.rawGraph.size}</Cell>;\n        };\n\n        closeDialog = () => {\n            State.import.importDialogOpen = false;\n        };\n\n        finalButtonProps: Partial<IButtonProps> = {\n            intent: \"primary\",\n            // disabled: this.canImport(),\n            onClick: () => {\n                State.import.isLoading = true;\n                State.import.importGraphFromCSV().then((res) => {\n                    State.graph.setGraph(res.graph, res.metadata);\n\n                    if (State.cluster.rawGraph.hasAttribute(\"default\")) {\n                        State.cluster.setCluster(\n                            State.graph.rawGraph.getAttribute(\"default\")\n                        );\n                    }\n\n                    State.import.isLoading = false;\n                    State.import.importDialogOpen = false;\n                });\n            },\n            text: \"Import\",\n        };\n\n        render() {\n            return (\n                <MultistepDialog\n                    ref={this.multiDialogRef}\n                    className={classnames(\"multistep-dialog-box\")}\n                    icon=\"import\"\n                    isOpen={State.import.importDialogOpen}\n                    onClose={() => {\n                        State.import.importDialogOpen = false;\n                    }}\n                    // nextButtonProps={this.nextButtonProps}\n                    finalButtonProps={this.finalButtonProps}\n                    onChange={(id) => {\n                        this.setState({\n                            step: id,\n                        });\n                    }}\n                    title=\"Open Files\"\n                >\n                    <DialogStep\n                        id=\"csv_edge\"\n                        title=\"Choose a Edge file\"\n                        panel={\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"multistep-dialog-body\"\n                                )}\n                                style={{\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                    display: \"flex\",\n                                }}\n                            >\n                                {State.import.isLoading ? (\n                                    <Spinner />\n                                ) : (\n                                    <div>\n                                        <div\n                                            className={classnames(\n                                                Classes.DIALOG_BODY,\n                                                \"import-dialog\"\n                                            )}\n                                            style={{ maxWidth: \"40vw\" }}\n                                        >\n                                            {this.renderEdgesSelection()}\n                                            <br />\n                                            {this.renderDelimiterSelection()}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        }\n                    />\n                    <DialogStep\n                        id=\"csv_node_need\"\n                        title=\"Do i need to import node file ?\"\n                        panel={\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"multistep-dialog-body\"\n                                )}\n                                style={{\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                }}\n                            >\n                                <H2>Do i need to import node file?</H2>\n                                <H4>\n                                    You can import nodes file to add node\n                                    attributes to this graph\n                                </H4>\n                                <p>\n                                    To import attributes we will need to proceed\n                                    another csv files: a list of nodes, Nodes\n                                    must have at least an ID, other fields are\n                                    optional\n                                </p>\n                                <br />\n                                <Switch\n                                    large={true}\n                                    checked={\n                                        State.import.importConfig.hasNodeFile\n                                    }\n                                    label=\"I want to import node file\"\n                                    onChange={() =>\n                                        (State.import.importConfig.hasNodeFile = !State\n                                            .import.importConfig.hasNodeFile)\n                                    }\n                                />\n                            </div>\n                        }\n                    />\n                    <DialogStep\n                        id=\"csv_node\"\n                        title=\"Choose a Node file\"\n                        panel={\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"multistep-dialog-body\"\n                                )}\n                                style={{\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                    display: \"flex\",\n                                }}\n                            >\n                                {State.import.isLoading ? (\n                                    <Spinner />\n                                ) : (\n                                    <div>\n                                        <div\n                                            className={classnames(\n                                                Classes.DIALOG_BODY,\n                                                \"import-dialog\"\n                                            )}\n                                            style={{ maxWidth: \"40vw\" }}\n                                        >\n                                            {this.renderNodesSelection()}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        }\n                    />\n                    {/* <DialogStep\n                        id=\"Info\"\n                        title=\"Informtion of graph\"\n                        panel={\n                            <div>\n                                <Card>\n                                    <Table numRows={1}>\n                                        <Column\n                                            name=\" number of Nodes \"\n                                            cellRenderer={this.importedNodes}\n                                        />\n                                        <Column\n                                            name=\" number of Edges \"\n                                            cellRenderer={this.importedEdges}\n                                        />\n                                    </Table>\n                                </Card>\n                                <br />\n                                <Divider />\n                                <div>\n                                    Set an attribute for cluster:\n                                    <ClusterChooser\n                                        onSelect={(cluster) => {\n                                            State.cluster.setCluster(cluster);\n                                        }}\n                                        syncWith={State.cluster.clusterBy}\n                                    />\n                                </div>\n                            </div>\n                        }\n                    /> */}\n                </MultistepDialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Card,\n    Classes,\n    Dialog,\n    Divider,\n    Elevation,\n    H3,\n    Spinner,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport gexf from \"graphology-gexf/browser\";\nimport State from \"../../state\";\nimport { CSVLink } from \"react-csv\";\n\nexport default observer(\n    class ExportDialog extends React.Component {\n        state = {\n            ready: true,\n        };\n\n        /**\n         * compute the GEXF file from rawGraph\n         * delete the temporary _visualize attribute from the graph\n         *\n         * @returns {*}\n         */\n        computeGEXFFile() {\n            let graphCopy = State.graph.rawGraph.copy();\n            graphCopy.forEachNode((_node, attributes: any) => {\n                delete attributes[\"_visualize\"];\n            });\n            graphCopy.forEachEdge((_edge, attributes: any) => {\n                delete attributes[\"_visualize\"];\n            });\n            return gexf.write(graphCopy);\n        }\n\n        computeNodeFile() {\n            let headers: {\n                label: string;\n                key: string;\n            }[] = [];\n            headers.push({ label: \"_id\", key: \"_id\" });\n            State.graph.metadata.nodeProperties.map((value) => {\n                headers.push({ label: value, key: value });\n                return null;\n            });\n            \n            let exportData = State.graph.rawGraph.export();\n            let data: any[] = [];\n            exportData.nodes.forEach((node) => {\n                data.push({\n                    _id: node.key,\n                    ...node.attributes,\n                });\n            });\n            return { headers: headers, data: data };\n        }\n\n        computeEdgeFile() {\n            let headers: {\n                label: string;\n                key: string;\n            }[] = [\n                { label: \"source\", key: \"source\" },\n                { label: \"target\", key: \"target\" },\n            ];\n\n            let exportData = State.graph.rawGraph.export();\n            let data: any[] = [];\n            exportData.edges.forEach((edge) => {\n                data.push({\n                    source: edge.source,\n                    target: edge.target,\n                });\n            });\n            return { headers: headers, data: data };\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"projects\"\n                    isOpen={State.preferences.exportDialogOpen}\n                    onClose={() => {\n                        State.preferences.exportDialogOpen = false;\n                    }}\n                    title={`Export Graph`}\n                >\n                    {!this.state.ready ? (\n                        <Spinner />\n                    ) : (\n                        <div className={classnames(Classes.DIALOG_BODY)}>\n                            <Card interactive={false} elevation={Elevation.ONE}>\n                                <H3>\n                                    GEXF Export{\" \"}\n                                    <Button\n                                        icon=\"help\"\n                                        minimal={true}\n                                        onClick={() => {\n                                            window.open(\n                                                \"https://gephi.org/gexf/format/\"\n                                            );\n                                        }}\n                                    />\n                                </H3>\n                                <Divider />\n\n                                <CSVLink\n                                    data={this.computeGEXFFile()}\n                                    filename={\"Snapshot-GEXF.gexf\"}\n                                    className=\"btn btn-primary\"\n                                    target=\"_blank\"\n                                >\n                                    <Button>Download GEXF File</Button>\n                                </CSVLink>\n                            </Card>\n                            <br />\n                            <Card interactive={false} elevation={Elevation.ONE}>\n                                <H3>\n                                    CSV Export{\" \"}\n                                    <Button\n                                        icon=\"help\"\n                                        minimal={true}\n                                        onClick={() => {\n                                            window.open(\n                                                \"https://github.com/grp202004/PiperNet#data-import\"\n                                            );\n                                        }}\n                                    />\n                                </H3>\n\n                                <Divider />\n                                <ButtonGroup>\n                                    <CSVLink\n                                        data={this.computeNodeFile().data}\n                                        headers={this.computeNodeFile().headers}\n                                        separator={\",\"}\n                                        filename={\"Snapshot-Node.csv\"}\n                                        className=\"btn btn-primary\"\n                                        target=\"_blank\"\n                                    >\n                                        <Button>Download Node File</Button>\n                                    </CSVLink>\n                                    <Divider />\n                                    <CSVLink\n                                        data={this.computeEdgeFile().data}\n                                        headers={this.computeEdgeFile().headers}\n                                        separator={\",\"}\n                                        filename={\"Snapshot-Edge.csv\"}\n                                        className=\"btn btn-primary\"\n                                        target=\"_blank\"\n                                    >\n                                        <Button>Download Edge File</Button>\n                                    </CSVLink>\n                                </ButtonGroup>\n                            </Card>\n                        </div>\n                    )}\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Dialog } from \"@blueprintjs/core\";\nimport { Column, Table, TableLoadingOption } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\n\ninterface Props {\n    for: string;\n    children: React.ReactNode;\n}\n\nexport default observer(\n    class DataSheetDialogWrapper extends React.Component<Props, {}> {\n        state = {\n            loading: true,\n        };\n\n        renderTable() {\n            if (this.state.loading) {\n                return (\n                    <div className=\"argo-table-container\">\n                        <Table\n                            className=\"pt-bordered pt-striped\"\n                            numRows={20}\n                            loadingOptions={[\n                                TableLoadingOption.CELLS,\n                                TableLoadingOption.COLUMN_HEADERS,\n                                TableLoadingOption.ROW_HEADERS,\n                            ]}\n                        >\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                        </Table>\n                    </div>\n                );\n            } else {\n                return this.props.children;\n            }\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"database\"\n                    isOpen={\n                        this.props.for === \"node\"\n                            ? State.preferences.nodeDataSheetDialogOpen\n                            : State.preferences.edgeDataSheetDialogOpen\n                    }\n                    onOpened={() => {\n                        setTimeout(() => {\n                            this.setState({\n                                loading: false,\n                            });\n                        }, 100);\n                    }}\n                    onClose={() => {\n                        if (this.props.for === \"node\") {\n                            State.preferences.nodeDataSheetDialogOpen = false;\n                        } else {\n                            State.preferences.edgeDataSheetDialogOpen = false;\n                        }\n                        this.setState({\n                            loading: true,\n                        });\n                    }}\n                    title=\"Data Sheet\"\n                    style={{ minWidth: \"80vw\" }}\n                >\n                    <div className={classnames(Classes.DIALOG_BODY)}>\n                        {this.renderTable()}\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Alert,\n    Button,\n    ButtonGroup,\n    Callout,\n    Code,\n    Divider,\n    InputGroup,\n    Intent,\n} from \"@blueprintjs/core\";\nimport {\n    Cell,\n    Column,\n    EditableCell,\n    ICellRenderer,\n    Table,\n} from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport DataSheetDialogWrapper from \"../utils/DataSheetDialogWrapper\";\nimport {\n    handleStringChange,\n    parseNumberOrString,\n    stringifyNodeDetail,\n} from \"../utils/InputFormUtils\";\nimport { Attributes, SerializedNode } from \"graphology-types\";\n\nlet GraphNodeTable = observer(\n    class GraphNodeTable extends React.Component {\n        state = {\n            filterQuery: \"\",\n            addNodeDialogOpen: false,\n            deleteAlertOpen: false,\n            nodeToDelete: null as SerializedNode | null,\n        };\n\n        get filteredTable() {\n            let newTable: SerializedNode[] = [];\n            State.graph.rawGraph.export().nodes.forEach((node) => {\n                if (\n                    node.key\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    this.state.filterQuery === \"\"\n                ) {\n                    newTable.push(node);\n                }\n            });\n            return newTable;\n        }\n\n        nodeProperties = State.graph.metadata.nodeProperties;\n\n        renderColumns: any = () => {\n            const columns = this.nodeProperties.map((it, i) => {\n                if (it !== \"_options\") {\n                    return (\n                        <Column\n                            name={it}\n                            cellRenderer={(\n                                rowIndex: number,\n                                columnIndex: number\n                            ) => this.renderCell(rowIndex, it)}\n                        />\n                    );\n                }\n                return null;\n            });\n            return columns.filter((element) => {\n                return element !== undefined;\n            });\n        };\n\n        renderCell = (rowIndex: number, attribute: string) => {\n            let cellAttributes = this.filteredTable[rowIndex].attributes!!;\n            let cell = cellAttributes[attribute];\n\n            return (\n                <EditableCell\n                    value={cell}\n                    onChange={(newVal) =>\n                        this.setValue(newVal, rowIndex, attribute)\n                    }\n                    onConfirm={(newVal) =>\n                        this.setValue(newVal, rowIndex, attribute)\n                    }\n                    tooltip={cell}\n                />\n            );\n        };\n\n        // if the input is a number in string, it will convert the string into number to store\n        setValue = (value: string, rowIndex: number, attribute: string) => {\n            let id = this.filteredTable[rowIndex].key;\n            State.graph.rawGraph.setNodeAttribute(\n                id,\n                attribute,\n                parseNumberOrString(value)\n            );\n        };\n\n        deleteNodeRenderer: ICellRenderer = (rowIndex) => {\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                nodeToDelete: this.filteredTable[rowIndex],\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteNodeAlert = () => {\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropNode(\n                            this.state.nodeToDelete?.key as string\n                        );\n                        this.setState({ deleteAlertOpen: false });\n                    }}\n                    style={{ minWidth: \"60vw\" }}\n                >\n                    <p>\n                        Are you sure you want to delete the node with ID{\" \"}\n                        <Code>{this.state.nodeToDelete?.key}</Code> with\n                        attributes:\n                        <Code>\n                            {stringifyNodeDetail(\n                                this.state.nodeToDelete\n                                    ?.attributes as Attributes\n                            )}\n                        </Code>\n                        This action cannot be reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        style = {\n            textAlign: \"center\",\n        };\n\n        render() {\n            return (\n                <div>\n                    <Callout\n                        title={\n                            \"Try to click on a cell and type in something...\"\n                        }\n                        intent=\"primary\"\n                        icon=\"edit\"\n                    >\n                        The corresponding value of a node's attribute can be\n                        modified by clicking the cell and type in\n                    </Callout>\n\n                    <ButtonGroup>\n                        <Button\n                            onClick={() => this.forceUpdate()}\n                            icon=\"refresh\"\n                            intent=\"none\"\n                            text=\"Refresh\"\n                        />\n                        <Button\n                            onClick={() => {\n                                State.preferences.AddNodeDialogOpen = true;\n                            }}\n                            icon=\"new-object\"\n                            intent=\"primary\"\n                            text=\"Add Node\"\n                        />\n                        <Divider />\n                        <InputGroup\n                            style={{ width: \"40vw\" }}\n                            asyncControl={true}\n                            leftIcon=\"search\"\n                            onChange={handleStringChange((value) => {\n                                this.setState({ filterQuery: value });\n                            })}\n                            placeholder=\"Search any Node...\"\n                            value={this.state.filterQuery}\n                            fill={true}\n                        />\n                    </ButtonGroup>\n\n                    <hr />\n\n                    <Table\n                        className=\"argo-table\"\n                        defaultRowHeight={30}\n                        numRows={this.filteredTable.length}\n                    >\n                        <Column\n                            name=\"\"\n                            cellRenderer={this.deleteNodeRenderer}\n                            //@ts-ignore\n                            style={this.style}\n                        />\n                        <Column\n                            name=\"ID\"\n                            //@ts-ignore\n                            intent={Intent.SUCCESS}\n                            cellRenderer={(rowIndex) => {\n                                let id = this.filteredTable[rowIndex].key;\n                                return <Cell>{id}</Cell>;\n                            }}\n                        />\n                        {this.renderColumns()}\n                    </Table>\n                    {this.deleteNodeAlert()}\n                </div>\n            );\n        }\n    }\n);\n\nexport default observer(\n    class NodeDataSheetDialog extends React.Component {\n        render() {\n            return (\n                <DataSheetDialogWrapper for=\"node\">\n                    <GraphNodeTable />\n                </DataSheetDialogWrapper>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, FormGroup, MenuItem, Tooltip } from \"@blueprintjs/core\";\nimport { Select } from \"@blueprintjs/select\";\nimport { Attributes, SerializedNode } from \"graphology-types\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { stringifyNodeDetail } from \"./InputFormUtils\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * the text to be shown above the selectButton\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    text: string;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     * the {nodeId} is the id of the selected node\n     *\n     * @memberof Props\n     */\n    onChange: (nodeId: string) => void;\n}\n\n/**\n * this component can be used to choose the node among all the nodes, with basic search filters available\n * to use it, you have to specify the text shown above the selectButton as well as the onChange function to call when a candidate is selected\n */\nexport default observer(\n    class NodeChooser extends React.Component<Props, {}> {\n        state = {\n            select: \"Choose \" + this.props.text,\n        };\n\n        render() {\n            return (\n                <FormGroup\n                    label={this.props.text}\n                    labelFor=\"text-input\"\n                    labelInfo=\"(required)\"\n                >\n                    <Select\n                        filterable={true}\n                        items={State.graph.rawGraph.export().nodes}\n                        itemPredicate={(\n                            query: string,\n                            item: SerializedNode<Attributes>\n                        ) => {\n                            return item.key.includes(query);\n                        }}\n                        itemRenderer={(item: SerializedNode<Attributes>) => {\n                            return (\n                                <Tooltip\n                                    content={stringifyNodeDetail(\n                                        item.attributes ?? {}\n                                    )}\n                                >\n                                    <MenuItem\n                                        key={item.key}\n                                        text={item.key}\n                                        onClick={() => {\n                                            let key = item.key;\n                                            this.setState({ select: key });\n                                            this.props.onChange(key);\n                                        }}\n                                    />\n                                </Tooltip>\n                            );\n                        }}\n                        noResults={\n                            <MenuItem disabled={true} text=\"No results.\" />\n                        }\n                        onItemSelect={() => {}}\n                    >\n                        <Button\n                            text={this.state.select}\n                            rightIcon=\"double-caret-vertical\"\n                        />\n                    </Select>\n                </FormGroup>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Alert,\n    Button,\n    ButtonGroup,\n    Callout,\n    Classes,\n    Code,\n    Dialog,\n    Divider,\n    InputGroup,\n    Intent,\n} from \"@blueprintjs/core\";\nimport {\n    Cell,\n    Column,\n    ICellRenderer,\n    RenderMode,\n    Table,\n} from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport DataSheetDialogWrapper from \"../utils/DataSheetDialogWrapper\";\nimport { Attributes, SerializedEdge } from \"graphology-types\";\nimport { handleStringChange } from \"../utils/InputFormUtils\";\nimport NodeChooser from \"../utils/NodeChooser\";\n\nlet GraphEdgeTable = observer(\n    class GraphEdgeTable extends React.Component {\n        state = {\n            addEdgeDialogOpen: false,\n            deleteAlertOpen: false,\n            edgeToDelete: null as null | SerializedEdge<Attributes>,\n            filterQuery: null as null | string,\n            chosenSource: null as null | string,\n            chosenTarget: null as null | string,\n        };\n\n        get filteredTable() {\n            let newTable: SerializedEdge<Attributes>[] = [];\n            State.graph.rawGraph.export().edges.forEach((edge) => {\n                if (\n                    !this.state.filterQuery ||\n                    edge.source\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    edge.target\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    this.state.filterQuery === \"\"\n                ) {\n                    newTable.push(edge);\n                }\n            });\n            return newTable;\n        }\n\n        deleteEdgeRenderer: ICellRenderer = (rowIndex) => {\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                edgeToDelete: this.filteredTable[rowIndex],\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteEdgeAlert = () => {\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropEdge(\n                            this.state.edgeToDelete?.key as string\n                        );\n                        this.setState({ deleteAlertOpen: false });\n                    }}\n                >\n                    <p>\n                        Are you sure you want to delete the edge with ID{\" \"}\n                        <Code>{this.state.edgeToDelete?.key}</Code> from Node ID{\" \"}\n                        <Code>{this.state.edgeToDelete?.source}</Code> to Node\n                        ID <Code>{this.state.edgeToDelete?.target}</Code>. This\n                        action cannot be reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        addEdgeDialog = () => {\n            return (\n                <Dialog\n                    isOpen={this.state.addEdgeDialogOpen}\n                    icon=\"new-link\"\n                    onClose={() => this.setState({ addEdgeDialogOpen: false })}\n                    onClosed={() =>\n                        this.setState({\n                            chosenSource: null,\n                            chosenTarget: null,\n                        })\n                    }\n                    title=\"Add Edge\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add unique undirected edges to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> edge means there should only exist\n                            one edge that connects between the source and the\n                            target.\n                        </p>\n                        <ButtonGroup fill={true}>\n                            <NodeChooser\n                                text=\"Source Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenSource: value });\n                                }}\n                            />\n                            <Divider />\n                            <NodeChooser\n                                text=\"Target Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenTarget: value });\n                                }}\n                            />\n                        </ButtonGroup>\n                        <p>New edges are added to the end of the table.</p>\n                        {!this.canImport && (\n                            <Callout\n                                title=\"Invalid Edge\"\n                                intent=\"danger\"\n                                icon=\"edit\"\n                            >\n                                The new edge is invalid because either this is a\n                                edge that already in the graph or cannot form a\n                                valid undirected edge\n                            </Callout>\n                        )}\n                    </div>\n                    <div className={Classes.DIALOG_FOOTER}>\n                        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                            <Button\n                                onClick={() =>\n                                    this.setState({ addEdgeDialogOpen: false })\n                                }\n                            >\n                                Cancel\n                            </Button>\n                            <Button\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.graph.mutating.addEdge(\n                                        this.state.chosenSource!,\n                                        this.state.chosenTarget!\n                                    );\n                                    this.setState({ addEdgeDialogOpen: false });\n                                }}\n                                disabled={!this.canImport}\n                            >\n                                Confirm\n                            </Button>\n                        </div>\n                    </div>\n                </Dialog>\n            );\n        };\n\n        get canImport(): boolean {\n            if (!this.state.chosenSource || !this.state.chosenTarget) {\n                return false;\n            } else if (this.state.chosenSource === this.state.chosenTarget) {\n                return false;\n            } else {\n                return (\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenSource,\n                        this.state.chosenTarget\n                    ) &&\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenTarget,\n                        this.state.chosenSource\n                    )\n                );\n            }\n        }\n\n        style = {\n            textAlign: \"center\",\n        };\n\n        render() {\n            return (\n                <div>\n                    <ButtonGroup>\n                        <Button\n                            onClick={() => this.forceUpdate()}\n                            icon=\"refresh\"\n                            intent=\"none\"\n                            text=\"Refresh\"\n                        />\n                        <Button\n                            onClick={() =>\n                                this.setState({ addEdgeDialogOpen: true })\n                            }\n                            icon=\"new-link\"\n                            intent=\"primary\"\n                            text=\"Add Edge\"\n                        />\n                        <Divider />\n                        <InputGroup\n                            style={{ width: \"40vw\" }}\n                            asyncControl={true}\n                            leftIcon=\"search\"\n                            onChange={handleStringChange((value) => {\n                                this.setState({ filterQuery: value });\n                            })}\n                            placeholder=\"Search any Source or Target of an Edge...\"\n                            value={this.state.filterQuery ?? \"\"}\n                        />\n                    </ButtonGroup>\n\n                    <hr />\n                    <Table\n                        className=\"argo-table\"\n                        numRows={this.filteredTable.length}\n                        defaultRowHeight={30}\n                        renderMode={RenderMode.NONE}\n                    >\n                        <Column\n                            name=\"\"\n                            cellRenderer={this.deleteEdgeRenderer}\n                            //@ts-ignore\n                            style={this.style}\n                        />\n                        <Column\n                            name=\"Source\"\n                            //@ts-ignore\n                            intent={Intent.PRIMARY}\n                            cellRenderer={(rowIndex) => {\n                                return (\n                                    <Cell>\n                                        {this.filteredTable[rowIndex].source}\n                                    </Cell>\n                                );\n                            }}\n                        />\n                        <Column\n                            name=\"Target\"\n                            //@ts-ignore\n                            intent={Intent.PRIMARY}\n                            cellRenderer={(rowIndex) => {\n                                return (\n                                    <Cell>\n                                        {this.filteredTable[rowIndex].target}\n                                    </Cell>\n                                );\n                            }}\n                        />\n                    </Table>\n                    {this.deleteEdgeAlert()}\n                    {this.addEdgeDialog()}\n                </div>\n            );\n        }\n    }\n);\n\nexport default observer(\n    class EdgeDataSheetDialog extends React.Component {\n        render() {\n            return (\n                <DataSheetDialogWrapper for=\"edge\">\n                    <GraphEdgeTable />\n                </DataSheetDialogWrapper>\n            );\n        }\n    }\n);\n","import {\n    Button,\n    Card,\n    Elevation,\n    FormGroup,\n    H5,\n    InputGroup,\n    Tooltip,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport State from \"../../state\";\nimport { Attributes } from \"graphology-types\";\nimport { handleStringChange, parseNumberOrString } from \"./InputFormUtils\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * function to call when a new node is successfully added\n     * the {nodeId} is the id of the newly added node, {attributes} is the attributes of the newly added node\n     *\n     * @memberof Props\n     */\n    onAdded: (nodeId: string, attributes: Attributes) => void;\n}\n\nexport default observer(\n    class NodeAdder extends React.Component<Props, {}> {\n        state = {\n            newNodeId: \"\",\n            attributes: {} as Attributes,\n        };\n\n        get canImport() {\n            return (\n                !State.graph.rawGraph.hasNode(this.state.newNodeId) &&\n                this.state.newNodeId !== \"\"\n            );\n        }\n\n        canImportTag = () => {\n            return this.canImport ? (\n                <Tooltip\n                    content={\n                        \"This Node Id is not used by any existing node yet\"\n                    }\n                    intent=\"success\"\n                >\n                    <Button icon=\"tick\" intent=\"success\" minimal={true} />\n                </Tooltip>\n            ) : (\n                <Tooltip\n                    content={\n                        \"This Node Id is currently in use by other nodes, try with another one instead\"\n                    }\n                    intent=\"warning\"\n                >\n                    <Button icon=\"cross\" intent=\"warning\" minimal={true} />\n                </Tooltip>\n            );\n        };\n\n        renderAttributesForm = (attributes: string[]) => {\n            return attributes.map((attribute) => {\n                if (attribute !== \"_options\" && attribute !== \"_visualize\") {\n                    return (\n                        <FormGroup label={attribute}>\n                            <InputGroup\n                                asyncControl={true}\n                                placeholder={\n                                    \"Enter the value for attribute: \" +\n                                    attribute\n                                }\n                                onChange={handleStringChange((value) => {\n                                    let newValue = this.state.attributes;\n                                    newValue[attribute] = parseNumberOrString(\n                                        value\n                                    );\n                                    this.setState({ attributes: newValue });\n                                })}\n                                value={this.state.attributes[attribute]}\n                            />\n                        </FormGroup>\n                    );\n                } else {\n                    return null;\n                }\n            });\n        };\n\n        render() {\n            return (\n                <Card elevation={Elevation.ONE}>\n                    <FormGroup label=\"New Node ID\" labelInfo=\"(required)\">\n                        <InputGroup\n                            autoFocus={true}\n                            asyncControl={true}\n                            placeholder=\"Enter the new Node Id...\"\n                            intent={this.canImport ? \"success\" : \"warning\"}\n                            rightElement={this.canImportTag()}\n                            onChange={handleStringChange((value) =>\n                                this.setState({ newNodeId: value })\n                            )}\n                            value={this.state.newNodeId}\n                        />\n                    </FormGroup>\n                    <Card elevation={Elevation.ONE}>\n                        <H5>Attributes</H5>\n                        {this.renderAttributesForm(\n                            State.graph.metadata.nodeProperties\n                        )}\n                    </Card>\n                    <hr />\n                    <Button\n                        intent=\"primary\"\n                        onClick={() => {\n                            State.graph.decorateRawNode(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            State.graph.mutating.addNode(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            this.props.onAdded(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            State.preferences.AddNodeDialogOpen = false;\n                            // State.preferences.rightClickBackgroundPanelOpen = false;\n                            // this.forceUpdate();\n                            // State.graphDelegate.cameraFocusOn(this.state.newNodeId);\n                        }}\n                        disabled={!this.canImport}\n                    >\n                        Confirm\n                    </Button>\n                </Card>\n            );\n        }\n        componentDidMount = () => {\n            State.graph.metadata.nodeProperties.forEach((prop) => {\n                let newValue = this.state.attributes;\n                newValue[prop] = \"\";\n                this.setState({ attributes: newValue });\n            });\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Classes, Dialog, Tag } from \"@blueprintjs/core\";\nimport NodeAdder from \"../utils/NodeAdder\";\nimport State from \"../../state\";\n\nexport default observer(\n    class AddNodeDialog extends React.Component {\n        render() {\n            return (\n                <Dialog\n                    isOpen={State.preferences.AddNodeDialogOpen}\n                    icon=\"new-object\"\n                    onClose={() => {\n                        State.preferences.AddNodeDialogOpen = false;\n                    }}\n                    title=\"Add Node\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add node with unique node id to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> node means there should only exist\n                            one node that has the respective node id.\n                        </p>\n                        <Tag>New nodes are added to the end of the table</Tag>\n                        <hr />\n                        <NodeAdder\n                            onAdded={() => {\n                                this.setState({ addNodeDialogOpen: false });\n                                this.forceUpdate();\n                            }}\n                        />\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Callout,\n    Classes,\n    Dialog,\n    Divider,\n    Intent,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport NodeChooser from \"../utils/NodeChooser\";\nexport default observer(\n    class AddEdgeDialog extends React.Component {\n        state = {\n            chosenSource: null as null | string,\n            chosenTarget: null as null | string,\n        };\n\n        get canImport(): boolean {\n            if (!this.state.chosenSource || !this.state.chosenTarget) {\n                return false;\n            } else if (this.state.chosenSource === this.state.chosenTarget) {\n                return false;\n            } else {\n                return (\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenSource,\n                        this.state.chosenTarget\n                    ) &&\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenTarget,\n                        this.state.chosenSource\n                    )\n                );\n            }\n        }\n\n        render() {\n            return (\n                <Dialog\n                    isOpen={State.preferences.AddEdgeDialogOpen}\n                    icon=\"new-link\"\n                    onClose={() => {\n                        State.preferences.AddEdgeDialogOpen = false;\n                    }}\n                    onClosed={() =>\n                        this.setState({\n                            chosenSource: null,\n                            chosenTarget: null,\n                        })\n                    }\n                    title=\"Add Edge\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add unique undirected edges to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> edge means there should only exist\n                            one edge that connects between the source and the\n                            target.\n                        </p>\n                        <ButtonGroup fill={true}>\n                            <NodeChooser\n                                text=\"Source Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenSource: value });\n                                }}\n                            />\n                            <Divider />\n                            <NodeChooser\n                                text=\"Target Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenTarget: value });\n                                }}\n                            />\n                        </ButtonGroup>\n                        <p>New edges are added to the end of the table.</p>\n                        {!this.canImport && (\n                            <Callout\n                                title=\"Invalid Edge\"\n                                intent=\"danger\"\n                                icon=\"edit\"\n                            >\n                                The new edge is invalid because either this is a\n                                edge that already in the graph or cannot form a\n                                valid undirected edge\n                            </Callout>\n                        )}\n                    </div>\n                    <div className={Classes.DIALOG_FOOTER}>\n                        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                            <Button\n                                onClick={() => {\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                            >\n                                Cancel\n                            </Button>\n                            {/* //todo:\n                            <Button\n                                onClick={() => {\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                            >\n                                Preview\n                            </Button> */}\n                            <Button\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.graph.mutating.addEdge(\n                                        this.state.chosenSource!,\n                                        this.state.chosenTarget!\n                                    );\n                                    this.forceUpdate();\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                                disabled={!this.canImport}\n                            >\n                                Confirm\n                            </Button>\n                        </div>\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","/* eslint-disable jsx-a11y/label-has-for */\nimport React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Classes,\n    Dialog,\n    FileInput,\n    Intent,\n    Spinner,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\n\nexport default observer(\n    class ImportGEXFDialog extends React.Component {\n        state = {\n            fileIsSelect: false,\n        };\n\n        renderImportButton() {\n            return (\n                <div className={Classes.DIALOG_FOOTER}>\n                    <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                        <ButtonGroup>\n                            <Button\n                                className={classnames({\n                                    [Classes.DISABLED]: !this.state\n                                        .fileIsSelect,\n                                })}\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.import.isLoading = true;\n                                    State.import\n                                        .importGraphFromGEXF()\n                                        .then((res) => {\n                                            State.graph.setGraph(\n                                                res.graph,\n                                                res.metadata\n                                            );\n\n                                            if (\n                                                State.cluster.rawGraph.hasAttribute(\n                                                    \"default\"\n                                                )\n                                            ) {\n                                                State.cluster.setCluster(\n                                                    State.graph.rawGraph.getAttribute(\n                                                        \"default\"\n                                                    )\n                                                );\n                                            }\n\n                                            State.import.isLoading = false;\n                                            State.import.importGEXFDialogOpen = false;\n                                        });\n                                }}\n                                text=\"Import\"\n                            />\n                        </ButtonGroup>\n                    </div>\n                </div>\n            );\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"document-open\"\n                    isOpen={State.import.importGEXFDialogOpen}\n                    onClose={() => {\n                        State.import.importGEXFDialogOpen = false;\n                    }}\n                    title=\"Open GEXF\"\n                >\n                    {/* if is loading, then show Spinner */}\n                    {State.import.isLoading ? (\n                        <Spinner />\n                    ) : (\n                        <div\n                            className={classnames(\n                                Classes.DIALOG_BODY,\n                                \"import-dialog\"\n                            )}\n                        >\n                            <div>\n                                <div\n                                    className={classnames(\n                                        Classes.CONTROL_GROUP\n                                    )}\n                                >\n                                    <div\n                                        className={classnames(\n                                            Classes.INPUT_GROUP,\n                                            Classes.FILL\n                                        )}\n                                    >\n                                        <FileInput\n                                            text={State.import.gexfFileName}\n                                            onInputChange={(event) => {\n                                                let target = event.target as HTMLInputElement;\n                                                if (\n                                                    !target.files ||\n                                                    target.files.length < 1\n                                                ) {\n                                                    return;\n                                                }\n                                                State.import.gexfFileName =\n                                                    target.files[0].name;\n                                                // after setting the selectedNodeFileFromInput, it will auto render the preview table\n                                                State.import.selectedGEXFFileFromInput =\n                                                    target.files[0];\n\n                                                this.setState({\n                                                    fileIsSelect: true,\n                                                });\n                                            }}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                            {this.renderImportButton()}\n                        </div>\n                    )}\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\n// import PreferencesDialog from \"./PreferencesDialog\";\nimport ImportDialog from \"./dialogs/importDialog\";\nimport ExportDialog from \"./dialogs/ExportDialog\";\n// import ProjectDetailDialog from \"./ProjectDetailDialog\";\n// import RenameSnapshotDialog from \"./RenameSnapshotDialog\";\n// import StatisticsDialog from './StatisticsDialog';\n// import HelpDialog from './HelpDialog';\n// import NeighborDialog from './NeighborDialog';\nimport NodeDataSheetDialog from \"./dialogs/NodeDataSheetDialog\";\nimport EdgeDataSheetDialog from \"./dialogs/EdgeDataSheetDialog\";\nimport AddNodeDialog from \"./dialogs/AddNodeDialog\";\nimport AddEdgeDialog from \"./dialogs/AddEdgeDialog\";\nimport ImportGEXFDialog from \"./dialogs/ImportGEXFDialog\";\n\nexport default class Dialogs extends React.Component {\n    render() {\n        return (\n            <div style={{ display: \"none\" }}>\n                {/* <PreferencesDialog /> */}\n                <ImportGEXFDialog />\n                <ImportDialog />\n                {/*\n                <ProjectDetailDialog />\n                <RenameSnapshotDialog />\n                <StatisticsDialog />\n                <HelpDialog />\n                <NeighborDialog />\\\n                */}\n                <AddNodeDialog />\n                <AddEdgeDialog />\n                <NodeDataSheetDialog />\n                <EdgeDataSheetDialog />\n                <ExportDialog />\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Attributes } from \"graphology-types\";\nimport classnames from \"classnames\";\nimport State from \"../../state/index\";\n\nexport default observer(\n    class SelectionBox extends React.Component {\n        state = {\n            boxStyle: {\n                left: 0,\n                top: 0,\n                width: 0,\n                height: 0,\n            },\n            startPoint: { x: 0, y: 0 },\n            endPoint: { x: 0, y: 0 },\n            mouseDown: false,\n        };\n\n        onMouseDownCallback = (\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\n        ) => {\n            let startpoint = { x: event.clientX, y: event.clientY };\n            this.setState({\n                startPoint: startpoint,\n                mouseDown: true,\n            });\n        };\n\n        onMouseMoveCallback = (\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\n        ) => {\n            if (this.state.mouseDown) {\n                let endPoint = { x: event.clientX, y: event.clientY };\n                // this.setState({ endPoint: endPoint });\n                this.setState({\n                    endPoint: endPoint,\n                    boxStyle: this._calculateSelectionBox(\n                        this.state.startPoint,\n                        this.state.endPoint\n                    ),\n                });\n            }\n        };\n\n        onMouseUpCallback = (\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\n        ) => {\n            State.interaction.boxSelection_endPoint = {\n                x: this.state.endPoint.x,\n                y: this.state.endPoint.y,\n            };\n            State.interaction.boxSelection_startPoint = {\n                x: this.state.startPoint.x,\n                y: this.state.startPoint.y,\n            };\n\n            this.setState({\n                startPoint: { x: 0, y: 0 },\n                endPoint: { x: 0, y: 0 },\n                boxStyle: {\n                    left: 0,\n                    top: 0,\n                    width: 0,\n                    height: 0,\n                },\n                mouseDown: false,\n            });\n            State.interaction.boxSelectNode();\n        };\n\n        _calculateSelectionBox(\n            startPoint: Attributes,\n            endPoint: Attributes\n        ): Attributes {\n            let left = Math.min(startPoint.x, endPoint.x);\n            let top = Math.min(startPoint.y, endPoint.y);\n            let width = Math.abs(startPoint.x - endPoint.x);\n            let height = Math.abs(startPoint.y - endPoint.y);\n            return { left: left, top: top, width: width, height: height };\n        }\n\n        render() {\n            return (\n                <div\n                    className={classnames(\"boxCanvas\")}\n                    onMouseDown={this.onMouseDownCallback}\n                    onMouseMove={this.onMouseMoveCallback}\n                    onMouseUp={this.onMouseUpCallback}\n                >\n                    <div\n                        className={classnames(\"selectionBox\")}\n                        style={this.state.boxStyle}\n                    ></div>\n                </div>\n            );\n        }\n    }\n);\n","import ReactDOM from \"react-dom\";\nimport State from \"..\";\nimport * as THREE from \"three\";\nimport { Object3D } from \"three\";\nimport ComponentRef from \"../../components/ComponentRef\";\n\nexport function onDocumentLeftClick(event: MouseEvent) {\n    if (\n        State.cluster.clusterBy === null ||\n        !State.graphDelegate.graphDelegateMethods\n    ) {\n        return;\n    }\n    let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n    let box = (element as Element)?.getBoundingClientRect();\n\n    let vector = new THREE.Vector3(\n        ((event.clientX - box.left) / box.width) * 2 - 1,\n        -((event.clientY - box.top) / box.height) * 2 + 1,\n        0.5\n    );\n\n    let camera = State.graphDelegate.graphDelegateMethods?.camera();\n    if (!camera) {\n        return;\n    }\n    vector = vector.unproject(camera);\n\n    let raycaster = new THREE.Raycaster(\n        camera.position,\n        vector.sub(camera.position).normalize()\n    );\n    let intersects = raycaster.intersectObjects(\n        State.graphDelegate.clusterObject.fusionClusterObjects\n            ?.children as Object3D[],\n        true\n    );\n\n    if (intersects.length > 0) {\n        State.clusterInteraction.clusterLeftClickCallback(\n            intersects[0].object.uuid,\n            event\n        );\n        console.log(\"currently Clicked ClusterId\", intersects[0].object.uuid);\n    }\n}\n\nexport function onDocumentRightClick(event: MouseEvent) {\n    if (\n        State.cluster.clusterBy === null ||\n        !State.graphDelegate.graphDelegateMethods\n    ) {\n        return;\n    }\n    let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n    let box = (element as Element)?.getBoundingClientRect();\n\n    let vector = new THREE.Vector3(\n        ((event.clientX - box.left) / box.width) * 2 - 1,\n        -((event.clientY - box.top) / box.height) * 2 + 1,\n        0.5\n    );\n\n    let camera = State.graphDelegate.graphDelegateMethods?.camera();\n    if (!camera) {\n        return;\n    }\n    vector = vector.unproject(camera);\n\n    let raycaster = new THREE.Raycaster(\n        camera.position,\n        vector.sub(camera.position).normalize()\n    );\n    let intersects = raycaster.intersectObjects(\n        State.graphDelegate.clusterObject.fusionClusterObjects\n            ?.children as Object3D[],\n        true\n    );\n\n    if (intersects.length > 0) {\n        State.clusterInteraction.clusterRightClickCallback(\n            intersects[0].object.uuid,\n            event\n        );\n    } else {\n        State.clusterInteraction.clusterRightClickCallback(null, event);\n    }\n    console.log(\n        \"currently Right-Clicked ClusterId\",\n        intersects[0]?.object?.uuid ?? null\n    );\n}\n\nexport function onDocumentMouseMove(event: MouseEvent) {\n    if (\n        State.cluster.clusterBy === null ||\n        !State.graphDelegate.graphDelegateMethods\n    ) {\n        State.clusterInteraction.currentlyHoveredClusterId = null;\n        return;\n    }\n    let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n    let box = (element as Element)?.getBoundingClientRect();\n\n    let vector = new THREE.Vector3(\n        ((event.clientX - box.left) / box.width) * 2 - 1,\n        -((event.clientY - box.top) / box.height) * 2 + 1,\n        0.5\n    );\n\n    let camera = State.graphDelegate.graphDelegateMethods?.camera();\n    if (!camera) {\n        return;\n    }\n    vector = vector.unproject(camera);\n\n    let raycaster = new THREE.Raycaster(\n        camera.position,\n        vector.sub(camera.position).normalize()\n    );\n    let intersects = raycaster.intersectObjects(\n        State.graphDelegate.clusterObject.fusionClusterObjects\n            ?.children as Object3D[],\n        true\n    );\n\n    if (intersects.length > 0) {\n        State.clusterInteraction.clusterHoverCallback(\n            intersects[0].object.uuid,\n            event\n        );\n    } else {\n        State.clusterInteraction.clusterHoverCallback(null, event);\n    }\n    console.log(\n        \"currentlyHoveredClusterId\",\n        intersects[0]?.object?.uuid ?? null\n    );\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport CanvasDraw from \"react-canvas-draw\";\nimport ReactDOM from \"react-dom\";\nimport ComponentRef from \"../ComponentRef\";\nimport State from \"../../state\";\n\nexport default observer(\n    class CanvasDrawPanel extends React.Component {\n        //@ts-ignore\n        canvasRef: React.MutableRefObject<CanvasDraw> = React.createRef();\n\n        get canvasMethods() {\n            return this.canvasRef.current;\n        }\n\n        get canvas() {\n            let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n            return (element as Element)?.getBoundingClientRect();\n        }\n\n        render() {\n            return (\n                <div\n                    onMouseUp={() => {\n                        const data = JSON.parse(\n                            this.canvasMethods.getSaveData()\n                        );\n                        if (data.lines[0].points.length > 4) {\n                            this.exportDrawing();\n                        }\n                    }}\n                >\n                    <CanvasDraw\n                        ref={this.canvasRef}\n                        style={{\n                            position: \"absolute\",\n                            top: this.canvas.y,\n                        }}\n                        canvasHeight={this.canvas.height}\n                        canvasWidth={this.canvas.width}\n                        lazyRadius={0}\n                        brushRadius={3}\n                        brushColor={\"#F6B26B\"}\n                        catenaryColor={\"#F6B26B\"}\n                    />\n                </div>\n            );\n        }\n\n        exportDrawing() {\n            State.helper.clusterSplittingCurrentStep = 3;\n            let hightDiff = 50;\n            const data = JSON.parse(this.canvasMethods.getSaveData());\n            let drawPoints = data?.lines[0]?.points as {\n                x: number;\n                y: number;\n            }[];\n            if (!drawPoints) {\n                return;\n            }\n            drawPoints.forEach((value) => {\n                value.y += hightDiff;\n            });\n\n            // line was drawn left to right\n            if (drawPoints[0].x < drawPoints[drawPoints.length - 1].x) {\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.canvas.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            } else {\n                drawPoints.reverse();\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.canvas.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            }\n\n            // const firstPoint = drawPoints[0];\n            // const x1 = firstPoint.x,\n            //     y1 = firstPoint.y;\n            // const lastPoint = drawPoints[drawPoints.length - 1];\n            // const x2 = lastPoint.x,\n            //     y2 = lastPoint.y;\n            // const slope = (y1 - y2) / (x1 - x2);\n            // const b = (x1 * y2 - x2 * y1) / (x1 - x2);\n\n            // const leftIntersect = { x: 0, y: b };\n            // const rightIntersect = {\n            //     x: this.canvas.width,\n            //     y: slope * this.canvas.width + b,\n            // };\n            // const topIntersect = { x: -b / slope, y: 0 };\n            // const bottomIntersect = {\n            //     x: (this.canvas.height - b) / slope,\n            //     y: this.canvas.height,\n            // };\n\n            State.clusterInteraction.lineSegment = drawPoints;\n            State.clusterInteraction.computeSplitCluster();\n        }\n\n        clearDrawing() {\n            this.canvasMethods.clear();\n        }\n\n        componentDidMount = () => {\n            ComponentRef.canvasDrawPanel = this;\n            this.clearDrawing();\n        };\n    }\n);\n","import { Intent, Position, Toaster, ToasterPosition } from \"@blueprintjs/core\";\nimport React from \"react\";\n\nexport function createToaster(\n    message: React.ReactNode,\n    position: ToasterPosition = Position.TOP,\n    timeout: number = 5000\n) {\n    Toaster.create({\n        position: position,\n    }).show({\n        message: message,\n        intent: Intent.NONE,\n        timeout: timeout,\n    });\n}\n","import { observer } from \"mobx-react\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport State from \"../../state\";\nimport ComponentRef from \"../ComponentRef\";\n\nexport default observer(\n    class CanvasDrawStraightLinePanel extends React.Component {\n        startPoint = { x: 0, y: 0 };\n        endPoint = { x: 100, y: 100 };\n        mouseDown = false;\n\n        componentRef: React.LegacyRef<HTMLCanvasElement> = React.createRef();\n\n        get canvas() {\n            let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n            return (element as Element)?.getBoundingClientRect();\n        }\n\n        onMouseDownCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            this.startPoint = { x: event.clientX, y: event.clientY - 50 };\n            this.endPoint = { x: event.clientX, y: event.clientY - 50 };\n            this.mouseDown = true;\n        };\n\n        onMouseMoveCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            if (this.mouseDown) {\n                this.endPoint = { x: event.clientX, y: event.clientY - 50 };\n                this.drawPoints();\n            }\n        };\n\n        onMouseUpCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            if (this.mouseDown) {\n                this.mouseDown = false;\n                this.exportDrawing();\n            }\n        };\n\n        exportDrawing() {\n            State.helper.clusterSplittingCurrentStep = 3;\n            let drawPoints = [\n                { x: this.startPoint.x, y: this.startPoint.y },\n                { x: this.endPoint.x, y: this.endPoint.y },\n            ] as {\n                x: number;\n                y: number;\n            }[];\n\n            // line was drawn left to right\n            if (drawPoints[0].x < drawPoints[1].x) {\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.canvas.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            } else {\n                drawPoints.reverse();\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.canvas.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            }\n\n            State.clusterInteraction.lineSegment = drawPoints;\n            State.clusterInteraction.computeSplitCluster();\n        }\n\n        ctx!: CanvasRenderingContext2D;\n\n        drawPoints() {\n            this.ctx.lineJoin = \"round\";\n            this.ctx.lineCap = \"round\";\n            this.ctx.clearRect(\n                0,\n                0,\n                this.ctx.canvas.width,\n                this.ctx.canvas.height\n            );\n            this.ctx.lineWidth = 5;\n\n            //\n            this.ctx.beginPath();\n\n            //\n            this.ctx.moveTo(this.startPoint.x, this.startPoint.y);\n            //\n            this.ctx.lineTo(this.endPoint.x, this.endPoint.y);\n\n            this.ctx.strokeStyle = \"#F6B26B\";\n            //\n            this.ctx.stroke();\n        }\n\n        clearDrawing() {\n            this.ctx.clearRect(\n                0,\n                0,\n                this.ctx.canvas.width,\n                this.ctx.canvas.height\n            );\n        }\n\n        render() {\n            return (\n                <canvas\n                    style={{\n                        position: \"absolute\",\n                        zIndex: 20,\n                    }}\n                    width={this.canvas.width}\n                    height={this.canvas.height}\n                    ref={(canvas) => {\n                        if (canvas) {\n                            this.ctx = canvas.getContext(\n                                \"2d\"\n                            ) as CanvasRenderingContext2D;\n                        }\n                    }}\n                    onMouseDown={this.onMouseDownCallback}\n                    onMouseMove={this.onMouseMoveCallback}\n                    onMouseUp={this.onMouseUpCallback}\n                />\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.canvasDrawStraightLinePanel = this;\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport ForceGraph3D, {\n    ForceGraphMethods,\n    LinkObject,\n    NodeObject,\n} from \"react-force-graph-3d\";\nimport ComponentRef from \"../ComponentRef\";\nimport State from \"../../state\";\nimport SpriteText from \"three-spritetext\";\nimport {\n    ICustomLinkObject,\n    ICustomNodeObject,\n} from \"../../state/GraphDelegate\";\nimport { reaction } from \"mobx\";\nimport { VisualizationMode } from \"../../state/PreferencesStore\";\nimport SelectionBox from \"../panels/SelectionBox\";\nimport * as CustomMouseEvent from \"../../state/utils/MouseEventUtils\";\nimport CanvasDrawPanel from \"../panels/CanvasDrawPanel\";\nimport { createToaster } from \"../../state/utils/ToasterUtils\";\nimport { Position } from \"@blueprintjs/core\";\nimport CanvasDrawStraightLinePanel from \"../panels/CanvasDrawStraightLinePanel\";\n\nexport default observer(\n    class ThreeJSVis extends React.Component {\n        state = {\n            visualizationGraph: State.graphDelegate.visualizationGraph(),\n            nodePointerInteraction: true,\n        };\n\n        // @ts-ignore\n        graphRef: React.MutableRefObject<ForceGraphMethods> = React.createRef();\n\n        get graphMethods(): ForceGraphMethods {\n            return this.graphRef.current;\n        }\n\n        graphDelegate = State.graphDelegate;\n\n        hoverNodeCallback = (\n            node: NodeObject | null,\n            previousNode: NodeObject | null\n        ) => {\n            if (State.search.isPreviewing) return;\n            // to avoid frequent refresh\n\n            if (node === null) {\n                State.interaction.currentlyHoveredNodeId = null;\n            } else if (node !== previousNode) {\n                let current: string = node.id as string;\n                State.interaction.currentlyHoveredNodeId = current;\n            }\n            // console.log(State.graph.rawGraph);\n        };\n\n        nodeLeftClickCallback = (node: NodeObject, event: MouseEvent) => {\n            if (!this.state.nodePointerInteraction) {\n                return;\n            }\n            let nodeId = node.id as string;\n            if (\n                State.preferences.visualizationMode ===\n                VisualizationMode.NodeSelection\n            ) {\n                // multi-selection\n                let index;\n                // if already in the list of selected, remove\n                if (\n                    (index = State.interaction.selectedNodes.indexOf(\n                        nodeId\n                    )) !== -1\n                ) {\n                    State.interaction.selectedNodes.splice(index, 1);\n                } else {\n                    // if not in the list, add\n                    State.interaction.selectedNodes.push(nodeId);\n                }\n            } else {\n                // single select\n                State.interaction.selectedNodes = [node.id as string];\n            }\n        };\n\n        nodeRightClickCallback = (node: NodeObject, event: MouseEvent) => {\n            if (!this.state.nodePointerInteraction) {\n                return;\n            }\n            State.interaction.selectedNode = node.id as string;\n            State.preferences.rightClickPositionX = event.x;\n            State.preferences.rightClickPositionY = event.y;\n            State.preferences.rightClickOn = \"Node\";\n            State.preferences.rightClickPanelOpen = true;\n            State.preferences.closeAllPanel(\"rightClickPanel\");\n        };\n\n        backgroundClickCallback = () => {\n            // cancel all selection\n            State.interaction.flush();\n            State.interaction.selectedNodes = [];\n            State.preferences.rightClickPanelOpen = false;\n            State.preferences.closeAllPanel(\"rightClickPanel\");\n        };\n\n        backgroundRightClickCallback = (event: MouseEvent) => {\n            if (!this.state.nodePointerInteraction) {\n                return;\n            }\n            State.preferences.rightClickPositionX = event.x;\n            State.preferences.rightClickPositionY = event.y;\n            State.preferences.rightClickOn = \"Background\";\n            State.preferences.rightClickPanelOpen = true;\n            State.preferences.closeAllPanel(\"rightClickPanel\");\n        };\n\n        computeNodeColor(_node: NodeObject) {\n            let node = _node as ICustomNodeObject;\n            if (node.hovered) {\n                return State.css.node.highlightColor;\n            } else if (node.selected) {\n                return State.css.node.selectedColor;\n            } else if (node.multiSelected) {\n                return State.css.node.multiSelectedColor;\n            } else {\n                return State.css.node.defaultColor;\n            }\n        }\n\n        computeEdgeColor(_edge: LinkObject) {\n            let edge = _edge as ICustomLinkObject;\n            if (edge.hovered) {\n                return State.css.edge.highlightColor;\n            } else if (edge.selected) {\n                return State.css.edge.selectedColor;\n            } else {\n                return State.css.edge.defaultColor;\n            }\n        }\n        computeEdgeWidth(_edge: LinkObject) {\n            let edge = _edge as ICustomLinkObject;\n            if (edge.hovered) {\n                return State.css.edge.highlightWidth;\n            } else if (edge.selected) {\n                return State.css.edge.highlightWidth;\n            } else {\n                return State.css.edge.defaultWidth;\n            }\n        }\n\n        renderDrawCanvas = () => {\n            if (State.clusterInteraction.drawStraightLine) {\n                return <CanvasDrawStraightLinePanel />;\n            } else {\n                return <CanvasDrawPanel />;\n            }\n        };\n        renderGraph = () => {\n            if (State.preferences.view === \"3D\") {\n                return (\n                    <div>\n                        {State.preferences.visualizationMode ===\n                            VisualizationMode.NodeSelection &&\n                            State.interaction.boxSelectionOpen && (\n                                <SelectionBox />\n                            )}\n                        {State.preferences.visualizationMode ===\n                            VisualizationMode.ClusterSplitting &&\n                            State.clusterInteraction.drawPanelActivate &&\n                            this.renderDrawCanvas()}\n                        <ForceGraph3D\n                            // Data Segment\n                            ref={this.graphRef}\n                            graphData={this.state.visualizationGraph}\n                            // Node Visualization Segment\n                            nodeLabel=\"id\"\n                            nodeRelSize={State.css.node.size}\n                            nodeColor={this.computeNodeColor}\n                            nodeVisibility={this.graphDelegate.nodeVisibility}\n                            nodeResolution={State.css.node.resolution}\n                            nodeThreeObjectExtend={true}\n                            nodeThreeObject={(node) => {\n                                const sprite = new SpriteText(`${node.id}`);\n                                sprite.color = State.css.label.color;\n                                sprite.textHeight = State.css.label.size;\n                                sprite.visible = State.css.label.show;\n                                sprite.backgroundColor = \"\";\n                                sprite.translateX(State.css.node.size + 2);\n                                return sprite;\n                            }}\n                            // Node Manipulation Segment\n                            onNodeHover={this.hoverNodeCallback}\n                            onNodeClick={this.nodeLeftClickCallback}\n                            onNodeRightClick={this.nodeRightClickCallback}\n                            onNodeDragEnd={(node) => {\n                                node.fx = node.x;\n                                node.fy = node.y;\n                                node.fz = node.z;\n                            }}\n                            // Link Visualization Segment\n                            linkVisibility={this.graphDelegate.linkVisibility}\n                            linkWidth={this.computeEdgeWidth}\n                            linkColor={this.computeEdgeColor}\n                            // Graph Manipulation Segment\n                            onBackgroundRightClick={\n                                this.backgroundRightClickCallback\n                            }\n                            onBackgroundClick={this.backgroundClickCallback}\n                            enablePointerInteraction={\n                                this.state.nodePointerInteraction\n                            }\n                            // Engine\n                            onEngineTick={() => {\n                                this.graphDelegate.clusterObject.clusterDelegation();\n                            }}\n                        />\n                    </div>\n                );\n                // } else {\n                //     return (\n                //         <ForceGraph2D\n                //             graphData={State.graph.adapterGraph}\n                //             dagMode={\"td\"}\n                //             // dagLevelDistance={300}\n                //             // backgroundColor=\"#101020\"\n                //             nodeRelSize={1}\n                //             // nodeId=\"path\"\n                //             // nodeVal={(node) => 100 / (node.level + 1)}\n                //             // nodeLabel=\"path\"\n                //             // nodeAutoColorBy=\"module\"\n                //             // linkDirectionalParticles={2}\n                //             // linkDirectionalParticleWidth={2}\n                //             d3VelocityDecay={0.3}\n                //         />\n                //     );\n            }\n        };\n\n        render() {\n            return <div>{this.renderGraph()}</div>;\n        }\n\n        updateVisualizationGraph() {\n            this.setState({\n                visualizationGraph: State.graphDelegate.visualizationGraph(),\n            });\n        }\n\n        clusterInteractionListener(set: boolean) {\n            if (set) {\n                document.addEventListener(\n                    \"mousemove\",\n                    CustomMouseEvent.onDocumentMouseMove\n                );\n                document.addEventListener(\n                    \"click\",\n                    CustomMouseEvent.onDocumentLeftClick\n                );\n                document.addEventListener(\n                    \"contextmenu\",\n                    CustomMouseEvent.onDocumentRightClick\n                );\n                console.log(\"MouseEvent listening\");\n            } else {\n                document.removeEventListener(\n                    \"mousemove\",\n                    CustomMouseEvent.onDocumentMouseMove\n                );\n                document.removeEventListener(\n                    \"click\",\n                    CustomMouseEvent.onDocumentLeftClick\n                );\n                document.removeEventListener(\n                    \"contextmenu\",\n                    CustomMouseEvent.onDocumentRightClick\n                );\n                console.log(\"MouseEvent stop listening\");\n            }\n        }\n\n        componentDidMount() {\n            this.graphDelegate.mountDelegateMethods(this.graphMethods);\n            this.clusterInteractionListener(true);\n            ComponentRef.visualizer = this;\n        }\n    }\n);\n\nreaction(\n    () => State.preferences.visualizationMode,\n    (visualizationMode) => {\n        switch (visualizationMode) {\n            case VisualizationMode.Normal:\n                ComponentRef.visualizer?.setState({\n                    nodePointerInteraction: true,\n                });\n                ComponentRef.visualizer?.clusterInteractionListener(true);\n                break;\n\n            case VisualizationMode.NodeSelection:\n                ComponentRef.visualizer?.setState({\n                    nodePointerInteraction: true,\n                });\n                ComponentRef.visualizer?.clusterInteractionListener(false);\n                createToaster(\n                    <p>\n                        Select one or more <b>Nodes</b> and <b>Right-click</b>{\" \"}\n                        on one of them to open <b>Context Menu</b>\n                    </p>,\n                    Position.BOTTOM,\n                    10000\n                );\n                break;\n\n            case VisualizationMode.ClusterSelection:\n                ComponentRef.visualizer?.setState({\n                    nodePointerInteraction: false,\n                });\n                ComponentRef.visualizer?.clusterInteractionListener(true);\n                createToaster(\n                    <p>\n                        Select one or more <b>Clusters</b> and{\" \"}\n                        <b>Right-click</b> on one of them to open{\" \"}\n                        <b>Context Menu</b>\n                    </p>,\n                    Position.BOTTOM,\n                    10000\n                );\n                break;\n\n            case VisualizationMode.ClusterSplitting:\n                ComponentRef.visualizer?.setState({\n                    nodePointerInteraction: false,\n                });\n                ComponentRef.visualizer?.clusterInteractionListener(true);\n                State.clusterInteraction.flush();\n                State.helper.clusterSplittingPanelStackOpen = true;\n                break;\n        }\n    }\n);\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Classes } from \"@blueprintjs/core\";\nimport { Cell, Column, EditableCell, Table } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state/index\";\nimport ComponentRef from \"../ComponentRef\";\n\ninterface Props {\n    /**\n     * the node id of the select node\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    onNode: string;\n}\n\nexport default observer(\n    class NodeDetail extends React.Component<Props, {}> {\n        cellRenderer_property = (rowIndex: number) => {\n            return <Cell>{State.graph.metadata.nodeProperties[rowIndex]}</Cell>;\n        };\n\n        cellRenderer_value = (rowIndex: number) => {\n            let data = State.graph.rawGraph.getNodeAttribute(\n                this.props.onNode,\n                State.graph.metadata.nodeProperties[rowIndex]\n            );\n            // return a Editable Cell where user can edit the value of certain property;\n            return (\n                <EditableCell\n                    value={data}\n                    onChange={(newVal) =>\n                        State.graph.rawGraph.setNodeAttribute(\n                            this.props.onNode,\n                            State.graph.metadata.nodeProperties[rowIndex],\n                            newVal\n                        )\n                    }\n                    onConfirm={(newVal) =>\n                        State.graph.rawGraph.setNodeAttribute(\n                            this.props.onNode,\n                            State.graph.metadata.nodeProperties[rowIndex],\n                            newVal\n                        )\n                    }\n                    tooltip={data}\n                />\n            );\n        };\n\n        formatLongFloat = (nodeAttributeValue: any) => {\n            const num = Number(nodeAttributeValue);\n            if (Number.isNaN(num) || num > 1 || num < 0) {\n                // Do not format just return original\n                return nodeAttributeValue;\n            }\n            // Format to no more than 3 significant digit.\n            return Number.parseFloat(num.toString()).toPrecision(3);\n        };\n\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"right-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <div\n                        className={classnames(\n                            Classes.CARD,\n                            \"node-details-table\"\n                        )}\n                    >\n                        <Table\n                            numRows={State.graph.metadata.nodeProperties.length}\n                            enableRowHeader={false}\n                        >\n                            <Column\n                                name=\"Properties\"\n                                cellRenderer={this.cellRenderer_property}\n                            />\n                            <Column\n                                name=\"Value\"\n                                cellRenderer={this.cellRenderer_value}\n                            />\n                        </Table>\n                    </div>\n                </div>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.nodeDetail = React.createRef();\n        };\n    }\n);\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Classes } from \"@blueprintjs/core\";\nimport { Cell, Column, Table } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport ComponentRef from \"../ComponentRef\";\nimport State from \"../../state/index\";\n\nexport default observer(\n    class MultipleNodeDetail extends React.Component {\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"left-bottom-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <div className={classnames(Classes.CARD)}>\n                        <Table numRows={State.interaction.selectedNodes.length}>\n                            {State.graph.metadata.nodeProperties.map((it) => (\n                                <Column\n                                    key={it}\n                                    name={it}\n                                    cellRenderer={(i) => (\n                                        <Cell>\n                                            {State.graph.rawGraph.getNodeAttribute(\n                                                State.interaction.selectedNodes[\n                                                    i\n                                                ] as string,\n                                                it as string\n                                            )}\n                                        </Cell>\n                                    )}\n                                />\n                            ))}\n                        </Table>\n                    </div>\n                </div>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.multiNodeDetail = this;\n        };\n    }\n);\n","import React from \"react\";\nimport { Alert, Button, Card, Code, H6, Intent } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\nimport {\n    Cell,\n    Column,\n    ICellRenderer,\n    RenderMode,\n    Table,\n} from \"@blueprintjs/table\";\n\ninterface Props {\n    /**\n     * the node id of the select node to delete Edge\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    onNode: string;\n}\n\nexport default observer(\n    class DeleteEdgeInteractionPanel extends React.Component<Props, {}> {\n        state = {\n            targetNode: null as string | null,\n            deleteAlertOpen: false,\n        };\n\n        get neighbors(): string[] {\n            return State.graph.rawGraph.neighbors(this.props.onNode);\n        }\n\n        deleteEdgeRenderer: ICellRenderer = (rowIndex) => {\n            let targetNode = this.neighbors[rowIndex];\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                targetNode: targetNode,\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteEdgeAlert = () => {\n            if (this.state.targetNode === null) {\n                return null;\n            }\n\n            let edgeToDelete: string | undefined;\n\n            if (\n                (edgeToDelete = State.graph.rawGraph.edge(\n                    this.state.targetNode,\n                    this.props.onNode\n                )) === undefined\n            ) {\n                edgeToDelete = State.graph.rawGraph.edge(\n                    this.props.onNode,\n                    this.state.targetNode\n                );\n            }\n\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropEdge(edgeToDelete as string);\n                        this.setState({ deleteAlertOpen: false });\n                        State.preferences.deleteEdgePanelOpen = false;\n                    }}\n                >\n                    <p>\n                        Are you sure you want to delete the edge with Key{\" \"}\n                        <Code>{edgeToDelete as string}</Code> between Node ID{\" \"}\n                        <Code>{this.state.targetNode}</Code> and Node ID{\" \"}\n                        <Code>{this.props.onNode}</Code>. This action cannot be\n                        reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        neighborsRenderer: ICellRenderer = (rowIndex: number) => {\n            return (\n                <Cell interactive={true}>\n                    <div\n                        onMouseEnter={() => {\n                            State.graphDelegate.cameraFocusOn(\n                                this.props.onNode,\n                                400\n                            );\n                            State.interaction.selectedEdge = State.interaction.getEdgeKey(\n                                this.props.onNode,\n                                this.neighbors[rowIndex]\n                            ) as string;\n                        }}\n                    >\n                        {this.neighbors[rowIndex]}\n                    </div>\n                </Cell>\n            );\n        };\n\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"right-bottom-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <Card className={classnames(\"node-details-table\")}>\n                        <Button\n                            icon=\"cross\"\n                            onClick={() => {\n                                State.preferences.deleteEdgePanelOpen = false;\n                                State.interaction.selectedEdge = null;\n                                State.graphDelegate.graphDelegateMethods.refresh(); // update color of selected edges\n                            }}\n                        >\n                            Close\n                        </Button>\n                        <H6> Node ID: {this.props.onNode}</H6>\n                        <Table\n                            numRows={this.neighbors.length}\n                            defaultRowHeight={30}\n                            renderMode={RenderMode.NONE}\n                        >\n                            <Column\n                                name=\"\"\n                                cellRenderer={this.deleteEdgeRenderer}\n                                //@ts-ignore\n                                style={this.style}\n                            />\n                            <Column\n                                name=\"Node ID\"\n                                //@ts-ignore\n                                intent={Intent.PRIMARY}\n                                cellRenderer={this.neighborsRenderer}\n                            />\n                        </Table>\n                        {this.deleteEdgeAlert()}\n                    </Card>\n                </div>\n            );\n        }\n    }\n);\n","import React, { ReactNode } from \"react\";\nimport { Button, Card, Classes, Collapse, Elevation } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\n\ninterface Props {\n    name: string;\n    isOpen: boolean;\n    onToggle: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n    children: ReactNode;\n}\n\nexport default observer(\n    class SimpleSelect extends React.Component<Props, {}> {\n        render() {\n            return (\n                <Card elevation={Elevation.THREE}>\n                    <Button\n                        className={classnames(\n                            Classes.LARGE,\n                            Classes.FILL,\n                            \"text-align-left\"\n                        )}\n                        rightIcon={\n                            this.props.isOpen ? \"chevron-up\" : \"chevron-down\"\n                        }\n                        onClick={this.props.onToggle}\n                    >\n                        {this.props.name}\n                    </Button>\n                    <Collapse isOpen={this.props.isOpen}>\n                        {this.props.children}\n                    </Collapse>\n                </Card>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Classes, Slider } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport Collapsable from \"../utils/Collapsable\";\nimport SimpleSelect from \"../utils/SimpleSelect\";\n\nexport default observer(\n    class ClusterPanel extends React.Component {\n        state = {\n            shapeOptionOpen: false,\n            forceOptionOpen: false,\n        };\n\n        forceCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Force\"\n                    isOpen={this.state.forceOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            forceOptionOpen: !this.state.forceOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Cluster Force Distance:\n                        <br />\n                        <Slider\n                            min={0}\n                            max={100}\n                            stepSize={10}\n                            labelStepSize={20}\n                            onChange={(value) => {\n                                State.css.cluster.clusterForce = value;\n                                State.graphDelegate.updateClusterForce();\n                            }}\n                            value={State.css.cluster.clusterForce}\n                        />\n                    </div>\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Normal Force Distance:\n                        <br />\n                        <Slider\n                            min={0}\n                            max={100}\n                            stepSize={10}\n                            labelStepSize={20}\n                            onChange={(value) => {\n                                State.css.cluster.normalForce = value;\n                                State.graphDelegate.updateClusterForce();\n                            }}\n                            value={State.css.cluster.normalForce}\n                        />\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        shapeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Shape\"\n                    isOpen={this.state.shapeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            shapeOptionOpen: !this.state.shapeOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        <p style={{ textAlign: \"left\" }}>\n                            Cluster Shape:\n                            <span style={{ float: \"right\" }}>\n                                <SimpleSelect\n                                    items={[\"convexHull\", \"sphere\"]}\n                                    text={State.css.cluster.shape}\n                                    onSelect={(it) => {\n                                        State.css.cluster.shape = it;\n                                    }}\n                                    small={true}\n                                />\n                            </span>\n                        </p>\n                    </div>\n                    {State.css.cluster.shape === \"sphere\" && (\n                        <div className={classnames(Classes.CARD, \"sub-option\")}>\n                            Cluster Resolution:\n                            <br />\n                            <Slider\n                                min={2}\n                                max={20}\n                                stepSize={1}\n                                labelStepSize={5}\n                                onChange={(value) => {\n                                    State.css.cluster.resolution = value;\n                                    State.graphDelegate.graphDelegateMethods.refresh();\n                                }}\n                                value={State.css.cluster.resolution}\n                            />\n                        </div>\n                    )}\n                </Collapsable>\n            );\n        };\n\n        render() {\n            return (\n                <div>\n                    <div>\n                        <p>Modifying All Clusters</p>\n                    </div>\n                    {this.forceCollapse()}\n                    {this.shapeCollapse()}\n                </div>\n            );\n        }\n    }\n);\n// export default EdgesPanel;\n","import React from \"react\";\nimport {\n    Button,\n    Popover,\n    PopoverInteractionKind,\n    Position,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport { ColorResult, SketchPicker } from \"react-color\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * the color to be previewed on the button\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    color: string;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     *\n     * @memberof Props\n     */\n    onChange: (color: ColorResult) => void;\n}\n\n/**\n * this component can be used to choose the node among all the nodes, with basic search filters available\n * to use it, you have to specify the text shown above the selectButton as well as the onChange function to call when a candidate is selected\n */\nexport default observer(\n    class ColorPicker extends React.Component<Props, {}> {\n        render() {\n            return (\n                <Popover\n                    interactionKind={PopoverInteractionKind.CLICK}\n                    popoverClassName=\"bp3-popover-content-sizing\"\n                    position={Position.RIGHT}\n                >\n                    <Button\n                        text=\"  \"\n                        style={{\n                            backgroundColor: this.props.color,\n                        }}\n                        small={true}\n                    />\n                    <div>\n                        <SketchPicker\n                            color={this.props.color}\n                            onChange={(it) => {\n                                this.props.onChange(it);\n                            }}\n                        />\n                    </div>\n                </Popover>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Classes } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport Collapsable from \"../utils/Collapsable\";\nimport ColorPicker from \"../utils/ColorPicker\";\n\nexport default observer(\n    class EdgesPanel extends React.Component {\n        state = {\n            sizeOptionOpen: false,\n            thicknessOptionOpen: false,\n            colorOptionOpen: false,\n            forceOptionOpen: false,\n        };\n\n        render() {\n            return (\n                <div>\n                    <p>{`Modifying All Edges`}</p>\n\n                    {/* Collapsable Option: Color */}\n                    <Collapsable\n                        name=\"Color\"\n                        isOpen={this.state.colorOptionOpen}\n                        onToggle={() =>\n                            this.setState({\n                                colorOptionOpen: !this.state.colorOptionOpen,\n                            })\n                        }\n                    >\n                        <div className={classnames(Classes.CARD, \"sub-option\")}>\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Default Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={State.css.edge.defaultColor}\n                                            onChange={(it) => {\n                                                State.css.edge.defaultColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Selected Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={State.css.edge.selectedColor}\n                                            onChange={(it) => {\n                                                State.css.edge.selectedColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Highlight Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={\n                                                State.css.edge.highlightColor\n                                            }\n                                            onChange={(it) => {\n                                                State.css.edge.highlightColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n                        </div>\n                    </Collapsable>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Slider, Switch } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport classnames from \"classnames\";\nimport ColorPicker from \"../utils/ColorPicker\";\n\nexport default observer(\n    class LabelsPanel extends React.Component {\n        render() {\n            return (\n                <div>\n                    <Switch\n                        label=\"Show Node Label\"\n                        checked={State.css.label.show}\n                        onChange={() => {\n                            State.css.label.show = !State.css.label.show;\n                            State.graphDelegate.graphDelegateMethods.refresh();\n                        }}\n                    />\n                    <br />\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Label Size:\n                        <br />\n                        <Slider\n                            min={1}\n                            max={10}\n                            stepSize={1}\n                            labelStepSize={2}\n                            onChange={(value) => {\n                                State.css.label.size = value;\n                                State.graphDelegate.graphDelegateMethods.refresh();\n                            }}\n                            value={State.css.label.size}\n                        />\n                        <br />\n                        <p style={{ textAlign: \"left\" }}>\n                            Label Color:\n                            <span style={{ float: \"right\" }}>\n                                <ColorPicker\n                                    color={State.css.label.color}\n                                    onChange={(it) => {\n                                        State.css.label.color = it.hex;\n                                        State.graphDelegate.graphDelegateMethods.refresh();\n                                    }}\n                                />\n                            </span>\n                        </p>\n                    </div>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Classes, Slider } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport Collapsable from \"../utils/Collapsable\";\nimport ColorPicker from \"../utils/ColorPicker\";\n\nexport default observer(\n    class NodesPanel extends React.Component {\n        state = {\n            timeOutRef: null,\n            colorOptionOpen: false,\n            sizeOptionOpen: false,\n            shapeOptionOpen: false,\n        };\n\n        colorCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Color\"\n                    isOpen={this.state.colorOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            colorOptionOpen: !this.state.colorOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Default Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.defaultColor}\n                                        onChange={(it) => {\n                                            State.css.node.defaultColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Selected Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.selectedColor}\n                                        onChange={(it) => {\n                                            State.css.node.selectedColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Highlight Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.highlightColor}\n                                        onChange={(it) => {\n                                            State.css.node.highlightColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        sizeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Size\"\n                    isOpen={this.state.sizeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            sizeOptionOpen: !this.state.sizeOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Node Size:\n                        <br />\n                        <Slider\n                            min={1}\n                            max={20}\n                            stepSize={1}\n                            labelStepSize={5}\n                            onChange={(value) => {\n                                State.css.node.size = value;\n                                State.graphDelegate.graphDelegateMethods.refresh();\n                            }}\n                            value={State.css.node.size}\n                        />\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        shapeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Shape\"\n                    isOpen={this.state.shapeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            shapeOptionOpen: !this.state.shapeOptionOpen,\n                        })\n                    }\n                >\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\n                        Node Resolution:\n                        <br />\n                        <Slider\n                            min={2}\n                            max={20}\n                            stepSize={1}\n                            labelStepSize={5}\n                            onChange={(value) => {\n                                State.css.node.resolution = value;\n                            }}\n                            value={State.css.node.resolution}\n                        />\n                    </div>\n                </Collapsable>\n            );\n        };\n\n        render() {\n            return (\n                <div>\n                    <div>\n                        <p>Modifying All Nodes</p>\n                    </div>\n                    {this.colorCollapse()}\n                    {this.sizeCollapse()}\n                    {this.shapeCollapse()}\n                </div>\n            );\n        }\n    }\n);\n","import { H3, Tab, Tabs } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport ClusterPanel from \"./ClusterPanel\";\nimport EdgesPanel from \"./EdgesPanel\";\nimport LabelsPanel from \"./LabelsPanel\";\nimport NodesPanel from \"./NodesPanel\";\n\nexport default observer(\n    class RenderOptionsCard extends React.Component {\n        render() {\n            return (\n                <div>\n                    <H3>Graph Options</H3>\n                    <Tabs animate={true}>\n                        <Tab id=\"nodes\" title=\"Nodes\" panel={<NodesPanel />} />\n                        <Tab id=\"edges\" title=\"Edges\" panel={<EdgesPanel />} />\n                        <Tab\n                            id=\"labels\"\n                            title=\"Labels\"\n                            panel={<LabelsPanel />}\n                        />\n                        <Tab\n                            id=\"clusters\"\n                            title=\"Clusters\"\n                            panel={<ClusterPanel />}\n                        />\n\n                        <Tabs.Expander />\n                    </Tabs>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\n\nimport {\n    Button,\n    Intent,\n    Panel,\n    PanelProps,\n    PanelStack2,\n    Classes,\n    H4,\n    Callout,\n    RadioGroup,\n    Radio,\n} from \"@blueprintjs/core\";\nimport { Popover2, Tooltip2 } from \"@blueprintjs/labs\";\nimport classnames from \"classnames\";\nimport State from \"../../../state\";\nimport { VisualizationMode } from \"../../../state/PreferencesStore\";\nimport { observer } from \"mobx-react\";\nimport ComponentRef from \"../../ComponentRef\";\nimport { getMessage } from \"./InteractionModePanel\";\nimport { handleStringChange } from \"../../utils/InputFormUtils\";\n\ninterface CustomPanelEntry {\n    step: number;\n    title: string;\n    component: JSX.Element;\n}\n\nconst allPanelStacks = [\n    {\n        step: 1,\n        title: \"Select Cluster\",\n        component: (\n            <p>\n                Select a <b>Cluster</b> to split by clicking it\n            </p>\n        ),\n    } as CustomPanelEntry,\n    {\n        step: 2,\n        title: \"Draw Line\",\n        component: (\n            <div\n                style={{\n                    display: \"flex\",\n                }}\n            >\n                <p>\n                    <RadioGroup\n                        label=\"Use the mouse to\"\n                        onChange={handleStringChange((value) => {\n                            if (value === \"straight\") {\n                                State.clusterInteraction.drawStraightLine = true;\n                            } else {\n                                State.clusterInteraction.drawStraightLine = false;\n                            }\n                        })}\n                        selectedValue={\n                            State.clusterInteraction.drawStraightLine\n                                ? \"straight\"\n                                : \"curve\"\n                        }\n                    >\n                        <Radio label=\"Draw a Curved Line\" value=\"curve\" />\n                        <Radio label=\"Draw a Straight Line\" value=\"straight\" />\n                    </RadioGroup>\n                    hold and draw a line to split this Cluster\n                </p>\n                <div>\n                    <Button\n                        intent=\"danger\"\n                        small={true}\n                        onClick={() => {\n                            State.helper.clusterSplittingCurrentStep = 1;\n                        }}\n                    >\n                        Back\n                    </Button>\n                </div>\n            </div>\n        ),\n    } as CustomPanelEntry,\n    {\n        step: 3,\n        title: \"Confirm?\",\n        component: (\n            <div>\n                <H4>Confirm Splitting of Cluster? </H4>\n                <div\n                    style={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                    }}\n                >\n                    <Button\n                        intent=\"danger\"\n                        small={true}\n                        onClick={() => {\n                            State.helper.clusterSplittingCurrentStep = 2;\n                        }}\n                    >\n                        Cancel\n                    </Button>\n                    <Button\n                        intent=\"primary\"\n                        small={true}\n                        onClick={() => {\n                            State.helper.clusterSplittingPanelStackOpen = false;\n                            State.clusterInteraction.splitCluster();\n                            State.preferences.visualizationMode =\n                                VisualizationMode.Normal;\n                            State.helper.clusterSplittingCurrentStep = 1;\n                        }}\n                    >\n                        Confirm\n                    </Button>\n                </div>\n            </div>\n        ),\n    } as CustomPanelEntry,\n];\n\ninterface PanelInfo {\n    panelNumber: number;\n}\n\nconst CustomPanel: React.FC<PanelProps<PanelInfo>> = (props) => {\n    return <Callout>{allPanelStacks[props.panelNumber - 1].component}</Callout>;\n};\n\ninterface Props {\n    currentStep: 1 | 2 | 3;\n}\n\nexport default observer(\n    class ClusterSplittingPanelStack extends React.Component<Props, {}> {\n        private firstPanel: Panel<PanelInfo> = {\n            props: {\n                panelNumber: 1,\n            },\n            renderPanel: CustomPanel,\n            title: allPanelStacks[0].title,\n        };\n\n        private secondPanel: Panel<PanelInfo> = {\n            props: {\n                panelNumber: 2,\n            },\n            renderPanel: CustomPanel,\n            title: allPanelStacks[1].title,\n        };\n\n        private thirdPanel: Panel<PanelInfo> = {\n            props: {\n                panelNumber: 3,\n            },\n            renderPanel: CustomPanel,\n            title: allPanelStacks[2].title,\n        };\n\n        get currentPanelStack() {\n            switch (State.helper.clusterSplittingCurrentStep) {\n                case 1:\n                    return [this.firstPanel];\n\n                case 2:\n                    return [this.firstPanel, this.secondPanel];\n\n                case 3:\n                    return [this.firstPanel, this.secondPanel, this.thirdPanel];\n                default:\n                    return [];\n            }\n        }\n\n        private renderPanelStack = () => {\n            return (\n                <div style={{ width: \"300px\", height: \"100px\" }}>\n                    <PanelStack2\n                        initialPanel={this.firstPanel}\n                        stack={this.currentPanelStack}\n                    />\n                    <Button\n                        icon=\"cross\"\n                        style={{\n                            position: \"absolute\",\n                            top: -1,\n                            right: -1,\n                            zIndex: 99,\n                        }}\n                        minimal={true}\n                        onClick={() => {\n                            State.helper.clusterSplittingPanelStackOpen = false;\n                        }}\n                    />\n                </div>\n            );\n        };\n\n        render() {\n            return (\n                <Popover2\n                    placement=\"right\"\n                    usePortal={false}\n                    content={this.renderPanelStack()}\n                    isOpen={\n                        State.preferences.visualizationMode ===\n                            VisualizationMode.ClusterSplitting &&\n                        State.helper.clusterSplittingPanelStackOpen\n                    }\n                    onOpened={() => {\n                        State.helper.clusterSplittingCurrentStep = 1;\n                    }}\n                >\n                    <Tooltip2\n                        usePortal={false}\n                        content={getMessage(VisualizationMode.ClusterSplitting)}\n                    >\n                        <Button\n                            className={classnames([\n                                Classes.BUTTON,\n                                Classes.MINIMAL,\n                            ])}\n                            intent={Intent.DANGER}\n                            text={VisualizationMode.ClusterSplitting}\n                            active={\n                                State.preferences.visualizationMode ===\n                                VisualizationMode.ClusterSplitting\n                            }\n                            onClick={() => {\n                                State.preferences.visualizationMode =\n                                    VisualizationMode.ClusterSplitting;\n\n                                State.helper.clusterSplittingPanelStackOpen = true;\n                            }}\n                        />\n                    </Tooltip2>\n                </Popover2>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.clusterSplittingPanelStack = this;\n        };\n    }\n);\n","import React from \"react\";\n\nimport { Button, Intent, Classes, RadioGroup, Radio } from \"@blueprintjs/core\";\nimport { Popover2, Tooltip2 } from \"@blueprintjs/labs\";\nimport classnames from \"classnames\";\nimport State from \"../../../state\";\nimport { VisualizationMode } from \"../../../state/PreferencesStore\";\nimport { observer } from \"mobx-react\";\nimport { getMessage } from \"./InteractionModePanel\";\n\nexport default observer(\n    class NodeSelectionPanel extends React.Component {\n        handleChange = () => {\n            State.interaction.boxSelectionOpen = !State.interaction\n                .boxSelectionOpen;\n        };\n        private renderPanelStack = () => {\n            return (\n                <div style={{ width: \"300px\", height: \"100px\" }}>\n                    <div style={{ marginLeft: 20 }}>\n                        <RadioGroup\n                            label=\"Node Multi-Selection Mode\"\n                            onChange={this.handleChange}\n                            selectedValue={\n                                State.interaction.boxSelectionOpen\n                                    ? \"two\"\n                                    : \"one\"\n                            }\n                        >\n                            <Radio label=\"Click\" value=\"one\" />\n                            <Radio label=\"Box-Selection\" value=\"two\" />\n                        </RadioGroup>\n                        <Button\n                            icon=\"cross\"\n                            style={{\n                                position: \"absolute\",\n                                top: -1,\n                                right: -1,\n                                zIndex: 99,\n                            }}\n                            minimal={true}\n                            onClick={() => {\n                                State.helper.NodeSelectionPanelOpen = false;\n                            }}\n                        />\n                    </div>\n                </div>\n            );\n        };\n\n        render() {\n            return (\n                <Popover2\n                    placement=\"right\"\n                    usePortal={false}\n                    content={this.renderPanelStack()}\n                    isOpen={\n                        State.preferences.visualizationMode ===\n                            VisualizationMode.NodeSelection &&\n                        State.helper.NodeSelectionPanelOpen\n                    }\n                >\n                    <Tooltip2\n                        usePortal={false}\n                        content={getMessage(VisualizationMode.NodeSelection)}\n                    >\n                        <Button\n                            className={classnames([\n                                Classes.BUTTON,\n                                Classes.MINIMAL,\n                            ])}\n                            intent={Intent.WARNING}\n                            text={VisualizationMode.NodeSelection}\n                            active={\n                                State.preferences.visualizationMode ===\n                                VisualizationMode.NodeSelection\n                            }\n                            onClick={() => {\n                                State.preferences.visualizationMode =\n                                    VisualizationMode.NodeSelection;\n\n                                State.helper.NodeSelectionPanelOpen = true;\n                            }}\n                        />\n                    </Tooltip2>\n                </Popover2>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, Classes, Intent } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../../state\";\nimport { VisualizationMode } from \"../../../state/PreferencesStore\";\nimport ClusterSplittingPanelStack from \"./ClusterSplittingPanelStack\";\nimport { Tooltip2 } from \"@blueprintjs/popover2\";\nimport NodeSelectionPanel from \"./NodeSelectionPanel\";\n\nexport function getMessage(mode: VisualizationMode): string {\n    switch (mode) {\n        case VisualizationMode.Normal:\n            return \"Normal Interaction Mode where mouse interactions on nodes and clusters are both activated\";\n\n        case VisualizationMode.NodeSelection:\n            return \"Select one or more nodes and interact with them, such as adding/deleting, merge them to a cluster, free them from a cluster\";\n\n        case VisualizationMode.ClusterSelection:\n            return \"Select one or more clusters and interact with them, such as merging and releasing them\";\n\n        case VisualizationMode.ClusterSplitting:\n            return \"Select one cluster and draw a line to split into two halfs\";\n    }\n}\n\nexport default observer(\n    class InteractionModePanel extends React.Component {\n        getIntent(mode: VisualizationMode): Intent {\n            switch (mode) {\n                case VisualizationMode.Normal:\n                    return Intent.PRIMARY;\n\n                case VisualizationMode.NodeSelection:\n                    return Intent.WARNING;\n\n                case VisualizationMode.ClusterSelection:\n                    return Intent.SUCCESS;\n\n                case VisualizationMode.ClusterSplitting:\n                    return Intent.DANGER;\n            }\n        }\n\n        renderMode(mode: VisualizationMode) {\n            return (\n                <Tooltip2 content={getMessage(mode)}>\n                    <Button\n                        className={classnames([\n                            Classes.BUTTON,\n                            Classes.MINIMAL,\n                        ])}\n                        text={mode}\n                        intent={this.getIntent(mode)}\n                        active={State.preferences.visualizationMode === mode}\n                        onClick={() => {\n                            State.preferences.visualizationMode = mode;\n                        }}\n                    />\n                </Tooltip2>\n            );\n        }\n\n        render() {\n            return (\n                <div className=\"selection-action-panel\">\n                    {this.renderMode(VisualizationMode.Normal)}\n                    <NodeSelectionPanel />\n                    {this.renderMode(VisualizationMode.ClusterSelection)}\n                    <ClusterSplittingPanelStack\n                        currentStep={State.helper.clusterSplittingCurrentStep}\n                    />\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Menu, MenuDivider, MenuItem } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\nimport { computed, makeObservable } from \"mobx\";\n\ninterface Props {\n    /**\n     * what place this RightClick interaction is activated\n     *\n     * @type {(\"Node\" | \"Cluster\" | \"Background\")}\n     */\n    on: \"Node\" | \"Cluster\" | \"Background\";\n}\n\nexport default observer(\n    class RightClickPanel extends React.Component<Props, {}> {\n        constructor(props: any) {\n            super(props);\n            makeObservable(this, {\n                stylePosition: computed,\n            });\n        }\n\n        get stylePosition() {\n            return {\n                top: State.preferences.rightClickPositionY + 10 + \"px\",\n                left: State.preferences.rightClickPositionX + 10 + \"px\",\n            };\n        }\n\n        formNewCluster() {\n            let date = new Date().toLocaleString(\"en\");\n            let newClusterAttributeValue: string = `Cluster Generated @ ${date}`;\n            if (!State.graph.metadata.nodeProperties.includes(\"new-cluster\")) {\n                State.graph.metadata.nodeProperties.push(\"new-cluster\");\n            }\n            State.graph.rawGraph.forEachNode((_, attributes) => {\n                attributes[\"new-cluster\"] = \"\";\n            });\n            State.interaction.selectedNodes.forEach((nodeId) => {\n                State.graph.rawGraph.setNodeAttribute(\n                    nodeId,\n                    \"new-cluster\",\n                    newClusterAttributeValue\n                );\n            });\n            State.preferences.rightClickPanelOpen = false;\n            State.cluster.setCluster(\"new-cluster\");\n\n            State.interaction.flush();\n        }\n\n        releaseFromCluster() {\n            const clusterName = State.cluster.clusterBy as string;\n            State.interaction.selectedNodes.forEach((nodeId) => {\n                State.graph.rawGraph.setNodeAttribute(nodeId, clusterName, \"\");\n            });\n        }\n\n        renderNodeMenu() {\n            return (\n                <Menu\n                    className={classnames(\n                        Classes.ELEVATION_1,\n                        \"right-click-panel\"\n                    )}\n                    style={this.stylePosition}\n                >\n                    <MenuDivider\n                        title={\n                            (\"Node ID: \" +\n                                State.interaction.selectedNode) as string\n                        }\n                    />\n                    <MenuItem\n                        icon=\"graph-remove\"\n                        text=\"Delete Node\"\n                        onClick={() => {\n                            State.graph.mutating.dropNode(\n                                State.interaction.selectedNode as string\n                            );\n                            State.interaction.flush();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                    <MenuItem\n                        icon=\"inner-join\"\n                        text=\"Form a New Cluster\"\n                        onClick={this.formNewCluster}\n                        disabled={State.interaction.selectedNodes.length === 0}\n                    />\n                    <MenuItem\n                        icon=\"ungroup-objects\"\n                        text=\"Release from Cluster\"\n                        onClick={this.releaseFromCluster}\n                        disabled={State.interaction.selectedNodes.length === 0}\n                    />\n                    <MenuItem\n                        icon=\"eraser\"\n                        text=\"Cancel Selection\"\n                        onClick={() => {\n                            State.interaction.flush();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                        disabled={State.interaction.selectedNodes.length === 0}\n                    />\n                    <MenuItem\n                        icon=\"graph-remove\"\n                        text=\"Delete Selected Nodes\"\n                        onClick={() => {\n                            State.interaction.selectedNodes.forEach((node) => {\n                                State.graph.mutating.dropNode(node);\n                            });\n                            State.interaction.flush();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                    <MenuItem\n                        icon=\"new-link\"\n                        text=\"Add Edge\"\n                        onClick={() => {\n                            State.preferences.AddEdgeDialogOpen = true;\n                            State.interaction.flush();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuItem\n                        icon=\"cross\"\n                        text=\"Delete Edge\"\n                        onClick={() => {\n                            State.preferences.deleteEdgePanelOpen = true;\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                </Menu>\n            );\n        }\n\n        renderClusterMenu() {\n            return (\n                <Menu\n                    className={classnames(\n                        Classes.ELEVATION_1,\n                        \"right-click-panel\"\n                    )}\n                    style={this.stylePosition}\n                >\n                    <MenuItem\n                        icon=\"group-objects\"\n                        text=\"Merge Cluster\"\n                        onClick={() => {\n                            State.clusterInteraction.mergeSelectedCluster();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                </Menu>\n            );\n        }\n\n        renderBackgroundMenu() {\n            return (\n                <Menu\n                    className={classnames(\n                        Classes.ELEVATION_1,\n                        \"right-click-panel\"\n                    )}\n                    style={this.stylePosition}\n                >\n                    <MenuItem\n                        icon=\"new-object\"\n                        text=\"Add Node\"\n                        onClick={() => {\n                            State.preferences.AddNodeDialogOpen = true;\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                </Menu>\n            );\n        }\n\n        render() {\n            if (this.props.on === \"Node\") {\n                return this.renderNodeMenu();\n            } else if (this.props.on === \"Cluster\") {\n                return this.renderClusterMenu();\n            } else if (this.props.on === \"Background\") {\n                return this.renderBackgroundMenu();\n            }\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, Classes } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport State from \"../state\";\nimport NodeDetailPanel from \"./panels/NodeDetailPanel\";\nimport MultiDetailPanel from \"./panels/MultiDetailPanel\";\nimport DeleteEdgeInteractionPanel from \"./panels/DeleteEdgeInteractionPanel\";\nimport GraphOptionsCard from \"./panels/GraphOptionsCard\";\nimport InteractionModePanel from \"./panels/InteractionModePanel/InteractionModePanel\";\nimport RightClickPanel from \"./panels/RightClickPanel\";\n\nexport default observer(\n    class FloatingCards extends React.Component {\n        optionsVisible = {\n            left: \"0em\",\n        };\n        optionsInvisible = {\n            left: \"-2200em\",\n        };\n        sideButtonVis = {\n            marginLeft: \"50px\",\n        };\n        sideButtonInv = {\n            marginLeft: \"-15px\",\n        };\n        toggleOptions = () => {\n            State.preferences.graphOptionsCardOpen = !State.preferences\n                .graphOptionsCardOpen;\n        };\n        render() {\n            return (\n                <div className=\"floating-overlay\">\n                    <div className=\"left-cards\">\n                        <div\n                            className={classnames(\n                                Classes.CARD,\n                                Classes.ELEVATION_2,\n                                \"overlay-card\",\n                                \"transparent-frame\",\n                                \"left-cards\"\n                            )}\n                            style={\n                                State.preferences.graphOptionsCardOpen\n                                    ? this.optionsVisible\n                                    : this.optionsInvisible\n                            }\n                        >\n                            <br />\n                            <Button\n                                className=\"openbtn2\"\n                                icon=\"chevron-left\"\n                                onClick={this.toggleOptions}\n                            />\n                            <br />\n                            <GraphOptionsCard />\n                        </div>\n                        <div\n                            className={classnames(\n                                Classes.CARD,\n                                Classes.ELEVATION_2,\n                                \"overlay-card\",\n                                \"transparent-frame\"\n                            )}\n                            style={{\n                                width: \"1em\",\n                                paddingTop: \"1em\",\n                                paddingRight: \"0.7em\",\n                                paddingBottom: \"0.5em\",\n                                marginLeft: \"-5.4em\",\n                            }}\n                        >\n                            <Button\n                                icon=\"more\"\n                                className=\"openbtn\"\n                                onClick={this.toggleOptions}\n                                style={\n                                    State.preferences.graphOptionsCardOpen\n                                        ? this.sideButtonInv\n                                        : this.sideButtonVis\n                                }\n                            />\n                        </div>\n                    </div>\n\n                    {/* single selected */}\n                    {/* {State.graph.selectedNodes.length === 1 && (\n                        <NodeDetail node={State.graph.currentlyHoveredId} />\n                    )} */}\n                    {State.interaction.currentlyHoveredNodeId &&\n                        State.interaction.selectedNodes.length === 0 && (\n                            <NodeDetailPanel\n                                onNode={\n                                    State.interaction.currentlyHoveredNodeId\n                                }\n                            />\n                        )}\n\n                    {/* multiple selected */}\n                    {/* {State.graph.selectedNodes.length !== 1 && State.graph.currentlyHovered && (\n                        <NodeDetail node={State.graph.currentlyHovered.data.ref} />\n                    )} */}\n                    {State.interaction.selectedNodes.length !== 0 && (\n                        <MultiDetailPanel />\n                    )}\n\n                    {State.preferences.rightClickPanelOpen &&\n                        State.preferences.rightClickOn && (\n                            <RightClickPanel\n                                on={State.preferences.rightClickOn}\n                            />\n                        )}\n                    {State.preferences.deleteEdgePanelOpen &&\n                        State.interaction.selectedNode && (\n                            <DeleteEdgeInteractionPanel\n                                onNode={State.interaction.selectedNode}\n                            />\n                        )}\n                    <InteractionModePanel />\n                </div>\n            );\n        }\n    }\n);\n","import classnames from \"classnames\";\nimport { Classes } from \"@blueprintjs/core\";\nimport Navbar from \"./components/Navbar\";\nimport Dialogs from \"./components/Dialogs\";\nimport ThreeJSVis from \"./components/visualize/Visualizer\";\n// import NodeDetail from \"./components/panels/NodeDetailPanel\";\n// import State from \"./state\";\n// import EdgesPanel from \"./components/panels/EdgesPanel\";\n// import LabelsPanel from \"./components/panels/LabelsPanel\";\n// import SelectionPanel from \"./components/panels/SelectionPanel\";\n// import GlobalPanel from \"./components/panels/GlobalPanel\";\n// import NodesPanel from \"./components/panels/NodesPanel\";\nimport FloatingCards from \"./components/FloatingCards\";\n\nfunction App() {\n    return (\n        <div\n            className={classnames({\n                \"app-wrapper\": true,\n                [Classes.DARK]: true,\n            })}\n        >\n            <Navbar />\n            <main className=\"main\">\n                <ThreeJSVis />\n            </main>\n            <FloatingCards />\n            <Dialogs />\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import(\"web-vitals\").then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/table/lib/css/table.css\";\nimport \"@blueprintjs/select/lib/css/blueprint-select.css\";\nimport \"@blueprintjs/popover2/lib/css/blueprint-popover2.css\";\nimport \"normalize.css\";\nimport \"./App.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}