(this.webpackJsonpclustergrapher=this.webpackJsonpclustergrapher||[]).push([[0],{353:function(e,t){},355:function(e,t){},518:function(e,t,n){},519:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),o=n(26),s=n.n(o),c=n(21),l=n(9),u=n.n(l),d=n(7),h=n(2),p=n(3),j=n(4),g=n(5),b=n(19),f=n(43),O=n(83),v=n(29),m=n(45),x=n(52),C=n(538),y=n(18);!function(e){e.Normal="Normal",e.ClusterSelection="Cluster Selection",e.NodeSelection="Node Selection",e.ClusterSplitting="Cluster Splitting"}(r||(r={}));var N=function(){function e(){Object(h.a)(this,e),this.rightClickPositionX=30,this.rightClickPositionY=30,this.exportDialogOpen=!1,this.preferenceDialogOpen=!1,this.statisticsDialogOpen=!1,this.AddNodeDialogOpen=!1,this.AddEdgeDialogOpen=!1,this.nodeDataSheetDialogOpen=!1,this.edgeDataSheetDialogOpen=!1,this.rightClickOn=null,this.rightClickPanelOpen=!1,this.deleteEdgePanelOpen=!1,this.graphOptionsCardOpen=!1,this.visualizationMode=r.Normal,Object(y.n)(this)}return Object(p.a)(e,[{key:"closeAllPanel",value:function(e){this.deleteEdgePanelOpen=!1,this.graphOptionsCardOpen=!1,"rightClickPanel"!==e&&(this.rightClickPanelOpen=!1)}}]),e}(),w=n(86),k=n.n(w),S=n(12),D=n(90),E=n(87),A=n.n(E),I=function(){function e(){Object(h.a)(this,e),this.threeScene=void 0,this.fusionClusterObjects=null,this.clusterObjectsMap=null,this.UUID2ClusterValueMap=void 0,this.canAlterNodePosition=!1,Object(y.n)(this)}return Object(p.a)(e,[{key:"initEmptyMapAndFusion",value:function(){var e=this;this.fusionClusterObjects&&(this.threeScene.remove(this.fusionClusterObjects),this.dispose()),this.UUID2ClusterValueMap=new Map;var t=new Map;pe.cluster.attributePoints.forEach((function(n,r){t.set(r,e.createMesh(new S.e,r))})),this.clusterObjectsMap=t,this.fusionClusterObjects=new S.n,t.forEach((function(t){var n;null===(n=e.fusionClusterObjects)||void 0===n||n.add(t)})),this.threeScene.add(this.fusionClusterObjects)}},{key:"clusterDelegation",value:function(){var e,t=this;null!==pe.cluster.clusterBy&&(null!=this.fusionClusterObjects&&null!=this.convexHullObjects||this.initEmptyMapAndFusion(),null===(e=this.clusterObjectsMap)||void 0===e||e.forEach((function(e,n){e.geometry.copy(t.convexHullObject(n))})))}},{key:"getObjectById",value:function(e){var t,n=null;return null===(t=this.fusionClusterObjects)||void 0===t||t.children.every((function(t){return t.uuid!==e||(n=t,!1)})),n}},{key:"dispose",value:function(){var e;null===(e=this.clusterObjectsMap)||void 0===e||e.forEach((function(e){e.material.dispose(),e.geometry.dispose()})),this.clusterObjectsMap=null,this.fusionClusterObjects=null,this.UUID2ClusterValueMap=new Map}},{key:"convexHullObjects",get:function(){var e=this,t=new Map;return pe.cluster.attributePoints.forEach((function(n,r){t.set(r,e.convexHullObject(r))})),t}},{key:"convexHullObject",value:function(e){var t=pe.cluster.attributePoints.get(e);if(t&&0!==t.length){if(1===t.length){var n=new S.I(pe.css.node.size+5,pe.css.cluster.resolution,pe.css.cluster.resolution);return n.translate(t[0].x,t[0].y,t[0].z),n}if(t.length<4){var r=new S.e,i=[];t.forEach((function(e){i.push(e.x,e.y,e.z)}));var a=new Float32Array(i);r.setAttribute("position",new S.d(a,3)),r.computeBoundingSphere();var o=r.boundingSphere,s=new S.I(o.radius+5,pe.css.cluster.resolution,pe.css.cluster.resolution);return s.translate(o.center.x,o.center.y,o.center.z),s}if("convexHull"===pe.css.cluster.shape)return new D.a(Array.from(t));var c=new D.a(Array.from(t));c.computeBoundingSphere();var l=c.boundingSphere,u=new S.I(l.radius+5,pe.css.cluster.resolution,pe.css.cluster.resolution);return u.translate(l.center.x,l.center.y,l.center.z),u}return new S.e}},{key:"convexHullObject2",value:function(e){var t=[];if(e.forEach((function(e){var n=pe.graph.rawGraph.getNodeAttribute(e,"_visualize");t.push(new S.T(n.x,n.y,n.z))})),t&&0!==t.length){if(1===t.length){var n=new S.I(pe.css.node.size+5,pe.css.cluster.resolution,pe.css.cluster.resolution);return n.translate(t[0].x,t[0].y,t[0].z),n}if(t.length<4){var r=new S.e,i=[];t.forEach((function(e){i.push(e.x,e.y,e.z)}));var a=new Float32Array(i);r.setAttribute("position",new S.d(a,3)),r.computeBoundingSphere();var o=r.boundingSphere,s=new S.I(o.radius+5,pe.css.cluster.resolution,pe.css.cluster.resolution);return s.translate(o.center.x,o.center.y,o.center.z),s}if("convexHull"===pe.css.cluster.shape)return new D.a(Array.from(t));var c=new D.a(Array.from(t));c.computeBoundingSphere();var l=c.boundingSphere,u=new S.I(l.radius+5,pe.css.cluster.resolution,pe.css.cluster.resolution);return u.translate(l.center.x,l.center.y,l.center.z),u}return new S.e}},{key:"createMesh",value:function(e,t){var n=pe.cluster.attributeColor.get(t),r=new S.v,i=new S.u(e,r);return i._color=n,this.meshNormalMaterial(i),this.UUID2ClusterValueMap.set(i.uuid,t),i.name="THREE_CLUSTER_"+t,i}},{key:"meshSpotlightMaterial",value:function(e){var t=e.material,n=t.opacity;t.opacity=1,setTimeout((function(){t.opacity=n}),50)}},{key:"meshHighlightMaterial",value:function(e){e.material=new S.v({color:e._color,transparent:!0,opacity:.6,blending:S.a}),e.material.side=S.k,e.material.depthWrite=!1}},{key:"meshSelectedMaterial",value:function(e){e.material=new S.x({color:e._color,shininess:20,opacity:.9,transparent:!0}),e.material.depthWrite=!1}},{key:"meshNormalMaterial",value:function(e){e.material=new S.v({color:e._color,transparent:!0,opacity:.15}),e.material.side=S.k,e.material.depthWrite=!1}},{key:"updateAllMaterials",value:function(){var e,t=this;null===(e=this.fusionClusterObjects)||void 0===e||e.children.forEach((function(e){var n=e,r=n.uuid;pe.clusterInteraction.currentlyHoveredClusterId===r?t.meshHighlightMaterial(n):pe.clusterInteraction.selectedClusters.includes(r)?t.meshSelectedMaterial(n):t.meshNormalMaterial(n)}))}},{key:"alterNodePosition",value:function(){var e=this,t=[],n=[],r=[];pe.cluster.attributeKeys.forEach((function(i,a){var o,s,c,l=null===(o=e.clusterObjectsMap)||void 0===o?void 0:o.get(a),u=null===(s=l.geometry.boundingSphere)||void 0===s?void 0:s.radius,d=null===(c=l.geometry.boundingSphere)||void 0===c?void 0:c.center;e.computeNodeSphereDistribution(u,i.length).forEach((function(e,a){var o=pe.graph.rawGraph.getNodeAttribute(i[a],"_visualize"),s=A()({initialValue:o.x,duration:1e3});s.target=e.x+d.x,t.push({chaser:s,position:o});var c=A()({initialValue:o.y,duration:1e3});c.target=e.y+d.y,n.push({chaser:c,position:o});var l=A()({initialValue:o.z,duration:1e3});l.target=e.z+d.z,r.push({chaser:l,position:o})}))}));var i=setInterval((function(){t.forEach((function(e){e.position.x=e.chaser.value})),n.forEach((function(e){e.position.y=e.chaser.value})),r.forEach((function(e){e.position.z=e.chaser.value})),pe.graphDelegate.graphDelegateMethods.refresh()}),50);setTimeout((function(){return clearInterval(i)}),1e3)}},{key:"computeNodeSphereDistribution",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:45,n=Math.PI*(3-Math.sqrt(5)),r=2/t,i=0,a=1-r/2,o=[],s=0;s<t;s++){var c=Math.sqrt(1-a*a),l={x:Math.cos(i)*c*e,y:Math.sin(i)*c*e,z:a*e};o.push(l),a-=r,i+=n}return o}}]),e}();function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{id:e,hovered:!1,chosen:!1,multiSelected:!1,isClusterNode:t}}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{source:e,target:t,hovered:!1,chosen:!1,isClusterLink:n}}var R=function(){function e(){Object(h.a)(this,e),this.graphDelegateMethods=void 0,this.clusterObject=void 0,Object(y.n)(this),this.clusterObject=new I}return Object(p.a)(e,[{key:"mountDelegateMethods",value:function(e){this.graphDelegateMethods=e,this.clusterObject.threeScene=this.graphDelegateMethods.scene()}},{key:"visualizationGraph",value:function(){var e;e=null===pe.cluster.clusterBy?pe.graph.rawGraph:this.addInvisibleClusterNode(pe.graph.decorateRawGraph(pe.graph.rawGraph));var t={nodes:[],links:[]};return e.forEachNode((function(e,n){t.nodes.push(n._visualize)})),e.forEachEdge((function(e,n){t.links.push(n._visualize)})),t}},{key:"addInvisibleClusterNode",value:function(e){for(var t=e.copy(),n=["_CLUSTER_1_","_CLUSTER_2_","_CLUSTER_3_","_CLUSTER_4_","_CLUSTER_5_","_CLUSTER_6_","_CLUSTER_7_","_CLUSTER_8_","_CLUSTER_9_","_CLUSTER_10_"],r=function(e){pe.cluster.getAttributeValues.forEach((function(r){var i;if("undefined"!==r){var a=n[e]+r;t.addNode(a,{_visualize:M(a,!0)}),null===(i=pe.cluster.attributeKeys.get(r))||void 0===i||i.forEach((function(e){t.addEdgeWithKey("".concat(a,"-").concat(e),a,e,{_visualize:P(a,e,!0)})}))}}))},i=0;i<n.length;i++)r(i);return t}},{key:"nodeVisibility",value:function(e){return!e.isClusterNode}},{key:"linkVisibility",value:function(e){return!e.isClusterLink}},{key:"cameraFocusOn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,n=pe.graph.rawGraph.getNodeAttribute(e,"_visualize");if(n.x&&n.y&&n.z){var r=1+t/Math.hypot(n.x,n.y,n.z);this.graphDelegateMethods.cameraPosition({x:n.x*r,y:n.y*r,z:n.z*r},{x:n.x,y:n.y,z:n.z},3e3)}}},{key:"updateClusterForce",value:function(){var e,t;null===(e=this.graphDelegateMethods)||void 0===e||null===(t=e.d3Force("link"))||void 0===t||t.distance((function(e){return e.isClusterLink?pe.css.cluster.clusterForce:pe.css.cluster.normalForce})),this.graphDelegateMethods.d3ReheatSimulation()}}]),e}(),F=function(){function e(){Object(h.a)(this,e),this.nodeDetail=void 0,this.multiNodeDetail=void 0,this.visualizer=void 0,this.clusterSplittingPanelStack=void 0,Object(y.n)(this)}return Object(p.a)(e,null,[{key:"instance",get:function(){if(null===e._instance){var t=new e;return e._instance=t,t}return e._instance}}]),e}();F._instance=null,Object(y.q)((function(){return pe.interaction.currentlyHoveredNodeId}),(function(){var e;return null===(e=F.instance.nodeDetail)||void 0===e?void 0:e.forceUpdate()}));var T=F.instance,z=function(){function e(t){Object(h.a)(this,e),this.that=void 0,Object(y.n)(this),this.that=t}return Object(p.a)(e,[{key:"addNode",value:function(e,t){var n;t?t.hasOwnProperty("_visualize")?n=t:(n=t,pe.graph.decorateRawNode(e,n)):(n={},pe.graph.decorateRawNode(e,n)),this.that.rawGraph.addNode(e,n),this.that.refreshGraph()}},{key:"dropNode",value:function(e){this.that.rawGraph.dropNode(e),this.that.refreshGraph()}},{key:"addEdge",value:function(e,t,n){var r;n?n.hasOwnProperty("_visualize")?r=n:(r=n,pe.graph.decorateRawEdge(e,t,r)):(r={},pe.graph.decorateRawEdge(e,t,r)),this.that.rawGraph.addEdge(e,t,r),this.that.refreshGraph()}},{key:"dropEdge",value:function(e){this.that.rawGraph.dropEdge(e),this.that.refreshGraph()}}]),e}(),_=function(){function e(){Object(h.a)(this,e),this.rawGraph=new k.a({allowSelfLoops:!1,multi:!1,type:"undirected"}),this.mutating=void 0,this.metadata={snapshotName:"SNAPSHOT",nodeProperties:[]},Object(y.n)(this),this.mutating=new z(this)}return Object(p.a)(e,[{key:"decorateRawNode",value:function(e,t){t._visualize=M(e,!1)}},{key:"decorateRawEdge",value:function(e,t,n){n._visualize=P(e,t,!1)}},{key:"decorateRawGraph",value:function(e){var t=this;return e.forEachNode((function(e,n){return t.decorateRawNode(e,n)})),e.forEachEdge((function(e,n,r,i){return t.decorateRawEdge(r,i,n)})),e}},{key:"setGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.rawGraph=this.decorateRawGraph(e),t&&(this.metadata=t),pe.interaction.flush(),pe.cluster.clusterBy=null,pe.graphDelegate.clusterObject.initEmptyMapAndFusion(),T.visualizer.updateVisualizationGraph()}},{key:"refreshGraph",value:function(){pe.interaction.flush(),T.visualizer.updateVisualizationGraph()}}]),e}(),G=n(72),L=n(27),B=n.n(L),V=n(36),U=n(231),H=n.n(U),W=n(62),Y=n.n(W),X=n(76),K=n(104),q=n.n(K),Q=function(){function e(){Object(h.a)(this,e),this.clustertree=null,this.clusterMap=null,this.colorMap=null,this.UUID2PointsMap=null,this.isLoading=!1,this.edgeFileName="Choose Edge File ...",this.nodeFileName="Choose Node File ...",this.gexfFileName="Choose GEXF File ...",this.clusterFileName="Choose Cluster File ...",this.importDialogOpen=!1,this.importGEXFDialogOpen=!1,this.selectedEdgeFileFromInput=void 0,this.selectedNodeFileFromInput=void 0,this.selectedClusterFileFromInput=void 0,this.selectedGEXFFileFromInput=void 0,this.importConfig={hasNodeFile:!1,nodeFile:{isReady:!1,parseError:!1,path:"",hasHeader:!0,topN:[],columns:[],mapping:{id:"Unknown"},delimiter:","},edgeFile:{isReady:!1,parseError:!1,path:"",hasHeader:!0,topN:[],columns:[],mapping:{fromId:"Unknown",toId:"Unknown"},delimiter:","},clusterFile:{isReady:!1,parseError:!1,path:"",hasHeader:!0,topN:[],columns:[],mapping:{name:"Unknown",parent:"Unknown"},delimiter:","}},Object(y.n)(this)}return Object(p.a)(e,[{key:"readCSV",value:function(){var e=Object(V.a)(B.a.mark((function e(t,n,r){var i,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,(a=new FileReader).readAsText(i),e.abrupt("return",new Promise((function(e,t){a.onload=function(){var t=a.result;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");try{n&&e(Y()(t,{comment:"#",trim:!0,auto_parse:!0,skip_empty_lines:!0,columns:n,delimiter:r})),e(Y()(t,{comment:"#",trim:!0,auto_parse:!0,skip_empty_lines:!0,columns:void 0,delimiter:r}))}catch(i){f.V.create({position:v.a.TOP}).show({message:"Error: "+i.message,intent:x.a.DANGER,timeout:-1})}}})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"readGEXF",value:function(){var e=Object(V.a)(B.a.mark((function e(){var t,n,r=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectedGEXFFileFromInput,(n=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e,t){n.onload=function(){try{e(H.a.parse(k.a,n.result))}catch(t){f.V.create({position:v.a.TOP}).show({message:"Error: "+t.message,intent:x.a.DANGER,timeout:-1}),r.isLoading=!1}}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readEdgeCSV",value:function(){return this.readCSV(this.selectedEdgeFileFromInput,this.importConfig.edgeFile.hasHeader,this.importConfig.edgeFile.delimiter)}},{key:"readNodeCSV",value:function(){return this.readCSV(this.selectedNodeFileFromInput,this.importConfig.nodeFile.hasHeader,this.importConfig.nodeFile.delimiter)}},{key:"buildClusterMap",value:function(e){var t,n=this;if(void 0!==e.children){var r=[];e.leaves().forEach((function(e){void 0!=e.id&&r.push(e.id)})),null===(t=this.clusterMap)||void 0===t||t.set(e,r),e.children.forEach((function(e){n.buildClusterMap(e)}))}}},{key:"buildColorMap",value:function(e){if(void 0!==e){var t,n=e.height+1,r=q()({seed:1,count:n});for(t=0;t<n;t++){var i;null===(i=this.colorMap)||void 0===i||i.set(t,r[t])}}}},{key:"importGraphFromCSV",value:function(){var e=Object(V.a)(B.a.mark((function e(){var t,n,r,i,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.importConfig,n=t.edgeFile.hasHeader?t.edgeFile.mapping.fromId:parseInt(t.edgeFile.mapping.fromId),r=t.edgeFile.hasHeader?t.edgeFile.mapping.toId:parseInt(t.edgeFile.mapping.toId),i=[],[],a=new k.a({allowSelfLoops:!0,multi:!1,type:"undirected"}),!t.hasNodeFile){e.next=18;break}if(!this.importConfig.nodeFile.hasHeader){e.next=14;break}return e.next=10,this.readNodeCSV();case 10:(i=e.sent).forEach((function(e){var n=e[t.nodeFile.mapping.id].toString();delete e[t.nodeFile.mapping.id],a.addNode(n,e)})),e.next=18;break;case 14:return e.next=16,this.readNodeCSV();case 16:(i=e.sent).forEach((function(e){var n=e[t.nodeFile.mapping.id].toString(),r=Object.assign({},e);delete r[t.nodeFile.mapping.id],a.addNode(n,r)}));case 18:return e.next=20,this.readEdgeCSV();case 20:return e.sent.forEach((function(e,t){var i=e[n].toString(),o=e[r].toString();a.hasNode(i)||a.addNode(i,{}),a.hasNode(o)||a.addNode(o,{}),a.addEdgeWithKey(t,i,o)})),t.edgeFile.isReady=!0,this.importClusterFromCSV(this.selectedClusterFileFromInput),o=t.hasNodeFile?Object.keys(i[0]):["id"],e.abrupt("return",{graph:a,metadata:{snapshotName:"Untitled",nodeProperties:o}});case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"importClusterFromCSV",value:function(){var e=Object(V.a)(B.a.mark((function e(t){var n,r=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).readAsText(t),n.onload=function(){var e=n.result;if(null!=e){var t=X.a(e.toString()),i=X.b().id((function(e){return e.name})).parentId((function(e){return e.parent}))(t);r.clustertree=i,r.clusterMap=new Map,r.buildClusterMap(r.clustertree),r.colorMap=new Map,r.buildColorMap(r.clustertree),console.log(r.clusterMap),console.log(r.colorMap),console.log(r.clustertree),console.log(".id:"+i.id)}};case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"importGraphFromGEXF",value:function(){var e=Object(V.a)(B.a.mark((function e(){var t,n,r,i,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readGEXF();case 2:for(t=e.sent,n=[],r=0,i=Object.entries(t.getNodeAttributes(t.nodes()[0]));r<i.length;r++)a=Object(G.a)(i[r],1),o=a[0],n.push(o);return e.abrupt("return",{graph:t,metadata:{snapshotName:"Untitled",nodeProperties:n}});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderImportEdgePreview",value:function(){var e=Object(V.a)(B.a.mark((function e(){var t,n,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectedEdgeFileFromInput,n=this.importConfig.edgeFile,r=n.hasHeader,i=n.delimiter,n.parseError=!1,e.abrupt("return",new Promise((function(e,a){if(t){var o=new FileReader;o.readAsText(t),o.onload=function(){var t=o.result,s=(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split("\n"),c=s.map((function(e){return e.trim()})).slice(0,s.length<10?s.length:10).join("\n");console.log(c);try{var l=r?Y()(c,{comment:"#",trim:!0,auto_parse:!0,skip_empty_lines:!0,columns:r,delimiter:i}):Y()(c,{comment:"#",trim:!0,auto_parse:!0,skip_empty_lines:!0,columns:void 0,delimiter:i});n.topN=l,n.columns=Object.keys(l[0]).map((function(e){return"".concat(e)})),n.columns.length>=2?(n.mapping.fromId=n.columns[0],n.mapping.toId=n.columns[1],n.isReady=!0):1===n.columns.length?(n.mapping.fromId=n.mapping.toId=n.columns[0],n.isReady=!0):(f.V.create({position:v.a.TOP}).show({message:"Error: Fails to parse file",intent:x.a.DANGER,timeout:-1}),n.parseError=!0),e()}catch(u){f.V.create({position:v.a.TOP}).show({message:"Error: Fails to parse file",intent:x.a.DANGER,timeout:-1}),n.parseError=!0,a()}},o.onerror=function(){console.error(o.error),f.V.create({position:v.a.TOP}).show({action:{onClick:function(){return window.location.reload()},text:"Refresh Page"},message:"Error: Fails to open file",intent:x.a.DANGER,timeout:-1}),a()}}})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderImportNodePreview",value:function(){var e=Object(V.a)(B.a.mark((function e(){var t,n,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectedNodeFileFromInput,n=this.importConfig.nodeFile,r=n.hasHeader,i=n.delimiter,n.parseError=!1,e.abrupt("return",new Promise((function(e,a){if(t){var o=new FileReader;o.readAsText(t),o.onload=function(){var t=o.result,s=(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split("\n"),c=s.map((function(e){return e.trim()})).slice(0,s.length<10?s.length:10).join("\n");console.log(c);try{var l=r?Y()(c,{comment:"#",trim:!0,auto_parse:!0,skip_empty_lines:!0,columns:r,delimiter:i}):Y()(c,{comment:"#",trim:!0,auto_parse:!0,skip_empty_lines:!0,columns:void 0,delimiter:i});n.topN=l,n.columns=Object.keys(l[0]).map((function(e){return"".concat(e)})),n.columns.length>=1?(n.mapping.id=n.columns[0],n.isReady=!0):(f.V.create({position:v.a.TOP}).show({message:"Error: Fails to parse file",intent:x.a.DANGER,timeout:-1}),n.parseError=!0),e()}catch(u){f.V.create({position:v.a.TOP}).show({message:"Error: Fails to parse file",intent:x.a.DANGER,timeout:-1}),n.parseError=!0,a()}},o.onerror=function(){console.error(o.error),f.V.create({position:v.a.TOP}).show({action:{onClick:function(){return window.location.reload()},text:"Refresh Page"},message:"Error: Fails to open file",intent:x.a.DANGER,timeout:-1}),a()}}})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),J=function(){function e(){Object(h.a)(this,e),this.isPreviewing=!1,this.searchStr="",this.filterProps=null,Object(y.n)(this)}return Object(p.a)(e,[{key:"candidates",get:function(){var e=[],t=this.searchStr.toLocaleLowerCase();if(null===this.filterProps)pe.graph.rawGraph.forEachNode((function(n){n.toLocaleLowerCase().includes(t)&&e.push(n)}));else{var n=this.filterProps;pe.graph.rawGraph.forEachNode((function(r,i){i.hasOwnProperty(n)&&(i[n].toString().toLocaleLowerCase().includes(t)&&e.push(r))}))}return e}}]),e}(),Z=function(){function e(){Object(h.a)(this,e),this.clusterBy=null,this.showlevel="None",Object(y.n)(this)}return Object(p.a)(e,[{key:"setCluster",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(this.setCluster(null),this.setCluster(e)):(this.clusterBy=e,pe.graphDelegate.clusterObject.initEmptyMapAndFusion(),pe.graph.refreshGraph(),pe.graph.rawGraph.setAttribute("default",e))}},{key:"keyAttribute",get:function(){var e=new Map;if(null===this.clusterBy)return e;var t=this.clusterBy;return pe.graph.rawGraph.forEachNode((function(n,r){r.hasOwnProperty(t)&&(""===r[t]||e.set(n,r[t]))})),e}},{key:"getAttributeValues",get:function(){return Array.from(new Set(this.keyAttribute.values()))}},{key:"attributeKeys",get:function(){var e=new Map;return this.getAttributeValues.forEach((function(t){e.set(t,[])})),this.keyAttribute.forEach((function(t,n){var r;null===(r=e.get(t))||void 0===r||r.push(n)})),e}},{key:"attributeColor",get:function(){var e=q()({seed:1,count:this.getAttributeValues.length}),t=0,n=new Map;return this.getAttributeValues.forEach((function(r){n.set(r,e[t++])})),n}},{key:"attributePoints",get:function(){var e=this,t=new Map;return this.getAttributeValues.forEach((function(e){t.set(e,[])})),pe.graph.rawGraph.forEachNode((function(n,r){var i;null===(i=t.get(e.keyAttribute.get(n)))||void 0===i||i.push(new S.T(r._visualize.x,r._visualize.y,r._visualize.z))})),t}}]),e}(),$=function e(){Object(h.a)(this,e),this.defaultColor="#808080",this.chosenColor="#ffffAA",this.multiSelectedColor="#ffffff",this.highlightColor="#ff6060",this.resolution=12,this.size=4,Object(y.n)(this)},ee=function e(){Object(h.a)(this,e),this.defaultColor="#ffffff",this.selectedColor="#ffff00",this.highlightColor="#ff8E8E",this.defaultWidth=1,this.highlightWidth=2,this.resolution=6,Object(y.n)(this)},te=function e(){Object(h.a)(this,e),this.show=!0,this.color="#d3d3d3",this.size=4,Object(y.n)(this)},ne=function e(){Object(h.a)(this,e),this.autoPlot=!1,this.clusterForce=30,this.normalForce=50,this.resolution=10,this.shape="sphere",Object(y.n)(this)},re=function e(){Object(h.a)(this,e),this.node=void 0,this.edge=void 0,this.label=void 0,this.cluster=void 0,this.isAnimating=!0,Object(y.n)(this),this.node=new $,this.edge=new ee,this.label=new te,this.cluster=new ne};n(235);var ie,ae=50,oe=function(){function e(){Object(h.a)(this,e),this.chosenNode=null,this.selectedNodes=[],this.selectedEdge=null,this.boxSelectionOpen=!1,this.boxSelection_startPoint={x:0,y:0},this.boxSelection_endPoint={x:0,y:0},this.currentlyHoveredNodeId=null,Object(y.n)(this)}return Object(p.a)(e,[{key:"boxSelectNode",value:function(){pe.interaction.selectedNodes=[];var e=Math.min(this.boxSelection_startPoint.x,this.boxSelection_endPoint.x),t=Math.min(this.boxSelection_startPoint.y,this.boxSelection_endPoint.y)-ae,n=Math.max(this.boxSelection_startPoint.x,this.boxSelection_endPoint.x),r=Math.max(this.boxSelection_startPoint.y,this.boxSelection_endPoint.y)-ae;pe.graph.rawGraph.forEachNode((function(i,a){var o=pe.graphDelegate.graphDelegateMethods.graph2ScreenCoords(a._visualize.x,a._visualize.y,a._visualize.z);e<=o.x&&o.x<=n&&t<=o.y&&r>=o.y&&pe.interaction.selectedNodes.push(i)}))}},{key:"currentlyHoveredNodeNeighborEdges",get:function(){var e=this;if(null===this.currentlyHoveredNodeId)return null;var t=pe.graph.rawGraph.neighbors(this.currentlyHoveredNodeId);return null===t||void 0===t?void 0:t.map((function(t){return e.getEdgeKey(t,e.currentlyHoveredNodeId)}))}},{key:"getEdgeKey",value:function(e,t){var n=pe.graph.rawGraph.edge(e,t);if(void 0===n){var r=pe.graph.rawGraph.edge(t,e);return void 0===r?null:r}return n}},{key:"updateNodeVisualizeAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=pe.graph.rawGraph.getNodeAttribute(e,"_visualize")),this.updateVisualizeAttributeParser(t,n)}},{key:"updateEdgeVisualizeAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=pe.graph.rawGraph.getEdgeAttribute(e,"_visualize")),this.updateVisualizeAttributeParser(t,n)}},{key:"updateVisualizeAttributeParser",value:function(e,t){e.hasOwnProperty("hovered")?t.hovered=e.hovered:e.hasOwnProperty("chosen")?t.chosen=e.chosen:e.hasOwnProperty("multiSelected")&&(t.multiSelected=e.multiSelected)}},{key:"flush",value:function(){this.chosenNode=null,this.selectedNodes=[],this.selectedEdge=null,this.currentlyHoveredNodeId=null}}]),e}(),se=n(537);!function(e){e[e.StraightLine=0]="StraightLine",e[e.FreeLine=1]="FreeLine",e[e.FreeCircle=2]="FreeCircle",e[e.CenterCircle=3]="CenterCircle"}(ie||(ie={}));var ce=function(){function e(){Object(h.a)(this,e),this.currentlyHoveredClusterId=null,this.chosenCluster=null,this.selectedClusters=[],this.drawPanelActivate=!1,this.drawMode=ie.FreeLine,this.lineSegment=void 0,this.confirmClusterSplittingTempData=null,Object(y.n)(this)}return Object(p.a)(e,[{key:"flush",value:function(){this.currentlyHoveredClusterId=null,this.chosenCluster=null,this.selectedClusters=[]}},{key:"clusterLeftClickCallback",value:function(e,t){var n;pe.signal.isMovingCamera||(pe.graphDelegate.clusterObject.meshSpotlightMaterial(pe.graphDelegate.clusterObject.getObjectById(e)),pe.clusterInteraction.chosenCluster=e,-1!==(n=pe.clusterInteraction.selectedClusters.indexOf(e))?pe.clusterInteraction.selectedClusters.splice(n,1):pe.clusterInteraction.selectedClusters.push(e))}},{key:"clusterHoverCallback",value:function(e,t){pe.clusterInteraction.currentlyHoveredClusterId=e}},{key:"clusterRightClickCallback",value:function(e,t){pe.signal.isRightClickingCluster=!0,pe.clusterInteraction.chosenCluster=e,pe.preferences.rightClickPositionX=t.x,pe.preferences.rightClickPositionY=t.y,e?(this.selectedClusters.includes(e)||this.selectedClusters.push(e),pe.preferences.rightClickOn="Cluster"):pe.preferences.rightClickOn="Background",pe.preferences.rightClickPanelOpen=!0,pe.preferences.closeAllPanel("rightClickPanel")}},{key:"releaseSelectedClusters",value:function(){0===this.selectedClusters.length&&this.currentlyHoveredClusterId&&this.selectedClusters.push(this.currentlyHoveredClusterId),this.selectedClusters.forEach((function(e){var t=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(e),n=pe.cluster.attributeKeys.get(t);null===n||void 0===n||n.forEach((function(e){pe.graph.rawGraph.setNodeAttribute(e,pe.cluster.clusterBy,"")}))})),pe.cluster.setCluster(pe.cluster.clusterBy,!0),this.flush()}},{key:"computeSplitCluster",value:function(){var e=[],t=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(pe.clusterInteraction.chosenCluster);pe.cluster.attributeKeys.get(t).forEach((function(t){var n=pe.graph.rawGraph.getNodeAttributes(t),r=pe.graphDelegate.graphDelegateMethods.graph2ScreenCoords(n._visualize.x,n._visualize.y,n._visualize.z);e.push({id:t,x:r.x,y:r.y,value:0})}));var n=this.lineSegment.map((function(e){return[e.x,e.y]}));e.forEach((function(e){Object(se.a)(n,[e.x,e.y])?(pe.interaction.updateNodeVisualizeAttribute(e.id,{hovered:!0}),e.value=1):(pe.interaction.updateNodeVisualizeAttribute(e.id,{hovered:!1}),e.value=0)})),pe.graphDelegate.graphDelegateMethods.refresh(),this.confirmClusterSplittingTempData=e}},{key:"computeSplitClusterInCircle",value:function(e,t,n){var r=[],i=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(pe.clusterInteraction.chosenCluster);pe.cluster.attributeKeys.get(i).forEach((function(e){var t=pe.graph.rawGraph.getNodeAttributes(e),n=pe.graphDelegate.graphDelegateMethods.graph2ScreenCoords(t._visualize.x,t._visualize.y,t._visualize.z);r.push({id:e,x:n.x,y:n.y,value:0})})),r.forEach((function(r){Math.sqrt(Math.pow(r.x-e,2)+Math.pow(r.y-t,2))<n?(pe.interaction.updateNodeVisualizeAttribute(r.id,{hovered:!0}),r.value=1):(pe.interaction.updateNodeVisualizeAttribute(r.id,{hovered:!1}),r.value=0)})),pe.graphDelegate.graphDelegateMethods.refresh(),this.confirmClusterSplittingTempData=r}},{key:"splitCluster",value:function(e,t,n){var r,i=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(this.chosenCluster),a=pe.cluster.attributeKeys.get(i);null===(r=this.confirmClusterSplittingTempData)||void 0===r||r.forEach((function(r){a.includes(r.id)&&pe.graph.rawGraph.setNodeAttribute(r.id,e,1===r.value?n:t)})),this.confirmClusterSplittingTempData=null,pe.cluster.setCluster(e,!0)}},{key:"hierarchicalMergeCluster",value:function(e){var t,n,r,i;if(null!==e){var a,o=null===(t=pe.import.clustertree)||void 0===t||null===(n=t.find((function(t){return t.id===e[0]})))||void 0===n?void 0:n.depth,s="",c=[];for(a=0;a<e.length;a++)s="".concat(s,"-").concat(e[a]);var l=[];for(a=0;a<e.length;a++){var u,d,h,p=null===(u=pe.import.clustertree)||void 0===u?void 0:u.find((function(t){return t.id===e[a]}));if(void 0===p)return;l=l.concat(null===(d=pe.import.clusterMap)||void 0===d?void 0:d.get(p)),console.log(l),void 0!=p.children&&(c=c.concat(p.children)),null===(h=pe.import.clusterMap)||void 0===h||h.delete(p)}var j="name,parent\n";for(a=0;a<o;a++)j=0===a?j+a+",\n":j+a+","+(a-1)+"\n";j=j+s+","+(a-1);var g=X.b().id((function(e){return e.name})).parentId((function(e){return e.parent}))(X.a(j)),b=g;g.each((function(e){e.id===s&&(e.children=c,b=e)})),null===(r=pe.import.clustertree)||void 0===r||r.each((function(t){var n,r,i;t.id===e[0]&&(b.data={name:s,parent:null===(n=t.parent)||void 0===n?void 0:n.id},b.parent=t.parent,null===(r=t.parent)||void 0===r||null===(i=r.children)||void 0===i||i.push(b))})),null===(i=pe.import.clustertree)||void 0===i||i.each((function(t){var n,r;if(t===(null===(n=pe.import.clustertree)||void 0===n||null===(r=n.find((function(t){return t.id===e[a]})))||void 0===r?void 0:r.parent))for(a=0;a<e.length;a++){var i,o=null===(i=pe.import.clustertree)||void 0===i?void 0:i.find((function(t){return t.id===e[a]}));if(void 0!=o){var s,c,l=null===(s=t.children)||void 0===s?void 0:s.indexOf(o);if(void 0!=l&&l>-1)null===(c=t.children)||void 0===c||c.splice(l,1);console.log(t)}}})),null!=pe.import.clustertree&&pe.import.buildClusterMap(pe.import.clustertree),console.log(pe.import.clustertree),console.log(pe.import.clusterMap)}}}]),e}(),le=function e(){Object(h.a)(this,e),this.clusterSplittingPanelStackOpen=!1,this.clusterSplittingCurrentStep=1,this.NodeSelectionPanelOpen=!1,Object(y.n)(this)},ue=function e(){Object(h.a)(this,e),this.isRightClickingCluster=!1,this.isMovingCamera=!1,Object(y.n)(this)},de=function(){function e(){Object(h.a)(this,e),this.preferences=void 0,this.graph=void 0,this.graphDelegate=void 0,this.interaction=void 0,this.clusterInteraction=void 0,this.import=void 0,this.search=void 0,this.cluster=void 0,this.helper=void 0,this.css=void 0,this.signal=void 0}return Object(p.a)(e,[{key:"privateConstructor",value:function(){this.preferences=new N,this.graph=new _,this.graphDelegate=new R,this.interaction=new oe,this.clusterInteraction=new ce,this.import=new Q,this.search=new J,this.cluster=new Z,this.helper=new le,this.css=new re,this.signal=new ue}}],[{key:"instance",get:function(){if(null===e._instance){var t=new e;return t.privateConstructor(),e._instance=t,t}return e._instance}}]),e}();de._instance=null;var he=de.instance;window._state=he,Object(y.f)((function(){return he.import.renderImportEdgePreview()})),Object(y.f)((function(){return he.import.renderImportNodePreview()})),Object(y.f)((function(){var e,t;he.css.isAnimating?null===(e=he.graphDelegate.graphDelegateMethods)||void 0===e||e.resumeAnimation():null===(t=he.graphDelegate.graphDelegateMethods)||void 0===t||t.pauseAnimation()})),Object(y.f)((function(){he.preferences.visualizationMode===r.ClusterSplitting?he.clusterInteraction.chosenCluster&&(he.helper.clusterSplittingCurrentStep=2,console.log("cluster selected")):he.clusterInteraction.drawPanelActivate=!1})),Object(y.q)((function(){return he.helper.clusterSplittingCurrentStep}),(function(e){switch(console.log("Graph Splitting change to step ".concat(e)),e){case 1:he.clusterInteraction.drawPanelActivate=!1,he.clusterInteraction.confirmClusterSplittingTempData=null,he.interaction.flush(),he.clusterInteraction.flush(),he.graphDelegate.graphDelegateMethods.refresh();break;case 2:he.clusterInteraction.drawPanelActivate=!0,he.graph.rawGraph.forEachNode((function(e,t){he.interaction.updateNodeVisualizeAttribute(e,{hovered:!1,chosen:!1,multiSelected:!1},t._visualize)})),he.clusterInteraction.confirmClusterSplittingTempData=null,he.interaction.flush(),he.graphDelegate.graphDelegateMethods.refresh();break;case 3:he.clusterInteraction.drawPanelActivate=!1}})),Object(y.q)((function(){var e;return null===(e=he.graph.rawGraph)||void 0===e?void 0:e.order}),(function(e){0===e?(he.css.isAnimating=!1,console.log("Pause Animating")):(he.css.isAnimating=!0,console.log("Resume Animating"))}),{fireImmediately:!0}),Object(y.q)((function(){return he.clusterInteraction.currentlyHoveredClusterId}),(function(e){console.log("currentlyHoveredNodeId",e),he.graphDelegate.clusterObject.updateAllMaterials()})),Object(y.q)((function(){return he.clusterInteraction.chosenCluster}),(function(){he.graphDelegate.clusterObject.updateAllMaterials()})),Object(y.q)((function(){return he.clusterInteraction.selectedClusters}),(function(){he.graphDelegate.clusterObject.updateAllMaterials()})),Object(y.q)((function(){return he.interaction.currentlyHoveredNodeId}),(function(e){console.log("currentlyHoveredNodeId",e),he.graph.rawGraph.forEachNode((function(t,n){t===e?he.interaction.updateNodeVisualizeAttribute(t,{hovered:!0},n._visualize):he.interaction.updateNodeVisualizeAttribute(t,{hovered:!1},n._visualize)}))})),Object(y.q)((function(){return he.interaction.chosenNode}),(function(e){console.log("chosenNode",e),he.graph.rawGraph.forEachNode((function(t,n){e===t?he.interaction.updateNodeVisualizeAttribute(t,{chosen:!0},n._visualize):he.interaction.updateNodeVisualizeAttribute(t,{chosen:!1},n._visualize)})),he.graphDelegate.graphDelegateMethods.refresh()})),Object(y.q)((function(){return he.interaction.selectedNodes.map((function(e){return e}))}),(function(e){console.log("selectedNodes",e),he.graph.rawGraph.forEachNode((function(t,n){e.includes(t)?he.interaction.updateNodeVisualizeAttribute(t,{multiSelected:!0},n._visualize):he.interaction.updateNodeVisualizeAttribute(t,{multiSelected:!1},n._visualize)})),he.graphDelegate.graphDelegateMethods.refresh()})),Object(y.q)((function(){return he.interaction.selectedEdge}),(function(e){console.log("selectedEdge",e),he.graph.rawGraph.forEachEdge((function(t,n){e===t?he.interaction.updateEdgeVisualizeAttribute(t,{chosen:!0},n._visualize):he.interaction.updateEdgeVisualizeAttribute(t,{chosen:!1},n._visualize)})),he.graphDelegate.graphDelegateMethods.refresh()})),Object(y.q)((function(){return he.interaction.currentlyHoveredNodeId}),(function(){he.graph.rawGraph.forEachEdge((function(e,t){var n;(null===(n=he.interaction.currentlyHoveredNodeNeighborEdges)||void 0===n?void 0:n.includes(e))?he.interaction.updateEdgeVisualizeAttribute(e,{hovered:!0},t._visualize):he.interaction.updateEdgeVisualizeAttribute(e,{hovered:!1},t._visualize)})),he.graphDelegate.graphDelegateMethods.refresh()})),Object(y.f)((function(){he.signal.isMovingCamera&&(he.signal.isMovingCamera=!1)}),{delay:50}),Object(y.f)((function(){he.signal.isRightClickingCluster&&(he.signal.isRightClickingCluster=!1)}),{delay:50});var pe=he,je=n(252);function ge(e){return function(t){return e(t.target.value)}}function be(e){var t="";for(var n in e)e.hasOwnProperty(n)&&"_visualize"!==n&&"_options"!==n&&(t+=n+" : "+e[n]+" ; ");return t}function fe(e){if(""===e)return"";var t=Number(e);return isNaN(t)?e:t}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.a.TOP,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.a.NONE;f.V.create({position:t}).show({message:e,intent:r,timeout:n})}var ve,me,xe,Ce,ye=n(1),Ne=Object(b.a)((me=ve=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).itemRenderer=function(e,t){return"None"===e?Object(ye.jsx)(f.C,{intent:"primary",onClick:t.handleClick,text:e},e):Object(ye.jsx)(f.C,{onClick:t.handleClick,text:e},e)},e}return Object(p.a)(n,[{key:"fullProperties",get:function(){var e=Object(je.a)(pe.graph.metadata.nodeProperties);return e.unshift("None"),e}},{key:"render",value:function(){var e,t=this;return Object(ye.jsx)(C.a,Object(m.a)(Object(m.a)({items:this.props.showNone?this.fullProperties:pe.graph.metadata.nodeProperties,itemRenderer:this.itemRenderer,filterable:!1,onItemSelect:function(e){var n="None"===e?null:e;t.props.onSelect(n)}},this.props),{},{children:Object(ye.jsx)(f.b,{text:null!==(e=this.props.syncWith)&&void 0!==e?e:this.fullProperties[0]})}))}}]),n}(a.a.Component),ve.defaultProps={showNone:!0},me)),we=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).itemRenderer=function(e,t){return"None"===e?Object(ye.jsx)(f.C,{intent:"primary",onClick:t.handleClick,text:e},e):Object(ye.jsx)(f.C,{onClick:t.handleClick,text:e},e)},e}return Object(p.a)(n,[{key:"hierarchylevels",get:function(){var e,t=[],n=null===(e=pe.import.colorMap)||void 0===e?void 0:e.size;if(void 0!=n){for(var r=0;r<n-1;r++)t.push(r.toString());return t}}},{key:"render",value:function(){var e=this;return Object(ye.jsx)(C.a,Object(m.a)(Object(m.a)({items:this.hierarchylevels?this.hierarchylevels:["None"],itemRenderer:this.itemRenderer,filterable:!1,onItemSelect:function(t){var n="None"===t?null:t;e.props.onSelect(n)}},this.props),{},{children:Object(ye.jsx)(f.b,{text:this.props.syncWith})}))}}]),n}(a.a.Component)),ke=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={attribute:""},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(ye.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(ye.jsx)(f.z,{leftElement:Object(ye.jsx)(f.y,{icon:"tag"}),onChange:ge((function(t){e.setState({attribute:t})})),placeholder:"New Attribute Name",fill:!0,value:this.state.attribute}),Object(ye.jsx)(f.b,{onClick:function(){""===e.state.attribute||pe.graph.metadata.nodeProperties.includes(e.state.attribute)?Oe("Attribute name ".concat(e.state.attribute," already exists"),void 0,void 0,x.a.DANGER):(pe.graph.metadata.nodeProperties.push(e.state.attribute),pe.graph.rawGraph.forEachNode((function(t,n){n[e.state.attribute]=""})),e.props.onCreate(e.state.attribute),e.setState({attributes:""}))},intent:x.a.PRIMARY,children:"Add"})]})}}]),n}(a.a.Component)),Se=n.p+"static/media/icon.d621d30f.png",De=n(150),Ee=n(539),Ae=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={filter:"ID includes"},e}return Object(p.a)(n,[{key:"FILTER_OPTIONS",get:function(){var e=[{text:"ID includes",disabled:!1},{text:Object(ye.jsx)("b",{children:"Or Search Attributes"}),disabled:!0}];return pe.graph.metadata.nodeProperties.forEach((function(t){return e.push({text:"Attribute: ".concat(t),disabled:!1,attribute:t})})),e}},{key:"itemRenderer",value:function(e,t){var n;return Object(ye.jsx)(f.C,{disabled:e.disabled,onClick:t.handleClick,text:e.text},null===(n=e.text)||void 0===n?void 0:n.toString())}},{key:"render",value:function(){var e=this;return Object(ye.jsx)("div",{children:Object(ye.jsxs)(f.j,{children:[Object(ye.jsx)(C.a,{items:this.FILTER_OPTIONS,itemRenderer:this.itemRenderer,filterable:!1,onItemSelect:function(t){var n;e.setState({filter:t.text}),pe.search.filterProps=null!==(n=t.attribute)&&void 0!==n?n:null},children:Object(ye.jsx)(f.b,{icon:"filter",children:this.state.filter})}),Object(ye.jsx)(Ee.a,{inputValueRenderer:function(e){return e},query:pe.search.searchStr,onQueryChange:function(e){return pe.search.searchStr=e},itemListPredicate:function(){return pe.search.candidates},itemRenderer:function(e){return Object(ye.jsx)(f.C,{text:e,onMouseOver:function(){pe.search.isPreviewing=!0,pe.interaction.currentlyHoveredNodeId=e,pe.graphDelegate.cameraFocusOn(e)},onMouseLeave:function(){pe.search.isPreviewing=!1}})},items:pe.search.candidates,openOnKeyDown:!0,noResults:Object(ye.jsx)(f.C,{disabled:!0,text:"No results."}),popoverProps:{minimal:!0}})]})})}}]),n}(a.a.Component)),Ie=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)(f.E,{style:{zIndex:2},children:[Object(ye.jsxs)(f.G,{align:O.a.LEFT,children:[Object(ye.jsx)("img",{title:"ClusterGrapher",id:"ClusterGrapher Logo",src:Se,width:"35",height:"35",alt:"ClusterGrapher Logo"}),Object(ye.jsx)(f.B,{}),Object(ye.jsx)(f.H,{children:"ClusterGrapher"}),Object(ye.jsx)(De.a,{content:Object(ye.jsxs)(f.A,{children:[Object(ye.jsx)(f.C,{icon:"import",text:"Open GEXF",onClick:function(){pe.import.importGEXFDialogOpen=!0}}),Object(ye.jsx)(f.C,{text:"Import from CSV",icon:"import",onClick:function(){pe.import.importDialogOpen=!0}}),Object(ye.jsx)(f.C,{text:"Load Cluster",icon:"import",onClick:function(){var e;pe.graphDelegate.clusterObject.fusionClusterObjects&&pe.graphDelegate.clusterObject.initEmptyMapAndFusion(),null===(e=pe.import.clusterMap)||void 0===e||e.forEach((function(e,t){var n,r,i=new S.u(pe.graphDelegate.clusterObject.convexHullObject2(e),new S.v);i._color=null===(n=pe.import.colorMap)||void 0===n?void 0:n.get(t.depth),pe.graphDelegate.clusterObject.meshNormalMaterial(i),null===(r=pe.graphDelegate.clusterObject.fusionClusterObjects)||void 0===r||r.add(i)}))}}),Object(ye.jsx)(f.C,{text:"Load sample",icon:"import",onClick:function(){pe.clusterInteraction.hierarchicalMergeCluster(["AA","AB"])}}),Object(ye.jsx)(f.B,{}),Object(ye.jsx)(f.C,{icon:"download",text:"Export Graph",onClick:function(){pe.preferences.exportDialogOpen=!0}})]}),placement:v.a.BOTTOM,children:Object(ye.jsx)(f.b,{minimal:!0,icon:"document",children:"Graph"})}),Object(ye.jsx)(De.a,{content:Object(ye.jsxs)(f.A,{children:[Object(ye.jsx)(f.C,{text:"Node DataSheet",icon:"ungroup-objects",onClick:function(){pe.preferences.nodeDataSheetDialogOpen=!0}}),Object(ye.jsx)(f.C,{text:"Edge DataSheet",icon:"link",onClick:function(){pe.preferences.edgeDataSheetDialogOpen=!0}})]}),placement:v.a.BOTTOM,children:Object(ye.jsx)(f.b,{minimal:!0,icon:"wrench",children:"Tools"})}),Object(ye.jsx)(f.Q,{style:{marginTop:10,marginLeft:8},label:"Graph Animation",checked:pe.css.isAnimating,onChange:function(){return pe.css.isAnimating=!pe.css.isAnimating}})]}),Object(ye.jsxs)(f.G,{align:O.a.RIGHT,children:[Object(ye.jsx)(we,{onSelect:function(e){var t;pe.cluster.showlevel=e,pe.graphDelegate.clusterObject.fusionClusterObjects&&pe.graphDelegate.clusterObject.initEmptyMapAndFusion(),null===(t=pe.import.clusterMap)||void 0===t||t.forEach((function(t,n){if(n.depth.toString()===e){var r,i,a=new S.u(pe.graphDelegate.clusterObject.convexHullObject2(t),new S.v);a._color=null===(r=pe.import.colorMap)||void 0===r?void 0:r.get(n.depth),pe.graphDelegate.clusterObject.meshNormalMaterial(a),null===(i=pe.graphDelegate.clusterObject.fusionClusterObjects)||void 0===i||i.add(a)}}))},syncWith:pe.cluster.showlevel}),Object(ye.jsx)(f.F,{}),Object(ye.jsx)(Ae,{}),Object(ye.jsx)(f.F,{}),Object(ye.jsx)("div",{style:{marginRight:6},children:"Clustered by"}),Object(ye.jsx)(Ne,{onSelect:function(e){pe.cluster.setCluster(e)},syncWith:pe.cluster.clusterBy}),Object(ye.jsx)(f.b,{minimal:!0,icon:"code",onClick:function(){window.open("https://github.com/grp202004/PiperNet")}})]})]})}}]),n}(a.a.Component)),Me=n(541),Pe=n(237),Re=n(73);function Fe(e,t){return Object(ye.jsx)(f.C,{onClick:t.handleClick,text:e},e)}var Te=Object(b.a)((Ce=xe=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).itemPredicate=function(e,t){return t.toLowerCase().indexOf(e.toLowerCase())>=0},e}return Object(p.a)(n,[{key:"render",value:function(){return this.props.search?Object(ye.jsx)(C.a,{items:this.props.items,itemPredicate:this.itemPredicate,itemRenderer:Fe,filterable:!0,onItemSelect:this.props.onSelect,noResults:Object(ye.jsx)(f.C,{disabled:!0,text:"No results."}),children:Object(ye.jsx)(f.b,{text:this.props.text,small:this.props.small})}):Object(ye.jsx)(C.a,{items:this.props.items,itemRenderer:Fe,filterable:!1,onItemSelect:this.props.onSelect,children:Object(ye.jsx)(f.b,{text:this.props.text,small:this.props.small})})}}]),n}(a.a.Component),xe.defaultProps={small:!1,search:!1},Ce)),ze=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).file=e.props.file,e.renderWrapper=function(){return e.file.parseError?Object(ye.jsxs)(f.d,{title:"Error Parsing File",intent:"warning",children:["Try with other options of ",Object(ye.jsx)("code",{children:"Delimiter"})," or review the file for import to find possible problems."]}):Object(ye.jsxs)("div",{children:[Object(ye.jsx)(Me.a,{className:"import-preview-table",numRows:e.file.topN.length,selectedRegions:Object.values(e.file.mapping).map((function(t){return e.file.columns.indexOf(t)})).map((function(e){return{rows:null,cols:[e,e]}})),children:e.file.columns.map((function(t){return Object(ye.jsx)(Pe.a,{name:t,cellRenderer:function(n){return Object(ye.jsx)(Re.a,{children:e.file.topN[n][t]})}},t)}))}),Object(ye.jsxs)(f.T,{children:["Only the top ",e.file.topN.length," rows of the selected file are displayed."]})]})},e}return Object(p.a)(n,[{key:"render",value:function(){return this.renderWrapper()}}]),n}(a.a.Component)),_e=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).multiDialogRef=a.a.createRef(),e.state={delimiter:",",step:0},e.canImport=function(){return pe.import.importConfig.hasNodeFile?pe.import.importConfig.edgeFile.isReady&&pe.import.importConfig.nodeFile.isReady:pe.import.importConfig.edgeFile.isReady},e.renderNodesSelection=function(){var e=pe.import.importConfig.nodeFile;return pe.import.importConfig.hasNodeFile?Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(f.o,{text:pe.import.nodeFileName,onInputChange:function(e){var t=e.target;!t.files||t.files.length<1||(pe.import.importConfig.hasNodeFile=!0,pe.import.nodeFileName=t.files[0].name,pe.import.selectedNodeFileFromInput=t.files[0])}}),Object(ye.jsx)(f.Q,{label:"Has Headers",checked:e.hasHeader,onChange:function(){return e.hasHeader=!e.hasHeader}}),e.isReady&&Object(ye.jsxs)("div",{className:"column-selection",children:[Object(ye.jsx)(ze,{file:e}),Object(ye.jsx)("br",{}),"Column for Node ID:",Object(ye.jsx)(Te,{items:e.columns,text:e.mapping.id,onSelect:function(t){return e.mapping.id=t}})]})]}):Object(ye.jsx)(f.s,{children:"You don't need to import node file"})},e.renderEdgesSelection=function(){var e=pe.import.importConfig.edgeFile;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(f.o,{text:pe.import.edgeFileName,onInputChange:function(e){var t=e.target;!t.files||t.files.length<1||(pe.import.edgeFileName=t.files[0].name,pe.import.selectedEdgeFileFromInput=t.files[0])}}),Object(ye.jsx)(f.Q,{label:"Has Headers",checked:e.hasHeader,onChange:function(){return e.hasHeader=!e.hasHeader}}),e.isReady&&Object(ye.jsxs)("div",{children:[Object(ye.jsx)(ze,{file:e}),Object(ye.jsx)("br",{}),"Column for Source ID:",Object(ye.jsx)(Te,{items:e.columns,text:e.mapping.fromId,onSelect:function(t){return e.mapping.fromId=t}}),Object(ye.jsx)("br",{}),"Column for Target ID:",Object(ye.jsx)(Te,{items:e.columns,text:e.mapping.toId,onSelect:function(t){return e.mapping.toId=t}})]})]})},e.renderClusterSelection=function(){var e=pe.import.importConfig.clusterFile;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(f.o,{text:pe.import.clusterFileName,onInputChange:function(e){var t=e.target;!t.files||t.files.length<1||(pe.import.clusterFileName=t.files[0].name,pe.import.selectedClusterFileFromInput=t.files[0])}}),e.isReady&&Object(ye.jsxs)("div",{children:[Object(ye.jsx)(ze,{file:e}),Object(ye.jsx)("br",{}),"Column for Cluster ID:",Object(ye.jsx)(Te,{items:e.columns,text:e.mapping.name,onSelect:function(t){return e.mapping.name=t}}),Object(ye.jsx)("br",{})]})]})},e}return Object(p.a)(n,[{key:"renderDelimiterSelection",value:function(){var e=this;return Object(ye.jsxs)("div",{children:["Selected Delimiter",Object(ye.jsx)(Te,{items:[",","\\t",";","[SPACE]"],text:this.state.delimiter,onSelect:function(t){e.setState({delimiter:t}),"\\t"===t?t="\t":"[SPACE]"===t&&(t=" "),pe.import.importConfig.edgeFile.delimiter=t,pe.import.importConfig.nodeFile.delimiter=t}})," "]})}},{key:"render",value:function(){var e=this;return Object(ye.jsxs)(f.D,{ref:this.multiDialogRef,className:u()("multistep-dialog-box"),icon:"import",isOpen:pe.import.importDialogOpen,onClose:function(){pe.import.importDialogOpen=!1},finalButtonProps:{intent:"primary",onClick:function(){pe.import.isLoading=!0,pe.import.importGraphFromCSV().then((function(e){pe.graph.setGraph(e.graph,e.metadata),pe.graph.rawGraph.hasAttribute("default")&&pe.cluster.setCluster(pe.graph.rawGraph.getAttribute("default")),pe.import.isLoading=!1,pe.import.importDialogOpen=!1}))},disabled:!(!pe.import.importConfig.hasNodeFile||pe.import.importConfig.hasNodeFile&&pe.import.importConfig.nodeFile.isReady),text:"Import"},onChange:function(t){e.setState({step:t})},title:"Open Files",children:[Object(ye.jsx)(f.l,{id:"csv_edge",title:"Choose a Edge file",panel:Object(ye.jsx)("div",{className:u()(d.a.DIALOG_BODY,"multistep-dialog-body"),style:{justifyContent:"center",alignItems:"center",display:"flex"},children:pe.import.isLoading?Object(ye.jsx)(f.P,{}):Object(ye.jsx)("div",{children:Object(ye.jsxs)("div",{className:u()(d.a.DIALOG_BODY,"import-dialog"),style:{maxWidth:"40vw"},children:[this.renderEdgesSelection(),Object(ye.jsx)("br",{}),this.renderDelimiterSelection()]})})}),nextButtonProps:{disabled:!pe.import.importConfig.edgeFile.isReady}}),Object(ye.jsx)(f.l,{id:"csv_node_need",title:"Do I need to import node file ?",panel:Object(ye.jsxs)("div",{className:u()(d.a.DIALOG_BODY,"multistep-dialog-body"),style:{justifyContent:"center",alignItems:"center"},children:[Object(ye.jsx)(f.q,{children:"Do I need to import node file?"}),Object(ye.jsx)(f.s,{children:"You can import nodes file to add node attributes to this graph"}),Object(ye.jsx)("p",{children:"To import attributes we will need to proceed another csv files: a list of nodes, Nodes must have at least an ID, other fields are optional"}),Object(ye.jsx)("br",{}),Object(ye.jsx)(f.Q,{large:!0,checked:pe.import.importConfig.hasNodeFile,label:"I want to import node file",onChange:function(){return pe.import.importConfig.hasNodeFile=!pe.import.importConfig.hasNodeFile}})]})}),Object(ye.jsx)(f.l,{id:"csv_node",title:"Choose a Node file",panel:Object(ye.jsx)("div",{className:u()(d.a.DIALOG_BODY,"multistep-dialog-body"),style:{justifyContent:"center",alignItems:"center",display:"flex"},children:pe.import.isLoading?Object(ye.jsx)(f.P,{}):Object(ye.jsx)("div",{children:Object(ye.jsx)("div",{className:u()(d.a.DIALOG_BODY,"import-dialog"),style:{maxWidth:"40vw"},children:this.renderNodesSelection()})})})}),Object(ye.jsx)(f.l,{id:"csv_cluster",title:"Choose a Cluster file",panel:Object(ye.jsx)("div",{className:u()(d.a.DIALOG_BODY,"multistep-dialog-body"),style:{justifyContent:"center",alignItems:"center",display:"flex"},children:pe.import.isLoading?Object(ye.jsx)(f.P,{}):Object(ye.jsx)("div",{children:Object(ye.jsx)("div",{className:u()(d.a.DIALOG_BODY,"import-dialog"),style:{maxWidth:"40vw"},children:this.renderClusterSelection()})})})})]})}}]),n}(a.a.Component)),Ge=n(51),Le=n(238),Be=n.n(Le),Ve=n(110),Ue=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={ready:!0},e}return Object(p.a)(n,[{key:"computeGEXFFile",value:function(){var e=pe.graph.rawGraph.copy();return e.forEachNode((function(e,t){delete t._visualize})),e.forEachEdge((function(e,t){delete t._visualize})),Be.a.write(e)}},{key:"computeNodeFile",value:function(){var e=[];e.push({label:"_id",key:"_id"}),pe.graph.metadata.nodeProperties.map((function(t){return e.push({label:t,key:t}),null}));var t=pe.graph.rawGraph.export(),n=[];return t.nodes.forEach((function(e){n.push(Object(m.a)({_id:e.key},e.attributes))})),{headers:e,data:n}}},{key:"computeEdgeFile",value:function(){var e=pe.graph.rawGraph.export(),t=[];return e.edges.forEach((function(e){t.push({source:e.source,target:e.target})})),{headers:[{label:"source",key:"source"},{label:"target",key:"target"}],data:t}}},{key:"render",value:function(){return Object(ye.jsx)(f.k,{icon:"projects",isOpen:pe.preferences.exportDialogOpen,onClose:function(){pe.preferences.exportDialogOpen=!1},title:"Export Graph",children:this.state.ready?Object(ye.jsxs)("div",{className:u()(d.a.DIALOG_BODY),children:[Object(ye.jsxs)(f.e,{interactive:!1,elevation:Ge.a.ONE,children:[Object(ye.jsxs)(f.r,{children:["GEXF Export"," ",Object(ye.jsx)(f.b,{icon:"help",minimal:!0,onClick:function(){window.open("https://gephi.org/gexf/format/")}})]}),Object(ye.jsx)(f.m,{}),Object(ye.jsx)(Ve.CSVLink,{data:this.computeGEXFFile(),filename:"Snapshot-GEXF.gexf",className:"btn btn-primary",target:"_blank",children:Object(ye.jsx)(f.b,{children:"Download GEXF File"})})]}),Object(ye.jsx)("br",{}),Object(ye.jsxs)(f.e,{interactive:!1,elevation:Ge.a.ONE,children:[Object(ye.jsxs)(f.r,{children:["CSV Export"," ",Object(ye.jsx)(f.b,{icon:"help",minimal:!0,onClick:function(){window.open("https://github.com/grp202004/PiperNet#data-import")}})]}),Object(ye.jsx)(f.m,{}),Object(ye.jsxs)(f.c,{children:[Object(ye.jsx)(Ve.CSVLink,{data:this.computeNodeFile().data,headers:this.computeNodeFile().headers,separator:",",filename:"Snapshot-Node.csv",className:"btn btn-primary",target:"_blank",children:Object(ye.jsx)(f.b,{children:"Download Node File"})}),Object(ye.jsx)(f.m,{}),Object(ye.jsx)(Ve.CSVLink,{data:this.computeEdgeFile().data,headers:this.computeEdgeFile().headers,separator:",",filename:"Snapshot-Edge.csv",className:"btn btn-primary",target:"_blank",children:Object(ye.jsx)(f.b,{children:"Download Edge File"})})]})]})]}):Object(ye.jsx)(f.P,{})})}}]),n}(a.a.Component)),He=n(540),We=n(14),Ye=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0},e}return Object(p.a)(n,[{key:"renderTable",value:function(){return this.state.loading?Object(ye.jsx)("div",{className:"argo-table-container",children:Object(ye.jsxs)(Me.a,{className:"pt-bordered pt-striped",numRows:20,loadingOptions:[We.e.CELLS,We.e.COLUMN_HEADERS,We.e.ROW_HEADERS],children:[Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{}),Object(ye.jsx)(Pe.a,{})]})}):this.props.children}},{key:"render",value:function(){var e=this;return Object(ye.jsx)(f.k,{icon:"database",isOpen:"node"===this.props.for?pe.preferences.nodeDataSheetDialogOpen:pe.preferences.edgeDataSheetDialogOpen,onOpened:function(){setTimeout((function(){e.setState({loading:!1})}),100)},onClose:function(){"node"===e.props.for?pe.preferences.nodeDataSheetDialogOpen=!1:pe.preferences.edgeDataSheetDialogOpen=!1,e.setState({loading:!0})},title:"Data Sheet",style:{minWidth:"80vw"},children:Object(ye.jsx)("div",{className:u()(d.a.DIALOG_BODY),children:this.renderTable()})})}}]),n}(a.a.Component)),Xe=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={filterQuery:"",addNodeDialogOpen:!1,deleteAlertOpen:!1,nodeToDelete:null},e.nodeProperties=pe.graph.metadata.nodeProperties,e.renderColumns=function(){return e.nodeProperties.map((function(t,n){return"_options"!==t?Object(ye.jsx)(Pe.a,{name:t,cellRenderer:function(n,r){return e.renderCell(n,t)}}):null})).filter((function(e){return void 0!==e}))},e.renderCell=function(t,n){var r=e.filteredTable[t].attributes[n];return Object(ye.jsx)(He.a,{value:r,onChange:function(r){return e.setValue(r,t,n)},onConfirm:function(r){return e.setValue(r,t,n)},tooltip:r})},e.setValue=function(t,n,r){var i=e.filteredTable[n].key;pe.graph.rawGraph.setNodeAttribute(i,r,fe(t))},e.deleteNodeRenderer=function(t){return Object(ye.jsx)(Re.a,{children:Object(ye.jsx)(f.b,{onClick:function(){e.setState({nodeToDelete:e.filteredTable[t],deleteAlertOpen:!0})},icon:"trash",intent:"danger",text:"Delete",minimal:!0})})},e.deleteNodeAlert=function(){var t,n;return Object(ye.jsx)(f.a,{cancelButtonText:"Cancel",confirmButtonText:"Confirm Delete",icon:"trash",intent:x.a.DANGER,isOpen:e.state.deleteAlertOpen,onCancel:function(){return e.setState({deleteAlertOpen:!1})},onConfirm:function(){var t;pe.graph.mutating.dropNode(null===(t=e.state.nodeToDelete)||void 0===t?void 0:t.key),e.setState({deleteAlertOpen:!1})},style:{minWidth:"60vw"},children:Object(ye.jsxs)("p",{children:["Are you sure you want to delete the node with ID"," ",Object(ye.jsx)(f.g,{children:null===(t=e.state.nodeToDelete)||void 0===t?void 0:t.key})," with attributes:",Object(ye.jsx)(f.g,{children:be(null===(n=e.state.nodeToDelete)||void 0===n?void 0:n.attributes)}),"This action cannot be reversed."]})})},e.style={textAlign:"center"},e}return Object(p.a)(n,[{key:"filteredTable",get:function(){var e=this,t=[];return pe.graph.rawGraph.export().nodes.forEach((function(n){(n.key.toLocaleLowerCase().includes(e.state.filterQuery.toLocaleLowerCase())||""===e.state.filterQuery)&&t.push(n)})),t}},{key:"render",value:function(){var e=this;return Object(ye.jsxs)("div",{children:[Object(ye.jsx)(f.d,{title:"Try to click on a cell and type in something...",intent:"primary",icon:"edit",children:"The corresponding value of a node's attribute can be modified by clicking the cell and type in"}),Object(ye.jsxs)(f.c,{children:[Object(ye.jsx)(f.b,{onClick:function(){return e.forceUpdate()},icon:"refresh",intent:"none",text:"Refresh"}),Object(ye.jsx)(f.b,{onClick:function(){pe.preferences.AddNodeDialogOpen=!0},icon:"new-object",intent:"primary",text:"Add Node"}),Object(ye.jsx)(f.m,{}),Object(ye.jsx)(f.z,{style:{width:"40vw"},asyncControl:!0,leftIcon:"search",onChange:ge((function(t){e.setState({filterQuery:t})})),placeholder:"Search any Node...",value:this.state.filterQuery,fill:!0})]}),Object(ye.jsx)("hr",{}),Object(ye.jsxs)(Me.a,{className:"argo-table",defaultRowHeight:30,numRows:this.filteredTable.length,children:[Object(ye.jsx)(Pe.a,{name:"",cellRenderer:this.deleteNodeRenderer,style:this.style}),Object(ye.jsx)(Pe.a,{name:"ID",intent:x.a.SUCCESS,cellRenderer:function(t){var n=e.filteredTable[t].key;return Object(ye.jsx)(Re.a,{children:n})}}),this.renderColumns()]}),this.deleteNodeAlert()]})}}]),n}(a.a.Component)),Ke=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsx)(Ye,{for:"node",children:Object(ye.jsx)(Xe,{})})}}]),n}(a.a.Component)),qe=n(40),Qe=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={select:"Choose "+e.props.text},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(ye.jsx)(f.p,{label:this.props.text,labelFor:"text-input",labelInfo:"(required)",children:Object(ye.jsx)(C.a,{filterable:!0,items:pe.graph.rawGraph.export().nodes,itemPredicate:function(e,t){return t.key.includes(e)},itemRenderer:function(t){var n;return Object(ye.jsx)(f.W,{content:be(null!==(n=t.attributes)&&void 0!==n?n:{}),children:Object(ye.jsx)(f.C,{text:t.key,onClick:function(){var n=t.key;e.setState({select:n}),e.props.onChange(n)}},t.key)})},noResults:Object(ye.jsx)(f.C,{disabled:!0,text:"No results."}),onItemSelect:function(){},children:Object(ye.jsx)(f.b,{text:this.state.select,rightIcon:"double-caret-vertical"})})})}}]),n}(a.a.Component)),Je=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={addEdgeDialogOpen:!1,deleteAlertOpen:!1,edgeToDelete:null,filterQuery:null,chosenSource:null,chosenTarget:null},e.deleteEdgeRenderer=function(t){return Object(ye.jsx)(Re.a,{children:Object(ye.jsx)(f.b,{onClick:function(){e.setState({edgeToDelete:e.filteredTable[t],deleteAlertOpen:!0})},icon:"trash",intent:"danger",text:"Delete",minimal:!0})})},e.deleteEdgeAlert=function(){var t,n,r;return Object(ye.jsx)(f.a,{cancelButtonText:"Cancel",confirmButtonText:"Confirm Delete",icon:"trash",intent:x.a.DANGER,isOpen:e.state.deleteAlertOpen,onCancel:function(){return e.setState({deleteAlertOpen:!1})},onConfirm:function(){var t;pe.graph.mutating.dropEdge(null===(t=e.state.edgeToDelete)||void 0===t?void 0:t.key),e.setState({deleteAlertOpen:!1})},children:Object(ye.jsxs)("p",{children:["Are you sure you want to delete the edge with ID"," ",Object(ye.jsx)(f.g,{children:null===(t=e.state.edgeToDelete)||void 0===t?void 0:t.key})," from Node ID"," ",Object(ye.jsx)(f.g,{children:null===(n=e.state.edgeToDelete)||void 0===n?void 0:n.source})," to Node ID ",Object(ye.jsx)(f.g,{children:null===(r=e.state.edgeToDelete)||void 0===r?void 0:r.target}),". This action cannot be reversed."]})})},e.addEdgeDialog=function(){return Object(ye.jsxs)(f.k,{isOpen:e.state.addEdgeDialogOpen,icon:"new-link",onClose:function(){return e.setState({addEdgeDialogOpen:!1})},onClosed:function(){return e.setState({chosenSource:null,chosenTarget:null})},title:"Add Edge",children:[Object(ye.jsxs)("div",{className:d.a.DIALOG_BODY,children:[Object(ye.jsx)("p",{children:Object(ye.jsx)("strong",{children:"You can only add unique undirected edges to the graph dataset."})}),Object(ye.jsxs)("p",{children:["A ",Object(ye.jsx)("em",{children:"UNIQUE"})," edge means there should only exist one edge that connects between the source and the target."]}),Object(ye.jsxs)(f.c,{fill:!0,children:[Object(ye.jsx)(Qe,{text:"Source Node",onChange:function(t){e.setState({chosenSource:t})}}),Object(ye.jsx)(f.m,{}),Object(ye.jsx)(Qe,{text:"Target Node",onChange:function(t){e.setState({chosenTarget:t})}})]}),Object(ye.jsx)("p",{children:"New edges are added to the end of the table."}),!e.canImport&&Object(ye.jsx)(f.d,{title:"Invalid Edge",intent:"danger",icon:"edit",children:"The new edge is invalid because either this is a edge that already in the graph or cannot form a valid undirected edge"})]}),Object(ye.jsx)("div",{className:d.a.DIALOG_FOOTER,children:Object(ye.jsxs)("div",{className:d.a.DIALOG_FOOTER_ACTIONS,children:[Object(ye.jsx)(f.b,{onClick:function(){return e.setState({addEdgeDialogOpen:!1})},children:"Cancel"}),Object(ye.jsx)(f.b,{intent:x.a.PRIMARY,onClick:function(){pe.graph.mutating.addEdge(e.state.chosenSource,e.state.chosenTarget),e.setState({addEdgeDialogOpen:!1})},disabled:!e.canImport,children:"Confirm"})]})})]})},e.style={textAlign:"center"},e}return Object(p.a)(n,[{key:"filteredTable",get:function(){var e=this,t=[];return pe.graph.rawGraph.export().edges.forEach((function(n){(!e.state.filterQuery||n.source.toLocaleLowerCase().includes(e.state.filterQuery.toLocaleLowerCase())||n.target.toLocaleLowerCase().includes(e.state.filterQuery.toLocaleLowerCase())||""===e.state.filterQuery)&&t.push(n)})),t}},{key:"canImport",get:function(){return!(!this.state.chosenSource||!this.state.chosenTarget)&&(this.state.chosenSource!==this.state.chosenTarget&&(!pe.graph.rawGraph.hasEdge(this.state.chosenSource,this.state.chosenTarget)&&!pe.graph.rawGraph.hasEdge(this.state.chosenTarget,this.state.chosenSource)))}},{key:"render",value:function(){var e,t=this;return Object(ye.jsxs)("div",{children:[Object(ye.jsxs)(f.c,{children:[Object(ye.jsx)(f.b,{onClick:function(){return t.forceUpdate()},icon:"refresh",intent:"none",text:"Refresh"}),Object(ye.jsx)(f.b,{onClick:function(){return t.setState({addEdgeDialogOpen:!0})},icon:"new-link",intent:"primary",text:"Add Edge"}),Object(ye.jsx)(f.m,{}),Object(ye.jsx)(f.z,{style:{width:"40vw"},asyncControl:!0,leftIcon:"search",onChange:ge((function(e){t.setState({filterQuery:e})})),placeholder:"Search any Source or Target of an Edge...",value:null!==(e=this.state.filterQuery)&&void 0!==e?e:""})]}),Object(ye.jsx)("hr",{}),Object(ye.jsxs)(Me.a,{className:"argo-table",numRows:this.filteredTable.length,defaultRowHeight:30,renderMode:qe.a.NONE,children:[Object(ye.jsx)(Pe.a,{name:"",cellRenderer:this.deleteEdgeRenderer,style:this.style}),Object(ye.jsx)(Pe.a,{name:"Source",intent:x.a.PRIMARY,cellRenderer:function(e){return Object(ye.jsx)(Re.a,{children:t.filteredTable[e].source})}}),Object(ye.jsx)(Pe.a,{name:"Target",intent:x.a.PRIMARY,cellRenderer:function(e){return Object(ye.jsx)(Re.a,{children:t.filteredTable[e].target})}})]}),this.deleteEdgeAlert(),this.addEdgeDialog()]})}}]),n}(a.a.Component)),Ze=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsx)(Ye,{for:"edge",children:Object(ye.jsx)(Je,{})})}}]),n}(a.a.Component)),$e=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={newNodeId:"",attributes:{}},e.canImportTag=function(){return e.canImport?Object(ye.jsx)(f.W,{content:"This Node Id is not used by any existing node yet",intent:"success",children:Object(ye.jsx)(f.b,{icon:"tick",intent:"success",minimal:!0})}):Object(ye.jsx)(f.W,{content:"This Node Id is currently in use by other nodes, try with another one instead",intent:"warning",children:Object(ye.jsx)(f.b,{icon:"cross",intent:"warning",minimal:!0})})},e.renderAttributesForm=function(t){return t.map((function(t){return"_options"!==t&&"_visualize"!==t?Object(ye.jsx)(f.p,{label:t,children:Object(ye.jsx)(f.z,{asyncControl:!0,placeholder:"Enter the value for attribute: "+t,onChange:ge((function(n){var r=e.state.attributes;r[t]=fe(n),e.setState({attributes:r})})),value:e.state.attributes[t]})}):null}))},e.componentDidMount=function(){pe.graph.metadata.nodeProperties.forEach((function(t){var n=e.state.attributes;n[t]="",e.setState({attributes:n})}))},e}return Object(p.a)(n,[{key:"canImport",get:function(){return!pe.graph.rawGraph.hasNode(this.state.newNodeId)&&""!==this.state.newNodeId}},{key:"render",value:function(){var e=this;return Object(ye.jsxs)(f.e,{elevation:Ge.a.ONE,children:[Object(ye.jsx)(f.p,{label:"New Node ID",labelInfo:"(required)",children:Object(ye.jsx)(f.z,{autoFocus:!0,asyncControl:!0,placeholder:"Enter the new Node Id...",intent:this.canImport?"success":"warning",rightElement:this.canImportTag(),onChange:ge((function(t){return e.setState({newNodeId:t})})),value:this.state.newNodeId})}),Object(ye.jsxs)(f.e,{elevation:Ge.a.ONE,children:[Object(ye.jsx)(f.t,{children:"Attributes"}),this.renderAttributesForm(pe.graph.metadata.nodeProperties)]}),Object(ye.jsx)("hr",{}),Object(ye.jsx)(f.b,{intent:"primary",onClick:function(){pe.graph.decorateRawNode(e.state.newNodeId,e.state.attributes),pe.graph.mutating.addNode(e.state.newNodeId,e.state.attributes),e.props.onAdded(e.state.newNodeId,e.state.attributes),pe.preferences.AddNodeDialogOpen=!1},disabled:!this.canImport,children:"Confirm"})]})}}]),n}(a.a.Component)),et=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(ye.jsx)(f.k,{isOpen:pe.preferences.AddNodeDialogOpen,icon:"new-object",onClose:function(){pe.preferences.AddNodeDialogOpen=!1},title:"Add Node",children:Object(ye.jsxs)("div",{className:d.a.DIALOG_BODY,children:[Object(ye.jsx)("p",{children:Object(ye.jsx)("strong",{children:"You can only add node with unique node id to the graph dataset."})}),Object(ye.jsxs)("p",{children:["A ",Object(ye.jsx)("em",{children:"UNIQUE"})," node means there should only exist one node that has the respective node id."]}),Object(ye.jsx)(f.T,{children:"New nodes are added to the end of the table"}),Object(ye.jsx)("hr",{}),Object(ye.jsx)($e,{onAdded:function(){e.setState({addNodeDialogOpen:!1}),e.forceUpdate()}})]})})}}]),n}(a.a.Component)),tt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={chosenSource:null,chosenTarget:null},e}return Object(p.a)(n,[{key:"canImport",get:function(){return!(!this.state.chosenSource||!this.state.chosenTarget)&&(this.state.chosenSource!==this.state.chosenTarget&&(!pe.graph.rawGraph.hasEdge(this.state.chosenSource,this.state.chosenTarget)&&!pe.graph.rawGraph.hasEdge(this.state.chosenTarget,this.state.chosenSource)))}},{key:"render",value:function(){var e=this;return Object(ye.jsxs)(f.k,{isOpen:pe.preferences.AddEdgeDialogOpen,icon:"new-link",onClose:function(){pe.preferences.AddEdgeDialogOpen=!1},onClosed:function(){return e.setState({chosenSource:null,chosenTarget:null})},title:"Add Edge",children:[Object(ye.jsxs)("div",{className:d.a.DIALOG_BODY,children:[Object(ye.jsx)("p",{children:Object(ye.jsx)("strong",{children:"You can only add unique undirected edges to the graph dataset."})}),Object(ye.jsxs)("p",{children:["A ",Object(ye.jsx)("em",{children:"UNIQUE"})," edge means there should only exist one edge that connects between the source and the target."]}),Object(ye.jsxs)(f.c,{fill:!0,children:[Object(ye.jsx)(Qe,{text:"Source Node",onChange:function(t){e.setState({chosenSource:t})}}),Object(ye.jsx)(f.m,{}),Object(ye.jsx)(Qe,{text:"Target Node",onChange:function(t){e.setState({chosenTarget:t})}})]}),Object(ye.jsx)("p",{children:"New edges are added to the end of the table."}),!this.canImport&&Object(ye.jsx)(f.d,{title:"Invalid Edge",intent:"danger",icon:"edit",children:"The new edge is invalid because either this is a edge that already in the graph or cannot form a valid undirected edge"})]}),Object(ye.jsx)("div",{className:d.a.DIALOG_FOOTER,children:Object(ye.jsxs)("div",{className:d.a.DIALOG_FOOTER_ACTIONS,children:[Object(ye.jsx)(f.b,{onClick:function(){pe.preferences.AddEdgeDialogOpen=!1},children:"Cancel"}),Object(ye.jsx)(f.b,{intent:x.a.PRIMARY,onClick:function(){pe.graph.mutating.addEdge(e.state.chosenSource,e.state.chosenTarget),e.forceUpdate(),pe.preferences.AddEdgeDialogOpen=!1},disabled:!this.canImport,children:"Confirm"})]})})]})}}]),n}(a.a.Component)),nt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={fileIsSelect:!1},e}return Object(p.a)(n,[{key:"renderImportButton",value:function(){return Object(ye.jsx)("div",{className:d.a.DIALOG_FOOTER,children:Object(ye.jsx)("div",{className:d.a.DIALOG_FOOTER_ACTIONS,children:Object(ye.jsx)(f.c,{children:Object(ye.jsx)(f.b,{disabled:!this.state.fileIsSelect,intent:x.a.PRIMARY,onClick:function(){pe.import.isLoading=!0,pe.import.importGraphFromGEXF().then((function(e){pe.graph.setGraph(e.graph,e.metadata),pe.graph.rawGraph.hasAttribute("default")&&pe.cluster.setCluster(pe.graph.rawGraph.getAttribute("default")),pe.import.isLoading=!1,pe.import.importGEXFDialogOpen=!1}))},text:"Import"})})})})}},{key:"render",value:function(){var e=this;return Object(ye.jsx)(f.k,{icon:"document-open",isOpen:pe.import.importGEXFDialogOpen,onClose:function(){pe.import.importGEXFDialogOpen=!1},title:"Open GEXF",children:pe.import.isLoading?Object(ye.jsx)(f.P,{}):Object(ye.jsxs)("div",{className:u()(d.a.DIALOG_BODY,"import-dialog"),children:[Object(ye.jsx)("div",{children:Object(ye.jsx)(f.j,{children:Object(ye.jsx)(f.o,{text:pe.import.gexfFileName,onInputChange:function(t){var n=t.target;!n.files||n.files.length<1||(pe.import.gexfFileName=n.files[0].name,pe.import.selectedGEXFFileFromInput=n.files[0],e.setState({fileIsSelect:!0}))}})})}),this.renderImportButton()]})})}}]),n}(a.a.Component)),rt=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)("div",{style:{display:"none"},children:[Object(ye.jsx)(nt,{}),Object(ye.jsx)(_e,{}),Object(ye.jsx)(et,{}),Object(ye.jsx)(tt,{}),Object(ye.jsx)(Ke,{}),Object(ye.jsx)(Ze,{}),Object(ye.jsx)(Ue,{})]})}}]),n}(a.a.Component),it=n(251),at=n(242),ot=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={boxStyle:{left:0,top:0,width:0,height:0},startPoint:{x:0,y:0},endPoint:{x:0,y:0},mouseDown:!1},e.onMouseDownCallback=function(t){var n={x:t.clientX,y:t.clientY};e.setState({startPoint:n,endPoint:n,mouseDown:!0})},e.onMouseMoveCallback=function(t){if(e.state.mouseDown){var n={x:t.clientX,y:t.clientY};e.setState({endPoint:n,boxStyle:e._calculateSelectionBox(e.state.startPoint,e.state.endPoint)})}},e.onMouseUpCallback=function(t){pe.interaction.boxSelection_endPoint={x:e.state.endPoint.x,y:e.state.endPoint.y},pe.interaction.boxSelection_startPoint={x:e.state.startPoint.x,y:e.state.startPoint.y},e.setState({startPoint:{x:0,y:0},endPoint:{x:0,y:0},boxStyle:{left:0,top:0,width:0,height:0},mouseDown:!1}),pe.interaction.boxSelectionOpen=!1,pe.interaction.boxSelectNode()},e}return Object(p.a)(n,[{key:"_calculateSelectionBox",value:function(e,t){return{left:Math.min(e.x,t.x),top:Math.min(e.y,t.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}},{key:"render",value:function(){return Object(ye.jsx)("div",{className:u()("boxCanvas"),onMouseDown:this.onMouseDownCallback,onMouseMove:this.onMouseMoveCallback,onMouseUp:this.onMouseUpCallback,children:Object(ye.jsx)("div",{className:u()("selectionBox"),style:this.state.boxStyle})})}}]),n}(a.a.Component)),st=function(e){var t,n,r=e;if(null!==pe.cluster.clusterBy&&pe.graphDelegate.graphDelegateMethods){var i=s.a.findDOMNode(T.visualizer),a=null===i||void 0===i?void 0:i.getBoundingClientRect(),o=new S.T((r.clientX-a.left)/a.width*2-1,-(r.clientY-a.top)/a.height*2+1,.5),c=null===(t=pe.graphDelegate.graphDelegateMethods)||void 0===t?void 0:t.camera();if(c){o=o.unproject(c);var l=new S.E(c.position,o.sub(c.position).normalize()).intersectObjects(null===(n=pe.graphDelegate.clusterObject.fusionClusterObjects)||void 0===n?void 0:n.children,!0);l.length>0&&(pe.clusterInteraction.clusterLeftClickCallback(l[0].object.uuid,r),console.log("currently Clicked ClusterId",l[0].object.uuid))}}},ct=function(e){var t,n,r,i,a,o=e;if(null!==pe.cluster.clusterBy&&pe.graphDelegate.graphDelegateMethods){var c=s.a.findDOMNode(T.visualizer),l=null===c||void 0===c?void 0:c.getBoundingClientRect(),u=new S.T((o.clientX-l.left)/l.width*2-1,-(o.clientY-l.top)/l.height*2+1,.5),d=null===(t=pe.graphDelegate.graphDelegateMethods)||void 0===t?void 0:t.camera();if(d){u=u.unproject(d);var h=new S.E(d.position,u.sub(d.position).normalize()).intersectObjects(null===(n=pe.graphDelegate.clusterObject.fusionClusterObjects)||void 0===n?void 0:n.children,!0);h.length>0?pe.clusterInteraction.clusterRightClickCallback(h[0].object.uuid,o):pe.clusterInteraction.clusterRightClickCallback(null,o),console.log("currently Right-Clicked ClusterId",null!==(r=null===(i=h[0])||void 0===i||null===(a=i.object)||void 0===a?void 0:a.uuid)&&void 0!==r?r:null)}}};function lt(e){var t,n,r,i,a;if(null!==pe.cluster.clusterBy&&pe.graphDelegate.graphDelegateMethods){var o=s.a.findDOMNode(T.visualizer),c=null===o||void 0===o?void 0:o.getBoundingClientRect(),l=new S.T((e.clientX-c.left)/c.width*2-1,-(e.clientY-c.top)/c.height*2+1,.5),u=null===(t=pe.graphDelegate.graphDelegateMethods)||void 0===t?void 0:t.camera();if(u){l=l.unproject(u);var d=new S.E(u.position,l.sub(u.position).normalize()).intersectObjects(null===(n=pe.graphDelegate.clusterObject.fusionClusterObjects)||void 0===n?void 0:n.children,!0);d.length>0?pe.clusterInteraction.clusterHoverCallback(d[0].object.uuid,e):pe.clusterInteraction.clusterHoverCallback(null,e),console.log("currentlyHoveredClusterId",null!==(r=null===(i=d[0])||void 0===i||null===(a=i.object)||void 0===a?void 0:a.uuid)&&void 0!==r?r:null)}}else pe.clusterInteraction.currentlyHoveredClusterId=null}var ut=n(108),dt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).canvasRef=a.a.createRef(),e.componentDidMount=function(){e.clearDrawing()},e.componentWillUnmount=function(){e.clearDrawing()},e}return Object(p.a)(n,[{key:"canvasMethods",get:function(){return this.canvasRef.current}},{key:"render",value:function(){var e=this;return Object(ye.jsx)("div",{onMouseUp:function(){JSON.parse(e.canvasMethods.getSaveData()).lines[0].points.length>4&&e.exportDrawing()},children:Object(ye.jsx)(ut.a,{ref:this.canvasRef,style:{position:"absolute",top:this.props.boundingRect.y},canvasHeight:this.props.boundingRect.height,canvasWidth:this.props.boundingRect.width,lazyRadius:0,brushRadius:3,brushColor:"#F6B26B",catenaryColor:"#F6B26B"})})}},{key:"exportDrawing",value:function(){var e;pe.helper.clusterSplittingCurrentStep=3;var t=JSON.parse(this.canvasMethods.getSaveData()),n=null===t||void 0===t||null===(e=t.lines[0])||void 0===e?void 0:e.points;n&&(n.forEach((function(e){e.y+=ae})),n[0].x<n[n.length-1].x?(n.unshift({x:0,y:0}),n.push({x:this.props.boundingRect.width,y:0}),n.push({x:0,y:0})):(n.reverse(),n.unshift({x:0,y:0}),n.push({x:this.props.boundingRect.width,y:0}),n.push({x:0,y:0})),pe.clusterInteraction.lineSegment=n,pe.clusterInteraction.computeSplitCluster())}},{key:"clearDrawing",value:function(){this.canvasMethods.clear()}}]),n}(a.a.Component)),ht=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).startPoint={x:0,y:0},e.endPoint={x:100,y:100},e.mouseDown=!1,e.onMouseDownCallback=function(t){e.startPoint={x:t.clientX,y:t.clientY-50},e.endPoint={x:t.clientX,y:t.clientY-50},e.mouseDown=!0},e.onMouseMoveCallback=function(t){e.mouseDown&&(e.endPoint={x:t.clientX,y:t.clientY-50},e.drawPoints())},e.onMouseUpCallback=function(t){e.mouseDown&&(e.mouseDown=!1,e.exportDrawing())},e.ctx=void 0,e.componentDidMount=function(){e.clearDrawing()},e.componentWillUnmount=function(){e.clearDrawing()},e}return Object(p.a)(n,[{key:"exportDrawing",value:function(){pe.helper.clusterSplittingCurrentStep=3;var e=[{x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y}];e[0].x<e[1].x?(e.unshift({x:0,y:0}),e.push({x:this.props.boundingRect.width,y:0}),e.push({x:0,y:0})):(e.reverse(),e.unshift({x:0,y:0}),e.push({x:this.props.boundingRect.width,y:0}),e.push({x:0,y:0})),pe.clusterInteraction.lineSegment=e,pe.clusterInteraction.computeSplitCluster()}},{key:"drawPoints",value:function(){this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.lineWidth=5,this.ctx.beginPath(),this.ctx.moveTo(this.startPoint.x,this.startPoint.y),this.ctx.lineTo(this.endPoint.x,this.endPoint.y),this.ctx.strokeStyle="#F6B26B",this.ctx.stroke()}},{key:"clearDrawing",value:function(){var e;null===(e=this.ctx)||void 0===e||e.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"render",value:function(){var e=this;return Object(ye.jsx)("canvas",{style:{position:"absolute",zIndex:20},width:this.props.boundingRect.width,height:this.props.boundingRect.height,ref:function(t){t&&(e.ctx=t.getContext("2d"))},onMouseDown:this.onMouseDownCallback,onMouseMove:this.onMouseMoveCallback,onMouseUp:this.onMouseUpCallback})}}]),n}(a.a.Component)),pt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).canvasRef=a.a.createRef(),e.componentDidMount=function(){e.clearDrawing()},e.componentWillUnmount=function(){e.clearDrawing()},e}return Object(p.a)(n,[{key:"canvasMethods",get:function(){return this.canvasRef.current}},{key:"render",value:function(){var e=this;return Object(ye.jsx)("div",{onMouseUp:function(){JSON.parse(e.canvasMethods.getSaveData()).lines[0].points.length>4&&e.exportDrawing()},children:Object(ye.jsx)(ut.a,{ref:this.canvasRef,style:{position:"absolute",top:this.props.boundingRect.y},canvasHeight:this.props.boundingRect.height,canvasWidth:this.props.boundingRect.width,lazyRadius:0,brushRadius:3,brushColor:"#F6B26B",catenaryColor:"#F6B26B"})})}},{key:"exportDrawing",value:function(){var e;pe.helper.clusterSplittingCurrentStep=3;var t=JSON.parse(this.canvasMethods.getSaveData()),n=null===t||void 0===t||null===(e=t.lines[0])||void 0===e?void 0:e.points;n&&(n.forEach((function(e){e.y+=ae})),n.push(n[0]),pe.clusterInteraction.lineSegment=n,pe.clusterInteraction.computeSplitCluster())}},{key:"clearDrawing",value:function(){this.canvasMethods.clear()}}]),n}(a.a.Component)),jt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).centerPoint={x:0,y:0},e.radius=0,e.mouseDown=!1,e.onMouseDownCallback=function(t){e.centerPoint={x:t.clientX,y:t.clientY-ae},e.mouseDown=!0},e.onMouseMoveCallback=function(t){e.mouseDown&&(e.radius=Math.sqrt(Math.pow(t.clientX-e.centerPoint.x,2)+Math.pow(t.clientY-ae-e.centerPoint.y,2)),e.drawPoints())},e.onMouseUpCallback=function(t){e.mouseDown&&(e.mouseDown=!1,e.exportDrawing())},e.ctx=void 0,e.componentDidMount=function(){e.clearDrawing()},e.componentWillUnmount=function(){e.clearDrawing()},e}return Object(p.a)(n,[{key:"exportDrawing",value:function(){pe.helper.clusterSplittingCurrentStep=3,pe.clusterInteraction.computeSplitClusterInCircle(this.centerPoint.x,this.centerPoint.y,this.radius)}},{key:"drawPoints",value:function(){this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.lineWidth=5,this.ctx.beginPath(),this.ctx.arc(this.centerPoint.x,this.centerPoint.y,this.radius,0,2*Math.PI),this.ctx.strokeStyle="#F6B26B",this.ctx.stroke()}},{key:"clearDrawing",value:function(){var e;null===(e=this.ctx)||void 0===e||e.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"render",value:function(){var e=this;return Object(ye.jsx)("canvas",{style:{position:"absolute",zIndex:20},width:this.props.boundingRect.width,height:this.props.boundingRect.height,ref:function(t){t&&(e.ctx=t.getContext("2d"))},onMouseDown:this.onMouseDownCallback,onMouseMove:this.onMouseMoveCallback,onMouseUp:this.onMouseUpCallback})}}]),n}(a.a.Component)),gt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"canvas",get:function(){var e=s.a.findDOMNode(T.visualizer);return null===e||void 0===e?void 0:e.getBoundingClientRect()}},{key:"render",value:function(){switch(pe.clusterInteraction.drawMode){case ie.StraightLine:return Object(ye.jsx)(ht,{boundingRect:this.canvas});case ie.FreeLine:return Object(ye.jsx)(dt,{boundingRect:this.canvas});case ie.FreeCircle:return Object(ye.jsx)(pt,{boundingRect:this.canvas});case ie.CenterCircle:return Object(ye.jsx)(jt,{boundingRect:this.canvas})}}}]),n}(a.a.Component)),bt=n(245),ft=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={visualizationGraph:pe.graphDelegate.visualizationGraph(),nodePointerInteraction:!0},e.clicking=!1,e.graphRef=a.a.createRef(),e.graphDelegate=pe.graphDelegate,e.hoverNodeCallback=function(e,t){if(!pe.search.isPreviewing)if(null===e)pe.interaction.currentlyHoveredNodeId=null;else if(e!==t){var n=e.id;pe.interaction.currentlyHoveredNodeId=n}},e.nodeLeftClickCallback=function(t,n){if(e.state.nodePointerInteraction){var i,a=t.id;if(pe.preferences.visualizationMode===r.NodeSelection)-1!==(i=pe.interaction.selectedNodes.indexOf(a))?pe.interaction.selectedNodes.splice(i,1):pe.interaction.selectedNodes.push(a);else pe.interaction.selectedNodes=[t.id]}},e.nodeRightClickCallback=function(t,n){e.state.nodePointerInteraction&&(pe.interaction.chosenNode=t.id,pe.interaction.selectedNodes.includes(pe.interaction.chosenNode)||pe.interaction.selectedNodes.push(pe.interaction.chosenNode),pe.preferences.rightClickPositionX=n.x,pe.preferences.rightClickPositionY=n.y,pe.preferences.rightClickOn="Node",pe.preferences.rightClickPanelOpen=!0,pe.preferences.closeAllPanel("rightClickPanel"),setTimeout((function(){e.graphMethods.resumeAnimation()}),200))},e.backgroundClickCallback=function(){pe.interaction.flush(),pe.interaction.selectedNodes=[],pe.preferences.rightClickPanelOpen=!1,pe.preferences.closeAllPanel("rightClickPanel")},e.backgroundRightClickCallback=function(t){e.state.nodePointerInteraction&&!pe.signal.isRightClickingCluster&&(e.graphMethods.pauseAnimation(),pe.preferences.rightClickPositionX=t.x,pe.preferences.rightClickPositionY=t.y,pe.preferences.rightClickOn="Background",pe.preferences.rightClickPanelOpen=!0,pe.preferences.closeAllPanel("rightClickPanel"),setTimeout((function(){e.graphMethods.resumeAnimation()}),200))},e.renderGraph=function(){return Object(ye.jsxs)("div",{children:[pe.preferences.visualizationMode===r.NodeSelection&&pe.interaction.boxSelectionOpen&&Object(ye.jsx)(ot,{}),pe.preferences.visualizationMode===r.ClusterSplitting&&pe.clusterInteraction.drawPanelActivate&&Object(ye.jsx)(gt,{}),Object(ye.jsx)(it.a,{ref:e.graphRef,graphData:e.state.visualizationGraph,nodeLabel:"id",nodeRelSize:pe.css.node.size,nodeColor:e.computeNodeColor,nodeVisibility:e.graphDelegate.nodeVisibility,nodeResolution:pe.css.node.resolution,nodeThreeObjectExtend:!0,nodeThreeObject:function(e){var t=new at.a("".concat(e.id));return t.color=pe.css.label.color,t.textHeight=pe.css.label.size,t.backgroundColor="",t.visible=pe.css.label.show,t.translateX(pe.css.node.size+2),t},onNodeHover:e.hoverNodeCallback,onNodeClick:e.nodeLeftClickCallback,onNodeRightClick:e.nodeRightClickCallback,onNodeDragEnd:function(e){e.fx=e.x,e.fy=e.y,e.fz=e.z},linkVisibility:e.graphDelegate.linkVisibility,linkWidth:e.computeEdgeWidth,linkColor:e.computeEdgeColor,onBackgroundRightClick:e.backgroundRightClickCallback,onBackgroundClick:e.backgroundClickCallback,enablePointerInteraction:e.state.nodePointerInteraction,onEngineTick:function(){pe.graphDelegate.clusterObject.canAlterNodePosition=!0,e.graphDelegate.clusterObject.clusterDelegation()},cooldownTicks:100,onEngineStop:function(){pe.css.cluster.autoPlot&&"sphere"===pe.css.cluster.shape&&pe.graphDelegate.clusterObject.canAlterNodePosition&&(console.log("starts to plot points on the surface of the sphere"),e.graphDelegate.clusterObject.alterNodePosition(),pe.graphDelegate.clusterObject.canAlterNodePosition=!1)}})]})},e.debouncedMouseMoveCallback=void 0,e}return Object(p.a)(n,[{key:"graphMethods",get:function(){return this.graphRef.current}},{key:"computeNodeColor",value:function(e){var t=e;return t.hovered?pe.css.node.highlightColor:t.chosen?pe.css.node.chosenColor:t.multiSelected?pe.css.node.multiSelectedColor:pe.css.node.defaultColor}},{key:"computeEdgeColor",value:function(e){var t=e;return t.hovered?pe.css.edge.highlightColor:t.chosen?pe.css.edge.selectedColor:pe.css.edge.defaultColor}},{key:"computeEdgeWidth",value:function(e){var t=e;return t.hovered||t.chosen?pe.css.edge.highlightWidth:pe.css.edge.defaultWidth}},{key:"render",value:function(){return Object(ye.jsx)("div",{children:this.renderGraph()})}},{key:"updateVisualizationGraph",value:function(){this.setState({visualizationGraph:pe.graphDelegate.visualizationGraph()})}},{key:"nodeInteractionListener",value:function(e){this.setState({nodePointerInteraction:e})}},{key:"clusterInteractionListener",value:function(e){var t=s.a.findDOMNode(this);e?(this.debouncedMouseMoveCallback=Object(bt.debounce)(lt,25),t.addEventListener("mousemove",this.debouncedMouseMoveCallback),t.addEventListener("click",st),t.addEventListener("contextmenu",ct)):(t.removeEventListener("mousemove",this.debouncedMouseMoveCallback),t.removeEventListener("click",st),t.removeEventListener("contextmenu",ct))}},{key:"componentDidMount",value:function(){this.graphDelegate.mountDelegateMethods(this.graphMethods),this.clusterInteractionListener(!0),T.visualizer=this,this.graphDelegate.updateClusterForce(),this.graphMethods.controls().addEventListener("change",(function(){pe.signal.isMovingCamera=!0}))}}]),n}(a.a.Component));Object(y.q)((function(){return pe.preferences.visualizationMode}),(function(e){var t,n,i,a,o,s,c,l;switch(pe.preferences.closeAllPanel(),pe.preferences.rightClickPanelOpen=!1,pe.interaction.flush(),pe.clusterInteraction.flush(),e){case r.Normal:null===(t=T.visualizer)||void 0===t||t.nodeInteractionListener(!0),null===(n=T.visualizer)||void 0===n||n.clusterInteractionListener(!0);break;case r.NodeSelection:null===(i=T.visualizer)||void 0===i||i.nodeInteractionListener(!0),null===(a=T.visualizer)||void 0===a||a.clusterInteractionListener(!1),Oe(Object(ye.jsxs)("p",{children:["Select one or more ",Object(ye.jsx)("b",{children:"Nodes"})," and ",Object(ye.jsx)("b",{children:"Right-click"})," ","on one of them to open ",Object(ye.jsx)("b",{children:"Context Menu"})]}),v.a.BOTTOM,1e4);break;case r.ClusterSelection:null===(o=T.visualizer)||void 0===o||o.nodeInteractionListener(!1),null===(s=T.visualizer)||void 0===s||s.clusterInteractionListener(!0),Oe(Object(ye.jsxs)("p",{children:["Select one or more ",Object(ye.jsx)("b",{children:"Clusters"})," and"," ",Object(ye.jsx)("b",{children:"Right-click"})," on one of them to open"," ",Object(ye.jsx)("b",{children:"Context Menu"})]}),v.a.BOTTOM,1e4);break;case r.ClusterSplitting:null===(c=T.visualizer)||void 0===c||c.nodeInteractionListener(!1),null===(l=T.visualizer)||void 0===l||l.clusterInteractionListener(!0),pe.helper.clusterSplittingPanelStackOpen=!0}}));var Ot=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).cellRenderer_property=function(e){return Object(ye.jsx)(Re.a,{children:pe.graph.metadata.nodeProperties[e]})},e.cellRenderer_value=function(t){var n=pe.graph.rawGraph.getNodeAttribute(e.props.onNode,pe.graph.metadata.nodeProperties[t]);return Object(ye.jsx)(He.a,{value:n,onChange:function(n){return pe.graph.rawGraph.setNodeAttribute(e.props.onNode,pe.graph.metadata.nodeProperties[t],n)},onConfirm:function(n){return pe.graph.rawGraph.setNodeAttribute(e.props.onNode,pe.graph.metadata.nodeProperties[t],n)},tooltip:n})},e.formatLongFloat=function(e){var t=Number(e);return Number.isNaN(t)||t>1||t<0?e:Number.parseFloat(t.toString()).toPrecision(3)},e.componentDidMount=function(){T.nodeDetail=a.a.createRef()},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsx)("div",{className:u()("right-overlay-card","transparent-frame"),children:Object(ye.jsx)(f.e,{className:"node-details-table",children:Object(ye.jsxs)(Me.a,{numRows:pe.graph.metadata.nodeProperties.length,enableRowHeader:!1,children:[Object(ye.jsx)(Pe.a,{name:"Properties",cellRenderer:this.cellRenderer_property}),Object(ye.jsx)(Pe.a,{name:"Value",cellRenderer:this.cellRenderer_value})]})})})}}]),n}(a.a.Component)),vt=n(22),mt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).componentDidMount=function(){T.multiNodeDetail=Object(vt.a)(e)},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsx)("div",{className:u()("left-bottom-overlay-card","transparent-frame"),children:Object(ye.jsxs)(f.e,{children:[Object(ye.jsx)(Me.a,{numRows:pe.interaction.selectedNodes.length>10?10:pe.interaction.selectedNodes.length,children:pe.graph.metadata.nodeProperties.map((function(e){return Object(ye.jsx)(Pe.a,{name:e,cellRenderer:function(t){return Object(ye.jsx)(Re.a,{children:pe.graph.rawGraph.getNodeAttribute(pe.interaction.selectedNodes[t],e)})}},e)}))}),Object(ye.jsx)(f.T,{style:{marginTop:"3px"},children:"if select more than 10 nodes, only the top 10 nodes will be displayed"})]})})}}]),n}(a.a.Component)),xt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={targetNode:null,deleteAlertOpen:!1},e.deleteEdgeRenderer=function(t){var n=e.neighbors[t];return Object(ye.jsx)(Re.a,{children:Object(ye.jsx)(f.b,{onClick:function(){e.setState({targetNode:n,deleteAlertOpen:!0})},icon:"trash",intent:"danger",text:"Delete",minimal:!0})})},e.deleteEdgeAlert=function(){return null===e.state.targetNode?null:(void 0===(t=pe.graph.rawGraph.edge(e.state.targetNode,e.props.onNode))&&(t=pe.graph.rawGraph.edge(e.props.onNode,e.state.targetNode)),Object(ye.jsx)(f.a,{cancelButtonText:"Cancel",confirmButtonText:"Confirm Delete",icon:"trash",intent:x.a.DANGER,isOpen:e.state.deleteAlertOpen,onCancel:function(){return e.setState({deleteAlertOpen:!1})},onConfirm:function(){pe.graph.mutating.dropEdge(t),e.setState({deleteAlertOpen:!1}),pe.preferences.deleteEdgePanelOpen=!1},children:Object(ye.jsxs)("p",{children:["Are you sure you want to delete the edge with Key"," ",Object(ye.jsx)(f.g,{children:t})," between Node ID"," ",Object(ye.jsx)(f.g,{children:e.state.targetNode})," and Node ID"," ",Object(ye.jsx)(f.g,{children:e.props.onNode}),". This action cannot be reversed."]})}));var t},e.neighborsRenderer=function(t){return Object(ye.jsx)(Re.a,{interactive:!0,children:Object(ye.jsx)("div",{onMouseEnter:function(){pe.graphDelegate.cameraFocusOn(e.props.onNode,400),pe.interaction.selectedEdge=pe.interaction.getEdgeKey(e.props.onNode,e.neighbors[t])},children:e.neighbors[t]})})},e}return Object(p.a)(n,[{key:"neighbors",get:function(){return pe.graph.rawGraph.neighbors(this.props.onNode)}},{key:"render",value:function(){return Object(ye.jsx)("div",{className:u()("right-bottom-overlay-card","transparent-frame"),children:Object(ye.jsxs)(f.e,{className:u()("node-details-table"),children:[Object(ye.jsx)(f.b,{icon:"cross",onClick:function(){pe.preferences.deleteEdgePanelOpen=!1,pe.interaction.selectedEdge=null,pe.graphDelegate.graphDelegateMethods.refresh()},children:"Close"}),Object(ye.jsxs)(f.u,{children:[" Node ID: ",this.props.onNode]}),Object(ye.jsxs)(Me.a,{numRows:this.neighbors.length,defaultRowHeight:30,renderMode:qe.a.NONE,children:[Object(ye.jsx)(Pe.a,{name:"",cellRenderer:this.deleteEdgeRenderer,style:this.style}),Object(ye.jsx)(Pe.a,{name:"Node ID",intent:x.a.PRIMARY,cellRenderer:this.neighborsRenderer})]}),this.deleteEdgeAlert()]})})}}]),n}(a.a.Component)),Ct=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)(f.e,{elevation:Ge.a.THREE,children:[Object(ye.jsx)(f.b,{className:u()(d.a.LARGE,d.a.FILL,"text-align-left"),rightIcon:this.props.isOpen?"chevron-up":"chevron-down",onClick:this.props.onToggle,children:this.props.name}),Object(ye.jsx)(f.h,{isOpen:this.props.isOpen,children:this.props.children})]})}}]),n}(a.a.Component)),yt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={shapeOptionOpen:!1,forceOptionOpen:!1},e.forceCollapse=function(){return Object(ye.jsxs)(Ct,{name:"Force",isOpen:e.state.forceOptionOpen,onToggle:function(){return e.setState({forceOptionOpen:!e.state.forceOptionOpen})},children:[Object(ye.jsxs)(f.e,{className:"sub-option",children:["Cluster Force Distance:",Object(ye.jsx)("br",{}),Object(ye.jsx)(f.O,{min:0,max:100,stepSize:10,labelStepSize:20,onChange:function(e){pe.css.cluster.clusterForce=e,pe.graphDelegate.updateClusterForce()},value:pe.css.cluster.clusterForce})]}),Object(ye.jsxs)(f.e,{className:"sub-option",children:["Normal Force Distance:",Object(ye.jsx)("br",{}),Object(ye.jsx)(f.O,{min:0,max:100,stepSize:10,labelStepSize:20,onChange:function(e){pe.css.cluster.normalForce=e,pe.graphDelegate.updateClusterForce()},value:pe.css.cluster.normalForce})]})]})},e.shapeCollapse=function(){return Object(ye.jsxs)(Ct,{name:"Shape",isOpen:e.state.shapeOptionOpen,onToggle:function(){return e.setState({shapeOptionOpen:!e.state.shapeOptionOpen})},children:[Object(ye.jsxs)(f.e,{className:"sub-option",children:[Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Cluster Shape:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(Te,{items:["convexHull","sphere"],text:pe.css.cluster.shape,onSelect:function(e){pe.css.cluster.shape=e,pe.cluster.setCluster(pe.cluster.clusterBy,!0)},small:!0})})]}),Object(ye.jsxs)("p",{style:{display:"flex"},children:["Auto plot nodes onto the surface of clusters",Object(ye.jsx)(f.f,{checked:pe.css.cluster.autoPlot,large:!0,onChange:function(){pe.css.cluster.autoPlot=!pe.css.cluster.autoPlot}})]})]}),"sphere"===pe.css.cluster.shape&&Object(ye.jsxs)(f.e,{className:"sub-option",children:["Cluster Resolution:",Object(ye.jsx)("br",{}),Object(ye.jsx)(f.O,{min:2,max:20,stepSize:1,labelStepSize:5,onChange:function(e){pe.css.cluster.resolution=e,pe.graphDelegate.graphDelegateMethods.refresh()},value:pe.css.cluster.resolution})]})]})},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)("div",{children:[Object(ye.jsx)("div",{children:Object(ye.jsx)("p",{children:"Modifying All Clusters"})}),this.forceCollapse(),this.shapeCollapse()]})}}]),n}(a.a.Component)),Nt=n(250),wt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(ye.jsxs)(f.J,{interactionKind:f.K.CLICK,popoverClassName:"bp3-popover-content-sizing",placement:v.a.RIGHT,children:[Object(ye.jsx)(f.b,{text:"  ",style:{backgroundColor:this.props.color},small:!0}),Object(ye.jsx)("div",{children:Object(ye.jsx)(Nt.a,{color:this.props.color,onChange:function(t){e.props.onChange(t)}})})]})}}]),n}(a.a.Component)),kt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={sizeOptionOpen:!1,thicknessOptionOpen:!1,colorOptionOpen:!1,forceOptionOpen:!1},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(ye.jsxs)("div",{children:[Object(ye.jsx)("p",{children:"Modifying All Edges"}),Object(ye.jsx)(Ct,{name:"Color",isOpen:this.state.colorOptionOpen,onToggle:function(){return e.setState({colorOptionOpen:!e.state.colorOptionOpen})},children:Object(ye.jsxs)(f.e,{className:"sub-option",children:[Object(ye.jsx)("section",{children:Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Default Color:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(wt,{color:pe.css.edge.defaultColor,onChange:function(e){pe.css.edge.defaultColor=e.hex,pe.graphDelegate.graphDelegateMethods.refresh()}})})]})}),Object(ye.jsx)("section",{children:Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Selected Color:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(wt,{color:pe.css.edge.selectedColor,onChange:function(e){pe.css.edge.selectedColor=e.hex,pe.graphDelegate.graphDelegateMethods.refresh()}})})]})}),Object(ye.jsx)("section",{children:Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Highlight Color:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(wt,{color:pe.css.edge.highlightColor,onChange:function(e){pe.css.edge.highlightColor=e.hex,pe.graphDelegate.graphDelegateMethods.refresh()}})})]})})]})})]})}}]),n}(a.a.Component)),St=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)("div",{children:[Object(ye.jsx)(f.Q,{label:"Show Node Label",checked:pe.css.label.show,onChange:function(){pe.css.label.show=!pe.css.label.show,pe.graphDelegate.graphDelegateMethods.refresh()}}),Object(ye.jsx)("br",{}),Object(ye.jsxs)(f.e,{className:"sub-option",children:["Label Size:",Object(ye.jsx)("br",{}),Object(ye.jsx)(f.O,{min:1,max:10,stepSize:1,labelStepSize:2,onChange:function(e){pe.css.label.size=e,pe.graphDelegate.graphDelegateMethods.refresh()},value:pe.css.label.size}),Object(ye.jsx)("br",{}),Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Label Color:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(wt,{color:pe.css.label.color,onChange:function(e){pe.css.label.color=e.hex,pe.graphDelegate.graphDelegateMethods.refresh()}})})]})]})]})}}]),n}(a.a.Component)),Dt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={timeOutRef:null,colorOptionOpen:!1,sizeOptionOpen:!1,shapeOptionOpen:!1},e.colorCollapse=function(){return Object(ye.jsx)(Ct,{name:"Color",isOpen:e.state.colorOptionOpen,onToggle:function(){return e.setState({colorOptionOpen:!e.state.colorOptionOpen})},children:Object(ye.jsxs)(f.e,{className:"sub-option",children:[Object(ye.jsx)("section",{children:Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Default Color:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(wt,{color:pe.css.node.defaultColor,onChange:function(e){pe.css.node.defaultColor=e.hex,pe.graphDelegate.graphDelegateMethods.refresh()}})})]})}),Object(ye.jsx)("section",{children:Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Selected Color:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(wt,{color:pe.css.node.multiSelectedColor,onChange:function(e){pe.css.node.multiSelectedColor=e.hex,pe.graphDelegate.graphDelegateMethods.refresh()}})})]})}),Object(ye.jsx)("section",{children:Object(ye.jsxs)("p",{style:{textAlign:"left"},children:["Highlight Color:",Object(ye.jsx)("span",{style:{float:"right"},children:Object(ye.jsx)(wt,{color:pe.css.node.highlightColor,onChange:function(e){pe.css.node.highlightColor=e.hex,pe.graphDelegate.graphDelegateMethods.refresh()}})})]})})]})})},e.sizeCollapse=function(){return Object(ye.jsx)(Ct,{name:"Size",isOpen:e.state.sizeOptionOpen,onToggle:function(){return e.setState({sizeOptionOpen:!e.state.sizeOptionOpen})},children:Object(ye.jsxs)(f.e,{className:"sub-option",children:["Node Size:",Object(ye.jsx)("br",{}),Object(ye.jsx)(f.O,{min:1,max:20,stepSize:1,labelStepSize:5,onChange:function(e){pe.css.node.size=e,pe.graphDelegate.graphDelegateMethods.refresh()},value:pe.css.node.size})]})})},e.shapeCollapse=function(){return Object(ye.jsx)(Ct,{name:"Shape",isOpen:e.state.shapeOptionOpen,onToggle:function(){return e.setState({shapeOptionOpen:!e.state.shapeOptionOpen})},children:Object(ye.jsxs)(f.e,{className:"sub-option",children:["Node Resolution:",Object(ye.jsx)("br",{}),Object(ye.jsx)(f.O,{min:2,max:20,stepSize:1,labelStepSize:5,onChange:function(e){pe.css.node.resolution=e},value:pe.css.node.resolution})]})})},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)("div",{children:[Object(ye.jsx)("div",{children:Object(ye.jsx)("p",{children:"Modifying All Nodes"})}),this.colorCollapse(),this.sizeCollapse(),this.shapeCollapse()]})}}]),n}(a.a.Component)),Et=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)("div",{children:[Object(ye.jsx)(f.r,{children:"Graph Options"}),Object(ye.jsxs)(f.S,{animate:!0,children:[Object(ye.jsx)(f.R,{id:"nodes",title:"Nodes",panel:Object(ye.jsx)(Dt,{})}),Object(ye.jsx)(f.R,{id:"edges",title:"Edges",panel:Object(ye.jsx)(kt,{})}),Object(ye.jsx)(f.R,{id:"labels",title:"Labels",panel:Object(ye.jsx)(St,{})}),Object(ye.jsx)(f.R,{id:"clusters",title:"Clusters",panel:Object(ye.jsx)(yt,{})}),Object(ye.jsx)(f.S.Expander,{})]})]})}}]),n}(a.a.Component)),At=n(253),It=n(228),Mt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={selectedAttribute:pe.cluster.clusterBy,value:""},e}return Object(p.a)(n,[{key:"renderInput",value:function(){var e=this;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("div",{style:{marginTop:10},children:Object(ye.jsx)(f.z,{leftElement:Object(ye.jsx)(f.y,{icon:"tag"}),onChange:ge((function(t){e.setState({value:t})})),placeholder:"Enter Clustering Value",value:this.state.value,intent:""===this.state.value?x.a.DANGER:x.a.SUCCESS})}),Object(ye.jsx)("div",{className:"horizontal-gap"}),Object(ye.jsx)(f.b,{onClick:function(){e.props.callback(e.state.selectedAttribute,fe(e.state.value))},intent:x.a.SUCCESS,disabled:null===this.state.selectedAttribute||""===this.state.value,children:"Confirm"})]})}},{key:"render",value:function(){var e=this;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(f.e,{elevation:Ge.a.ONE,style:{background:It.a.DARK_GRAY3},children:[Object(ye.jsx)(f.u,{children:"(Optional) You can add node attributes here"}),Object(ye.jsx)(ke,{onCreate:function(t){e.setState({selectedAttribute:t})}})]}),Object(ye.jsx)("div",{className:"horizontal-gap"}),Object(ye.jsxs)(f.e,{elevation:Ge.a.THREE,children:[Object(ye.jsx)(f.u,{children:"Choose the Attribute and New Value to form the new cluster"}),Object(ye.jsx)(f.d,{intent:null===this.state.selectedAttribute?x.a.DANGER:x.a.SUCCESS,children:Object(ye.jsxs)("div",{style:{display:"flex"},children:[Object(ye.jsx)("div",{style:{marginRight:20,marginTop:5,marginBottom:10},children:"Choose the Attribute"}),Object(ye.jsx)(Ne,{showNone:!1,onSelect:function(t){e.setState({selectedAttribute:t})},syncWith:this.state.selectedAttribute})]})}),this.renderInput()]})]})}}]),n}(a.a.Component)),Pt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={selectedAttribute:pe.cluster.clusterBy,value:"",anotherValue:""},e}return Object(p.a)(n,[{key:"renderInput",value:function(){var e=this;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("div",{className:"horizontal-gap"}),Object(ye.jsx)(f.z,{leftElement:Object(ye.jsx)(f.y,{icon:"tag"}),onChange:ge((function(t){e.setState({value:t})})),placeholder:"Enter Clustering Value for nodes in white",value:this.state.value,intent:""===this.state.value?x.a.DANGER:x.a.SUCCESS}),Object(ye.jsx)("div",{className:"horizontal-gap"}),Object(ye.jsx)(f.z,{leftElement:Object(ye.jsx)(f.y,{icon:"tag"}),onChange:ge((function(t){e.setState({anotherValue:t})})),placeholder:"Enter Clustering Value for nodes in red",value:this.state.anotherValue,intent:""===this.state.anotherValue?x.a.DANGER:x.a.SUCCESS}),Object(ye.jsx)("div",{className:"horizontal-gap"}),Object(ye.jsx)(f.b,{onClick:function(){e.props.callback(e.state.selectedAttribute,fe(e.state.value),fe(e.state.anotherValue))},intent:x.a.SUCCESS,disabled:null===this.state.selectedAttribute||""===this.state.value||""===this.state.anotherValue,children:"Confirm"})]})}}]),n}(Mt)),Rt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selected:"curve"},e.titles=["Select Cluster","Draw Line or Circle","Confirm?"],e.renderFirstPanel=function(){return Object(ye.jsxs)("p",{children:["Select a ",Object(ye.jsx)("b",{children:"Cluster"})," to split by clicking it"]})},e.renderSecondPanel=function(){return Object(ye.jsxs)("p",{children:[Object(ye.jsxs)(f.N,{label:"Use the mouse to",onChange:ge((function(t){switch(e.setState({selected:t}),t){case"curve":pe.clusterInteraction.drawMode=ie.FreeLine;break;case"straight":pe.clusterInteraction.drawMode=ie.StraightLine;break;case"circle":pe.clusterInteraction.drawMode=ie.FreeCircle;break;case"centerCircle":pe.clusterInteraction.drawMode=ie.CenterCircle}})),selectedValue:e.state.selected,children:[Object(ye.jsx)(f.M,{label:"Draw a Freehand Line through the cluster",value:"curve"}),Object(ye.jsx)(f.M,{label:"Draw a Straight Line through the cluster",value:"straight"}),Object(ye.jsx)(f.M,{label:"Draw a Free Circle within the cluster",value:"circle"}),Object(ye.jsx)(f.M,{label:"Draw a Centered Circle within the cluster",value:"centerCircle"})]}),"hold and draw a line to split this Cluster"]})},e.renderThirdPanel=function(){return Object(ye.jsxs)("div",{style:{width:"500px"},children:[Object(ye.jsx)(f.s,{children:"Confirm Splitting of Cluster? "}),Object(ye.jsx)("p",{children:"The two sub-clusters has been specified using the different node colors."}),Object(ye.jsx)(Pt,{callback:function(e,t,n){pe.helper.clusterSplittingPanelStackOpen=!1,pe.clusterInteraction.splitCluster(e,t,n),pe.preferences.visualizationMode=r.Normal,pe.helper.clusterSplittingCurrentStep=1}})]})},e.renderWhichPanel=function(){switch(e.props.currentStep){case 1:return e.renderFirstPanel();case 2:return e.renderSecondPanel();case 3:return e.renderThirdPanel()}},e.renderWhichBack=function(){switch(e.props.currentStep){case 1:return Object(ye.jsx)("span",{});case 2:return Object(ye.jsx)(f.b,{className:d.a.PANEL_STACK_HEADER_BACK,icon:"chevron-left",minimal:!0,onClick:function(){pe.helper.clusterSplittingCurrentStep=1},small:!0,text:e.titles[0],title:e.titles[0]});case 3:return Object(ye.jsx)(f.b,{className:d.a.PANEL_STACK_HEADER_BACK,icon:"chevron-left",minimal:!0,onClick:function(){pe.helper.clusterSplittingCurrentStep=2},small:!0,text:e.titles[1],title:e.titles[1]})}},e.renderPanelStack=function(){return Object(ye.jsx)("div",{className:d.a.PANEL_STACK_VIEW,style:{position:"unset"},children:Object(ye.jsxs)("div",{style:{minWidth:"300px",minHeight:"100px"},children:[Object(ye.jsxs)("div",{className:d.a.PANEL_STACK_HEADER,children:[e.renderWhichBack(),Object(ye.jsx)(f.U,{className:d.a.HEADING,ellipsize:!0,children:e.titles[e.props.currentStep-1]}),Object(ye.jsx)("span",{})]}),Object(ye.jsxs)(f.e,{children:[" ",e.renderWhichPanel()]})]})})},e.componentDidMount=function(){T.clusterSplittingPanelStack=Object(vt.a)(e)},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsx)(De.a,{placement:"right",usePortal:!1,content:this.renderPanelStack(),isOpen:pe.preferences.visualizationMode===r.ClusterSplitting&&pe.helper.clusterSplittingPanelStackOpen,onOpened:function(){pe.helper.clusterSplittingCurrentStep=1},children:Object(ye.jsx)(At.a,{usePortal:!1,content:Tt(r.ClusterSplitting),placement:"bottom",children:Object(ye.jsx)(f.b,{className:u()([d.a.BUTTON,d.a.MINIMAL]),intent:x.a.DANGER,text:r.ClusterSplitting,active:pe.preferences.visualizationMode===r.ClusterSplitting,onClick:function(){pe.preferences.visualizationMode=r.ClusterSplitting,pe.helper.clusterSplittingPanelStackOpen=!0}})})})}}]),n}(a.a.Component)),Ft=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).renderPanelStack=function(){return Object(ye.jsx)("div",{className:d.a.PANEL_STACK_VIEW,style:{position:"unset"},children:Object(ye.jsxs)("div",{style:{minWidth:"300px",minHeight:"100px"},children:[Object(ye.jsxs)("div",{className:d.a.PANEL_STACK_HEADER,children:[Object(ye.jsx)("span",{}),Object(ye.jsx)(f.U,{className:d.a.HEADING,ellipsize:!0,children:"Node Multi-Selection Mode"}),Object(ye.jsx)("span",{})]}),Object(ye.jsx)(f.e,{children:Object(ye.jsx)(f.b,{icon:"select",intent:pe.interaction.boxSelectionOpen?x.a.PRIMARY:x.a.NONE,active:pe.interaction.boxSelectionOpen,onClick:function(){return pe.interaction.boxSelectionOpen=!pe.interaction.boxSelectionOpen},children:"Use Box-Selection"})})]})})},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsx)(De.a,{placement:"right",usePortal:!1,content:this.renderPanelStack(),isOpen:pe.preferences.visualizationMode===r.NodeSelection&&pe.helper.NodeSelectionPanelOpen,children:Object(ye.jsx)(At.a,{usePortal:!1,content:Tt(r.NodeSelection),children:Object(ye.jsx)(f.b,{className:u()([d.a.BUTTON,d.a.MINIMAL]),intent:x.a.WARNING,text:r.NodeSelection,active:pe.preferences.visualizationMode===r.NodeSelection,onClick:function(){pe.preferences.visualizationMode=r.NodeSelection,pe.helper.NodeSelectionPanelOpen=!0}})})})}}]),n}(a.a.Component));function Tt(e){switch(e){case r.Normal:return"Normal Interaction Mode where mouse interactions on nodes and clusters are both activated";case r.NodeSelection:return"Select one or more nodes and interact with them, such as adding/deleting, merge them to a cluster, free them from a cluster";case r.ClusterSelection:return"Select one or more clusters and interact with them, such as merging and releasing them";case r.ClusterSplitting:return"Select one cluster and draw a line to split into two halfs"}}var zt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"getIntent",value:function(e){switch(e){case r.Normal:return x.a.PRIMARY;case r.NodeSelection:return x.a.WARNING;case r.ClusterSelection:return x.a.SUCCESS;case r.ClusterSplitting:return x.a.DANGER}}},{key:"renderMode",value:function(e){return Object(ye.jsx)(At.a,{content:Tt(e),children:Object(ye.jsx)(f.b,{className:u()([d.a.BUTTON,d.a.MINIMAL]),text:e,intent:this.getIntent(e),active:pe.preferences.visualizationMode===e,onClick:function(){pe.preferences.visualizationMode=e}})})}},{key:"render",value:function(){return Object(ye.jsxs)("div",{className:"selection-action-panel",children:[this.renderMode(r.Normal),Object(ye.jsx)(Ft,{}),this.renderMode(r.ClusterSelection),Object(ye.jsx)(Rt,{currentStep:pe.helper.clusterSplittingCurrentStep})]})}}]),n}(a.a.Component));function _t(e){return Object(ye.jsx)(At.a,{content:e.tooltipText,children:Object(ye.jsx)(f.C,Object(m.a)({},e))})}var Gt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={formNewClusterOpen:!1},e.componentWillUnmount=function(){e.setState({formNewClusterOpen:!1})},e}return Object(p.a)(n,[{key:"formNewCluster",value:function(e,t){pe.interaction.selectedNodes.forEach((function(n){pe.graph.rawGraph.setNodeAttribute(n,e,t)})),pe.preferences.rightClickPanelOpen=!1,pe.cluster.setCluster(e),pe.interaction.flush()}},{key:"releaseFromCluster",value:function(){var e=pe.cluster.clusterBy;pe.interaction.selectedNodes.forEach((function(t){pe.graph.rawGraph.setNodeAttribute(t,e,"")})),pe.preferences.rightClickPanelOpen=!1,pe.cluster.setCluster(pe.cluster.clusterBy,!0),pe.interaction.flush()}},{key:"render",value:function(){var e=this;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(f.B,{title:"Node ID: "+pe.interaction.chosenNode}),Object(ye.jsx)(_t,{tooltipText:"Delete this selected node from the graph",icon:"graph-remove",text:"Delete Node",multiline:!0,onClick:function(){pe.graph.mutating.dropNode(pe.interaction.chosenNode),pe.interaction.flush(),pe.preferences.rightClickPanelOpen=!1}}),Object(ye.jsx)(_t,{tooltipText:"Delete multiple selected nodes from the graph",icon:"graph-remove",text:"Delete Selected Nodes",multiline:!0,onClick:function(){pe.interaction.selectedNodes.forEach((function(e){pe.graph.mutating.dropNode(e)})),pe.interaction.flush(),pe.preferences.rightClickPanelOpen=!1},disabled:0===pe.interaction.selectedNodes.length||1===pe.interaction.selectedNodes.length}),Object(ye.jsx)(f.B,{title:"Edit Edges"}),Object(ye.jsx)(_t,{tooltipText:"Add new edge to this graph",icon:"new-link",text:"Add Edge",onClick:function(){pe.preferences.AddEdgeDialogOpen=!0,pe.interaction.flush(),pe.preferences.rightClickPanelOpen=!1}}),Object(ye.jsx)(_t,{tooltipText:"Interactively delete edge that connected to this selected node",icon:"cross",text:"Delete Edge",onClick:function(){pe.preferences.deleteEdgePanelOpen=!0,pe.preferences.rightClickPanelOpen=!1}}),Object(ye.jsx)(f.B,{title:"Node-Cluster"}),Object(ye.jsx)(De.a,{isOpen:this.state.formNewClusterOpen,content:Object(ye.jsx)(Mt,{callback:function(t,n){e.formNewCluster(t,n),e.setState({formNewClusterOpen:!1}),pe.preferences.rightClickPanelOpen=!1}}),children:Object(ye.jsx)(_t,{tooltipText:"Use the selected nodes to form a new cluster",icon:"inner-join",text:"Form a New Cluster",onClick:function(){return e.setState({formNewClusterOpen:!0})},disabled:0===pe.interaction.selectedNodes.length})}),Object(ye.jsx)(_t,{tooltipText:"Release the selected nodes from the cluster where they belongs",icon:"ungroup-objects",text:"Release from Cluster",onClick:this.releaseFromCluster,disabled:0===pe.interaction.selectedNodes.length})]})}}]),n}(a.a.Component)),Lt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={mergeSelectedClustersOpen:!1,mergeNeighborsOpen:!1,mergeNearestClustersOpen:!1},e.componentWillUnmount=function(){e.closeAllPanel()},e}return Object(p.a)(n,[{key:"mergeSelectedClusters",value:function(e,t){pe.clusterInteraction.selectedClusters.forEach((function(n){var r=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(n),i=pe.cluster.attributeKeys.get(r);null===i||void 0===i||i.forEach((function(n){pe.graph.rawGraph.setNodeAttribute(n,e,t)}))})),pe.cluster.setCluster(e),pe.clusterInteraction.flush()}},{key:"previewClusterNeighbors",value:function(e){pe.clusterInteraction.selectedClusters=[e];var t=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(e),n=pe.cluster.attributeKeys.get(t),r=[];null===n||void 0===n||n.forEach((function(e){pe.graph.rawGraph.forEachNeighbor(e,(function(e){var t=pe.cluster.keyAttribute.get(e);r.includes(t)||r.push(t)}))})),r.forEach((function(e){var t,n;pe.clusterInteraction.selectedClusters.push(null===(t=pe.graphDelegate.clusterObject.clusterObjectsMap)||void 0===t||null===(n=t.get(e))||void 0===n?void 0:n.uuid)}))}},{key:"previewNearestNeighbors",value:function(e){function t(t){return pe.graphDelegate.clusterObject.getObjectById(e).position.distanceTo(t)}pe.clusterInteraction.selectedClusters=[e];var n=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(e),r=pe.cluster.attributeKeys.get(n),i=[];null===r||void 0===r||r.forEach((function(e){pe.graph.rawGraph.forEachNeighbor(e,(function(e){var t=pe.cluster.keyAttribute.get(e);i.includes(t)||i.push(t)}))}));var a=i.map((function(e){var t,n;return null===(t=pe.graphDelegate.clusterObject.clusterObjectsMap)||void 0===t||null===(n=t.get(e))||void 0===n?void 0:n.uuid})).map((function(e){return pe.graphDelegate.clusterObject.getObjectById(e)}));if(0!==a.length){var o,s=a[0];a.forEach((function(e){var n;t(null===e||void 0===e?void 0:e.position)<t(null===(n=s)||void 0===n?void 0:n.position)&&(s=e)})),pe.clusterInteraction.selectedClusters.push(null===(o=s)||void 0===o?void 0:o.uuid)}}},{key:"deleteSelectedClusters",value:function(){pe.clusterInteraction.selectedClusters.forEach((function(e){var t=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(e),n=pe.cluster.attributeKeys.get(t);null===n||void 0===n||n.forEach((function(e){pe.graph.rawGraph.dropNode(e)}))})),pe.cluster.setCluster(null,!0),pe.clusterInteraction.flush()}},{key:"releaseSelectedClusters",value:function(){pe.clusterInteraction.selectedClusters.forEach((function(e){var t=pe.graphDelegate.clusterObject.UUID2ClusterValueMap.get(e),n=pe.cluster.attributeKeys.get(t);null===n||void 0===n||n.forEach((function(e){pe.graph.rawGraph.setNodeAttribute(e,pe.cluster.clusterBy,"")}))})),pe.cluster.setCluster(pe.cluster.clusterBy,!0),pe.clusterInteraction.flush()}},{key:"render",value:function(){var e=this;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(f.B,{title:"Cluster Operation"}),Object(ye.jsx)(De.a,{popoverClassName:"transparent-popover",isOpen:this.state.mergeSelectedClustersOpen,content:Object(ye.jsx)(Mt,{callback:function(t,n){e.mergeSelectedClusters(t,n),e.setState({mergeSelectedClustersOpen:!1}),pe.preferences.rightClickPanelOpen=!1}}),children:Object(ye.jsx)(_t,{tooltipText:"Merge selected clusters into a larger cluster",icon:"group-objects",text:"Merge Clusters",onClick:function(){e.closeAllPanel(),e.setState({mergeSelectedClustersOpen:!0})},disabled:0===pe.clusterInteraction.selectedClusters.length||1===pe.clusterInteraction.selectedClusters.length})}),Object(ye.jsx)(De.a,{popoverClassName:"transparent-popover",isOpen:this.state.mergeNeighborsOpen,content:Object(ye.jsx)(Mt,{callback:function(t,n){e.mergeSelectedClusters(t,n),e.setState({mergeNeighborsOpen:!1}),pe.preferences.rightClickPanelOpen=!1},style:{opacity:"50%"}}),children:Object(ye.jsx)(_t,{tooltipText:"Merge this cluster with its neighbors",icon:"group-objects",text:"Merge Neighbors",onClick:function(){e.previewClusterNeighbors(pe.clusterInteraction.chosenCluster),pe.graphDelegate.clusterObject.updateAllMaterials(),e.closeAllPanel(),e.setState({mergeNeighborsOpen:!0})}})}),Object(ye.jsx)(De.a,{popoverClassName:"transparent-popover",isOpen:this.state.mergeNearestClustersOpen,content:Object(ye.jsx)(Mt,{callback:function(t,n){e.mergeSelectedClusters(t,n),e.setState({mergeNearestClustersOpen:!1}),pe.preferences.rightClickPanelOpen=!1}}),children:Object(ye.jsx)(_t,{tooltipText:"Merge this cluster with its nearest neighbor",icon:"group-objects",text:"Merge Nearest Neighbor",onClick:function(){e.previewNearestNeighbors(pe.clusterInteraction.chosenCluster),pe.graphDelegate.clusterObject.updateAllMaterials(),e.closeAllPanel(),e.setState({mergeNearestClustersOpen:!0})}})}),Object(ye.jsx)(f.B,{}),Object(ye.jsx)(_t,{tooltipText:"Release selected clusters from the included nodes",icon:"group-objects",text:"Release Cluster(s)",onClick:function(){e.releaseSelectedClusters(),pe.preferences.rightClickPanelOpen=!1}}),Object(ye.jsx)(_t,{tooltipText:"Delete this cluster and its associated nodes from the graph",icon:"delete",text:"Delete Cluster(s)",onClick:function(){e.deleteSelectedClusters(),pe.preferences.rightClickPanelOpen=!1}})]})}},{key:"closeAllPanel",value:function(){this.setState({mergeSelectedClustersOpen:!1,mergeNeighborsOpen:!1,mergeNearestClustersOpen:!1})}}]),n}(a.a.Component)),Bt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(f.B,{title:"Edit Graph"}),Object(ye.jsx)(_t,{tooltipText:"Add single node to the graph",icon:"new-object",text:"Add Node",onClick:function(){pe.preferences.AddNodeDialogOpen=!0,pe.preferences.rightClickPanelOpen=!1}}),Object(ye.jsx)(f.B,{})]})}}]),n}(a.a.Component)),Vt=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(h.a)(this,n),r=t.call(this,e),Object(y.o)(Object(vt.a)(r),{stylePosition:y.g}),r}return Object(p.a)(n,[{key:"stylePosition",get:function(){return{top:pe.preferences.rightClickPositionY+10+"px",left:pe.preferences.rightClickPositionX+10+"px"}}},{key:"renderMenuContent",value:function(){switch(this.props.on){case"Node":return Object(ye.jsx)(Gt,{});case"Cluster":return Object(ye.jsx)(Lt,{});case"Background":return Object(ye.jsx)(Bt,{})}}},{key:"render",value:function(){return Object(ye.jsx)(f.A,{className:u()(d.a.ELEVATION_1,"right-click-panel"),style:this.stylePosition,children:this.renderMenuContent()})}}]),n}(a.a.Component)),Ut=Object(b.a)(function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).optionsVisible={left:"0em"},e.optionsInvisible={left:"-2200em"},e.sideButtonVis={marginLeft:"50px"},e.sideButtonInv={marginLeft:"-15px"},e.toggleOptions=function(){pe.preferences.graphOptionsCardOpen=!pe.preferences.graphOptionsCardOpen},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(ye.jsxs)("div",{className:"floating-overlay",children:[Object(ye.jsxs)("div",{className:"left-cards",children:[Object(ye.jsxs)(f.e,{elevation:Ge.a.TWO,className:u()("overlay-card","transparent-frame","left-cards"),style:pe.preferences.graphOptionsCardOpen?this.optionsVisible:this.optionsInvisible,children:[Object(ye.jsx)("br",{}),Object(ye.jsx)(f.b,{className:"openbtn2",icon:"chevron-left",onClick:this.toggleOptions}),Object(ye.jsx)("br",{}),Object(ye.jsx)(Et,{})]}),Object(ye.jsx)(f.e,{elevation:Ge.a.TWO,className:u()("overlay-card","transparent-frame"),style:{width:"1em",paddingTop:"1em",paddingRight:"0.7em",paddingBottom:"0.5em",marginLeft:"-5.4em"},children:Object(ye.jsx)(f.b,{icon:"more",className:"openbtn",onClick:this.toggleOptions,style:pe.preferences.graphOptionsCardOpen?this.sideButtonInv:this.sideButtonVis})})]}),pe.interaction.currentlyHoveredNodeId&&0===pe.interaction.selectedNodes.length&&Object(ye.jsx)(Ot,{onNode:pe.interaction.currentlyHoveredNodeId}),0!==pe.interaction.selectedNodes.length&&Object(ye.jsx)(mt,{}),pe.preferences.rightClickPanelOpen&&pe.preferences.rightClickOn&&Object(ye.jsx)(Vt,{on:pe.preferences.rightClickOn}),pe.preferences.deleteEdgePanelOpen&&pe.interaction.chosenNode&&Object(ye.jsx)(xt,{onNode:pe.interaction.chosenNode}),Object(ye.jsx)(zt,{})]})}}]),n}(a.a.Component));var Ht=function(){return Object(ye.jsxs)("div",{className:u()(Object(c.a)({"app-wrapper":!0},d.a.DARK,!0)),children:[Object(ye.jsx)(Ie,{}),Object(ye.jsx)("main",{className:"main",children:Object(ye.jsx)(ft,{})}),Object(ye.jsx)(Ut,{}),Object(ye.jsx)(rt,{})]})};n(513),n(514),n(515),n(516),n(517),n(518);s.a.render(Object(ye.jsx)(a.a.StrictMode,{children:Object(ye.jsx)(Ht,{})}),document.getElementById("root"))}},[[519,1,2]]]);
//# sourceMappingURL=main.0de3edc1.chunk.js.map