{"version":3,"sources":["state/PreferencesStore.ts","state/Cluster3dObjectStore.ts","state/GraphDelegate.ts","components/ComponentRef.tsx","state/GraphMutation.ts","state/GraphStore.ts","state/ImportStore.ts","state/SearchStore.ts","state/ClusterStore.ts","state/CssStore.ts","constants/index.ts","state/ClusterInteractionStore.ts","state/NodeInteractionStore.ts","state/HelperStackPanelStore.ts","state/SignalStore.tsx","state/index.ts","components/utils/InputFormUtils.ts","state/utils/ToasterUtils.ts","components/utils/ClusterChooser.tsx","images/icon.png","components/panels/SearchPanel.tsx","components/Navbar.tsx","components/utils/SimpleSelect.tsx","components/dialogs/importDialog.tsx","components/dialogs/ExportDialog.tsx","components/utils/DataSheetDialogWrapper.tsx","components/dialogs/NodeDataSheetDialog.tsx","components/utils/NodeChooser.tsx","components/dialogs/EdgeDataSheetDialog.tsx","components/utils/NodeAdder.tsx","components/dialogs/AddNodeDialog.tsx","components/dialogs/AddEdgeDialog.tsx","components/dialogs/ImportGEXFDialog.tsx","components/Dialogs.tsx","components/panels/SelectionBox.tsx","state/utils/MouseEventUtils.ts","components/panels/CanvasDraw/CanvasDrawFreehandPanel.tsx","components/panels/CanvasDraw/CanvasDrawStraightLinePanel.tsx","components/panels/CanvasDraw/CanvasDrawFreeCirclePanel.tsx","components/panels/CanvasDraw/CanvasDrawCenterCirclePanel.tsx","components/panels/CanvasDraw/CanvasDrawPanel.tsx","components/visualize/Visualizer.tsx","components/panels/NodeDetailPanel.tsx","components/panels/MultiDetailPanel.tsx","components/panels/DeleteEdgeInteractionPanel.tsx","components/utils/Collapsable.tsx","components/panels/GraphOptions/ClusterPanel.tsx","components/utils/ColorPicker.tsx","components/panels/GraphOptions/EdgesPanel.tsx","components/panels/GraphOptions/LabelsPanel.tsx","components/panels/GraphOptions/NodesPanel.tsx","components/panels/GraphOptions/GraphOptionsCard.tsx","components/utils/FormClusterOptionsCard.tsx","components/utils/FormTwoClusterOptionsCard.tsx","components/panels/InteractionModePanel/ClusterSplittingPanelStack.tsx","components/panels/InteractionModePanel/NodeSelectionPanel.tsx","components/panels/InteractionModePanel/InteractionModePanel.tsx","components/utils/MenuItemWithTooltip.tsx","components/panels/RightClickPanel/RightClickNodeMenu.tsx","components/panels/RightClickPanel/RightClickClusterMenu.tsx","components/panels/RightClickPanel/RightClickBackgroundMenu.tsx","components/panels/RightClickPanel/RightClickPanel.tsx","components/FloatingCards.tsx","App.tsx","index.js"],"names":["VisualizationMode","PreferencesStore","rightClickPositionX","rightClickPositionY","exportDialogOpen","preferenceDialogOpen","statisticsDialogOpen","AddNodeDialogOpen","AddEdgeDialogOpen","nodeDataSheetDialogOpen","edgeDataSheetDialogOpen","rightClickOn","rightClickPanelOpen","deleteEdgePanelOpen","graphOptionsCardOpen","visualizationMode","Normal","makeAutoObservable","this","except","Cluster3dObjectStore","threeScene","fusionClusterObjects","clusterObjectsMap","UUID2ClusterValueMap","canAlterNodePosition","remove","dispose","Map","initialMap","State","cluster","attributePoints","forEach","value","key","set","createMesh","THREE","add","clusterBy","convexHullObjects","initEmptyMapAndFusion","mesh","geometry","copy","convexHullObject","uuid","res","children","every","item","material","newMap","points","get","length","sphere","SphereGeometry","css","node","size","resolution","translate","x","y","z","tempArray","vector","push","positions","Float32Array","setAttribute","computeBoundingSphere","sphereGeo","boundingSphere","radius","center","shape","ConvexGeometry","Array","from","convexGeometry","visualize","graph","rawGraph","getNodeAttribute","geom","name","color","attributeColor","meshMaterial","meshNormalMaterial","oldOpacity","opacity","setTimeout","transparent","blending","side","depthWrite","shininess","_object","meshId","clusterInteraction","currentlyHoveredClusterId","meshHighlightMaterial","selectedClusters","includes","meshSelectedMaterial","chaserListX","chaserListY","chaserListZ","attributeKeys","sphereGeometry","position","computeNodeSphereDistribution","index","attribute","chaserX","chaser","initialValue","duration","target","chaserY","chaserZ","interval","setInterval","graphDelegate","graphDelegateMethods","refresh","clearInterval","numberOfPoints","dlong","Math","PI","sqrt","dz","long","ptsOnSphere","r","ptNew","cos","sin","createCustomNodeObject","_id","_cluster","id","hovered","chosen","multiSelected","isClusterNode","createCustomLinkObject","_source","_target","source","isClusterLink","GraphDelegate","clusterObject","_graphDelegateMethods","scene","newGraph","addInvisibleClusterNode","decorateRawGraph","tempGraph","nodes","links","forEachNode","attributes","forEachEdge","edge","oldGraph","graphCopy","names","getAttributeValues","clusterID","addNode","_visualize","addEdgeWithKey","nodeObject","linkObject","nodeId","distance","distRatio","hypot","cameraPosition","d3Force","link","clusterForce","normalForce","d3ReheatSimulation","ComponentRef","nodeDetail","multiNodeDetail","visualizer","clusterSplittingPanelStack","_instance","instance","reaction","interaction","currentlyHoveredNodeId","forceUpdate","GraphMutation","_this","that","newAttributes","hasOwnProperty","decorateRawNode","refreshGraph","dropNode","decorateRawEdge","addEdge","dropEdge","GraphStore","Graph","allowSelfLoops","multi","type","mutating","metadata","snapshotName","nodeProperties","_rawGraph","_metadata","flush","updateVisualizationGraph","ImportStore","clustertree","clusterMap","colorMap","UUID2PointsMap","isLoading","edgeFileName","nodeFileName","gexfFileName","clusterFileName","importDialogOpen","importGEXFDialogOpen","selectedEdgeFileFromInput","selectedNodeFileFromInput","selectedClusterFileFromInput","selectedGEXFFileFromInput","importConfig","hasNodeFile","nodeFile","isReady","parseError","path","hasHeader","topN","columns","mapping","delimiter","edgeFile","fromId","toId","clusterFile","parent","fileObject","file","reader","FileReader","readAsText","Promise","resolve","reject","onload","content","result","replace","parse","comment","trim","auto_parse","skip_empty_lines","undefined","err","Toaster","create","Position","TOP","show","message","intent","Intent","DANGER","timeout","gexf","readCSV","temparr","leaves","leave","child","buildClusterMap","i","hierarchylevel","height","colors","randomColor","seed","count","config","fromColumn","parseInt","toColumn","tempNodes","readNodeCSV","toString","Object","assign","readEdgeCSV","idx","hasNode","importClusterFromCSV","keys","csvFile","fileResult","clusterLink","d3","clusterRoot","d","parentId","buildColorMap","console","log","readGEXF","entries","getNodeAttributes","edgeFileConfig","fileAsString","lines","split","topLinesAsString","map","l","slice","join","it","onerror","error","action","onClick","window","location","reload","text","nodeFileConfig","SearchStore","isPreviewing","searchStr","filterProps","outputList","searchStrIgnoreCase","toLocaleLowerCase","searchAttr","ClusterStore","showlevel","to","setCluster","keyValueMap","Set","keyAttribute","values","attributeKeysMap","randomcolor","NodeGlobalConfig","defaultColor","chosenColor","multiSelectedColor","highlightColor","EdgeGlobalConfig","selectedColor","defaultWidth","highlightWidth","LabelConfig","ClusterConfig","autoPlot","CssStore","label","isAnimating","DrawMode","NAVBAR_HEIGHT","InteractionStore","chosenNode","selectedNodes","selectedEdge","boxSelectionOpen","boxSelection_startPoint","boxSelection_endPoint","left","min","top","right","max","down","Attributes","coords","graph2ScreenCoords","neighbors","neighbor","getEdgeKey","node1","node2","go","back","oldAttributeVisualize","updateVisualizeAttributeParser","getEdgeAttribute","newAttribute","oldAttributes","ClusterInteractionStore","chosenCluster","drawPanelActivate","drawMode","FreeLine","lineSegment","confirmClusterSplittingTempData","event","signal","isMovingCamera","meshSpotlightMaterial","getObjectById","indexOf","splice","isRightClickingCluster","preferences","closeAllPanel","clusterValue","setNodeAttribute","screenCoords","coord","tempLineSegment","point","polygonContains","updateNodeVisualizeAttribute","centerX","centerY","pow","valueInWhite","valueInRed","nodesToAlter","selected","depth","import","find","newclustername","newchildren","newclusternodes","currentNode","concat","delete","arr","newroot","newcluster","each","currentnode","data","toDelete","HelperStackPanelStore","clusterSplittingPanelStackOpen","clusterSplittingCurrentStep","NodeSelectionPanelOpen","SignalStore","AppState","search","helper","NodeInteractionStore","privateConstructor","_state","autorun","renderImportEdgePreview","renderImportNodePreview","resumeAnimation","pauseAnimation","ClusterSplitting","step","order","number","fireImmediately","updateAllMaterials","selectedNode","updateEdgeVisualizeAttribute","currentlyHoveredNodeNeighborEdges","delay","handleStringChange","handler","stringifyNodeDetail","parseNumberOrString","numberVal","Number","isNaN","createToaster","NONE","observer","itemRenderer","props","handleClick","propertiesWithNone","unshift","items","showNone","fullProperties","filterable","onItemSelect","onSelect","syncWith","React","Component","defaultProps","HierarchyLevelChooser","totallevel","hierarchylevels","ClusterAdder","state","style","display","justifyContent","leftElement","icon","onChange","setState","placeholder","fill","_","onCreate","PRIMARY","filter","prefix","disabled","FILTER_OPTIONS","inputValueRenderer","a","query","onQueryChange","itemListPredicate","candidates","onMouseOver","cameraFocusOn","onMouseLeave","openOnKeyDown","noResults","popoverProps","minimal","zIndex","align","Alignment","LEFT","title","src","logo","width","alt","convexHullObject2","hierarchicalMergeCluster","placement","BOTTOM","marginTop","marginLeft","checked","RIGHT","marginRight","open","CommonItemRenderer","itemPredicate","object","toLowerCase","small","PreviewTable","renderWrapper","className","numRows","selectedRegions","rows","cols","cellRenderer","multiDialogRef","createRef","canImport","renderNodesSelection","onInputChange","files","renderEdgesSelection","renderClusterSelection","newDelimiter","ref","classnames","isOpen","onClose","finalButtonProps","importGraphFromCSV","then","setGraph","hasAttribute","getAttribute","panel","Classes","DIALOG_BODY","alignItems","maxWidth","renderDelimiterSelection","nextButtonProps","large","ready","_node","_edge","write","headers","exportData","export","edges","interactive","elevation","Elevation","ONE","computeGEXFFile","filename","computeNodeFile","separator","computeEdgeFile","loading","loadingOptions","TableLoadingOption","CELLS","COLUMN_HEADERS","ROW_HEADERS","for","onOpened","minWidth","renderTable","GraphNodeTable","filterQuery","addNodeDialogOpen","deleteAlertOpen","nodeToDelete","renderColumns","rowIndex","columnIndex","renderCell","element","cell","filteredTable","newVal","setValue","onConfirm","tooltip","deleteNodeRenderer","deleteNodeAlert","cancelButtonText","confirmButtonText","onCancel","textAlign","newTable","asyncControl","leftIcon","defaultRowHeight","SUCCESS","select","labelFor","labelInfo","rightIcon","GraphEdgeTable","addEdgeDialogOpen","edgeToDelete","chosenSource","chosenTarget","deleteEdgeRenderer","deleteEdgeAlert","addEdgeDialog","onClosed","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","hasEdge","renderMode","RenderMode","newNodeId","canImportTag","renderAttributesForm","newValue","componentDidMount","prop","autoFocus","rightElement","onAdded","fileIsSelect","importGraphFromGEXF","renderImportButton","Dialogs","boxStyle","startPoint","endPoint","mouseDown","onMouseDownCallback","startpoint","clientX","clientY","onMouseMoveCallback","_calculateSelectionBox","onMouseUpCallback","boxSelectNode","abs","onMouseDown","onMouseMove","onMouseUp","onDocumentLeftClick","evt","ReactDOM","findDOMNode","box","getBoundingClientRect","camera","unproject","intersects","sub","normalize","intersectObjects","clusterLeftClickCallback","onDocumentRightClick","clusterRightClickCallback","onDocumentMouseMove","clusterHoverCallback","canvasRef","clearDrawing","componentWillUnmount","current","JSON","canvasMethods","getSaveData","exportDrawing","boundingRect","canvasHeight","canvasWidth","lazyRadius","brushRadius","brushColor","catenaryColor","drawPoints","reverse","computeSplitCluster","clear","ctx","lineJoin","lineCap","clearRect","canvas","lineWidth","beginPath","moveTo","lineTo","strokeStyle","stroke","getContext","centerPoint","computeSplitClusterInCircle","arc","StraightLine","FreeCircle","CenterCircle","CanvasDrawCenterCirclePanel","visualizationGraph","nodePointerInteraction","clicking","graphRef","hoverNodeCallback","previousNode","nodeLeftClickCallback","NodeSelection","nodeRightClickCallback","graphMethods","backgroundClickCallback","backgroundRightClickCallback","renderGraph","graphData","nodeLabel","nodeRelSize","nodeColor","computeNodeColor","nodeVisibility","nodeResolution","nodeThreeObjectExtend","nodeThreeObject","sprite","SpriteText","textHeight","backgroundColor","visible","translateX","onNodeHover","onNodeClick","onNodeRightClick","onNodeDragEnd","fx","fy","fz","linkVisibility","linkWidth","computeEdgeWidth","linkColor","computeEdgeColor","onBackgroundRightClick","onBackgroundClick","enablePointerInteraction","onEngineTick","clusterDelegation","cooldownTicks","onEngineStop","alterNodePosition","debouncedMouseMoveCallback","DOM","debounce","CustomMouseEvent","addEventListener","removeEventListener","mountDelegateMethods","clusterInteractionListener","updateClusterForce","controls","nodeInteractionListener","ClusterSelection","cellRenderer_property","cellRenderer_value","onNode","formatLongFloat","nodeAttributeValue","num","parseFloat","toPrecision","enableRowHeader","targetNode","neighborsRenderer","onMouseEnter","LARGE","FILL","onToggle","shapeOptionOpen","forceOptionOpen","forceCollapse","stepSize","labelStepSize","shapeCollapse","float","interactionKind","PopoverInteractionKind","CLICK","popoverClassName","sizeOptionOpen","thicknessOptionOpen","colorOptionOpen","hex","timeOutRef","colorCollapse","sizeCollapse","animate","Expander","selectedAttribute","callback","background","Colors","DARK_GRAY3","marginBottom","renderInput","anotherValue","FormClusterOptionsCard","titles","renderFirstPanel","renderSecondPanel","selectedValue","renderThirdPanel","value1","value2","splitCluster","renderWhichPanel","currentStep","renderWhichBack","PANEL_STACK_HEADER_BACK","renderPanelStack","PANEL_STACK_VIEW","minHeight","PANEL_STACK_HEADER","HEADING","ellipsize","usePortal","getMessage","BUTTON","MINIMAL","active","WARNING","mode","getIntent","MenuItemWithTooltip","tooltipText","formNewClusterOpen","clusterName","multiline","formNewCluster","releaseFromCluster","mergeSelectedClustersOpen","mergeNeighborsOpen","mergeNearestClustersOpen","nodeIds","forEachNeighbor","computeDistance","distanceTo","objects","shortest","mergeSelectedClusters","previewClusterNeighbors","previewNearestNeighbors","releaseSelectedClusters","deleteSelectedClusters","makeObservable","stylePosition","computed","on","RightClickNodeMenu","RightClickClusterMenu","RightClickBackgroundMenu","ELEVATION_1","renderMenuContent","optionsVisible","optionsInvisible","sideButtonVis","sideButtonInv","toggleOptions","TWO","GraphOptionsCard","paddingTop","paddingRight","paddingBottom","NodeDetailPanel","MultiDetailPanel","App","DARK","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0de3edc1.chunk.js","sourcesContent":["import { makeAutoObservable } from \"mobx\";\n\n/**\n * @description the four interaction modes\n * @author Zichen XU, Zhiyuan LYU\n * @export\n * @enum {number}\n */\nexport enum VisualizationMode {\n    Normal = \"Normal\", // normal state\n    ClusterSelection = \"Cluster Selection\", // selecting the cluster to be Merged\n    NodeSelection = \"Node Selection\", // multi-selecting the node\n    ClusterSplitting = \"Cluster Splitting\", // drawing the line to split the cluster\n}\n\n/**\n * @description it controls the open/close of dialogs/panels\n * and the VisualizationMode(Normal/NodeSelection/ClusterSelection/ClusterSplitting) as well\n * @author Zichen XU\n * @export\n * @class PreferencesStore\n */\nexport default class PreferencesStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    // Right Click Position\n\n    rightClickPositionX = 30;\n    rightClickPositionY = 30;\n\n    // Dialog\n\n    exportDialogOpen = false;\n    private preferenceDialogOpen = false;\n    private statisticsDialogOpen = false;\n\n    AddNodeDialogOpen = false;\n    AddEdgeDialogOpen = false;\n\n    nodeDataSheetDialogOpen = false;\n    edgeDataSheetDialogOpen = false;\n\n    // Panel\n\n    rightClickOn = null as null | \"Node\" | \"Cluster\" | \"Background\";\n    rightClickPanelOpen = false;\n    deleteEdgePanelOpen = false;\n\n    graphOptionsCardOpen = false;\n\n    closeAllPanel(except?: string) {\n        this.deleteEdgePanelOpen = false;\n        this.graphOptionsCardOpen = false;\n        if (except !== \"rightClickPanel\") {\n            this.rightClickPanelOpen = false;\n        }\n    }\n\n    // 3D Graph\n\n    visualizationMode: VisualizationMode = VisualizationMode.Normal;\n}\n","import { makeAutoObservable } from \"mobx\";\nimport * as THREE from \"three\";\nimport { SphereGeometry } from \"three\";\nimport { ConvexGeometry } from \"three/examples/jsm/geometries/ConvexGeometry\";\nimport State from \".\";\nimport chaser from \"chaser\";\n\n/**\n * @description the code in this file basically initialize the corresponding Object3D for each cluster\n * control the addition/deletion/disposition/accessing/updatePosition/updateMaterial of clusters inside the scene\n * according to the updated map from ClusterStore\n * @author Zichen XU\n * @export\n * @class Cluster3dObjectStore\n */\nexport default class Cluster3dObjectStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * @description the THREE.js WebGL Scene of the visualization\n     * @author Zichen XU\n     * @type {THREE.Scene}\n     */\n    threeScene!: THREE.Scene;\n\n    /**\n     * @description all the clusters should form a 3D Group to be imported into Scene\n     * if no cluster attribute is set, this will be set to null\n     *\n     * each children is a THREE.Mesh\n     * @author Zichen XU\n     * @type {(THREE.Group | null)}\n     */\n    fusionClusterObjects: THREE.Group | null = null;\n\n    /**\n     * @description the map between attribute value and its corresponding Mesh Group\n     * if you want to update the geometry, plz update all the children inside which Mesh Group\n     * if no cluster attribute is set, this will be set to null\n     * @author Zichen XU\n     * @type {(Map<string | number, THREE.Mesh> | null)}\n     */\n    clusterObjectsMap: Map<string | number, THREE.Mesh> | null = null;\n\n    /**\n     * @description create empty BufferGeometry and mesh with colour\n     * then initialize $fusionClusterObjects and $clusterObjectsMap with it\n     * and then add the THREE.Group to the Scene\n     * @author Zichen XU\n     * @returns {*}\n     */\n    initEmptyMapAndFusion() {\n        if (this.fusionClusterObjects) {\n            this.threeScene.remove(this.fusionClusterObjects);\n            this.dispose();\n        }\n        // if (State.cluster.clusterBy === null) {\n        //     return;\n        // }\n        this.UUID2ClusterValueMap = new Map<string, string | number>();\n        let initialMap = new Map<string | number, THREE.Mesh>();\n        State.cluster.attributePoints.forEach((value, key) => {\n            initialMap.set(\n                key,\n                this.createMesh(new THREE.BufferGeometry(), key)\n            );\n        });\n\n        this.clusterObjectsMap = initialMap;\n        this.fusionClusterObjects = new THREE.Group();\n        initialMap.forEach((value) => {\n            this.fusionClusterObjects?.add(value);\n        });\n        this.threeScene.add(this.fusionClusterObjects);\n    }\n\n    /**\n     * @description should be called on each render frame\n     * will update the geometry inside each cluster object\n     *\n     * if is the first time (both are null), will run initEmptyMapAndFusion() first\n     *\n     * if meet with clusterBy == null, will dispose all Object3d\n     * @author Zichen XU\n     * @returns {*}\n     */\n    clusterDelegation() {\n        if (State.cluster.clusterBy === null) {\n            return;\n        } else {\n            if (\n                this.fusionClusterObjects == null ||\n                this.convexHullObjects == null\n            ) {\n                this.initEmptyMapAndFusion();\n            }\n            this.clusterObjectsMap?.forEach(\n                (mesh: THREE.Mesh, key: string | number) => {\n                    mesh.geometry.copy(this.convexHullObject(key));\n                }\n            );\n        }\n    }\n\n    /**\n     * @description get the THREE.Mesh object by its uuid\n     * @author Zichen XU\n     * @param {string} uuid\n     * @returns {*}  {(THREE.Mesh | null)}\n     */\n    getObjectById(uuid: string): THREE.Mesh | null {\n        let res: THREE.Object3D | null = null;\n        this.fusionClusterObjects?.children.every((item: THREE.Object3D) => {\n            if (item.uuid === uuid) {\n                res = item;\n                return false;\n            } else {\n                return true;\n            }\n        });\n        return res;\n    }\n\n    /**\n     * @description dispose the geometries and materials in every clusterObject\n     * and set these props to be null, which indicates that no additional 3d object is added into Scene\n     * @author Zichen XU\n     */\n    private dispose() {\n        this.clusterObjectsMap?.forEach((mesh: THREE.Mesh) => {\n            let material = mesh.material as THREE.Material;\n            material.dispose();\n            mesh.geometry.dispose();\n        });\n        this.clusterObjectsMap = null;\n        this.fusionClusterObjects = null;\n        this.UUID2ClusterValueMap = new Map<string, string | number>();\n    }\n\n    /**\n     * @description the map between the value of the cluster and the BufferGeometry that this cluster created\n     * @author Zichen XU\n     * @readonly\n     * @type {(Map<string | number, THREE.BufferGeometry>)}\n     */\n    get convexHullObjects(): Map<string | number, THREE.BufferGeometry> {\n        let newMap = new Map<string | number, THREE.BufferGeometry>();\n        State.cluster.attributePoints.forEach((value, key) => {\n            newMap.set(key, this.convexHullObject(key));\n        });\n        return newMap;\n    }\n\n    /**\n     * @description get the computed convexHull BufferGeometry of the specified attribute value\n     * @author Zichen XU\n     * @param {(string | number)} key\n     * @returns {*}  {THREE.BufferGeometry}\n     */\n    private convexHullObject(key: string | number): THREE.BufferGeometry {\n        let points = State.cluster.attributePoints.get(key) as THREE.Vector3[];\n\n        if (!points || points.length === 0) {\n            return new THREE.BufferGeometry();\n        } else if (points.length === 1) {\n            let sphere = new SphereGeometry(\n                State.css.node.size + 5,\n                State.css.cluster.resolution,\n                State.css.cluster.resolution\n            );\n            sphere.translate(points[0].x, points[0].y, points[0].z);\n            return sphere;\n        } else if (points.length < 4) {\n            // there are 2 or 3 points in this cluster\n            let geometry = new THREE.BufferGeometry();\n            let tempArray: number[] = [];\n            points.forEach((vector) => {\n                tempArray.push(vector.x, vector.y, vector.z);\n            });\n            const positions = new Float32Array(tempArray);\n            geometry.setAttribute(\n                \"position\",\n                new THREE.BufferAttribute(positions, 3)\n            );\n            geometry.computeBoundingSphere();\n            let sphereGeo = geometry.boundingSphere as THREE.Sphere;\n            let sphere = new SphereGeometry(\n                sphereGeo.radius + 5,\n                State.css.cluster.resolution,\n                State.css.cluster.resolution\n            );\n            sphere.translate(\n                sphereGeo.center.x,\n                sphereGeo.center.y,\n                sphereGeo.center.z\n            );\n            return sphere;\n        } else {\n            if (State.css.cluster.shape === \"convexHull\") {\n                // when there are more than 3 points, simply gnerate a convexgeometry\n                return new ConvexGeometry(Array.from(points));\n            } else {\n                // State.css.clusterShape === \"Sphere\"\n                let convexGeometry = new ConvexGeometry(Array.from(points));\n                convexGeometry.computeBoundingSphere();\n                let sphereGeo = convexGeometry.boundingSphere as THREE.Sphere;\n                let sphere = new SphereGeometry(\n                    sphereGeo.radius + 5,\n                    State.css.cluster.resolution,\n                    State.css.cluster.resolution\n                );\n                sphere.translate(\n                    sphereGeo.center.x,\n                    sphereGeo.center.y,\n                    sphereGeo.center.z\n                );\n                return sphere;\n            }\n        }\n    }\n\n    public convexHullObject2(cluster : string[]): THREE.BufferGeometry {\n        let points = [] as THREE.Vector3[];\n        cluster.forEach((node)=>{\n            let visualize = State.graph.rawGraph.getNodeAttribute(node,\"_visualize\");\n            points.push(\n                new THREE.Vector3(\n                    visualize.x,\n                    visualize.y,\n                    visualize.z\n                )\n            );\n        });\n\n        if (!points || points.length === 0) {\n            return new THREE.BufferGeometry();\n        } else if (points.length === 1) {\n            let sphere = new SphereGeometry(\n                State.css.node.size + 5,\n                State.css.cluster.resolution,\n                State.css.cluster.resolution\n            );\n            sphere.translate(points[0].x, points[0].y, points[0].z);\n            return sphere;\n        } else if (points.length < 4) {\n            // there are 2 or 3 points in this cluster\n            let geometry = new THREE.BufferGeometry();\n            let tempArray: number[] = [];\n            points.forEach((vector) => {\n                tempArray.push(vector.x, vector.y, vector.z);\n            });\n            const positions = new Float32Array(tempArray);\n            geometry.setAttribute(\n                \"position\",\n                new THREE.BufferAttribute(positions, 3)\n            );\n            geometry.computeBoundingSphere();\n            let sphereGeo = geometry.boundingSphere as THREE.Sphere;\n            let sphere = new SphereGeometry(\n                sphereGeo.radius + 5,\n                State.css.cluster.resolution,\n                State.css.cluster.resolution\n            );\n            sphere.translate(\n                sphereGeo.center.x,\n                sphereGeo.center.y,\n                sphereGeo.center.z\n            );\n            return sphere;\n        } else {\n            if (State.css.cluster.shape === \"convexHull\") {\n                // when there are more than 3 points, simply gnerate a convexgeometry\n                return new ConvexGeometry(Array.from(points));\n            } else {\n                // State.css.clusterShape === \"Sphere\"\n                let convexGeometry = new ConvexGeometry(Array.from(points));\n                convexGeometry.computeBoundingSphere();\n                let sphereGeo = convexGeometry.boundingSphere as THREE.Sphere;\n                let sphere = new SphereGeometry(\n                    sphereGeo.radius + 5,\n                    State.css.cluster.resolution,\n                    State.css.cluster.resolution\n                );\n                sphere.translate(\n                    sphereGeo.center.x,\n                    sphereGeo.center.y,\n                    sphereGeo.center.z\n                );\n                return sphere;\n            }\n        }\n    }\n\n    /**\n     * @description create a Three.Group, which contains 2 Three.Mesh, of the input geometry\n     * @author Zichen XU\n     * @private\n     * @param {THREE.BufferGeometry} geom\n     * @param {(string | number)} name\n     * @returns {*}  {THREE.Mesh}\n     */\n    private createMesh(\n        geom: THREE.BufferGeometry,\n        name: string | number\n    ): THREE.Mesh {\n        const color = State.cluster.attributeColor.get(name);\n        const meshMaterial = new THREE.MeshBasicMaterial();\n        let mesh = new THREE.Mesh(geom, meshMaterial);\n        //@ts-ignore\n        mesh[\"_color\"] = color;\n        this.meshNormalMaterial(mesh);\n        this.UUID2ClusterValueMap.set(mesh.uuid, name);\n        mesh.name = \"THREE_CLUSTER_\" + name;\n        return mesh;\n    }\n\n    /**\n     * @description a map from (the uuid that get from the WebGL) to (the cluster value of this cluster)\n     * @author Zichen XU\n     * @type {(Map<string, string | number>)}\n     */\n    UUID2ClusterValueMap!: Map<string, string | number>;\n\n    /**\n     * @description add the mesh material a short highlight\n     * @author Zichen XU\n     * @param {THREE.Mesh} mesh\n     */\n    meshSpotlightMaterial(mesh: THREE.Mesh) {\n        let material = mesh.material as THREE.Material;\n        const oldOpacity = material.opacity;\n        material.opacity = 1;\n        setTimeout(() => {\n            material.opacity = oldOpacity;\n        }, 50);\n    }\n\n    /**\n     * @description set the mesh material to be highlighted\n     * @author Zichen XU\n     * @private\n     * @param {THREE.Mesh} mesh\n     */\n    private meshHighlightMaterial(mesh: THREE.Mesh) {\n        mesh.material = new THREE.MeshBasicMaterial({\n            //@ts-ignore\n            color: mesh[\"_color\"],\n            transparent: true,\n            opacity: 0.6,\n            blending: THREE.AdditiveBlending,\n        });\n        mesh.material.side = THREE.DoubleSide;\n        mesh.material.depthWrite = false;\n    }\n\n    /**\n     * @description set the mesh material to be as selected\n     * @author Zichen XU\n     * @private\n     * @param {THREE.Mesh} mesh\n     */\n    private meshSelectedMaterial(mesh: THREE.Mesh) {\n        mesh.material = new THREE.MeshPhongMaterial({\n            //@ts-ignore\n            color: mesh[\"_color\"],\n            shininess: 20,\n            // emissive: \"white\",\n            opacity: 0.9,\n            transparent: true,\n        });\n        mesh.material.depthWrite = false;\n    }\n\n    /**\n     * @description set the mesh material back to normal\n     * @author Zichen XU\n     * @private\n     * @param {THREE.Mesh} mesh\n     */\n    public meshNormalMaterial(mesh: THREE.Mesh) {\n        mesh.material = new THREE.MeshBasicMaterial({\n            //@ts-ignore\n            color: mesh[\"_color\"],\n            transparent: true,\n            opacity: 0.15,\n        });\n        mesh.material.side = THREE.DoubleSide;\n        mesh.material.depthWrite = false;\n    }\n\n    /**\n     * @description update and refresh all materials of all the cluster objects\n     * @author Zichen XU\n     */\n    updateAllMaterials() {\n        this.fusionClusterObjects?.children.forEach((_object) => {\n            let mesh = _object as THREE.Mesh;\n            const meshId = mesh.uuid;\n            if (State.clusterInteraction.currentlyHoveredClusterId === meshId) {\n                this.meshHighlightMaterial(mesh);\n            } else if (\n                State.clusterInteraction.selectedClusters.includes(meshId)\n            ) {\n                this.meshSelectedMaterial(mesh);\n            } else {\n                this.meshNormalMaterial(mesh);\n            }\n        });\n    }\n\n    /**\n     * @description determine whether at this time can the node to be auto-altered to the surface of the sphere\n     * if the engine reheat, will set this to true.\n     * @author Zichen XU\n     * @type {boolean}\n     */\n    canAlterNodePosition: boolean = false;\n\n    /**\n     * @description alter the nodes onto the surface of the sphere in 1s\n     * using the computeNodeSphereDistribution() to compute the position\n     * @author Zichen XU\n     */\n    alterNodePosition() {\n        interface chaserAndPosition {\n            chaser: any;\n            position: { x: number; y: number; z: number };\n        }\n\n        let chaserListX: chaserAndPosition[] = [];\n        let chaserListY: chaserAndPosition[] = [];\n        let chaserListZ: chaserAndPosition[] = [];\n\n        State.cluster.attributeKeys.forEach((points, cluster) => {\n            const sphereGeometry = this.clusterObjectsMap?.get(\n                cluster\n            ) as THREE.Mesh;\n            const radius = sphereGeometry.geometry.boundingSphere?.radius!;\n            let position = sphereGeometry.geometry.boundingSphere?.center!;\n            let newPositions = this.computeNodeSphereDistribution(\n                radius,\n                points.length\n            );\n\n            newPositions.forEach((value, index) => {\n                let attribute = State.graph.rawGraph.getNodeAttribute(\n                    points[index],\n                    \"_visualize\"\n                );\n                const chaserX = chaser({\n                    initialValue: attribute.x,\n                    duration: 1000,\n                });\n                chaserX.target = value.x + position.x;\n                chaserListX.push({ chaser: chaserX, position: attribute });\n\n                const chaserY = chaser({\n                    initialValue: attribute.y,\n                    duration: 1000,\n                });\n                chaserY.target = value.y + position.y;\n                chaserListY.push({ chaser: chaserY, position: attribute });\n\n                const chaserZ = chaser({\n                    initialValue: attribute.z,\n                    duration: 1000,\n                });\n                chaserZ.target = value.z + position.z;\n                chaserListZ.push({ chaser: chaserZ, position: attribute });\n            });\n        });\n\n        let interval = setInterval(() => {\n            chaserListX.forEach((value) => {\n                value.position.x = value.chaser.value;\n            });\n            chaserListY.forEach((value) => {\n                value.position.y = value.chaser.value;\n            });\n            chaserListZ.forEach((value) => {\n                value.position.z = value.chaser.value;\n            });\n            State.graphDelegate.graphDelegateMethods.refresh();\n        }, 50);\n        setTimeout(() => clearInterval(interval), 1000);\n    }\n\n    /**\n     * @description using a algorithm to compute a array of points that distribute on the sphere specified by the radius\n     * @author Zichen XU\n     * @private\n     * @param {number} radius\n     * @param {number} [numberOfPoints=45]\n     * @returns {*}  {{ x: number; y: number; z: number }[]}\n     */\n    private computeNodeSphereDistribution(\n        radius: number,\n        numberOfPoints = 45\n    ): { x: number; y: number; z: number }[] {\n        let dlong = Math.PI * (3.0 - Math.sqrt(5.0));\n        let dz = 2.0 / numberOfPoints;\n        let long = 0.0;\n        let z = 1.0 - dz / 2.0;\n        let ptsOnSphere: { x: number; y: number; z: number }[] = [];\n        for (let index = 0; index < numberOfPoints; index++) {\n            let r = Math.sqrt(1.0 - z * z);\n            let ptNew = {\n                x: Math.cos(long) * r * radius,\n                y: Math.sin(long) * r * radius,\n                z: z * radius,\n            };\n            ptsOnSphere.push(ptNew);\n            z = z - dz;\n            long = long + dlong;\n        }\n        return ptsOnSphere;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport State from \".\";\nimport {\n    ForceGraphMethods,\n    LinkObject,\n    NodeObject,\n} from \"react-force-graph-3d\";\nimport Cluster3dObjectStore from \"./Cluster3dObjectStore\";\n\nexport type Partial<T> = {\n    [P in keyof T]?: T[P];\n};\n\n/**\n * @description\n * hovered: false, selected: false: DefaultColor;\n * hovered: false, selected: true: SelectedColor;\n * hovered: true, selected: false: HighlightColor;\n * hovered: true, selected: true: HighlightColor;\n * @author Zichen XU\n * @export\n * @interface ICustomNodeObject\n * @extends {NodeObject}\n */\nexport interface ICustomNodeObject extends NodeObject {\n    hovered: boolean;\n    chosen: boolean;\n    multiSelected: boolean;\n    isClusterNode?: boolean;\n}\n\n/**\n * @description\n * hovered: false, selected: false: DefaultColor;\n * hovered: false, selected: true: SelectedColor;\n * hovered: true, selected: false: HighlightColor;\n * hovered: true, selected: true: HighlightColor;\n * @author Zichen XU\n * @export\n * @interface ICustomLinkObject\n * @extends {LinkObject}\n */\nexport interface ICustomLinkObject extends LinkObject {\n    chosen: boolean;\n    hovered: boolean;\n    isClusterLink?: boolean;\n}\n\n/**\n * @description create a default CustomNodeObject by specifying the id\n * and whether this node is the cluster node\n * @author Zichen XU\n * @export\n * @param {string} _id\n * @param {boolean} [_cluster=false]\n * @returns {*}  {ICustomNodeObject}\n */\nexport function createCustomNodeObject(\n    _id: string,\n    _cluster: boolean = false\n): ICustomNodeObject {\n    return {\n        id: _id,\n        hovered: false,\n        chosen: false,\n        multiSelected: false,\n        isClusterNode: _cluster,\n    };\n}\n\n/**\n * @description create a default CustomLinkObject by specifying the source and target id\n * and whether this node is the cluster link\n * @author Zichen XU\n * @export\n * @param {string} _source\n * @param {string} _target\n * @param {boolean} [_cluster=false]\n * @returns {*}  {ICustomLinkObject}\n */\nexport function createCustomLinkObject(\n    _source: string,\n    _target: string,\n    _cluster: boolean = false\n): ICustomLinkObject {\n    return {\n        source: _source,\n        target: _target,\n        hovered: false,\n        chosen: false,\n        isClusterLink: _cluster,\n    };\n}\n\n/**\n * @description acts as a bridge between the graphology graph data structure and the 3d-force-graph we use to render the 3D scene\n * The visualizationGraph() will compute the clustered graph to be send to 3d-renderer\n * The cluster data generated by ClusterStore will be used in this process.\n *\n * we define some customized interfaces ICustomNodeObject and ICustomLinkObject which extends from the Node/LinkObject of 3d-force-graph\n * with adding fields like hovered, selected and multiSelected to deal with the WebGL mouse interaction.\n * This class also includes reference to the React.Ref of 3d-renderer\n * with providing functions like auto-focus the camera as well as update the force inside the cluster.\n * @author Zichen XU\n * @export\n * @class GraphDelegate\n */\nexport default class GraphDelegate {\n    constructor() {\n        makeAutoObservable(this);\n        this.clusterObject = new Cluster3dObjectStore();\n    }\n\n    /**\n     * @description assign the force-graph methods to this class\n     * should be called as long as the visualizer react component is mounted\n     * @author Zichen XU\n     * @param {ForceGraphMethods} _graphDelegateMethods\n     */\n    mountDelegateMethods(_graphDelegateMethods: ForceGraphMethods) {\n        this.graphDelegateMethods = _graphDelegateMethods;\n        this.clusterObject.threeScene = this.graphDelegateMethods.scene();\n    }\n\n    /**\n     * @description the ForceGraphMethods exposed by the visualization force-graph\n     * @author Zichen XU\n     * @see ForceGraphMethods\n     * @type {ForceGraphMethods}\n     */\n    graphDelegateMethods!: ForceGraphMethods;\n\n    /**\n     * @description compute the delegate graph that will be used by the ForceGraph3D\n     * will add invisible cluster nodes and edges to balance the clustered graph and adjust force\n     * the NodeObject and LinkObject inside attributes (named _visualize) will be used.\n     *\n     * @author Zichen XU\n     * @returns {*}\n     */\n    visualizationGraph() {\n        let newGraph: Graph;\n        if (State.cluster.clusterBy === null) {\n            newGraph = State.graph.rawGraph;\n        } else {\n            newGraph = this.addInvisibleClusterNode(\n                State.graph.decorateRawGraph(State.graph.rawGraph)\n            );\n        }\n        let tempGraph = {\n            nodes: [] as ICustomLinkObject[],\n            links: [] as ICustomLinkObject[],\n        };\n        newGraph.forEachNode((node, attributes) => {\n            tempGraph.nodes.push(attributes[\"_visualize\"]);\n        });\n\n        newGraph.forEachEdge((edge, attributes) => {\n            tempGraph.links.push(attributes[\"_visualize\"]);\n        });\n        return tempGraph;\n    }\n\n    /**\n     * @description return a new graph that contains the invisible clusters, formed as nodes\n     * as well as the edges that connected to the cluster node to simulate the force within the same cluster\n     * the new graph is a deep copy of the old node, so no worries of the original graph DS\n     * @author Zichen XU\n     * @private\n     * @param {Graph} oldGraph\n     * @returns {*}  {Graph}\n     */\n    private addInvisibleClusterNode(oldGraph: Graph): Graph {\n        let graphCopy = oldGraph.copy();\n        let names = [\n            \"_CLUSTER_1_\",\n            \"_CLUSTER_2_\",\n            \"_CLUSTER_3_\",\n            \"_CLUSTER_4_\",\n            \"_CLUSTER_5_\",\n            \"_CLUSTER_6_\",\n            \"_CLUSTER_7_\",\n            \"_CLUSTER_8_\",\n            \"_CLUSTER_9_\",\n            \"_CLUSTER_10_\",\n        ];\n        for (let index = 0; index < names.length; index++) {\n            State.cluster.getAttributeValues.forEach(\n                (attribute: string | number) => {\n                    // if a node does not belong to any cluster, a undefined will be formed with no cluster to generate\n                    if (attribute === \"undefined\") return;\n\n                    let clusterID = names[index] + attribute;\n                    graphCopy.addNode(clusterID, {\n                        _visualize: createCustomNodeObject(clusterID, true),\n                    });\n\n                    // add edges to simulate the force of the same cluster\n                    State.cluster.attributeKeys\n                        .get(attribute)\n                        ?.forEach((target) => {\n                            graphCopy.addEdgeWithKey(\n                                `${clusterID}-${target}`,\n                                clusterID,\n                                target,\n                                {\n                                    _visualize: createCustomLinkObject(\n                                        clusterID,\n                                        target,\n                                        true\n                                    ),\n                                }\n                            );\n                        });\n                }\n            );\n        }\n\n        return graphCopy;\n    }\n\n    /**\n     * @description determine whether this Node is the cluster delegate node\n     * @author Zichen XU\n     * @param {NodeObject} nodeObject\n     * @returns {*}\n     */\n    nodeVisibility(nodeObject: NodeObject) {\n        let node = nodeObject as ICustomNodeObject;\n        return !node.isClusterNode;\n    }\n\n    /**\n     * @description determine whether this edge is the cluster delegate edge\n     * @author Zichen XU\n     * @param {LinkObject} linkObject\n     * @returns {*}\n     */\n    linkVisibility(linkObject: LinkObject) {\n        let link = linkObject as ICustomLinkObject;\n        return !link.isClusterLink;\n    }\n\n    ////\n\n    /**\n     * @description the link to Cluster3dObjectStore to manipulate the cluster related to WebGL\n     * @author Zichen XU\n     * @type {Cluster3dObjectStore}\n     */\n    clusterObject: Cluster3dObjectStore;\n\n    ////\n\n    /**\n     * @description this will re-position the camera to focus on the specified node\n     * if distance not specified, a default of 40 will be used\n     * @author Zichen XU\n     * @param {string} nodeId the node to be focused\n     * @param {number} [distance=40] the ending distance between the camera and the node\n     * @returns {*}\n     */\n    cameraFocusOn(nodeId: string, distance: number = 80) {\n        let node = State.graph.rawGraph.getNodeAttribute(nodeId, \"_visualize\");\n        if (!(node.x && node.y && node.z)) return;\n        // Aim at node from outside it\n        const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);\n\n        this.graphDelegateMethods.cameraPosition(\n            {\n                x: node.x * distRatio,\n                y: node.y * distRatio,\n                z: node.z * distRatio,\n            }, // new position\n            { x: node.x, y: node.y, z: node.z }, // lookAt ({ x, y, z })\n            3000 // ms transition duration\n        );\n    }\n\n    ////\n\n    /**\n     * @description set the force inside each cluster in the ForceGraph\n     * @author Zichen XU\n     */\n    updateClusterForce() {\n        this.graphDelegateMethods\n            ?.d3Force(\"link\")\n            //@ts-ignore\n            ?.distance((link: CustomLinkObject) => {\n                return link.isClusterLink\n                    ? State.css.cluster.clusterForce\n                    : State.css.cluster.normalForce;\n            });\n        this.graphDelegateMethods.d3ReheatSimulation();\n    }\n}\n","import { makeAutoObservable, reaction } from \"mobx\";\nimport State from \"../state\";\n\n/**\n * @description the React.ref for storing the components that may be used by others\n * @author Zichen XU\n * @class ComponentRef\n */\nclass ComponentRef {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    static _instance: ComponentRef | null = null;\n\n    nodeDetail!: React.Component | any;\n\n    multiNodeDetail!: React.Component | any;\n\n    visualizer!: React.Component | any;\n\n    // canvasDrawPanel!: React.Component | any;\n\n    // canvasDrawStraightLinePanel!: React.Component | any;\n\n    clusterSplittingPanelStack!: React.Component | any;\n\n    // add singleton to prevent creating multiple instances of the State class\n    static get instance() {\n        if (ComponentRef._instance === null) {\n            let instance = new ComponentRef();\n            ComponentRef._instance = instance;\n            return instance;\n        } else {\n            return ComponentRef._instance;\n        }\n    }\n}\n\nreaction(\n    () => State.interaction.currentlyHoveredNodeId,\n    () => ComponentRef.instance.nodeDetail?.forceUpdate()\n);\n\nexport default ComponentRef.instance;\n","import { Attributes, EdgeKey, NodeKey } from \"graphology-types\";\nimport { makeAutoObservable } from \"mobx\";\nimport State from \".\";\nimport GraphStore from \"./GraphStore\";\n\n/**\n * the wrapper mutating function that relates to the mutation of the rawGraph DS\n * all the mutation of the Graph should all go through this API rather than calling on rawGraph directly.\n *\n * @export\n * @class GraphMutation\n */\nexport default class GraphMutation {\n    constructor(_this: GraphStore) {\n        makeAutoObservable(this);\n        this.that = _this;\n    }\n\n    /**\n     * @description the graph store\n     * @see GraphStore\n     * @author Zichen XU\n     * @private\n     * @type {GraphStore}\n     */\n    private that!: GraphStore;\n\n    /**\n     * @description add the node with this attribute to the Graph and refresh the 3d Graph\n     * if not specify attributes._visualize , then will add it into the attributes before adding to Graph\n     * @author Zichen XU\n     * @param {NodeKey} node\n     * @param {Attributes} [attributes]\n     */\n    public addNode(node: NodeKey, attributes?: Attributes): void {\n        let newAttributes: Attributes;\n        if (!attributes) {\n            newAttributes = {};\n            State.graph.decorateRawNode(node as string, newAttributes);\n        } else if (!attributes.hasOwnProperty(\"_visualize\")) {\n            newAttributes = attributes;\n            State.graph.decorateRawNode(node as string, newAttributes);\n        } else {\n            newAttributes = attributes;\n        }\n        this.that.rawGraph.addNode(node, newAttributes);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * @description delete the node with this nodeId in the Graph and refresh the 3d Graph\n     * @author Zichen XU\n     * @param {string} nodeId\n     */\n    public dropNode(nodeId: string): void {\n        this.that.rawGraph.dropNode(nodeId);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * @description add the edge with this attribute to the Graph and refresh the 3d Graph\n     * if not specify attributes._visualize , then will add it into the attributes before adding to Graph\n     * @author Zichen XU\n     * @param {NodeKey} source\n     * @param {NodeKey} target\n     * @param {Attributes} [attributes]\n     */\n    public addEdge(\n        source: NodeKey,\n        target: NodeKey,\n        attributes?: Attributes\n    ): void {\n        let newAttributes: Attributes;\n        if (!attributes) {\n            newAttributes = {};\n            State.graph.decorateRawEdge(\n                source as string,\n                target as string,\n                newAttributes\n            );\n        } else if (!attributes.hasOwnProperty(\"_visualize\")) {\n            newAttributes = attributes;\n            State.graph.decorateRawEdge(\n                source as string,\n                target as string,\n                newAttributes\n            );\n        } else {\n            newAttributes = attributes;\n        }\n        this.that.rawGraph.addEdge(source, target, newAttributes);\n        this.that.refreshGraph();\n    }\n\n    /**\n     * @description delete the edge with this key in the Graph and refresh the 3d Graph\n     * @author Zichen XU\n     * @param {EdgeKey} edge\n     */\n    public dropEdge(edge: EdgeKey): void {\n        this.that.rawGraph.dropEdge(edge);\n        this.that.refreshGraph();\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport { Attributes } from \"graphology-types\";\nimport {\n    createCustomNodeObject,\n    createCustomLinkObject,\n} from \"./GraphDelegate\";\nimport ComponentRef from \"../components/ComponentRef\";\nimport State from \".\";\nimport GraphMutation from \"./GraphMutation\";\n\n/**\n * @description the metadata that importDialog should update to this\n * @author Zichen XU\n * @export\n * @interface IMetaData\n */\nexport interface IMetaData {\n    snapshotName: string;\n\n    // attributes of nodes in imported graph\n    nodeProperties: string[];\n}\n\n/**\n * @description define a class for storing the raw graph (graphology object),\n * the related metadata information, the public api for setting, refreshing\n * and decorating(change the barebone graph into the appropriate instances that we use to send to 3d-graph renderer)\n * the graph as well as the entry of GraphMutation for manipulating the graph.\n * @author Zichen XU\n * @export\n * @class GraphStore\n */\nexport default class GraphStore {\n    constructor() {\n        makeAutoObservable(this);\n        this.mutating = new GraphMutation(this);\n    }\n\n    /**\n     * @description the graphology data structure to store a graph.\n     * has a lot of APIs to manipulate as well as iterate through the graph\n     * @author Zichen XU\n     * @type {Graph}\n     */\n    rawGraph: Graph = new Graph({\n        allowSelfLoops: false,\n        multi: false,\n        type: \"undirected\",\n    });\n\n    /**\n     * @description should be called when individual nodes are added to the graph.\n     * add the CustomNodeObject to node attributes stored in the data structure\n     * @author Zichen XU\n     * @see CustomNodeObject\n     * @param {string} node\n     * @param {Attributes} attributes\n     */\n    decorateRawNode(node: string, attributes: Attributes) {\n        attributes._visualize = createCustomNodeObject(node, false);\n    }\n\n    /**\n     * should be called when individual edges are added to the graph.\n     *\n     * add the CustomLinkObject to node attributes stored in the data structure\n     * @see CustomLinkObject\n     * name as @code _visualize in attributes\n     *\n     * @param {string} source\n     * @param {string} target\n     * @param {Attributes} attributes\n     */\n    decorateRawEdge(source: string, target: string, attributes: Attributes) {\n        attributes._visualize = createCustomLinkObject(source, target, false);\n    }\n\n    /**\n     * should be called on every graph import\n     * add the the _visualize to every links inside the specified graph\n     *\n     * the _visualize is for storing the object to be send to front-end to render the graph\n     *\n     * @param {Graph} _rawGraph\n     * @return {*}  {Graph}\n     */\n    decorateRawGraph(_rawGraph: Graph): Graph {\n        _rawGraph.forEachNode((node, attributes) =>\n            this.decorateRawNode(node, attributes)\n        );\n\n        _rawGraph.forEachEdge((edge, attributes, source, target) =>\n            this.decorateRawEdge(source, target, attributes)\n        );\n        return _rawGraph;\n    }\n\n    /**\n     * proxy method to set the new graph\n     * if intend to set a new graph, please use this method instead of directly modify GraphStore\n     *\n     * @param {Graph} _rawGraph\n     * @param {IMetaData} _metadata\n     */\n    public setGraph(_rawGraph: Graph, _metadata: IMetaData | null = null) {\n        this.rawGraph = this.decorateRawGraph(_rawGraph);\n        if (_metadata) {\n            this.metadata = _metadata;\n        }\n        State.interaction.flush();\n        State.cluster.clusterBy = null;\n        State.graphDelegate.clusterObject.initEmptyMapAndFusion();\n        ComponentRef.visualizer.updateVisualizationGraph();\n    }\n\n    /**\n     * @description should be called when the graph gets updated\n     * (the data inside the graph gets updated, or the attribute to be clustered has changed)\n     * @author Zichen XU\n     */\n    public refreshGraph() {\n        State.interaction.flush();\n        ComponentRef.visualizer.updateVisualizationGraph();\n    }\n\n    /**\n     * @description the wrapper methods to mutate the graph\n     * all the mutations of the graph should go through this API rather than calling this.rawGraph.[mutate]\n     * has basic functions like addNode, dropNode, addEdge, dropEdge...\n     * @author Zichen XU\n     * @see {GraphMutation}\n     * @type {GraphMutation}\n     */\n    mutating: GraphMutation;\n\n    /**\n     * @description the metadata related to the raw graph\n     * should be updated if a new graph is imported\n     * @author Zichen XU\n     * @type {IMetaData}\n     */\n    metadata: IMetaData = {\n        snapshotName: \"SNAPSHOT\",\n        nodeProperties: [],\n    };\n}\n","import { Intent, Position, Toaster, TreeNode } from \"@blueprintjs/core\";\nimport { makeAutoObservable } from \"mobx\";\nimport Graph from \"graphology\";\nimport gexf from \"graphology-gexf\";\nimport parse from \"csv-parse/lib/sync\";\nimport { IMetaData } from \"./GraphStore\";\nimport * as d3 from \"d3\";\nimport { tree } from \"d3\";\nimport randomColor from \"randomcolor\";\n\n/**\n * @description interface for the node file being configured\n * @author Zichen XU\n * @export\n * @interface INodeFileConfig\n */\nexport interface INodeFileConfig {\n    // the file is successfully parsed and ready for display\n    isReady: boolean;\n    parseError: boolean;\n    path: string;\n\n    // has header at the top\n    hasHeader: boolean;\n\n    // Get top 20 lines. Or if there's less than 10 line, get all the lines.\n    topN: any[];\n    //names for the columns of this csv\n    columns: string[];\n    mapping: {\n        id: string;\n    };\n    delimiter: string;\n}\n/**\n * @description interface for the edge file being configured\n * @author Zichen XU\n * @export\n * @interface IEdgeFileConfig\n */\nexport interface IEdgeFileConfig {\n    isReady: boolean;\n    parseError: boolean;\n\n    // should save the csv to temp for further change the cluster attribute\n    path: string;\n    hasHeader: boolean;\n\n    // array of objects storing the\n    topN: any[];\n    columns: string[];\n    mapping: {\n        fromId: string;\n        toId: string;\n    };\n    delimiter: string;\n}\n\n/**\n * @description interface for the cluster file being configured\n * @author Chen YANG\n * @export\n * @interface IClusterFileConfig\n */\n export interface IClusterFileConfig {\n    isReady: boolean;\n    parseError: boolean;\n\n    // should save the csv to temp for further change the cluster attribute\n    path: string;\n    hasHeader: boolean;\n\n    // array of objects storing the\n    topN: any[];\n    columns: string[];\n    mapping: {\n        name: string;\n        parent: string;\n    };\n    delimiter: string;\n}\n\n\n\n\n/**\n * @description this class defines some necessary configs for the graph-importing procedures\n * such as the `INodeFileConfig` and `IEdgeFileConfig` for customizing the csv/gexf file parsing procedure\n * Other functions like `renderImportNode/EdgePreview` renders the preview table in the ImportDialog\n * and `importGraphFromCSV/GEXF` reads the file input and produce the `graphology` object to be assigned to `GraphStore`\n * with some basic error handling strategies\n * These functions are designed to be synchronized to prevent frozen of UI.\n * @author Zichen XU\n * @export\n */\nexport default class ImportStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n    //tree generated by cluster file\n    clustertree : d3.HierarchyNode<unknown> | null = null;\n    // map between the cluster name and the nodes it contains\n    clusterMap : Map<d3.HierarchyNode<unknown>,string[]> | null = null;\n    // map between the depth of a cluster defined by cluster file and its color\n    colorMap : Map<number,string> | null = null;\n    UUID2PointsMap: Map<string, string[]> | null = null;\n    // whether the graph is in importing\n    isLoading = false;\n    //name of the edge file\n    edgeFileName = \"Choose Edge File ...\";\n\n    //name of the node file\n    nodeFileName = \"Choose Node File ...\";\n\n    //name of the GEXF file\n    gexfFileName = \"Choose GEXF File ...\";\n\n    //name of the cluster file***\n    clusterFileName = \"Choose Cluster File ...\";\n\n    importDialogOpen = false;\n\n    importGEXFDialogOpen = false;\n\n    // specific: File object selected via the file input.\n    selectedEdgeFileFromInput!: File;\n    selectedNodeFileFromInput!: File;\n    selectedClusterFileFromInput!: Blob;\n\n    selectedGEXFFileFromInput!: File;\n\n    importConfig = {\n        hasNodeFile: false,\n        nodeFile: {\n            // the file is successfully parsed and ready for display\n            isReady: false,\n            parseError: false,\n            path: \"\",\n\n            // has header at the top\n            hasHeader: true,\n\n            // Get top 20 lines. Or if there's less than 10 line, get all the lines.\n            topN: [],\n            //names for the columns of this csv\n            columns: [],\n            mapping: {\n                id: \"Unknown\",\n            },\n            delimiter: \",\",\n        } as INodeFileConfig,\n        edgeFile: {\n            isReady: false,\n            parseError: false,\n\n            // should save the csv to temp for further change the cluster attribute\n            path: \"\",\n            hasHeader: true,\n\n            // array of objects storing the\n            topN: [],\n            columns: [],\n            mapping: {\n                fromId: \"Unknown\",\n                toId: \"Unknown\",\n            },\n            delimiter: \",\",\n        } as IEdgeFileConfig,\n\n        clusterFile: {\n            isReady: false,\n            parseError: false,\n\n            // should save the csv to temp for further change the cluster attribute\n            path: \"\",\n            hasHeader: true,\n\n            // array of objects storing the\n            topN: [],\n            columns: [],\n            mapping: {\n                name: \"Unknown\",\n                parent: \"Unknown\",\n            },\n            delimiter: \",\",\n        } as IClusterFileConfig,\n    };\n\n    /**\n     * @description read the CSV file specified by fileObject, with options defined by other paras\n     * and return a list of objects containing the key-value pair of attribute-value\n     * @author Zichen XU\n     * @private\n     * @param {File} fileObject\n     * @param {boolean} hasHeader\n     * @param {string} delimiter\n     * @returns {*}  {Promise<any[]>}\n     *      * where Object is of { attribute: number | string, anotherAttribute: number | string, ... } type\n\n     */\n    private async readCSV(\n        fileObject: File,\n        hasHeader: boolean,\n        delimiter: string\n    ): Promise<any[]> {\n        const file = fileObject;\n        const reader = new FileReader();\n        reader.readAsText(file);\n        return new Promise((resolve, reject) => {\n            reader.onload = () => {\n                let content: any = reader.result;\n                content = content.replace(/\\r\\n/g, \"\\n\");\n                content = content.replace(/\\r/g, \"\\n\");\n                try {\n                    if (hasHeader) {\n                        resolve(\n                            parse(content, {\n                                comment: \"#\",\n                                trim: true,\n                                auto_parse: true,\n                                skip_empty_lines: true,\n                                columns: hasHeader,\n                                delimiter,\n                            })\n                        );\n                    }\n                    resolve(\n                        parse(content, {\n                            comment: \"#\",\n                            trim: true,\n                            auto_parse: true,\n                            skip_empty_lines: true,\n                            columns: undefined,\n                            delimiter,\n                        })\n                    );\n                } catch (err) {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: \" + err.message,\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                }\n            };\n        });\n    }\n\n    /**\n     * @description parse the graph from import GEXF file specified in selectedGEXFFileFromInput\n     * and return a Graph object\n     * @author Zichen XU\n     * @private\n     * @returns {*}  {Promise<Graph>}\n     */\n    private async readGEXF(): Promise<Graph> {\n        const file = this.selectedGEXFFileFromInput;\n        const reader = new FileReader();\n        reader.readAsText(file);\n        return new Promise((resolve, reject) => {\n            reader.onload = () => {\n                try {\n                    resolve(gexf.parse(Graph, reader.result as string));\n                } catch (err) {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: \" + err.message,\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    this.isLoading = false;\n                }\n            };\n        });\n    }\n\n    /**\n     * @description helper function to read edge csv and call this.readCSV()\n     * @author Zichen XU\n     * @returns {*}  {Promise<any[]>}\n     */\n    public readEdgeCSV(): Promise<any[]> {\n        return this.readCSV(\n            this.selectedEdgeFileFromInput,\n            this.importConfig.edgeFile.hasHeader,\n            this.importConfig.edgeFile.delimiter\n        );\n    }\n\n    /**\n     * @description helper function to read node csv and call this.readCSV()\n     * @author Zichen XU\n     * @returns {*}  {Promise<any[]>}\n     */\n    public readNodeCSV(): Promise<any[]> {\n        return this.readCSV(\n            this.selectedNodeFileFromInput,\n            this.importConfig.nodeFile.hasHeader,\n            this.importConfig.nodeFile.delimiter\n        );\n    }\n\n    /**\n     * @description a recursion funtion for translating the cluster information within the root node into a map format\n     * @author Chenghao SHI\n     * @param {d3.HierarchyNode<unknown>} node\n     * @return {*} \n     */\n    public buildClusterMap(node:d3.HierarchyNode<unknown>){\n        if(node.children === undefined){\n            return;\n        }\n        let temparr : string[] = [];\n        node.leaves().forEach((leave)=>{\n            if(leave.id != undefined){\n                temparr.push(leave.id);\n            }           \n        })\n        this.clusterMap?.set(node,temparr);\n        node.children.forEach((child:d3.HierarchyNode<unknown>)=>{\n            this.buildClusterMap(child);\n        })\n    }\n\n    /**\n     * @description helper function for building the map between depths of hierarchy and the color of this depth\n     * @author Chenghao SHI\n     * @param {d3.HierarchyNode<unknown>} node\n     * @return {*} \n     */\n    public buildColorMap(node:d3.HierarchyNode<unknown>){\n        if ( node === undefined){\n            return;\n        }\n        let hierarchylevel = node.height + 1;\n        let colors = randomColor({\n            seed : 1,\n            count : hierarchylevel\n        })\n        let i : number;\n        for(i = 0; i<hierarchylevel; i++){\n            this.colorMap?.set(i,colors[i]);\n        }\n    }\n    /**\n     * @description will create a Graph structure to store the nodes and edges in the imported File\n     * should handle whether or not have the NodeFile, whether or not have the header of each file\n     * if successfully imported, change the .isReady to be true\n     * @author Zichen XU\n     * @returns {*}\n     */\n    public async importGraphFromCSV() {\n        const config = this.importConfig;\n\n        // the CSV lib we use uses int index when there's not header/column names specified\n        const fromColumn = config.edgeFile.hasHeader\n            ? config.edgeFile.mapping.fromId\n            : parseInt(config.edgeFile.mapping.fromId);\n        const toColumn = config.edgeFile.hasHeader\n            ? config.edgeFile.mapping.toId\n            : parseInt(config.edgeFile.mapping.toId);\n\n        let tempNodes: any[] = [];\n        let tempEdges: any[] = [];\n\n        const graph = new Graph({\n            allowSelfLoops: true,\n            multi: false,\n            type: \"undirected\",\n        });\n\n        // parse Node file and store into the Graph DS\n        if (config.hasNodeFile) {\n            if (this.importConfig.nodeFile.hasHeader) {\n                // if has header, then tempNodes returns an array of objects\n                tempNodes = (await this.readNodeCSV()) as Object[];\n                tempNodes.forEach((node) => {\n                    let nodeId = node[config.nodeFile.mapping.id].toString();\n                    delete node[config.nodeFile.mapping.id];\n                    graph.addNode(nodeId, node);\n                });\n            } else {\n                // if no header, then tempNodes returns an array of array\n                tempNodes = (await this.readNodeCSV()) as any[][];\n                tempNodes.forEach((node) => {\n                    let nodeId = node[config.nodeFile.mapping.id].toString();\n                    let attributes = Object.assign({}, node);\n                    delete attributes[config.nodeFile.mapping.id];\n                    graph.addNode(nodeId, attributes);\n                });\n            }\n        }\n\n        // parse Edge file and store into the Graph DS\n        tempEdges = await this.readEdgeCSV();\n        tempEdges.forEach((edge, idx) => {\n            let fromId = edge[fromColumn].toString();\n            let toId = edge[toColumn].toString();\n\n            if (!graph.hasNode(fromId)) {\n                graph.addNode(fromId, {});\n            }\n            if (!graph.hasNode(toId)) {\n                graph.addNode(toId, {});\n            }\n            graph.addEdgeWithKey(idx, fromId, toId);\n        });\n\n        config.edgeFile.isReady = true;\n\n        this.importClusterFromCSV(this.selectedClusterFileFromInput);\n\n        \n\n        let nodeProperties = config.hasNodeFile\n            ? Object.keys(tempNodes[0])\n            : [\"id\"];\n\n        return {\n            graph: graph,\n            metadata: {\n                snapshotName: \"Untitled\",\n                nodeProperties: nodeProperties,\n            } as IMetaData,\n        };\n\n\n\n\n        \n    }\n\n\n    /**\n     * @description will convert import CSV cluster file into tree structure and use it to build clusterMap\n     * @author Chen YANG\n     * @returns {*}\n     */\n    public async importClusterFromCSV(csvFile:Blob){\n        const reader = new FileReader();\n        reader.readAsText(csvFile);\n        \n\n        reader.onload = ()=>{\n            let fileResult = reader.result;\n            if(fileResult != null){\n            \n                \n                const clusterLink = d3.csvParse(fileResult.toString());\n                const clusterRoot = d3.stratify()\n                    .id(function(d:any){return d.name})\n                    .parentId(function(d:any){return d.parent})\n                    (clusterLink);    \n                    \n                this.clustertree = clusterRoot;\n                this.clusterMap = new Map<d3.HierarchyNode<unknown>,string[]>();\n                this.buildClusterMap(this.clustertree);\n                this.colorMap = new Map<number, string>();\n                this.buildColorMap(this.clustertree);\n                \n                console.log(this.clusterMap);\n                console.log(this.colorMap);\n                // console.log(\"test\");\n                // console.log(\".children:\"+clusterRoot.children)\n                console.log(this.clustertree);\n                console.log(\".id:\"+clusterRoot.id);\n                // console.log(\".parent:\"+clusterRoot.parent)\n\n            }\n            \n        }\n    }\n\n\n\n\n\n    /**\n     * @description will create a Graph structure to store the nodes and edges in the imported File\n     * please use try catch to avoid any invalid GEXF file\n     * @author Zichen XU\n     * @returns {*}\n     */\n    public async importGraphFromGEXF() {\n        let graph = await this.readGEXF();\n        let nodeProperties: string[] = [];\n        for (const [key] of Object.entries(\n            graph.getNodeAttributes(graph.nodes()[0])\n        )) {\n            nodeProperties.push(key);\n        }\n\n        return {\n            graph: graph,\n            metadata: {\n                snapshotName: \"Untitled\",\n                nodeProperties: nodeProperties,\n            } as IMetaData,\n        };\n    }\n\n    /**\n     * @description change the importConfig.edgeFile.topN to be the top 10 parsed elements in the input edge file\n     * change the importConfig.edgeFile.columns to be the attributes of the imported edge file\n     * set the .mapping.fromId and .mapping.toId to be the first and second (if have) attribute of the input edge file.\n     *\n     * if successfully parsed, set the .isReady to be true, else set the.parseError\n     *\n     * This function will autorun if user specify the selectedEdgeFileFromInput and the changes that this function will make is to get ready for the rendering of preview Table in the ImportDialog\n     *\n     * @author Zichen XU\n     * @returns {*}\n     */\n    public async renderImportEdgePreview() {\n        let file = this.selectedEdgeFileFromInput;\n        let edgeFileConfig = this.importConfig.edgeFile;\n        let hasHeader = edgeFileConfig.hasHeader;\n        let delimiter = edgeFileConfig.delimiter;\n\n        edgeFileConfig.parseError = false;\n\n        return new Promise<void>((resolve, reject): void => {\n            if (!file) {\n                return;\n            }\n            const reader = new FileReader();\n            reader.readAsText(file);\n\n            reader.onload = () => {\n                // Read entire CSV into memory as string\n                let fileAsString = reader.result as string;\n\n                // if the file is not regularly formatted, replace the EOL character\n                fileAsString = fileAsString.replace(/\\r\\n/g, \"\\n\");\n                fileAsString = fileAsString.replace(/\\r/g, \"\\n\");\n\n                // Get top 10 lines. Or if there's less than 10 line, get all the lines.\n                const lines = fileAsString.split(\"\\n\");\n                const topLinesAsString = lines\n                    .map((l) => l.trim())\n                    .slice(0, lines.length < 10 ? lines.length : 10)\n                    .join(\"\\n\");\n                console.log(topLinesAsString);\n\n                // Parse the top lines\n                try {\n                    const it = hasHeader\n                        ? parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: hasHeader,\n                              delimiter: delimiter,\n                          })\n                        : parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: undefined,\n                              delimiter: delimiter,\n                          });\n                    edgeFileConfig.topN = it;\n                    edgeFileConfig.columns = Object.keys(it[0]).map(\n                        (key) => `${key}`\n                    );\n\n                    // if there exists two or more columns in the parsed edge file\n                    if (edgeFileConfig.columns.length >= 2) {\n                        edgeFileConfig.mapping.fromId =\n                            edgeFileConfig.columns[0];\n                        edgeFileConfig.mapping.toId = edgeFileConfig.columns[1];\n                        edgeFileConfig.isReady = true;\n                    } else if (edgeFileConfig.columns.length === 1) {\n                        edgeFileConfig.mapping.fromId = edgeFileConfig.mapping.toId =\n                            edgeFileConfig.columns[0];\n                        edgeFileConfig.isReady = true;\n                    } else {\n                        Toaster.create({\n                            position: Position.TOP,\n                        }).show({\n                            message: \"Error: Fails to parse file\",\n                            intent: Intent.DANGER,\n                            timeout: -1,\n                        });\n                        edgeFileConfig.parseError = true;\n                    }\n                    resolve();\n                } catch {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: Fails to parse file\",\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    edgeFileConfig.parseError = true;\n                    reject();\n                }\n            };\n\n            reader.onerror = () => {\n                console.error(reader.error);\n                Toaster.create({\n                    position: Position.TOP,\n                }).show({\n                    action: {\n                        onClick: () => window.location.reload(),\n                        text: \"Refresh Page\",\n                    },\n                    message: \"Error: Fails to open file\",\n                    intent: Intent.DANGER,\n                    timeout: -1,\n                });\n                reject();\n            };\n        });\n    }\n\n    /**\n     * @description change the importConfig.nodeFile.topN to be the top 10 parsed elements in the input node file\n     * change the importConfig.nodeFile.columns to be the attributes of the imported node file\n     * set the .mapping.id .mapping.cluster to be the first and second (if have) attribute of the input edge file.\n     *\n     * if successfully parsed, set the .isReady to be true, else set the.parseError\n     *\n     * This function will autorun if user specify the selectedNodeFileFromInput and the changes that this function will make is to get ready for the rendering of preview Table in the ImportDialog\n\n     * @author Zichen XU\n     * @returns {*} \n     */\n    public async renderImportNodePreview() {\n        let file = this.selectedNodeFileFromInput;\n        let nodeFileConfig = this.importConfig.nodeFile;\n        let hasHeader = nodeFileConfig.hasHeader;\n        let delimiter = nodeFileConfig.delimiter;\n\n        nodeFileConfig.parseError = false;\n\n        return new Promise<void>((resolve, reject): void => {\n            if (!file) {\n                return;\n            }\n            const reader = new FileReader();\n            reader.readAsText(file);\n\n            reader.onload = () => {\n                // Read entire CSV into memory as string\n                let fileAsString = reader.result as string;\n\n                // if the file is not regularly formatted, replace the EOL character\n                fileAsString = fileAsString.replace(/\\r\\n/g, \"\\n\");\n                fileAsString = fileAsString.replace(/\\r/g, \"\\n\");\n\n                // Get top 10 lines. Or if there's less than 10 line, get all the lines.\n                const lines = fileAsString.split(\"\\n\");\n                const topLinesAsString = lines\n                    .map((l) => l.trim())\n                    .slice(0, lines.length < 10 ? lines.length : 10)\n                    .join(\"\\n\");\n                console.log(topLinesAsString);\n\n                // Parse the top lines\n                try {\n                    const it = hasHeader\n                        ? parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: hasHeader,\n                              delimiter,\n                          })\n                        : parse(topLinesAsString, {\n                              comment: \"#\",\n                              trim: true,\n                              auto_parse: true,\n                              skip_empty_lines: true,\n                              columns: undefined,\n                              delimiter,\n                          });\n                    nodeFileConfig.topN = it;\n                    nodeFileConfig.columns = Object.keys(it[0]).map(\n                        (key) => `${key}`\n                    );\n\n                    // if there exists two or more columns in the parsed edge file\n                    if (nodeFileConfig.columns.length >= 1) {\n                        nodeFileConfig.mapping.id = nodeFileConfig.columns[0];\n                        nodeFileConfig.isReady = true;\n                    } else {\n                        Toaster.create({\n                            position: Position.TOP,\n                        }).show({\n                            message: \"Error: Fails to parse file\",\n                            intent: Intent.DANGER,\n                            timeout: -1,\n                        });\n                        nodeFileConfig.parseError = true;\n                    }\n                    resolve();\n                } catch {\n                    Toaster.create({\n                        position: Position.TOP,\n                    }).show({\n                        message: \"Error: Fails to parse file\",\n                        intent: Intent.DANGER,\n                        timeout: -1,\n                    });\n                    nodeFileConfig.parseError = true;\n                    reject();\n                }\n            };\n\n            reader.onerror = () => {\n                console.error(reader.error);\n                Toaster.create({\n                    position: Position.TOP,\n                }).show({\n                    action: {\n                        onClick: () => window.location.reload(),\n                        text: \"Refresh Page\",\n                    },\n                    message: \"Error: Fails to open file\",\n                    intent: Intent.DANGER,\n                    timeout: -1,\n                });\n                reject();\n            };\n        });\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport State from \".\";\n\n/**\n * @description this file is the backend support for the NodeSearch feature\n * and will compute the possible searching candidates according to the query parameters\n * @author Zichen XU\n * @export\n * @class SearchStore\n */\nexport default class SearchStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * @description if is previewing, ignore all mouse hovers detected by NodeDetailPanel\n     * because it is showing the detail of selected node\n     * @author Zichen XU\n     */\n    isPreviewing = false;\n\n    /**\n     * @description the search string typed in by user\n     * can use defined regex like:\n     * id:123\n     * attr:color:red\n     * @author Zichen XU\n     */\n    searchStr = \"\";\n\n    /**\n     * @description if filter search is selected\n     * null will be to search on id, and others will be to search based on that attribute value\n     * @author Zichen XU\n     * @type {(string | null)}\n     */\n    filterProps: string | null = null;\n\n    // contains node ids\n\n    /**\n     * @description compute a list of nodeids queried by the searchStr\n     * @author Zichen XU\n     * @type {string[]}\n     */\n    get candidates(): string[] {\n        let outputList: string[] = [];\n        let searchStrIgnoreCase = this.searchStr.toLocaleLowerCase();\n        if (this.filterProps === null) {\n            // search on id\n            State.graph.rawGraph.forEachNode((node) => {\n                if (node.toLocaleLowerCase().includes(searchStrIgnoreCase)) {\n                    outputList.push(node);\n                }\n            });\n        } else {\n            // have specify the attribute\n            const searchAttr = this.filterProps as string;\n            State.graph.rawGraph.forEachNode((node, attributes) => {\n                if (attributes.hasOwnProperty(searchAttr)) {\n                    let attribute = attributes[searchAttr];\n                    if (\n                        attribute\n                            .toString()\n                            .toLocaleLowerCase()\n                            .includes(searchStrIgnoreCase)\n                    ) {\n                        outputList.push(node);\n                    }\n                }\n            });\n        }\n        return outputList;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\nimport * as THREE from \"three\";\nimport randomcolor from \"randomcolor\";\nimport State from \".\";\n\n/**\n * this store handles the cluster generating according to the clusterBy defined by user\n * by applying the computed value in MobX\n * the keyAttributes, getAttributeValues, attributeKeys, attributeColor and attributePoints will auto-compute accordingly in code reference order\n * and ultimately produce a mapping from (the cluster value) to (a array of node points)\n * which shall be used by Cluster3DObjectStore to compute the 3D-convex hull used in the 3d-renderer\n *\n * @export\n * @class ClusterStore\n */\nexport default class ClusterStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * @description specify which attribute to be clustered\n     * the default value should be null, and front-end graph will interpret this to Not-Cluster\n     *\n     * @summary attention: please use setCluster() to alter this data\n     * @author Zichen XU\n     * @type {(string | null)}\n     */\n    clusterBy: string | null = null;\n\n    /**\n     * @description specify which level of clusters are shown\n     * @author Chenghao SHI\n     * @type {string}\n     */\n    showlevel: string | null = \"None\";\n\n    /**\n     * @description the setter of clusterBy\n     * will update the front-end 3d graph about the cluster changes\n     * @author Zichen XU\n     * @param {(string | null)} to\n     * @param {boolean} [forceUpdate=false]\n     */\n    setCluster(to: string | null, forceUpdate: boolean = false) {\n        if (forceUpdate) {\n            this.setCluster(null);\n            this.setCluster(to);\n        } else {\n            this.clusterBy = to;\n            State.graphDelegate.clusterObject.initEmptyMapAndFusion();\n            State.graph.refreshGraph();\n            State.graph.rawGraph.setAttribute(\"default\", to);\n        }\n    }\n\n    /**\n     * @computed\n     * @description a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the id of a Node -> the value of the attribute specified by $clusterBy]\n     * @author Zichen XU\n     * @readonly\n     * @type {(Map<string, string | number>)}\n     */\n    get keyAttribute(): Map<string, string | number> {\n        const keyValueMap = new Map<string, string | number>();\n        if (this.clusterBy === null) {\n            return keyValueMap;\n        }\n        const attribute = this.clusterBy as string;\n\n        State.graph.rawGraph.forEachNode((key, attributes) => {\n            // if this attribute is defined\n            if (attributes.hasOwnProperty(attribute)) {\n                if (attributes[attribute] === \"\") {\n                    // ignore those which empty attribute\n                } else {\n                    keyValueMap.set(key, attributes[attribute]);\n                }\n            } else {\n                // this attribute is undefined in this node\n            }\n        });\n        return keyValueMap;\n    }\n\n    /**\n     * @computed\n     * @description the possible attribute values of the attribute defined by $clusterBy\n     * @author Zichen XU\n     * @readonly\n     * @type {((string | number)[])}\n     */\n    get getAttributeValues(): (string | number)[] {\n        return Array.from(new Set(this.keyAttribute.values()));\n    }\n\n    /**\n     * @computed\n     * @description a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> a list of Node ids]\n     * @author Zichen XU\n     * @readonly\n     * @type {(Map<string | number, string[]>)}\n     */\n    get attributeKeys(): Map<string | number, string[]> {\n        const attributeKeysMap = new Map<string | number, string[]>();\n        this.getAttributeValues.forEach((value) => {\n            attributeKeysMap.set(value, []);\n        });\n        this.keyAttribute.forEach((value, key) => {\n            attributeKeysMap.get(value)?.push(key);\n        });\n        return attributeKeysMap;\n    }\n\n    /**\n     * @computed\n     * @description a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> the random colour of this cluster]\n     * used to avoid re-compute the colours on every frame refresh\n     * @author Zichen XU\n     * @readonly\n     * @type {(Map<string | number, string>)}\n     */\n    get attributeColor(): Map<string | number, string> {\n        let colors = randomcolor({\n            seed: 1,\n            count: this.getAttributeValues.length,\n        });\n        let position = 0;\n        let map = new Map<string | number, string>();\n        this.getAttributeValues.forEach((attribute) => {\n            map.set(attribute, colors[position++]);\n        });\n        return map;\n    }\n\n    /**\n     * @computed\n     * @description a auto computed map\n     * will auto-update if $rawGraph or $clusterBy is changed\n     * [the possible values of the attribute specified by $clusterBy -> the Nodes points in that cluster]\n     * will change on every frame refresh as the Node's position keeps changing.\n     * @author Zichen XU\n     * @readonly\n     * @type {(Map<string | number, THREE.Vector3[]>)}\n     */\n    get attributePoints(): Map<string | number, THREE.Vector3[]> {\n        let map = new Map<string | number, THREE.Vector3[]>();\n        this.getAttributeValues.forEach((attribute) => {\n            let vectorList: THREE.Vector3[] = [];\n            map.set(attribute, vectorList);\n        });\n        State.graph.rawGraph.forEachNode((key, attributes) => {\n            map.get(this.keyAttribute.get(key) as string | number)?.push(\n                new THREE.Vector3(\n                    attributes._visualize.x,\n                    attributes._visualize.y,\n                    attributes._visualize.z\n                )\n            );\n        });\n        return map;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\n\n/**\n * @description the global configurations for the css of all nodes\n * @author Zichen XU\n * @class NodeGlobalConfig\n */\nclass NodeGlobalConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n    defaultColor: string = \"#808080\";\n    chosenColor: string = \"#ffffAA\";\n    multiSelectedColor: string = \"#ffffff\";\n    highlightColor: string = \"#ff6060\";\n\n    resolution = 12;\n\n    size = 4;\n}\n\n/**\n * @description the global configurations for the css of all edges\n * @author Zichen XU\n * @class EdgeGlobalConfig\n */\nclass EdgeGlobalConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    defaultColor = \"#ffffff\";\n    selectedColor = \"#ffff00\";\n    highlightColor = \"#ff8E8E\";\n\n    defaultWidth: number = 1;\n\n    highlightWidth: number = 2;\n\n    resolution = 6;\n}\n/**\n * @description the global configurations for the css of all labels\n * @author Zichen XU\n * @class LabelConfig\n */\nclass LabelConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    show = true;\n    color = \"#d3d3d3\";\n    size = 4;\n}\n/**\n * @description the global configurations for the css of all clusters\n * @author Zichen XU\n * @class ClusterConfig\n */\nclass ClusterConfig {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    autoPlot = false;\n    clusterForce = 30;\n    normalForce = 50;\n    resolution = 10;\n    shape: \"convexHull\" | \"sphere\" = \"sphere\";\n}\n\n/**\n * @description as the name indicates, it stores the customized style of Nodes/Edges/Label/Clusters\n * and any change on it should then call State.graphDelegate.graphDelegateMethods.refresh() to apply changes\n * @author Zichen XU, Zhiyuan LYU\n * @export\n * @class CssStore\n */\nexport default class CssStore {\n    constructor() {\n        makeAutoObservable(this);\n        this.node = new NodeGlobalConfig();\n        this.edge = new EdgeGlobalConfig();\n        this.label = new LabelConfig();\n        this.cluster = new ClusterConfig();\n    }\n\n    node!: NodeGlobalConfig;\n\n    edge!: EdgeGlobalConfig;\n\n    label!: LabelConfig;\n\n    cluster!: ClusterConfig;\n\n    isAnimating: boolean = true;\n}\n","import convert from \"xml-js\";\n\nexport const GITHUB_URL = \"\";\n\nexport const SAMPLE_GRAPH_SNAPSHOTS = [\n    [\n        \"Les Miserables\",\n        \"source,target,value\\rNapoleon,Myriel,1\\rMlle.Baptistine,Myriel,8\\rMme.Magloire,Myriel,10\\rMme.Magloire,Mlle.Baptistine,6\\rCountessdeLo,Myriel,1\\rGeborand,Myriel,1\\rChamptercier,Myriel,1\\rCravatte,Myriel,1\\rCount,Myriel,2\\rOldMan,Myriel,1\\rValjean,Labarre,1\\rValjean,Mme.Magloire,3\\rValjean,Mlle.Baptistine,3\\rValjean,Myriel,5\\rMarguerite,Valjean,1\\rMme.deR,Valjean,1\\rIsabeau,Valjean,1\\rGervais,Valjean,1\\rListolier,Tholomyes,4\\rFameuil,Tholomyes,4\\rFameuil,Listolier,4\\rBlacheville,Tholomyes,4\\rBlacheville,Listolier,4\\rBlacheville,Fameuil,4\\rFavourite,Tholomyes,3\\rFavourite,Listolier,3\\rFavourite,Fameuil,3\\rFavourite,Blacheville,4\\rDahlia,Tholomyes,3\\rDahlia,Listolier,3\\rDahlia,Fameuil,3\\rDahlia,Blacheville,3\\rDahlia,Favourite,5\\rZephine,Tholomyes,3\\rZephine,Listolier,3\\rZephine,Fameuil,3\\rZephine,Blacheville,3\\rZephine,Favourite,4\\rZephine,Dahlia,4\\rFantine,Tholomyes,3\\rFantine,Listolier,3\\rFantine,Fameuil,3\\rFantine,Blacheville,3\\rFantine,Favourite,4\\rFantine,Dahlia,4\\rFantine,Zephine,4\\rFantine,Marguerite,2\\rFantine,Valjean,9\\rMme.Thenardier,Fantine,2\\rMme.Thenardier,Valjean,7\\rThenardier,Mme.Thenardier,13\\rThenardier,Fantine,1\\rThenardier,Valjean,12\\rCosette,Mme.Thenardier,4\\rCosette,Valjean,31\\rCosette,Tholomyes,1\\rCosette,Thenardier,1\\rJavert,Valjean,17\\rJavert,Fantine,5\\rJavert,Thenardier,5\\rJavert,Mme.Thenardier,1\\rJavert,Cosette,1\\rFauchelevent,Valjean,8\\rFauchelevent,Javert,1\\rBamatabois,Fantine,1\\rBamatabois,Javert,1\\rBamatabois,Valjean,2\\rPerpetue,Fantine,1\\rSimplice,Perpetue,2\\rSimplice,Valjean,3\\rSimplice,Fantine,2\\rSimplice,Javert,1\\rScaufflaire,Valjean,1\\rWoman1,Valjean,2\\rWoman1,Javert,1\\rJudge,Valjean,3\\rJudge,Bamatabois,2\\rChampmathieu,Valjean,3\\rChampmathieu,Judge,3\\rChampmathieu,Bamatabois,2\\rBrevet,Judge,2\\rBrevet,Champmathieu,2\\rBrevet,Valjean,2\\rBrevet,Bamatabois,1\\rChenildieu,Judge,2\\rChenildieu,Champmathieu,2\\rChenildieu,Brevet,2\\rChenildieu,Valjean,2\\rChenildieu,Bamatabois,1\\rCochepaille,Judge,2\\rCochepaille,Champmathieu,2\\rCochepaille,Brevet,2\\rCochepaille,Chenildieu,2\\rCochepaille,Valjean,2\\rCochepaille,Bamatabois,1\\rPontmercy,Thenardier,1\\rBoulatruelle,Thenardier,1\\rEponine,Mme.Thenardier,2\\rEponine,Thenardier,3\\rAnzelma,Eponine,2\\rAnzelma,Thenardier,2\\rAnzelma,Mme.Thenardier,1\\rWoman2,Valjean,3\\rWoman2,Cosette,1\\rWoman2,Javert,1\\rMotherInnocent,Fauchelevent,3\\rMotherInnocent,Valjean,1\\rGribier,Fauchelevent,2\\rMme.Burgon,Jondrette,1\\rGavroche,Mme.Burgon,2\\rGavroche,Thenardier,1\\rGavroche,Javert,1\\rGavroche,Valjean,1\\rGillenormand,Cosette,3\\rGillenormand,Valjean,2\\rMagnon,Gillenormand,1\\rMagnon,Mme.Thenardier,1\\rMlle.Gillenormand,Gillenormand,9\\rMlle.Gillenormand,Cosette,2\\rMlle.Gillenormand,Valjean,2\\rMme.Pontmercy,Mlle.Gillenormand,1\\rMme.Pontmercy,Pontmercy,1\\rMlle.Vaubois,Mlle.Gillenormand,1\\rLt.Gillenormand,Mlle.Gillenormand,2\\rLt.Gillenormand,Gillenormand,1\\rLt.Gillenormand,Cosette,1\\rMarius,Mlle.Gillenormand,6\\rMarius,Gillenormand,12\\rMarius,Pontmercy,1\\rMarius,Lt.Gillenormand,1\\rMarius,Cosette,21\\rMarius,Valjean,19\\rMarius,Tholomyes,1\\rMarius,Thenardier,2\\rMarius,Eponine,5\\rMarius,Gavroche,4\\rBaronessT,Gillenormand,1\\rBaronessT,Marius,1\\rMabeuf,Marius,1\\rMabeuf,Eponine,1\\rMabeuf,Gavroche,1\\rEnjolras,Marius,7\\rEnjolras,Gavroche,7\\rEnjolras,Javert,6\\rEnjolras,Mabeuf,1\\rEnjolras,Valjean,4\\rCombeferre,Enjolras,15\\rCombeferre,Marius,5\\rCombeferre,Gavroche,6\\rCombeferre,Mabeuf,2\\rProuvaire,Gavroche,1\\rProuvaire,Enjolras,4\\rProuvaire,Combeferre,2\\rFeuilly,Gavroche,2\\rFeuilly,Enjolras,6\\rFeuilly,Prouvaire,2\\rFeuilly,Combeferre,5\\rFeuilly,Mabeuf,1\\rFeuilly,Marius,1\\rCourfeyrac,Marius,9\\rCourfeyrac,Enjolras,17\\rCourfeyrac,Combeferre,13\\rCourfeyrac,Gavroche,7\\rCourfeyrac,Mabeuf,2\\rCourfeyrac,Eponine,1\\rCourfeyrac,Feuilly,6\\rCourfeyrac,Prouvaire,3\\rBahorel,Combeferre,5\\rBahorel,Gavroche,5\\rBahorel,Courfeyrac,6\\rBahorel,Mabeuf,2\\rBahorel,Enjolras,4\\rBahorel,Feuilly,3\\rBahorel,Prouvaire,2\\rBahorel,Marius,1\\rBossuet,Marius,5\\rBossuet,Courfeyrac,12\\rBossuet,Gavroche,5\\rBossuet,Bahorel,4\\rBossuet,Enjolras,10\\rBossuet,Feuilly,6\\rBossuet,Prouvaire,2\\rBossuet,Combeferre,9\\rBossuet,Mabeuf,1\\rBossuet,Valjean,1\\rJoly,Bahorel,5\\rJoly,Bossuet,7\\rJoly,Gavroche,3\\rJoly,Courfeyrac,5\\rJoly,Enjolras,5\\rJoly,Feuilly,5\\rJoly,Prouvaire,2\\rJoly,Combeferre,5\\rJoly,Mabeuf,1\\rJoly,Marius,2\\rGrantaire,Bossuet,3\\rGrantaire,Enjolras,3\\rGrantaire,Combeferre,1\\rGrantaire,Courfeyrac,2\\rGrantaire,Joly,2\\rGrantaire,Gavroche,1\\rGrantaire,Bahorel,1\\rGrantaire,Feuilly,1\\rGrantaire,Prouvaire,1\\rMotherPlutarch,Mabeuf,3\\rGueulemer,Thenardier,5\\rGueulemer,Valjean,1\\rGueulemer,Mme.Thenardier,1\\rGueulemer,Javert,1\\rGueulemer,Gavroche,1\\rGueulemer,Eponine,1\\rBabet,Thenardier,6\\rBabet,Gueulemer,6\\rBabet,Valjean,1\\rBabet,Mme.Thenardier,1\\rBabet,Javert,2\\rBabet,Gavroche,1\\rBabet,Eponine,1\\rClaquesous,Thenardier,4\\rClaquesous,Babet,4\\rClaquesous,Gueulemer,4\\rClaquesous,Valjean,1\\rClaquesous,Mme.Thenardier,1\\rClaquesous,Javert,1\\rClaquesous,Eponine,1\\rClaquesous,Enjolras,1\\rMontparnasse,Javert,1\\rMontparnasse,Babet,2\\rMontparnasse,Gueulemer,2\\rMontparnasse,Claquesous,2\\rMontparnasse,Valjean,1\\rMontparnasse,Gavroche,1\\rMontparnasse,Eponine,1\\rMontparnasse,Thenardier,1\\rToussaint,Cosette,2\\rToussaint,Javert,1\\rToussaint,Valjean,1\\rChild1,Gavroche,2\\rChild2,Gavroche,2\\rChild2,Child1,3\\rBrujon,Babet,3\\rBrujon,Gueulemer,3\\rBrujon,Thenardier,3\\rBrujon,Gavroche,1\\rBrujon,Eponine,1\\rBrujon,Claquesous,1\\rBrujon,Montparnasse,1\\rMme.Hucheloup,Bossuet,1\\rMme.Hucheloup,Joly,1\\rMme.Hucheloup,Grantaire,1\\rMme.Hucheloup,Bahorel,1\\rMme.Hucheloup,Courfeyrac,1\\rMme.Hucheloup,Gavroche,1\\rMme.Hucheloup,Enjolras,1\",\n    ],\n    [\"COVID-19 Citation Graph 06-02\", \"../samples/json/a.json\"],\n];\n\nexport async function fetchSampleGraph(url: string) {\n    try {\n        let response = await fetch(url, { mode: \"no-cors\" });\n        let gexfJson = await response.json();\n        return new File([convert.json2xml(gexfJson)], \"sample.gexf\", {\n            type: \"text/xml\",\n        });\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const NAVBAR_HEIGHT = 50;\n\nexport const NODE_AND_EDGE_FILE = \"import both nodes and edges file\";\nexport const ONLY_EDGE_FILE = \"only import edges file\";\n\nexport const COLOR_LIST = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32,\n};\n","import { makeAutoObservable } from \"mobx\";\nimport * as THREE from \"three\";\nimport { polygonContains } from \"d3-polygon\";\nimport State from \".\";\nimport * as d3 from \"d3\";\nimport { Column } from \"@blueprintjs/table\";\nimport { curryRight } from \"lodash\";\n\nexport enum DrawMode {\n    StraightLine,\n    FreeLine,\n    FreeCircle,\n    CenterCircle,\n}\n\n/**\n * @description the cluster-mouse-interaction related filed and functions are hereby written in this class\n * such as `currentlyHoveredClusterId`, `selectedCluster` and `selectedClusters`,\n * these selection should be `flush()` after using(or before entering another interaction mode)\n * the callback functions of mouse events are presented as well to handle events like hover/left/rightClick.\n * There are also helper methods to deal with features like mergeCluster and SplitCluster.\n *\n * In the cluster splitting procedure, after user draw a curved link,\n * the segment of that line will be stored in the `lineSegment` and `computeSplitCluster` will be called to compute the two stack of split nodes,\n * the result will be stored inside `confirmClusterSplittingTempData` waiting for the final `splitCluster()` function to confirm this operation\n * @author Zichen XU\n * @export\n * @class ClusterInteractionStore\n *\n */\nexport default class ClusterInteractionStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * @description the cluster UUID (assigned by THREE.js) of the hovered cluster\n     * @author Zichen XU\n     * @type {(string | null)}\n     */\n\n    currentlyHoveredClusterId: string | null = null;\n\n    /**\n     * @description the selected Cluster UUID used in choosing which cluster to be split\n     * @author Zichen XU\n     * @type {(string | null)}\n     */\n    chosenCluster: string | null = null;\n\n    /**\n     * @description the selected Clusters UUID used in choosing which clusters to be merged\n     * @author Zichen XU\n     * @type {string[]}\n     */\n    selectedClusters: string[] = [];\n\n    /**\n     * @description flush the above fields in situations like switching VisualizationMode\n     * re-import or after graph mutation\n     * @author Zichen XU\n     */\n    flush() {\n        this.currentlyHoveredClusterId = null;\n        this.chosenCluster = null;\n        this.selectedClusters = [];\n    }\n\n    /**\n     * @description this will only be active in the ClusterSelection and ClusterSplit\n     * it will set the selectedCluster and add/remove this cluster in the selectedClusters list\n     * @author Zichen XU\n     * @param {string} uuid uuid of the custer on left-click\n     * @param {MouseEvent} event\n     */\n    clusterLeftClickCallback(uuid: string, event: MouseEvent) {\n        if (State.signal.isMovingCamera) return;\n        State.graphDelegate.clusterObject.meshSpotlightMaterial(\n            State.graphDelegate.clusterObject.getObjectById(uuid) as THREE.Mesh\n        );\n        // multi-selection\n        let index;\n\n        State.clusterInteraction.chosenCluster = uuid;\n\n        // if already in the list of selected, remove\n        if (\n            (index = State.clusterInteraction.selectedClusters.indexOf(\n                uuid\n            )) !== -1\n        ) {\n            State.clusterInteraction.selectedClusters.splice(index, 1);\n        } else {\n            // if not in the list, add\n            State.clusterInteraction.selectedClusters.push(uuid);\n        }\n    }\n\n    /**\n     * @description this will only be active in the ClusterSelection and ClusterSplit\n     * it will set the currentlyHoveredClusterId to this cluster\n     * @author Zichen XU\n     * @param {(string | null)} uuid of the custer on mouse hover\n     * @param {MouseEvent} event\n     */\n    clusterHoverCallback(uuid: string | null, event: MouseEvent) {\n        State.clusterInteraction.currentlyHoveredClusterId = uuid;\n    }\n\n    /**\n     * @description this will only be active in the ClusterSelection\n     * it will set the selectedCluster to this cluster and open the rightClickPanel\n     * @author Zichen XU\n     * @param {(string | null)} uuid of the custer on mouse hover\n     * @param {MouseEvent} event\n     */\n    clusterRightClickCallback(uuid: string | null, event: MouseEvent) {\n        State.signal.isRightClickingCluster = true;\n\n        State.clusterInteraction.chosenCluster = uuid;\n        State.preferences.rightClickPositionX = event.x;\n        State.preferences.rightClickPositionY = event.y;\n        // if selected cluster is not in the list, then add\n        if (uuid) {\n            if (!this.selectedClusters.includes(uuid)) {\n                this.selectedClusters.push(uuid);\n            }\n            State.preferences.rightClickOn = \"Cluster\";\n        } else {\n            State.preferences.rightClickOn = \"Background\";\n        }\n        State.preferences.rightClickPanelOpen = true;\n        State.preferences.closeAllPanel(\"rightClickPanel\");\n    }\n\n    /**\n     * @description loop through the selected clusters and set the nodes within that cluster\n     * @author Zichen XU\n     */\n    releaseSelectedClusters() {\n        if (\n            this.selectedClusters.length === 0 &&\n            this.currentlyHoveredClusterId\n        ) {\n            this.selectedClusters.push(this.currentlyHoveredClusterId);\n        }\n        this.selectedClusters.forEach((uuid) => {\n            const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n                uuid\n            ) as string | number;\n            const keys = State.cluster.attributeKeys.get(clusterValue);\n            keys?.forEach((nodeId) => {\n                State.graph.rawGraph.setNodeAttribute(\n                    nodeId,\n                    State.cluster.clusterBy as string,\n                    \"\"\n                );\n            });\n        });\n        State.cluster.setCluster(State.cluster.clusterBy, true);\n        this.flush();\n    }\n\n    /* --------------- The below content is for cluster splitting --------------- */\n\n    /**\n     * @description whether the drawing panel used in ClusterSplit is active\n     * @author Zichen XU\n     * @type {boolean}\n     */\n    drawPanelActivate: boolean = false;\n\n    /**\n     * @description whether to draw a straight line or a curved line when clustering\n     *\n     * @author Zichen XU\n     * @type {boolean}\n     */\n    drawMode: DrawMode = DrawMode.FreeLine;\n\n    /**\n     * @description the line segments returned by drawing a line\n     * it has the left/right-top points as well to form a polygon\n     * @author Zichen XU\n     * @type {any[]}\n     */\n    lineSegment!: any[];\n\n    /**\n     * @description the temp data returned by splitting the cluster\n     * the value attribute is either 0 or 1 to form two clusters\n     * this data is saved to preview the split to user and wait for final confirmation\n     * @author Zichen XU\n     * @type {({\n     *               value: number;\n     *               id: string;\n     *               x: number;\n     *               y: number;\n     *           }[]\n     *         | null)}\n     */\n    confirmClusterSplittingTempData:\n        | {\n              value: number;\n              id: string;\n              x: number;\n              y: number;\n          }[]\n        | null = null;\n\n    /**\n     * @description compute the clusterSplittingTempData based on the lineSegment data\n     * using the polygonContains to determine which node is in selection\n     * the value attribute is either 0 or 1 to form two clusters\n     * this data is saved to preview the split to user and wait for final confirmation\n     * @author Zichen XU\n     */\n    computeSplitCluster() {\n        let screenCoords = [] as {\n            id: string;\n            x: number;\n            y: number;\n            value: number;\n        }[];\n        const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n            State.clusterInteraction.chosenCluster as string\n        );\n        let keys = State.cluster.attributeKeys.get(clusterValue!) as string[];\n        keys.forEach((node) => {\n            let attribute = State.graph.rawGraph.getNodeAttributes(node);\n            let coord = State.graphDelegate.graphDelegateMethods.graph2ScreenCoords(\n                attribute._visualize.x,\n                attribute._visualize.y,\n                attribute._visualize.z\n            );\n            screenCoords.push({ id: node, x: coord.x, y: coord.y, value: 0 });\n        });\n\n        let tempLineSegment: [number, number][] = this.lineSegment.map(\n            (value) => {\n                return [value.x, value.y];\n            }\n        );\n\n        screenCoords.forEach((point) => {\n            let inside = polygonContains(tempLineSegment, [point.x, point.y]);\n\n            if (inside) {\n                State.interaction.updateNodeVisualizeAttribute(point.id, {\n                    hovered: true,\n                });\n                point.value = 1;\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(point.id, {\n                    hovered: false,\n                });\n                point.value = 0;\n            }\n        });\n\n        State.graphDelegate.graphDelegateMethods.refresh();\n        this.confirmClusterSplittingTempData = screenCoords;\n    }\n\n    computeSplitClusterInCircle(\n        centerX: number,\n        centerY: number,\n        radius: number\n    ) {\n        let screenCoords = [] as {\n            id: string;\n            x: number;\n            y: number;\n            value: number;\n        }[];\n        const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n            State.clusterInteraction.chosenCluster as string\n        );\n        let keys = State.cluster.attributeKeys.get(clusterValue!) as string[];\n        keys.forEach((node) => {\n            let attribute = State.graph.rawGraph.getNodeAttributes(node);\n            let coord = State.graphDelegate.graphDelegateMethods.graph2ScreenCoords(\n                attribute._visualize.x,\n                attribute._visualize.y,\n                attribute._visualize.z\n            );\n            screenCoords.push({ id: node, x: coord.x, y: coord.y, value: 0 });\n        });\n\n        screenCoords.forEach((point) => {\n            let distance = Math.sqrt(\n                Math.pow(point.x - centerX, 2) + Math.pow(point.y - centerY, 2)\n            );\n\n            if (distance < radius) {\n                // in the drawn area\n                State.interaction.updateNodeVisualizeAttribute(point.id, {\n                    hovered: true,\n                });\n                point.value = 1;\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(point.id, {\n                    hovered: false,\n                });\n                point.value = 0;\n            }\n        });\n\n        State.graphDelegate.graphDelegateMethods.refresh();\n        this.confirmClusterSplittingTempData = screenCoords;\n    }\n\n    /**\n     * @description this will be called when user confirm the cluster split\n     * it will set the attribute of these two groups to be different\n     * and clear the tempData\n     * @author Zichen XU\n     * @param {string} attribute\n     * @param {(number | string)} valueInWhite\n     * @param {(number | string)} valueInRed\n     */\n    splitCluster(\n        attribute: string,\n        valueInWhite: number | string,\n        valueInRed: number | string\n    ) {\n        const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n            this.chosenCluster as string\n        ) as string | number;\n        const nodesToAlter = State.cluster.attributeKeys.get(\n            clusterValue\n        ) as string[];\n        this.confirmClusterSplittingTempData?.forEach((node) => {\n            if (nodesToAlter.includes(node.id)) {\n                State.graph.rawGraph.setNodeAttribute(\n                    node.id,\n                    attribute,\n                    node.value === 1 ? valueInRed : valueInWhite\n                );\n            }\n        });\n        this.confirmClusterSplittingTempData = null;\n        State.cluster.setCluster(attribute, true);\n    }\n\n    hierarchicalMergeCluster(selected : string[]){   \n\n        if(selected === null || undefined){\n            return;\n        }\n        // console.log(State.import.clusterMap);\n        let depth = State.import.clustertree?.find((node:d3.HierarchyNode<unknown>)=>{return node.id === selected[0]})?.depth;\n        let newclustername : string = '';\n        let i : number;\n        let newchildren : d3.HierarchyNode<unknown>[] = [];\n        for(i=0; i<selected.length; i++){\n            newclustername = `${newclustername}-${selected[i]}`;\n        }\n \n        let newclusternodes : string[] = [];\n        for(i=0; i<selected.length; i++){\n            let currentNode = State.import.clustertree?.find((node:d3.HierarchyNode<unknown>)=>{return node.id === selected[i]});\n            // console.log(currentNode);\n            if(currentNode===undefined){\n                return;\n            }\n            newclusternodes=newclusternodes.concat(State.import.clusterMap?.get(currentNode) as string[]);\n            console.log(newclusternodes);\n            if(currentNode.children!=undefined){\n                newchildren = newchildren.concat(currentNode.children);\n                // console.log(newchildren);\n            }\n            State.import.clusterMap?.delete(currentNode);\n        }\n\n        let arr = \"name,parent\\n\";\n        for(i=0;i<(depth as number);i++){\n            if(i === 0){\n                arr = arr + i as string +\",\\n\"\n            }else{\n                arr = arr + i as string +\",\" + (i-1) as string +\"\\n\"\n            }\n        }\n        arr = arr + newclustername +\",\"+ ( i-1) as string \n             \n        let newroot = d3.stratify()\n        .id(function(d:any){return d.name})\n        .parentId(function(d:any){return d.parent})\n        (d3.csvParse(arr));\n\n        let newcluster = newroot;\n\n        newroot.each((node)=>{\n            if(node.id ===newclustername){\n                node.children = newchildren;\n                newcluster = node;\n            }\n        })\n\n        State.import.clustertree?.each((currentnode)=>{\n            if (currentnode.id === selected[0]){\n                newcluster.data = {\n                    name : newclustername,\n                    parent : currentnode.parent?.id\n                }\n                newcluster.parent = currentnode.parent;\n                currentnode.parent?.children?.push(newcluster);\n            }\n        });\n\n        State.import.clustertree?.each((currentnode)=>{\n            if (currentnode === State.import.clustertree?.find((node:d3.HierarchyNode<unknown>)=>{return node.id === selected[i]})?.parent){\n                // console.log(currentnode);\n                for(i=0;i<selected.length;i++){\n                    let toDelete = State.import.clustertree?.find((node:d3.HierarchyNode<unknown>)=>{return node.id === selected[i]});\n                    if(toDelete != undefined){\n                        let index = currentnode.children?.indexOf(toDelete);\n                        if(index!=undefined && index>-1){\n                            currentnode.children?.splice(index,1);\n                        }\n                        console.log(currentnode);\n                    } \n                }\n            }\n        });\n            \n        \n        // State.import.clusterMap?.set(newcluster,newclusternodes);\n        if(State.import.clustertree != null){\n            State.import.buildClusterMap(State.import.clustertree);\n        }\n        \n        console.log(State.import.clustertree);\n        console.log(State.import.clusterMap);\n        \n    } \n}\n","import { Attributes } from \"graphology-types\";\nimport { makeAutoObservable } from \"mobx\";\nimport State from \".\";\nimport { NAVBAR_HEIGHT } from \"../constants\";\nimport { ICustomLinkObject, ICustomNodeObject } from \"./GraphDelegate\";\nexport default class InteractionStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    /**\n     * @description the currently selected node\n     * represents the node being right-clicked on\n     * @author Zhiyuan LYU\n     * @type {(string | null)}\n     */\n    chosenNode: string | null = null;\n\n    /**\n     * @description the currently selected nodes id\n     * the singleNodeDetailPanel will render and refresh if this changes\n     * used in NodeSelection panel to do actions on those selected nodes\n     * @author Zhiyuan LYU\n     * @type {string[]}\n     */\n    selectedNodes: string[] = [];\n\n    /**\n     * @description the currently selected edge id\n     * @author Zhiyuan LYU\n     * @type {(string | null)}\n     */\n    selectedEdge: string | null = null;\n\n    /**\n     * @description when the menuItem 'box-select Node' of RightClickPanel is clicked, then this will be set to true,\n     *  and the component 'SelectionBox' will be  visualized only the mode is 'Node Selection' and this variable is true\n     * @author Zhiyuan LYU\n     * @type {boolean}\n     */\n    boxSelectionOpen: boolean = false;\n\n    /**\n     * @description this stores the x and y coordinates when mouse clicked down for box selection\n     * @author Zhiyuan LYU\n     * @type {Attributes}\n     */\n    boxSelection_startPoint: Attributes = {\n        x: 0,\n        y: 0,\n    };\n\n    /**\n     * @description this stores the x and y coordinates when mouse clicked up for box selection\n     * @author Zhiyuan LYU\n     * @type {Attributes}\n     */\n    boxSelection_endPoint: Attributes = {\n        x: 0,\n        y: 0,\n    };\n\n    /**\n     * @description compute the selected node within this selection box\n     * @author Zhiyuan LYU\n     */\n    boxSelectNode() {\n        //clear selectedNodes\n        State.interaction.selectedNodes = [];\n\n        //calculate the box\n        let left = Math.min(\n            this.boxSelection_startPoint.x,\n            this.boxSelection_endPoint.x\n        );\n        let top =\n            Math.min(\n                this.boxSelection_startPoint.y,\n                this.boxSelection_endPoint.y\n            ) - NAVBAR_HEIGHT;\n        let right = Math.max(\n            this.boxSelection_startPoint.x,\n            this.boxSelection_endPoint.x\n        );\n        let down =\n            Math.max(\n                this.boxSelection_startPoint.y,\n                this.boxSelection_endPoint.y\n            ) - NAVBAR_HEIGHT;\n\n        //check which node is inside the box,if true push them into selectedNodes\n        State.graph.rawGraph.forEachNode((node, Attributes) => {\n            let coords = State.graphDelegate.graphDelegateMethods.graph2ScreenCoords(\n                Attributes._visualize.x,\n                Attributes._visualize.y,\n                Attributes._visualize.z\n            );\n            if (\n                left <= coords.x &&\n                coords.x <= right &&\n                top <= coords.y &&\n                down >= coords.y\n            ) {\n                State.interaction.selectedNodes.push(node);\n            }\n        });\n    }\n\n    /**\n     * @description the currently hovered node id\n     * the multiNodeDetailPanel will render and refresh if this changes\n     * @author Zhiyuan LYU\n     * @type {(string | null)}\n     */\n    currentlyHoveredNodeId: string | null = null;\n\n    /**\n     * @description compute the neighbors of the currently hovered node id\n     * @author Zichen XU\n     * @readonly\n     * @type {(string[] | null)}\n     */\n    get currentlyHoveredNodeNeighborEdges(): string[] | null {\n        if (this.currentlyHoveredNodeId === null) {\n            return null;\n        } else {\n            let neighbors = State.graph.rawGraph.neighbors(\n                this.currentlyHoveredNodeId\n            );\n            return neighbors?.map((neighbor: string) => {\n                return this.getEdgeKey(\n                    neighbor,\n                    this.currentlyHoveredNodeId as string\n                ) as string;\n            });\n        }\n    }\n\n    /**\n     * @description get the key of the edge with source and target bidirectional\n     * @author Zhiyuan LYU\n     * @param {string} node1\n     * @param {string} node2\n     * @returns {*}  {(string | null)}\n     */\n    getEdgeKey(node1: string, node2: string): string | null {\n        let go: string | undefined = State.graph.rawGraph.edge(node1, node2);\n        if (go === undefined) {\n            let back: string | undefined = State.graph.rawGraph.edge(\n                node2,\n                node1\n            );\n            if (back === undefined) {\n                return null;\n            } else {\n                return back;\n            }\n        } else {\n            return go;\n        }\n    }\n\n    /**\n     * @description update the _visualize object inside node attribute and calls graph refresh\n     * @author Zichen XU\n     * @param {string} id\n     * @param {Attributes} attribute\n     * @param {(Attributes | null)} [oldAttributeVisualize=null]\n     */\n    updateNodeVisualizeAttribute(\n        id: string,\n        attribute: Partial<ICustomNodeObject>,\n        oldAttributeVisualize: Attributes | null = null\n    ) {\n        if (oldAttributeVisualize === null) {\n            oldAttributeVisualize = State.graph.rawGraph.getNodeAttribute(\n                id,\n                \"_visualize\"\n            );\n        }\n\n        this.updateVisualizeAttributeParser(\n            attribute,\n            oldAttributeVisualize as Attributes\n        );\n    }\n\n    /**\n     * @description update the _visualize object inside edge attribute and calls graph refresh\n     * @author Zichen XU\n     * @param {string} key\n     * @param {Attributes} attribute\n     * @param {(Attributes | null)} [oldAttributeVisualize=null]\n     */\n    updateEdgeVisualizeAttribute(\n        key: string,\n        attribute: Partial<ICustomLinkObject>,\n        oldAttributeVisualize: Attributes | null = null\n    ) {\n        if (oldAttributeVisualize === null) {\n            oldAttributeVisualize = State.graph.rawGraph.getEdgeAttribute(\n                key,\n                \"_visualize\"\n            );\n        }\n        this.updateVisualizeAttributeParser(\n            attribute,\n            oldAttributeVisualize as Attributes\n        );\n    }\n\n    /**\n     * @description helper method to call by updateEdgeVisualizeAttribute and updateNodeVisualizeAttribute\n     * @author Zichen XU\n     * @private\n     * @param {*} newAttribute\n     * @param {*} oldAttributes\n     */\n    private updateVisualizeAttributeParser(\n        newAttribute: any,\n        oldAttributes: any\n    ) {\n        if (newAttribute.hasOwnProperty(\"hovered\")) {\n            oldAttributes.hovered = newAttribute.hovered;\n        } else if (newAttribute.hasOwnProperty(\"chosen\")) {\n            oldAttributes.chosen = newAttribute.chosen;\n        } else if (newAttribute.hasOwnProperty(\"multiSelected\")) {\n            oldAttributes.multiSelected = newAttribute.multiSelected;\n        }\n    }\n\n    /**\n     * @description should call this on every refresh of graph DS\n     * or simply change the InteractionMode\n     * @author Zichen XU\n     */\n    flush() {\n        this.chosenNode = null;\n        this.selectedNodes = [];\n        this.selectedEdge = null;\n        this.currentlyHoveredNodeId = null;\n    }\n}\n","import { makeAutoObservable } from \"mobx\";\n\n/**\n * @description you may notice that when selecting different VisualizationMode\n * a popover which contains either simple configs or helper messages will pop up\n * this class stores the necessary information to make that happen\n * @author Zichen XU\n * @export\n * @class HelperStackPanelStore\n */\nexport default class HelperStackPanelStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    // Cluster Splitting\n\n    /**\n     * @description if the clusterSplittingPanelStackOpen is open\n     * @author Zichen XU\n     * @type {boolean}\n     */\n    clusterSplittingPanelStackOpen: boolean = false;\n\n    /**\n     * @description can back to any step, and UI should refresh accordingly\n     *\n     * @author Zichen XU\n     * @type {(1 | 2 | 3)}\n     */\n    clusterSplittingCurrentStep: 1 | 2 | 3 = 1;\n\n    /**\n     * @description if the NodeSelectionPanelOpen is open\n     * @author Zichen XU\n     * @type {boolean}\n     */\n    NodeSelectionPanelOpen: boolean = false;\n}\n","import { makeAutoObservable } from \"mobx\";\n\n/**\n * @description signals for use of ui interaction\n * @author Zichen XU\n * @export\n */\nexport default class SignalStore {\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    isRightClickingCluster: boolean = false;\n\n    isMovingCamera: boolean = false;\n}\n","import { autorun, reaction } from \"mobx\";\n\nimport PreferencesStore, { VisualizationMode } from \"./PreferencesStore\";\nimport GraphStore from \"./GraphStore\";\nimport ImportStore from \"./ImportStore\";\nimport SearchStore from \"./SearchStore\";\nimport ClusterStore from \"./ClusterStore\";\nimport CssStore from \"./CssStore\";\nimport GraphDelegate from \"./GraphDelegate\";\nimport NodeInteractionStore from \"./NodeInteractionStore\";\nimport ClusterInteractionStore from \"./ClusterInteractionStore\";\nimport HelperStackPanelStore from \"./HelperStackPanelStore\";\nimport SignalStore from \"./SignalStore\";\n\n/**\n * @description the overall state to store all information of this project\n * use the observable and observer to refresh the React UI\n * @author Zichen XU\n * @class AppState\n */\nclass AppState {\n    static _instance: AppState | null = null;\n\n    preferences!: PreferencesStore;\n    graph!: GraphStore;\n    graphDelegate!: GraphDelegate;\n    interaction!: NodeInteractionStore;\n    clusterInteraction!: ClusterInteractionStore;\n    import!: ImportStore;\n    search!: SearchStore;\n    cluster!: ClusterStore;\n    helper!: HelperStackPanelStore;\n    css!: CssStore;\n    signal!: SignalStore;\n\n    private privateConstructor() {\n        this.preferences = new PreferencesStore();\n        this.graph = new GraphStore();\n        this.graphDelegate = new GraphDelegate();\n        this.interaction = new NodeInteractionStore();\n        this.clusterInteraction = new ClusterInteractionStore();\n        this.import = new ImportStore();\n        this.search = new SearchStore();\n        this.cluster = new ClusterStore();\n        this.helper = new HelperStackPanelStore();\n        this.css = new CssStore();\n        this.signal = new SignalStore();\n    }\n\n    // add singleton to prevent creating multiple instances of the State class\n    static get instance() {\n        if (AppState._instance === null) {\n            let instance = new AppState();\n            instance.privateConstructor();\n            AppState._instance = instance;\n            return instance;\n        } else {\n            return AppState._instance;\n        }\n    }\n}\n\nconst State = AppState.instance;\n\n// this is for easily debugging in runtime\n//@ts-ignore\nwindow._state = State;\n\n// extract CSV from selected edge File object and update related fields.\n// will auto run if selectedEdgeFileFromInput or delimiter or anything is changed.\nautorun(() => State.import.renderImportEdgePreview());\n\n// extract CSV from selected node File object and update related fields.\n// will auto run if selectedNodeFileFromInput or delimiter or anything is changed.\nautorun(() => State.import.renderImportNodePreview());\n\n// set the graph to suspend animating according to State.css.isAnimating\nautorun(() => {\n    if (State.css.isAnimating) {\n        State.graphDelegate.graphDelegateMethods?.resumeAnimation();\n    } else {\n        State.graphDelegate.graphDelegateMethods?.pauseAnimation();\n    }\n});\n\n// if cluster selected, goto step 2\nautorun(() => {\n    if (\n        State.preferences.visualizationMode ===\n        VisualizationMode.ClusterSplitting\n    ) {\n        if (State.clusterInteraction.chosenCluster) {\n            State.helper.clusterSplittingCurrentStep = 2;\n            console.log(\"cluster selected\");\n        }\n    } else {\n        State.clusterInteraction.drawPanelActivate = false;\n    }\n});\n\n// the preparation and cleaning when changing of Step\nreaction(\n    () => State.helper.clusterSplittingCurrentStep,\n    (step) => {\n        console.log(`Graph Splitting change to step ${step}`);\n        switch (step) {\n            case 1:\n                State.clusterInteraction.drawPanelActivate = false;\n                State.clusterInteraction.confirmClusterSplittingTempData = null;\n                State.interaction.flush();\n                State.clusterInteraction.flush();\n                State.graphDelegate.graphDelegateMethods.refresh();\n                break;\n\n            case 2:\n                State.clusterInteraction.drawPanelActivate = true;\n                State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n                    State.interaction.updateNodeVisualizeAttribute(\n                        node,\n                        { hovered: false, chosen: false, multiSelected: false },\n                        oldAttributes._visualize\n                    );\n                });\n                State.clusterInteraction.confirmClusterSplittingTempData = null;\n                State.interaction.flush();\n                State.graphDelegate.graphDelegateMethods.refresh();\n                break;\n\n            case 3:\n                State.clusterInteraction.drawPanelActivate = false;\n                break;\n        }\n    }\n);\n\n// if graph is empty, suspend the animation to save computing power\nreaction(\n    () => State.graph.rawGraph?.order,\n    (number) => {\n        if (number === 0) {\n            State.css.isAnimating = false;\n            console.log(\"Pause Animating\");\n        } else {\n            State.css.isAnimating = true;\n            console.log(\"Resume Animating\");\n        }\n    },\n    { fireImmediately: true }\n);\n\n// auto highlight the hovered Cluster\nreaction(\n    () => State.clusterInteraction.currentlyHoveredClusterId,\n    (currentlyHoveredClusterId) => {\n        console.log(\"currentlyHoveredNodeId\", currentlyHoveredClusterId);\n        State.graphDelegate.clusterObject.updateAllMaterials();\n    }\n);\n\n// auto highlight the selected Cluster\nreaction(\n    () => State.clusterInteraction.chosenCluster,\n    () => {\n        State.graphDelegate.clusterObject.updateAllMaterials();\n    }\n);\n\n// auto highlight the selected Clusters\nreaction(\n    () => State.clusterInteraction.selectedClusters,\n    () => {\n        State.graphDelegate.clusterObject.updateAllMaterials();\n    }\n);\n\n// auto color the hovered Node\nreaction(\n    () => State.interaction.currentlyHoveredNodeId,\n    (currentlyHoveredNodeId) => {\n        console.log(\"currentlyHoveredNodeId\", currentlyHoveredNodeId);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (node === currentlyHoveredNodeId) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { hovered: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { hovered: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n    }\n);\n\n// auto color the chosen node (right click on)\nreaction(\n    () => State.interaction.chosenNode,\n    (selectedNode) => {\n        console.log(\"chosenNode\", selectedNode);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (selectedNode === node) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { chosen: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { chosen: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\n// auto color the selected nodes\nreaction(\n    () => State.interaction.selectedNodes.map((node) => node),\n    (selectedNodes) => {\n        console.log(\"selectedNodes\", selectedNodes);\n        State.graph.rawGraph.forEachNode((node, oldAttributes) => {\n            if (selectedNodes.includes(node)) {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { multiSelected: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateNodeVisualizeAttribute(\n                    node,\n                    { multiSelected: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\n// auto color the selected edge\nreaction(\n    () => State.interaction.selectedEdge,\n    (selectedEdge) => {\n        console.log(\"selectedEdge\", selectedEdge);\n        State.graph.rawGraph.forEachEdge((edge, oldAttributes) => {\n            if (selectedEdge === edge) {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { chosen: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { chosen: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\n// auto color the neighbor edges\nreaction(\n    () => State.interaction.currentlyHoveredNodeId,\n    () => {\n        State.graph.rawGraph.forEachEdge((edge, oldAttributes) => {\n            if (\n                State.interaction.currentlyHoveredNodeNeighborEdges?.includes(\n                    edge\n                )\n            ) {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { hovered: true },\n                    oldAttributes._visualize\n                );\n            } else {\n                State.interaction.updateEdgeVisualizeAttribute(\n                    edge,\n                    { hovered: false },\n                    oldAttributes._visualize\n                );\n            }\n        });\n        State.graphDelegate.graphDelegateMethods.refresh();\n    }\n);\n\n// auto set the signal to be false\nautorun(\n    () => {\n        if (State.signal.isMovingCamera) {\n            State.signal.isMovingCamera = false;\n        }\n    },\n    {\n        delay: 50,\n    }\n);\n\nautorun(\n    () => {\n        if (State.signal.isRightClickingCluster) {\n            State.signal.isRightClickingCluster = false;\n        }\n    },\n    {\n        delay: 50,\n    }\n);\n\nexport default State;\n","import { Attributes } from \"graphology-types\";\nimport React from \"react\";\n\n/** Event handler that exposes the target element's value as a boolean. */\nexport function handleBooleanChange(handler: (checked: boolean) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler((event.target as HTMLInputElement).checked);\n}\n\n/** Event handler that exposes the target element's value as a string. */\nexport function handleStringChange(handler: (value: string) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler((event.target as HTMLInputElement).value);\n}\n\n/** Event handler that exposes the target element's value as an inferred generic type. */\nexport function handleValueChange<T>(handler: (value: T) => void) {\n    return (event: React.FormEvent<HTMLElement>) =>\n        handler(((event.target as HTMLInputElement).value as unknown) as T);\n}\n\n/** Event handler that exposes the target element's value as a number. */\nexport function handleNumberChange(handler: (value: number) => void) {\n    return handleStringChange((value) => handler(+value));\n}\n\nexport function stringifyNodeDetail(attributes: Attributes): string {\n    let res = \"\";\n    for (var attribute in attributes) {\n        if (\n            attributes.hasOwnProperty(attribute) &&\n            attribute !== \"_visualize\" &&\n            attribute !== \"_options\"\n        ) {\n            res += attribute + \" : \" + attributes[attribute] + \" ; \";\n        }\n    }\n\n    return res;\n}\n\nexport function parseNumberOrString(value: string): string | number {\n    if (value === \"\") {\n        return \"\";\n    }\n    let numberVal = Number(value);\n    if (isNaN(numberVal)) {\n        return value;\n    } else {\n        return numberVal;\n    }\n}\n","import { Intent, Position, Toaster, ToasterPosition } from \"@blueprintjs/core\";\nimport React from \"react\";\n\nexport function createToaster(\n    message: React.ReactNode,\n    position: ToasterPosition = Position.TOP,\n    timeout: number = 5000,\n    intent: Intent = Intent.NONE\n) {\n    Toaster.create({\n        position: position,\n    }).show({\n        message: message,\n        intent: intent,\n        timeout: timeout,\n    });\n}\n","import React, { MouseEventHandler } from \"react\";\nimport { Button, Icon, InputGroup, Intent, MenuItem } from \"@blueprintjs/core\";\nimport { Select } from \"@blueprintjs/select\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { copy } from \"copy-anything\";\nimport { handleStringChange } from \"./InputFormUtils\";\nimport { createToaster } from \"../../state/utils/ToasterUtils\";\n\ninterface Props {\n    /**\n     * whether or not to show the None\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    showNone: boolean;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     * if None is selected, the item props will be set to null\n     *\n     * @memberof Props\n     */\n    onSelect: (item: string | null) => void;\n\n    /**\n     * the selected to display will sync with this props\n     *\n     * @type {(string | null)}\n     * @memberof Props\n     */\n    syncWith: string | null;\n}\n\ninterface CustomIItemRendererProps {\n    handleClick: MouseEventHandler<HTMLElement>;\n}\n\nexport default observer(\n    /**\n     * @description this component can be used to choose the attribute among all the attributes\n     * with addition none to choose (can be toggled to off)\n     *\n     * to use it, you have to specify whether to add additional None to the list\n     * and onChange function to call when a candidate is selected\n     * @author Zichen XU\n     * @class ClusterChooser\n     * @extends {React.Component<Props, {}>}\n     */\n    class ClusterChooser extends React.Component<Props, {}> {\n        static defaultProps = {\n            showNone: true,\n        };\n\n        get fullProperties(): string[] {\n            let propertiesWithNone = copy(State.graph.metadata.nodeProperties);\n            propertiesWithNone.unshift(\"None\");\n            return propertiesWithNone;\n        }\n\n        itemRenderer = (\n            item: any,\n            props: CustomIItemRendererProps\n        ): JSX.Element | null => {\n            if (item === \"None\") {\n                return (\n                    <MenuItem\n                        intent=\"primary\"\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            } else {\n                return (\n                    <MenuItem\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            }\n        };\n\n        render() {\n            return (\n                <Select\n                    items={\n                        this.props.showNone\n                            ? this.fullProperties\n                            : State.graph.metadata.nodeProperties\n                    }\n                    itemRenderer={this.itemRenderer}\n                    filterable={false}\n                    onItemSelect={(item: string) => {\n                        let selected = item === \"None\" ? null : item;\n                        this.props.onSelect(selected);\n                    }}\n                    {...this.props}\n                >\n                    <Button\n                        text={this.props.syncWith ?? this.fullProperties[0]}\n                    />\n                </Select>\n            );\n        }\n    }\n);\n\ninterface Props2 {\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     * if None is selected, the item props will be set to null\n     *\n     * @memberof Props\n     */\n    onSelect: (item: string | null) => void;\n\n    /**\n     * the selected to display will sync with this props\n     *\n     * @type {(string | null)}\n     * @memberof Props\n     */\n    syncWith: string | null;\n}\n\nexport const HierarchyLevelChooser = observer(\n    class HierarchyLevelChooser extends React.Component<Props2,{}>{\n\n        get hierarchylevels() {\n            let arr : string[] = [];\n            let totallevel = State.import.colorMap?.size;\n            if (totallevel != undefined){\n              \n            for (let i : number = 0; i<totallevel-1; i++) {\n                arr.push(i.toString());\n            }\n            return arr;\n\n            }   \n        }\n\n        itemRenderer = (\n            item: any,\n            props: CustomIItemRendererProps\n        ): JSX.Element | null => {\n            if (item === \"None\") {\n                return (\n                    <MenuItem\n                        intent=\"primary\"\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            } else {\n                return (\n                    <MenuItem\n                        key={item}\n                        onClick={props.handleClick}\n                        text={item}\n                    />\n                );\n            }\n        };\n\n        render() {\n            return (\n                <Select\n                    items={\n                        this.hierarchylevels? \n                            this.hierarchylevels : [\"None\"]\n                    }\n                    itemRenderer={this.itemRenderer}\n                    filterable={false}\n                    onItemSelect={(item: string) => {\n                        let selected = item === \"None\" ? null : item;\n                        this.props.onSelect(selected);\n                    }}\n                    {...this.props}\n                >\n                    <Button\n                        text={this.props.syncWith}\n                    />\n                </Select>\n            );\n        }\n    }\n);\n\ninterface ClusterAdderProps {\n    onCreate: (attribute: string) => void;\n}\n\nexport const ClusterAdder = observer(\n    class ClusterAdder extends React.Component<ClusterAdderProps> {\n        state = {\n            attribute: \"\",\n        };\n\n        render() {\n            return (\n                <div\n                    style={{ display: \"flex\", justifyContent: \"space-between\" }}\n                >\n                    <InputGroup\n                        leftElement={<Icon icon=\"tag\" />}\n                        onChange={handleStringChange((value) => {\n                            this.setState({ attribute: value });\n                        })}\n                        placeholder=\"New Attribute Name\"\n                        fill={true}\n                        value={this.state.attribute}\n                    />\n                    <Button\n                        onClick={() => {\n                            if (\n                                this.state.attribute === \"\" ||\n                                State.graph.metadata.nodeProperties.includes(\n                                    this.state.attribute\n                                )\n                            ) {\n                                createToaster(\n                                    `Attribute name ${this.state.attribute} already exists`,\n                                    undefined,\n                                    undefined,\n                                    Intent.DANGER\n                                );\n                                return;\n                            }\n                            State.graph.metadata.nodeProperties.push(\n                                this.state.attribute\n                            );\n                            State.graph.rawGraph.forEachNode(\n                                (_, attributes) => {\n                                    attributes[this.state.attribute] = \"\";\n                                }\n                            );\n                            this.props.onCreate(this.state.attribute);\n                            this.setState({ attributes: \"\" });\n                        }}\n                        intent={Intent.PRIMARY}\n                    >\n                        Add\n                    </Button>\n                </div>\n            );\n        }\n    }\n);\n","export default __webpack_public_path__ + \"static/media/icon.d621d30f.png\";","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { Button, ControlGroup, MenuItem } from \"@blueprintjs/core\";\nimport { Select, Suggest } from \"@blueprintjs/select\";\nimport { CustomIItemRendererProps } from \"../utils/SimpleSelect\";\n\ninterface IFilterOption {\n    text: React.ReactNode;\n    disabled: boolean;\n    attribute?: string;\n}\n\nexport default observer(\n    /**\n     * @description the search bar to be placed in the navigation bar\n     * @author Zichen XU\n     * @class SearchPanel\n     * @extends {React.Component}\n     */\n    class SearchPanel extends React.Component {\n        get FILTER_OPTIONS(): IFilterOption[] {\n            let prefix: IFilterOption[] = [\n                { text: \"ID includes\", disabled: false },\n                { text: <b>Or Search Attributes</b>, disabled: true },\n            ];\n            State.graph.metadata.nodeProperties.forEach((it) =>\n                prefix.push({\n                    text: `Attribute: ${it}`,\n                    disabled: false,\n                    attribute: it,\n                })\n            );\n            return prefix;\n        }\n\n        state = {\n            filter: \"ID includes\" as string,\n        };\n\n        private itemRenderer(\n            item: IFilterOption,\n            props: CustomIItemRendererProps\n        ): JSX.Element | null {\n            return (\n                <MenuItem\n                    key={item.text?.toString()}\n                    disabled={item.disabled}\n                    onClick={props.handleClick}\n                    text={item.text}\n                />\n            );\n        }\n\n        render() {\n            return (\n                <div>\n                    <ControlGroup>\n                        <Select\n                            items={this.FILTER_OPTIONS}\n                            itemRenderer={this.itemRenderer}\n                            filterable={false}\n                            onItemSelect={(item) => {\n                                this.setState({\n                                    filter: item.text,\n                                });\n                                State.search.filterProps =\n                                    item.attribute ?? null;\n                            }}\n                        >\n                            <Button icon=\"filter\">{this.state.filter}</Button>\n                        </Select>\n                        <Suggest\n                            inputValueRenderer={(a) => a}\n                            query={State.search.searchStr}\n                            onQueryChange={(value) =>\n                                (State.search.searchStr = value)\n                            }\n                            itemListPredicate={() => State.search.candidates}\n                            itemRenderer={(value: string) => (\n                                <MenuItem\n                                    text={value}\n                                    onMouseOver={() => {\n                                        State.search.isPreviewing = true;\n                                        State.interaction.currentlyHoveredNodeId = value;\n                                        State.graphDelegate.cameraFocusOn(\n                                            value\n                                        );\n                                    }}\n                                    onMouseLeave={() => {\n                                        State.search.isPreviewing = false;\n                                    }}\n                                />\n                            )}\n                            items={State.search.candidates}\n                            openOnKeyDown={true}\n                            noResults={\n                                <MenuItem disabled={true} text=\"No results.\" />\n                            }\n                            popoverProps={{ minimal: true }}\n                        />\n                    </ControlGroup>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport {\n    Button,\n    Menu,\n    MenuDivider,\n    MenuItem,\n    Position,\n    Switch,\n    Navbar as BlueprintNavbar,\n    NavbarGroup,\n    Alignment,\n    NavbarHeading,\n    NavbarDivider,\n} from \"@blueprintjs/core\";\nimport ClusterChooser, { HierarchyLevelChooser } from \"./utils/ClusterChooser\";\nimport logo from \"../images/icon.png\";\nimport State from \"../state\";\nimport { Popover2 } from \"@blueprintjs/popover2\";\nimport SearchPanel from \"./panels/SearchPanel\";\nimport * as THREE from \"three\";\nimport { ARROW_RIGHT } from \"@blueprintjs/core/lib/esm/common/keys\";\nimport { random } from \"lodash\";\nimport { color } from \"d3-color\";\n\n\nexport default observer(\n    /**\n     * @description the navigation bar on the top\n     * @author Zichen XU\n     * @class Navbar\n     * @extends {React.Component}\n     */\n    class Navbar extends React.Component {\n        render() {\n            return (\n                <BlueprintNavbar\n                    //@ts-ignore\n                    style={{ zIndex: 2 }}\n                >\n                    <NavbarGroup align={Alignment.LEFT}>\n                        <img\n                            title=\"ClusterGrapher\"\n                            id=\"ClusterGrapher Logo\"\n                            src={logo}\n                            width=\"35\"\n                            height=\"35\"\n                            alt=\"ClusterGrapher Logo\"\n                        />\n                        <MenuDivider />\n                        <NavbarHeading>ClusterGrapher</NavbarHeading>\n                        <Popover2\n                            content={\n                                <Menu>\n                                    <MenuItem\n                                        icon=\"import\"\n                                        text=\"Open GEXF\"\n                                        onClick={() => {\n                                            State.import.importGEXFDialogOpen = true;\n                                        }}\n                                    />\n                                    <MenuItem\n                                        text=\"Import from CSV\"\n                                        icon=\"import\"\n                                        onClick={() => {\n                                            State.import.importDialogOpen = true;\n                                        }}\n                                    >\n                                        {/* {SAMPLE_GRAPH_SNAPSHOTS.map(\n                                            (sample) => {\n                                                const sampleSnapshotTitle =\n                                                    sample[0];\n                                                const sampleSnapshotUrl =\n                                                    sample[1];\n\n                                                return (\n                                                    <MenuItem\n                                                        icon=\"graph\"\n                                                        text={\n                                                            sampleSnapshotTitle\n                                                        }\n                                                        disabled={true}\n                                                        onClick={() => {\n                                                            fetchSampleGraph(\n                                                                sampleSnapshotUrl\n                                                            ).then((file) => {\n                                                                State.import.selectedGEXFFileFromInput = file;\n                                                                State.import\n                                                                    .importGraphFromGEXF()\n                                                                    .then(\n                                                                        (\n                                                                            res\n                                                                        ) => {\n                                                                            State.graph.rawGraph =\n                                                                                res.graph;\n                                                                            State.graph.metadata =\n                                                                                res.metadata;\n                                                                        }\n                                                                    );\n                                                            });\n                                                        }}\n                                                    />\n                                                );\n                                            }\n                                        )} */}\n                                    </MenuItem>\n                                    <MenuItem\n                                        text=\"Load Cluster\"\n                                        icon=\"import\"\n                                        onClick={()=>{\n                                            if(State.graphDelegate.clusterObject.fusionClusterObjects){\n                                                State.graphDelegate.clusterObject.initEmptyMapAndFusion();\n                                            }\n                                            State.import.clusterMap?.forEach((value,key)=>{\n                                                // State.import.UUID2PointsMap = new Map<string, string[]>();\n                                                let sphere : THREE.Mesh<THREE.BufferGeometry,THREE.MeshBasicMaterial> = new THREE.Mesh(State.graphDelegate.clusterObject.convexHullObject2(value), new THREE.MeshBasicMaterial);\n                                                //@ts-ignore\n                                                sphere[\"_color\"] = State.import.colorMap?.get(key.depth) as string;\n                                                State.graphDelegate.clusterObject.meshNormalMaterial(sphere);\n                                                // State.import.UUID2PointsMap.set(sphere.uuid, value);\n                                                State.graphDelegate.clusterObject.fusionClusterObjects?.add(sphere);\n                                            });\n                                        }}\n                                    >\n                                    </MenuItem>\n                                    <MenuItem\n                                        text=\"Load sample\"\n                                        icon=\"import\"\n                                        onClick={()=>{\n                                            State.clusterInteraction.hierarchicalMergeCluster([\"AA\",\"AB\"]);\n                                        }}\n                                        >\n                                    </MenuItem>\n                                    <MenuDivider />\n                                    <MenuItem\n                                        icon=\"download\"\n                                        text=\"Export Graph\"\n                                        onClick={() => {\n                                            State.preferences.exportDialogOpen = true;\n                                        }}\n                                    />\n                                </Menu>\n                            }\n                            placement={Position.BOTTOM}\n                        >\n                            <Button minimal={true} icon=\"document\">\n                                Graph\n                            </Button>\n                        </Popover2>\n                        <Popover2\n                            content={\n                                <Menu>\n                                    <MenuItem\n                                        text=\"Node DataSheet\"\n                                        icon=\"ungroup-objects\"\n                                        onClick={() => {\n                                            State.preferences.nodeDataSheetDialogOpen = true;\n                                        }}\n                                    />\n                                    <MenuItem\n                                        text=\"Edge DataSheet\"\n                                        icon=\"link\"\n                                        onClick={() => {\n                                            State.preferences.edgeDataSheetDialogOpen = true;\n                                        }}\n                                    />\n                                </Menu>\n                            }\n                            placement={Position.BOTTOM}\n                        >\n                            <Button minimal={true} icon=\"wrench\">\n                                Tools\n                            </Button>\n                        </Popover2>\n                        <Switch\n                            style={{ marginTop: 10, marginLeft: 8 }}\n                            label=\"Graph Animation\"\n                            checked={State.css.isAnimating}\n                            onChange={() =>\n                                (State.css.isAnimating = !State.css.isAnimating)\n                            }\n                        />\n                    </NavbarGroup>\n                    \n\n                    {/* <ButtonGroup>\n                        <SimpleSelect\n                            className={classnames([Classes.ALERT_CONTENTS])}\n                            items={[\"3D\", \"2D\"]}\n                            value={State.preferences.view}\n                            onSelect={(it) => (State.preferences.view = it)}\n                        />\n                        <Divider />\n                    </ButtonGroup> */}\n\n                    <NavbarGroup align={Alignment.RIGHT}>\n                        <HierarchyLevelChooser\n                        onSelect ={(show:string|null)=>{\n                            State.cluster.showlevel = show;\n\n                            if(State.graphDelegate.clusterObject.fusionClusterObjects){\n                                State.graphDelegate.clusterObject.initEmptyMapAndFusion();\n                            }\n                            State.import.clusterMap?.forEach((value,key)=>{\n                                // State.import.UUID2PointsMap = new Map<string, string[]>();\n                                if(key.depth.toString() === show){\n                                    let sphere : THREE.Mesh<THREE.BufferGeometry,THREE.MeshBasicMaterial> = new THREE.Mesh(State.graphDelegate.clusterObject.convexHullObject2(value), new THREE.MeshBasicMaterial);\n                                    //@ts-ignore\n                                    sphere[\"_color\"] = State.import.colorMap?.get(key.depth) as string;\n                                    State.graphDelegate.clusterObject.meshNormalMaterial(sphere);\n                                    // State.import.UUID2PointsMap.set(sphere.uuid, value);\n                                    State.graphDelegate.clusterObject.fusionClusterObjects?.add(sphere);\n                                }\n                                \n                            });\n                            \n                        }}\n                        syncWith = {State.cluster.showlevel}\n                    />\n                        <NavbarDivider/>\n                        <SearchPanel />\n                        <NavbarDivider />\n                        <div style={{ marginRight: 6 }}>Clustered by</div>\n                        <ClusterChooser\n                            onSelect={(cluster) => {\n                                State.cluster.setCluster(cluster);\n                            }}\n                            syncWith={State.cluster.clusterBy}\n                        />\n                        {/* <NavbarDivider />\n                        <SimpleSelect\n                            items={[\"trackball\", \"orbit\", \"fly\"]}\n                            text={State.preferences.controlType}\n                            onSelect={(it) => {\n                                State.preferences.controlType = it;\n                                ComponentRef.visualizer.updateVisualizationGraph();\n                            }}\n                        /> */}\n                        <Button\n                            minimal={true}\n                            icon=\"code\"\n                            onClick={() => {\n                                window.open(\n                                    \"https://github.com/grp202004/PiperNet\"\n                                );\n                            }}\n                        />\n                    </NavbarGroup>\n                </BlueprintNavbar>\n            );\n        }\n    }\n);\n","import React, { MouseEventHandler } from \"react\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { ItemPredicate, Select } from \"@blueprintjs/select\";\nimport { observer } from \"mobx-react\";\n\ninterface Props {\n    items: any[];\n    onSelect: (\n        item: any,\n        event?: React.SyntheticEvent<HTMLElement, Event> | undefined\n    ) => void;\n    text: string;\n    small: boolean;\n    search: boolean;\n}\n\nexport interface CustomIItemRendererProps {\n    handleClick: MouseEventHandler<HTMLElement>;\n}\n\nexport function CommonItemRenderer(\n    item: any,\n    props: CustomIItemRendererProps\n): JSX.Element | null {\n    return <MenuItem key={item} onClick={props.handleClick} text={item} />;\n}\n\nexport default observer(\n    /**\n     * @description provides a interface for choosing between elements\n     * @author Zichen XU\n     * @class SimpleSelect\n     * @extends {React.Component<Props, {}>}\n     */\n    class SimpleSelect extends React.Component<Props, {}> {\n        static defaultProps = {\n            small: false,\n            search: false,\n        };\n\n        itemPredicate: ItemPredicate<string> = (\n            query: string,\n            object: string\n        ) => {\n            return object.toLowerCase().indexOf(query.toLowerCase()) >= 0;\n        };\n        render() {\n            if (this.props.search) {\n                return (\n                    <Select\n                        items={this.props.items}\n                        itemPredicate={this.itemPredicate}\n                        itemRenderer={CommonItemRenderer}\n                        filterable={true}\n                        onItemSelect={this.props.onSelect}\n                        noResults={\n                            <MenuItem disabled={true} text=\"No results.\" />\n                        }\n                    >\n                        <Button\n                            text={this.props.text}\n                            small={this.props.small}\n                        />\n                    </Select>\n                );\n            } else {\n                return (\n                    <Select\n                        items={this.props.items}\n                        itemRenderer={CommonItemRenderer}\n                        filterable={false}\n                        onItemSelect={this.props.onSelect}\n                    >\n                        <Button\n                            text={this.props.text}\n                            small={this.props.small}\n                        />\n                    </Select>\n                );\n            }\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Callout,\n    Classes,\n    FileInput,\n    Spinner,\n    Switch,\n    Tag,\n    MultistepDialog,\n    DialogStep,\n    H4,\n    H2,\n} from \"@blueprintjs/core\";\nimport { Cell, Column, Table } from \"@blueprintjs/table\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport SimpleSelect from \"../utils/SimpleSelect\";\nimport { IEdgeFileConfig, INodeFileConfig ,IClusterFileConfig } from \"../../state/ImportStore\";\n\ninterface PreviewTableProps {\n    file: INodeFileConfig | IEdgeFileConfig | IClusterFileConfig;\n}\n\nlet PreviewTable = observer(\n    class PreviewTable extends React.Component<PreviewTableProps, {}> {\n        file = this.props.file;\n\n        renderWrapper = () => {\n            return this.file.parseError ? (\n                <Callout title={\"Error Parsing File\"} intent=\"warning\">\n                    Try with other options of <code>Delimiter</code> or review\n                    the file for import to find possible problems.\n                </Callout>\n            ) : (\n                <div>\n                    <Table\n                        className=\"import-preview-table\"\n                        numRows={this.file.topN.length}\n                        selectedRegions={Object.values(this.file.mapping)\n                            .map((it) => this.file.columns.indexOf(it))\n                            .map((it) => ({ rows: null, cols: [it, it] }))}\n                    >\n                        {this.file.columns.map((it) => (\n                            <Column\n                                key={it}\n                                name={it}\n                                cellRenderer={(i) => (\n                                    <Cell>{this.file.topN[i][it]}</Cell>\n                                )}\n                            />\n                        ))}\n                    </Table>\n                    <Tag>\n                        Only the top {this.file.topN.length} rows of the\n                        selected file are displayed.\n                    </Tag>\n                </div>\n            );\n        };\n\n        render() {\n            return this.renderWrapper();\n        }\n    }\n);\n\nexport default observer(\n    /**\n     * @description The multistep dialog for importing csv Node and Edge files\n     * @author Chenghao SHI\n     * @extends {React.Component}\n     */\n    class ImportDialog extends React.Component {\n        private multiDialogRef = React.createRef<MultistepDialog>();\n\n        state = {\n            delimiter: \",\",\n            step: 0,\n        };\n\n        canImport = () => {\n            if (State.import.importConfig.hasNodeFile) {\n                return (\n                    State.import.importConfig.edgeFile.isReady &&\n                    State.import.importConfig.nodeFile.isReady\n                );\n            } else {\n                return State.import.importConfig.edgeFile.isReady;\n            }\n        };\n\n        renderNodesSelection = () => {\n            const nodeFile = State.import.importConfig.nodeFile;\n\n            return State.import.importConfig.hasNodeFile ? (\n                <>\n                    <FileInput\n                        text={State.import.nodeFileName}\n                        onInputChange={(event) => {\n                            let target = event.target as HTMLInputElement;\n                            if (!target.files || target.files.length < 1) {\n                                return;\n                            }\n                            State.import.importConfig.hasNodeFile = true;\n                            State.import.nodeFileName = target.files[0].name;\n                            // after setting the selectedNodeFileFromInput, it will auto render the preview table\n                            State.import.selectedNodeFileFromInput =\n                                target.files[0];\n                        }}\n                    />\n\n                    <Switch\n                        label=\"Has Headers\"\n                        checked={nodeFile.hasHeader}\n                        onChange={() =>\n                            (nodeFile.hasHeader = !nodeFile.hasHeader)\n                        }\n                    />\n                    {nodeFile.isReady && (\n                        <div className=\"column-selection\">\n                            <PreviewTable file={nodeFile} />\n                            <br />\n                            Column for Node ID:\n                            <SimpleSelect\n                                items={nodeFile.columns}\n                                text={nodeFile.mapping.id}\n                                onSelect={(it) => (nodeFile.mapping.id = it)}\n                            />\n                        </div>\n                    )}\n                </>\n            ) : (\n                <H4>You don't need to import node file</H4>\n            );\n        };\n\n        renderEdgesSelection = () => {\n            const edgeFile = State.import.importConfig.edgeFile;\n            return (\n                <>\n                    <FileInput\n                        text={State.import.edgeFileName}\n                        onInputChange={(event) => {\n                            let target = event.target as HTMLInputElement;\n                            if (!target.files || target.files.length < 1) {\n                                return;\n                            }\n                            State.import.edgeFileName = target.files[0].name;\n                            State.import.selectedEdgeFileFromInput =\n                                target.files[0];\n                        }}\n                    />\n                    <Switch\n                        label=\"Has Headers\"\n                        checked={edgeFile.hasHeader}\n                        onChange={() =>\n                            (edgeFile.hasHeader = !edgeFile.hasHeader)\n                        }\n                    />\n                    {edgeFile.isReady && (\n                        <div>\n                            <PreviewTable file={edgeFile} />\n                            <br />\n                            Column for Source ID:\n                            <SimpleSelect\n                                items={edgeFile.columns}\n                                text={edgeFile.mapping.fromId}\n                                onSelect={(it) =>\n                                    (edgeFile.mapping.fromId = it)\n                                }\n                            />\n                            <br />\n                            Column for Target ID:\n                            <SimpleSelect\n                                items={edgeFile.columns}\n                                text={edgeFile.mapping.toId}\n                                onSelect={(it) => (edgeFile.mapping.toId = it)}\n                            />\n                        </div>\n                    )}\n                </>\n            );\n        };\n\n\n        renderClusterSelection = () => {\n            const clusterFile = State.import.importConfig.clusterFile;\n            return (\n                <>\n                    <FileInput\n                        text={State.import.clusterFileName}\n                        onInputChange={(event) => {\n                            let target = event.target as HTMLInputElement;\n                            if (!target.files || target.files.length < 1) {\n                                return;\n                            }\n                            State.import.clusterFileName = target.files[0].name;\n                            State.import.selectedClusterFileFromInput =\n                                target.files[0];\n                        }}\n                    />\n\n                    {clusterFile.isReady && (\n                        <div>\n                            <PreviewTable file={clusterFile} />\n                            <br />\n                            Column for Cluster ID:\n                            <SimpleSelect\n                                items={clusterFile.columns}\n                                text={clusterFile.mapping.name}\n                                onSelect={(it) =>\n                                    (clusterFile.mapping.name = it)\n                                }\n                            />\n                            <br />\n                            \n                        </div>\n                    )}\n                </>\n            );\n        };\n\n\n\n\n        renderDelimiterSelection() {\n            return (\n                <div>\n                    Selected Delimiter\n                    <SimpleSelect\n                        items={[\",\", \"\\\\t\", \";\", \"[SPACE]\"]}\n                        text={this.state.delimiter}\n                        onSelect={(newDelimiter) => {\n                            this.setState({ delimiter: newDelimiter });\n\n                            if (newDelimiter === \"\\\\t\") {\n                                newDelimiter = \"\\t\";\n                            } else if (newDelimiter === \"[SPACE]\") {\n                                newDelimiter = \" \";\n                            }\n\n                            State.import.importConfig.edgeFile.delimiter = newDelimiter;\n                            State.import.importConfig.nodeFile.delimiter = newDelimiter;\n                        }}\n                    />{\" \"}\n                </div>\n            );\n        }\n\n        render() {\n            return (\n                <MultistepDialog\n                    ref={this.multiDialogRef}\n                    className={classnames(\"multistep-dialog-box\")}\n                    icon=\"import\"\n                    isOpen={State.import.importDialogOpen}\n                    onClose={() => {\n                        State.import.importDialogOpen = false;\n                    }}\n                    finalButtonProps={{\n                        intent: \"primary\",\n                        onClick: () => {\n                            State.import.isLoading = true;\n                            State.import.importGraphFromCSV().then((res) => {\n                                State.graph.setGraph(res.graph, res.metadata);\n                                if (\n                                    State.graph.rawGraph.hasAttribute(\"default\")\n                                ) {\n                                    State.cluster.setCluster(\n                                        State.graph.rawGraph.getAttribute(\n                                            \"default\"\n                                        )\n                                    );\n                                }\n                                State.import.isLoading = false;\n                                State.import.importDialogOpen = false;\n                            });\n                        },\n                        disabled: !(\n                            !State.import.importConfig.hasNodeFile ||\n                            (State.import.importConfig.hasNodeFile &&\n                                State.import.importConfig.nodeFile.isReady)\n                        ),\n                        text: \"Import\",\n                    }}\n                    onChange={(id) => {\n                        this.setState({\n                            step: id,\n                        });\n                    }}\n                    title=\"Open Files\"\n                >\n                    <DialogStep\n                        id=\"csv_edge\"\n                        title=\"Choose a Edge file\"\n                        panel={\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"multistep-dialog-body\"\n                                )}\n                                style={{\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                    display: \"flex\",\n                                }}\n                            >\n                                {State.import.isLoading ? (\n                                    <Spinner />\n                                ) : (\n                                    <div>\n                                        <div\n                                            className={classnames(\n                                                Classes.DIALOG_BODY,\n                                                \"import-dialog\"\n                                            )}\n                                            style={{ maxWidth: \"40vw\" }}\n                                        >\n                                            {this.renderEdgesSelection()}\n                                            <br />\n                                            {this.renderDelimiterSelection()}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        }\n                        nextButtonProps={{\n                            disabled: !State.import.importConfig.edgeFile\n                                .isReady,\n                        }}\n                    />\n                    <DialogStep\n                        id=\"csv_node_need\"\n                        title=\"Do I need to import node file ?\"\n                        panel={\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"multistep-dialog-body\"\n                                )}\n                                style={{\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                }}\n                            >\n                                <H2>Do I need to import node file?</H2>\n                                <H4>\n                                    You can import nodes file to add node\n                                    attributes to this graph\n                                </H4>\n                                <p>\n                                    To import attributes we will need to proceed\n                                    another csv files: a list of nodes, Nodes\n                                    must have at least an ID, other fields are\n                                    optional\n                                </p>\n                                <br />\n                                <Switch\n                                    large={true}\n                                    checked={\n                                        State.import.importConfig.hasNodeFile\n                                    }\n                                    label=\"I want to import node file\"\n                                    onChange={() =>\n                                        (State.import.importConfig.hasNodeFile = !State\n                                            .import.importConfig.hasNodeFile)\n                                    }\n                                />\n                            </div>\n                        }\n                    />\n                    <DialogStep\n                        id=\"csv_node\"\n                        title=\"Choose a Node file\"\n                        panel={\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"multistep-dialog-body\"\n                                )}\n                                style={{\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                    display: \"flex\",\n                                }}\n                            >\n                                {State.import.isLoading ? (\n                                    <Spinner />\n                                ) : (\n                                    <div>\n                                        <div\n                                            className={classnames(\n                                                Classes.DIALOG_BODY,\n                                                \"import-dialog\"\n                                            )}\n                                            style={{ maxWidth: \"40vw\" }}\n                                        >\n                                            {this.renderNodesSelection()}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        }\n                    />\n\n\n                    <DialogStep\n                        id=\"csv_cluster\"\n                        title=\"Choose a Cluster file\"\n                        panel={\n                            <div\n                                className={classnames(\n                                    Classes.DIALOG_BODY,\n                                    \"multistep-dialog-body\"\n                                )}\n                                style={{\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                    display: \"flex\",\n                                }}\n                            >\n                                {State.import.isLoading ? (\n                                    <Spinner />\n                                ) : (\n                                    <div>\n                                        <div\n                                            className={classnames(\n                                                Classes.DIALOG_BODY,\n                                                \"import-dialog\"\n                                            )}\n                                            style={{ maxWidth: \"40vw\" }}\n                                        >\n                                            {this.renderClusterSelection()}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        }\n                    />\n\n                </MultistepDialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Card,\n    Classes,\n    Dialog,\n    Divider,\n    Elevation,\n    H3,\n    Spinner,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport gexf from \"graphology-gexf/browser\";\nimport State from \"../../state\";\nimport { CSVLink } from \"react-csv\";\n\nexport default observer(\n    /**\n     * @description Dialog used to export the graph into GEXF file or CSV Node/Edge files\n     * @author Chenghao SHI\n     * @extends {React.Component}\n     */\n    class ExportDialog extends React.Component {\n        state = {\n            ready: true,\n        };\n\n        /**\n         * compute the GEXF file from rawGraph\n         * delete the temporary _visualize attribute from the graph\n         *\n         * @returns {*}\n         */\n        computeGEXFFile() {\n            let graphCopy = State.graph.rawGraph.copy();\n            graphCopy.forEachNode((_node, attributes: any) => {\n                delete attributes[\"_visualize\"];\n            });\n            graphCopy.forEachEdge((_edge, attributes: any) => {\n                delete attributes[\"_visualize\"];\n            });\n            return gexf.write(graphCopy);\n        }\n\n        computeNodeFile() {\n            let headers: {\n                label: string;\n                key: string;\n            }[] = [];\n            headers.push({ label: \"_id\", key: \"_id\" });\n            State.graph.metadata.nodeProperties.map((value) => {\n                headers.push({ label: value, key: value });\n                return null;\n            });\n\n            let exportData = State.graph.rawGraph.export();\n            let data: any[] = [];\n            exportData.nodes.forEach((node) => {\n                data.push({\n                    _id: node.key,\n                    ...node.attributes,\n                });\n            });\n            return { headers: headers, data: data };\n        }\n\n        computeEdgeFile() {\n            let headers: {\n                label: string;\n                key: string;\n            }[] = [\n                { label: \"source\", key: \"source\" },\n                { label: \"target\", key: \"target\" },\n            ];\n\n            let exportData = State.graph.rawGraph.export();\n            let data: any[] = [];\n            exportData.edges.forEach((edge) => {\n                data.push({\n                    source: edge.source,\n                    target: edge.target,\n                });\n            });\n            return { headers: headers, data: data };\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"projects\"\n                    isOpen={State.preferences.exportDialogOpen}\n                    onClose={() => {\n                        State.preferences.exportDialogOpen = false;\n                    }}\n                    title={`Export Graph`}\n                >\n                    {!this.state.ready ? (\n                        <Spinner />\n                    ) : (\n                        <div className={classnames(Classes.DIALOG_BODY)}>\n                            <Card interactive={false} elevation={Elevation.ONE}>\n                                <H3>\n                                    GEXF Export{\" \"}\n                                    <Button\n                                        icon=\"help\"\n                                        minimal={true}\n                                        onClick={() => {\n                                            window.open(\n                                                \"https://gephi.org/gexf/format/\"\n                                            );\n                                        }}\n                                    />\n                                </H3>\n                                <Divider />\n\n                                <CSVLink\n                                    data={this.computeGEXFFile()}\n                                    filename={\"Snapshot-GEXF.gexf\"}\n                                    className=\"btn btn-primary\"\n                                    target=\"_blank\"\n                                >\n                                    <Button>Download GEXF File</Button>\n                                </CSVLink>\n                            </Card>\n                            <br />\n                            <Card interactive={false} elevation={Elevation.ONE}>\n                                <H3>\n                                    CSV Export{\" \"}\n                                    <Button\n                                        icon=\"help\"\n                                        minimal={true}\n                                        onClick={() => {\n                                            window.open(\n                                                \"https://github.com/grp202004/PiperNet#data-import\"\n                                            );\n                                        }}\n                                    />\n                                </H3>\n\n                                <Divider />\n                                <ButtonGroup>\n                                    <CSVLink\n                                        data={this.computeNodeFile().data}\n                                        headers={this.computeNodeFile().headers}\n                                        separator={\",\"}\n                                        filename={\"Snapshot-Node.csv\"}\n                                        className=\"btn btn-primary\"\n                                        target=\"_blank\"\n                                    >\n                                        <Button>Download Node File</Button>\n                                    </CSVLink>\n                                    <Divider />\n                                    <CSVLink\n                                        data={this.computeEdgeFile().data}\n                                        headers={this.computeEdgeFile().headers}\n                                        separator={\",\"}\n                                        filename={\"Snapshot-Edge.csv\"}\n                                        className=\"btn btn-primary\"\n                                        target=\"_blank\"\n                                    >\n                                        <Button>Download Edge File</Button>\n                                    </CSVLink>\n                                </ButtonGroup>\n                            </Card>\n                        </div>\n                    )}\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Dialog } from \"@blueprintjs/core\";\nimport { Column, Table, TableLoadingOption } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\n\ninterface Props {\n    for: string;\n    children: React.ReactNode;\n}\n\nexport default observer(\n    /**\n     * @description the wrapper for data sheet dialog, provides a loading state before the data shows\n     * @author Zichen XU\n     * @class DataSheetDialogWrapper\n     * @extends {React.Component<Props, {}>}\n     */\n    class DataSheetDialogWrapper extends React.Component<Props, {}> {\n        state = {\n            loading: true,\n        };\n\n        renderTable() {\n            if (this.state.loading) {\n                return (\n                    <div className=\"argo-table-container\">\n                        <Table\n                            className=\"pt-bordered pt-striped\"\n                            numRows={20}\n                            loadingOptions={[\n                                TableLoadingOption.CELLS,\n                                TableLoadingOption.COLUMN_HEADERS,\n                                TableLoadingOption.ROW_HEADERS,\n                            ]}\n                        >\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                            <Column />\n                        </Table>\n                    </div>\n                );\n            } else {\n                return this.props.children;\n            }\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"database\"\n                    isOpen={\n                        this.props.for === \"node\"\n                            ? State.preferences.nodeDataSheetDialogOpen\n                            : State.preferences.edgeDataSheetDialogOpen\n                    }\n                    onOpened={() => {\n                        setTimeout(() => {\n                            this.setState({\n                                loading: false,\n                            });\n                        }, 100);\n                    }}\n                    onClose={() => {\n                        if (this.props.for === \"node\") {\n                            State.preferences.nodeDataSheetDialogOpen = false;\n                        } else {\n                            State.preferences.edgeDataSheetDialogOpen = false;\n                        }\n                        this.setState({\n                            loading: true,\n                        });\n                    }}\n                    title=\"Data Sheet\"\n                    style={{ minWidth: \"80vw\" }}\n                >\n                    <div className={classnames(Classes.DIALOG_BODY)}>\n                        {this.renderTable()}\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Alert,\n    Button,\n    ButtonGroup,\n    Callout,\n    Code,\n    Divider,\n    InputGroup,\n    Intent,\n} from \"@blueprintjs/core\";\nimport {\n    Cell,\n    Column,\n    EditableCell,\n    ICellRenderer,\n    Table,\n} from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport DataSheetDialogWrapper from \"../utils/DataSheetDialogWrapper\";\nimport {\n    handleStringChange,\n    parseNumberOrString,\n    stringifyNodeDetail,\n} from \"../utils/InputFormUtils\";\nimport { Attributes, SerializedNode } from \"graphology-types\";\n\nlet GraphNodeTable = observer(\n    class GraphNodeTable extends React.Component {\n        state = {\n            filterQuery: \"\",\n            addNodeDialogOpen: false,\n            deleteAlertOpen: false,\n            nodeToDelete: null as SerializedNode | null,\n        };\n\n        get filteredTable() {\n            let newTable: SerializedNode[] = [];\n            State.graph.rawGraph.export().nodes.forEach((node) => {\n                if (\n                    node.key\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    this.state.filterQuery === \"\"\n                ) {\n                    newTable.push(node);\n                }\n            });\n            return newTable;\n        }\n\n        nodeProperties = State.graph.metadata.nodeProperties;\n\n        renderColumns: any = () => {\n            const columns = this.nodeProperties.map((it, i) => {\n                if (it !== \"_options\") {\n                    return (\n                        <Column\n                            name={it}\n                            cellRenderer={(\n                                rowIndex: number,\n                                columnIndex: number\n                            ) => this.renderCell(rowIndex, it)}\n                        />\n                    );\n                }\n                return null;\n            });\n            return columns.filter((element) => {\n                return element !== undefined;\n            });\n        };\n\n        renderCell = (rowIndex: number, attribute: string) => {\n            let cellAttributes = this.filteredTable[rowIndex].attributes!!;\n            let cell = cellAttributes[attribute];\n\n            return (\n                <EditableCell\n                    value={cell}\n                    onChange={(newVal) =>\n                        this.setValue(newVal, rowIndex, attribute)\n                    }\n                    onConfirm={(newVal) =>\n                        this.setValue(newVal, rowIndex, attribute)\n                    }\n                    tooltip={cell}\n                />\n            );\n        };\n\n        // if the input is a number in string, it will convert the string into number to store\n        setValue = (value: string, rowIndex: number, attribute: string) => {\n            let id = this.filteredTable[rowIndex].key;\n            State.graph.rawGraph.setNodeAttribute(\n                id,\n                attribute,\n                parseNumberOrString(value)\n            );\n        };\n\n        deleteNodeRenderer: ICellRenderer = (rowIndex) => {\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                nodeToDelete: this.filteredTable[rowIndex],\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteNodeAlert = () => {\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropNode(\n                            this.state.nodeToDelete?.key as string\n                        );\n                        this.setState({ deleteAlertOpen: false });\n                    }}\n                    style={{ minWidth: \"60vw\" }}\n                >\n                    <p>\n                        Are you sure you want to delete the node with ID{\" \"}\n                        <Code>{this.state.nodeToDelete?.key}</Code> with\n                        attributes:\n                        <Code>\n                            {stringifyNodeDetail(\n                                this.state.nodeToDelete\n                                    ?.attributes as Attributes\n                            )}\n                        </Code>\n                        This action cannot be reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        style = {\n            textAlign: \"center\",\n        };\n\n        render() {\n            return (\n                <div>\n                    <Callout\n                        title={\n                            \"Try to click on a cell and type in something...\"\n                        }\n                        intent=\"primary\"\n                        icon=\"edit\"\n                    >\n                        The corresponding value of a node's attribute can be\n                        modified by clicking the cell and type in\n                    </Callout>\n\n                    <ButtonGroup>\n                        <Button\n                            onClick={() => this.forceUpdate()}\n                            icon=\"refresh\"\n                            intent=\"none\"\n                            text=\"Refresh\"\n                        />\n                        <Button\n                            onClick={() => {\n                                State.preferences.AddNodeDialogOpen = true;\n                            }}\n                            icon=\"new-object\"\n                            intent=\"primary\"\n                            text=\"Add Node\"\n                        />\n                        <Divider />\n                        <InputGroup\n                            style={{ width: \"40vw\" }}\n                            asyncControl={true}\n                            leftIcon=\"search\"\n                            onChange={handleStringChange((value) => {\n                                this.setState({ filterQuery: value });\n                            })}\n                            placeholder=\"Search any Node...\"\n                            value={this.state.filterQuery}\n                            fill={true}\n                        />\n                    </ButtonGroup>\n\n                    <hr />\n\n                    <Table\n                        className=\"argo-table\"\n                        defaultRowHeight={30}\n                        numRows={this.filteredTable.length}\n                    >\n                        <Column\n                            name=\"\"\n                            cellRenderer={this.deleteNodeRenderer}\n                            //@ts-ignore\n                            style={this.style}\n                        />\n                        <Column\n                            name=\"ID\"\n                            //@ts-ignore\n                            intent={Intent.SUCCESS}\n                            cellRenderer={(rowIndex) => {\n                                let id = this.filteredTable[rowIndex].key;\n                                return <Cell>{id}</Cell>;\n                            }}\n                        />\n                        {this.renderColumns()}\n                    </Table>\n                    {this.deleteNodeAlert()}\n                </div>\n            );\n        }\n    }\n);\n\nexport default observer(\n    /**\n     * @description the node data sheet table\n     * @author Zichen XU\n     * @class NodeDataSheetDialog\n     * @extends {React.Component}\n     */\n    class NodeDataSheetDialog extends React.Component {\n        render() {\n            return (\n                <DataSheetDialogWrapper for=\"node\">\n                    <GraphNodeTable />\n                </DataSheetDialogWrapper>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, FormGroup, MenuItem, Tooltip } from \"@blueprintjs/core\";\nimport { Select } from \"@blueprintjs/select\";\nimport { Attributes, SerializedNode } from \"graphology-types\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { stringifyNodeDetail } from \"./InputFormUtils\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * the text to be shown above the selectButton\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    text: string;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     * the {nodeId} is the id of the selected node\n     *\n     * @memberof Props\n     */\n    onChange: (nodeId: string) => void;\n}\n\n/**\n * this component can be used to choose the node among all the nodes, with basic search filters available\n * to use it, you have to specify the text shown above the selectButton as well as the onChange function to call when a candidate is selected\n */\nexport default observer(\n    /**\n     * @description this component can be used to choose the node among all the nodes\n     * with basic search filters available\n     *\n     * to use it, you have to specify the text shown above the selectButton\n     * as well as the onChange function to call when a candidate is selected\n     * @author Zichen XU\n     * @class NodeChooser\n     * @extends {React.Component<Props, {}>}\n     */\n    class NodeChooser extends React.Component<Props, {}> {\n        state = {\n            select: \"Choose \" + this.props.text,\n        };\n\n        render() {\n            return (\n                <FormGroup\n                    label={this.props.text}\n                    labelFor=\"text-input\"\n                    labelInfo=\"(required)\"\n                >\n                    <Select\n                        filterable={true}\n                        items={State.graph.rawGraph.export().nodes}\n                        itemPredicate={(\n                            query: string,\n                            item: SerializedNode<Attributes>\n                        ) => {\n                            return item.key.includes(query);\n                        }}\n                        itemRenderer={(item: SerializedNode<Attributes>) => {\n                            return (\n                                <Tooltip\n                                    content={stringifyNodeDetail(\n                                        item.attributes ?? {}\n                                    )}\n                                >\n                                    <MenuItem\n                                        key={item.key}\n                                        text={item.key}\n                                        onClick={() => {\n                                            let key = item.key;\n                                            this.setState({ select: key });\n                                            this.props.onChange(key);\n                                        }}\n                                    />\n                                </Tooltip>\n                            );\n                        }}\n                        noResults={\n                            <MenuItem disabled={true} text=\"No results.\" />\n                        }\n                        onItemSelect={() => {}}\n                    >\n                        <Button\n                            text={this.state.select}\n                            rightIcon=\"double-caret-vertical\"\n                        />\n                    </Select>\n                </FormGroup>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Alert,\n    Button,\n    ButtonGroup,\n    Callout,\n    Classes,\n    Code,\n    Dialog,\n    Divider,\n    InputGroup,\n    Intent,\n} from \"@blueprintjs/core\";\nimport {\n    Cell,\n    Column,\n    ICellRenderer,\n    RenderMode,\n    Table,\n} from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport DataSheetDialogWrapper from \"../utils/DataSheetDialogWrapper\";\nimport { Attributes, SerializedEdge } from \"graphology-types\";\nimport { handleStringChange } from \"../utils/InputFormUtils\";\nimport NodeChooser from \"../utils/NodeChooser\";\n\nlet GraphEdgeTable = observer(\n    class GraphEdgeTable extends React.Component {\n        state = {\n            addEdgeDialogOpen: false,\n            deleteAlertOpen: false,\n            edgeToDelete: null as null | SerializedEdge<Attributes>,\n            filterQuery: null as null | string,\n            chosenSource: null as null | string,\n            chosenTarget: null as null | string,\n        };\n\n        get filteredTable() {\n            let newTable: SerializedEdge<Attributes>[] = [];\n            State.graph.rawGraph.export().edges.forEach((edge) => {\n                if (\n                    !this.state.filterQuery ||\n                    edge.source\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    edge.target\n                        .toLocaleLowerCase()\n                        .includes(this.state.filterQuery.toLocaleLowerCase()) ||\n                    this.state.filterQuery === \"\"\n                ) {\n                    newTable.push(edge);\n                }\n            });\n            return newTable;\n        }\n\n        deleteEdgeRenderer: ICellRenderer = (rowIndex) => {\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                edgeToDelete: this.filteredTable[rowIndex],\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteEdgeAlert = () => {\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropEdge(\n                            this.state.edgeToDelete?.key as string\n                        );\n                        this.setState({ deleteAlertOpen: false });\n                    }}\n                >\n                    <p>\n                        Are you sure you want to delete the edge with ID{\" \"}\n                        <Code>{this.state.edgeToDelete?.key}</Code> from Node ID{\" \"}\n                        <Code>{this.state.edgeToDelete?.source}</Code> to Node\n                        ID <Code>{this.state.edgeToDelete?.target}</Code>. This\n                        action cannot be reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        addEdgeDialog = () => {\n            return (\n                <Dialog\n                    isOpen={this.state.addEdgeDialogOpen}\n                    icon=\"new-link\"\n                    onClose={() => this.setState({ addEdgeDialogOpen: false })}\n                    onClosed={() =>\n                        this.setState({\n                            chosenSource: null,\n                            chosenTarget: null,\n                        })\n                    }\n                    title=\"Add Edge\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add unique undirected edges to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> edge means there should only exist\n                            one edge that connects between the source and the\n                            target.\n                        </p>\n                        <ButtonGroup fill={true}>\n                            <NodeChooser\n                                text=\"Source Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenSource: value });\n                                }}\n                            />\n                            <Divider />\n                            <NodeChooser\n                                text=\"Target Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenTarget: value });\n                                }}\n                            />\n                        </ButtonGroup>\n                        <p>New edges are added to the end of the table.</p>\n                        {!this.canImport && (\n                            <Callout\n                                title=\"Invalid Edge\"\n                                intent=\"danger\"\n                                icon=\"edit\"\n                            >\n                                The new edge is invalid because either this is a\n                                edge that already in the graph or cannot form a\n                                valid undirected edge\n                            </Callout>\n                        )}\n                    </div>\n                    <div className={Classes.DIALOG_FOOTER}>\n                        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                            <Button\n                                onClick={() =>\n                                    this.setState({ addEdgeDialogOpen: false })\n                                }\n                            >\n                                Cancel\n                            </Button>\n                            <Button\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.graph.mutating.addEdge(\n                                        this.state.chosenSource!,\n                                        this.state.chosenTarget!\n                                    );\n                                    this.setState({ addEdgeDialogOpen: false });\n                                }}\n                                disabled={!this.canImport}\n                            >\n                                Confirm\n                            </Button>\n                        </div>\n                    </div>\n                </Dialog>\n            );\n        };\n\n        get canImport(): boolean {\n            if (!this.state.chosenSource || !this.state.chosenTarget) {\n                return false;\n            } else if (this.state.chosenSource === this.state.chosenTarget) {\n                return false;\n            } else {\n                return (\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenSource,\n                        this.state.chosenTarget\n                    ) &&\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenTarget,\n                        this.state.chosenSource\n                    )\n                );\n            }\n        }\n\n        style = {\n            textAlign: \"center\",\n        };\n\n        render() {\n            return (\n                <div>\n                    <ButtonGroup>\n                        <Button\n                            onClick={() => this.forceUpdate()}\n                            icon=\"refresh\"\n                            intent=\"none\"\n                            text=\"Refresh\"\n                        />\n                        <Button\n                            onClick={() =>\n                                this.setState({ addEdgeDialogOpen: true })\n                            }\n                            icon=\"new-link\"\n                            intent=\"primary\"\n                            text=\"Add Edge\"\n                        />\n                        <Divider />\n                        <InputGroup\n                            style={{ width: \"40vw\" }}\n                            asyncControl={true}\n                            leftIcon=\"search\"\n                            onChange={handleStringChange((value) => {\n                                this.setState({ filterQuery: value });\n                            })}\n                            placeholder=\"Search any Source or Target of an Edge...\"\n                            value={this.state.filterQuery ?? \"\"}\n                        />\n                    </ButtonGroup>\n\n                    <hr />\n                    <Table\n                        className=\"argo-table\"\n                        numRows={this.filteredTable.length}\n                        defaultRowHeight={30}\n                        renderMode={RenderMode.NONE}\n                    >\n                        <Column\n                            name=\"\"\n                            cellRenderer={this.deleteEdgeRenderer}\n                            //@ts-ignore\n                            style={this.style}\n                        />\n                        <Column\n                            name=\"Source\"\n                            //@ts-ignore\n                            intent={Intent.PRIMARY}\n                            cellRenderer={(rowIndex) => {\n                                return (\n                                    <Cell>\n                                        {this.filteredTable[rowIndex].source}\n                                    </Cell>\n                                );\n                            }}\n                        />\n                        <Column\n                            name=\"Target\"\n                            //@ts-ignore\n                            intent={Intent.PRIMARY}\n                            cellRenderer={(rowIndex) => {\n                                return (\n                                    <Cell>\n                                        {this.filteredTable[rowIndex].target}\n                                    </Cell>\n                                );\n                            }}\n                        />\n                    </Table>\n                    {this.deleteEdgeAlert()}\n                    {this.addEdgeDialog()}\n                </div>\n            );\n        }\n    }\n);\n\nexport default observer(\n    /**\n     * @description the edge data sheet table\n     * @author Zichen XU\n     * @class EdgeDataSheetDialog\n     * @extends {React.Component}\n     */\n    class EdgeDataSheetDialog extends React.Component {\n        render() {\n            return (\n                <DataSheetDialogWrapper for=\"edge\">\n                    <GraphEdgeTable />\n                </DataSheetDialogWrapper>\n            );\n        }\n    }\n);\n","import {\n    Button,\n    Card,\n    Elevation,\n    FormGroup,\n    H5,\n    InputGroup,\n    Tooltip,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport State from \"../../state\";\nimport { Attributes } from \"graphology-types\";\nimport { handleStringChange, parseNumberOrString } from \"./InputFormUtils\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * function to call when a new node is successfully added\n     * the {nodeId} is the id of the newly added node, {attributes} is the attributes of the newly added node\n     *\n     * @memberof Props\n     */\n    onAdded: (nodeId: string, attributes: Attributes) => void;\n}\n\nexport default observer(\n    /**\n     * @description This component will be used to be part of addNodeDialog\n     * @author Zichen XU,Zhiyuan LYU\n     * @extends {React.Component}\n     */\n    class NodeAdder extends React.Component<Props, {}> {\n        state = {\n            newNodeId: \"\",\n            attributes: {} as Attributes,\n        };\n\n        get canImport() {\n            return (\n                !State.graph.rawGraph.hasNode(this.state.newNodeId) &&\n                this.state.newNodeId !== \"\"\n            );\n        }\n\n        canImportTag = () => {\n            return this.canImport ? (\n                <Tooltip\n                    content={\n                        \"This Node Id is not used by any existing node yet\"\n                    }\n                    intent=\"success\"\n                >\n                    <Button icon=\"tick\" intent=\"success\" minimal={true} />\n                </Tooltip>\n            ) : (\n                <Tooltip\n                    content={\n                        \"This Node Id is currently in use by other nodes, try with another one instead\"\n                    }\n                    intent=\"warning\"\n                >\n                    <Button icon=\"cross\" intent=\"warning\" minimal={true} />\n                </Tooltip>\n            );\n        };\n\n        renderAttributesForm = (attributes: string[]) => {\n            return attributes.map((attribute) => {\n                if (attribute !== \"_options\" && attribute !== \"_visualize\") {\n                    return (\n                        <FormGroup label={attribute}>\n                            <InputGroup\n                                asyncControl={true}\n                                placeholder={\n                                    \"Enter the value for attribute: \" +\n                                    attribute\n                                }\n                                onChange={handleStringChange((value) => {\n                                    let newValue = this.state.attributes;\n                                    newValue[attribute] = parseNumberOrString(\n                                        value\n                                    );\n                                    this.setState({ attributes: newValue });\n                                })}\n                                value={this.state.attributes[attribute]}\n                            />\n                        </FormGroup>\n                    );\n                } else {\n                    return null;\n                }\n            });\n        };\n\n        render() {\n            return (\n                <Card elevation={Elevation.ONE}>\n                    <FormGroup label=\"New Node ID\" labelInfo=\"(required)\">\n                        <InputGroup\n                            autoFocus={true}\n                            asyncControl={true}\n                            placeholder=\"Enter the new Node Id...\"\n                            intent={this.canImport ? \"success\" : \"warning\"}\n                            rightElement={this.canImportTag()}\n                            onChange={handleStringChange((value) =>\n                                this.setState({ newNodeId: value })\n                            )}\n                            value={this.state.newNodeId}\n                        />\n                    </FormGroup>\n                    <Card elevation={Elevation.ONE}>\n                        <H5>Attributes</H5>\n                        {this.renderAttributesForm(\n                            State.graph.metadata.nodeProperties\n                        )}\n                    </Card>\n                    <hr />\n                    <Button\n                        intent=\"primary\"\n                        onClick={() => {\n                            State.graph.decorateRawNode(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            State.graph.mutating.addNode(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            this.props.onAdded(\n                                this.state.newNodeId,\n                                this.state.attributes\n                            );\n                            State.preferences.AddNodeDialogOpen = false;\n                            // State.preferences.rightClickBackgroundPanelOpen = false;\n                            // this.forceUpdate();\n                            // State.graphDelegate.cameraFocusOn(this.state.newNodeId);\n                        }}\n                        disabled={!this.canImport}\n                    >\n                        Confirm\n                    </Button>\n                </Card>\n            );\n        }\n        componentDidMount = () => {\n            State.graph.metadata.nodeProperties.forEach((prop) => {\n                let newValue = this.state.attributes;\n                newValue[prop] = \"\";\n                this.setState({ attributes: newValue });\n            });\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Classes, Dialog, Tag } from \"@blueprintjs/core\";\nimport NodeAdder from \"../utils/NodeAdder\";\nimport State from \"../../state\";\n\nexport default observer(\n    /**\n     * @description the dialog for adding nodes with fields for the user to fill in\n     * @author Zichen XU\n     * @class AddNodeDialog\n     * @extends {React.Component}\n     */\n    class AddNodeDialog extends React.Component {\n        render() {\n            return (\n                <Dialog\n                    isOpen={State.preferences.AddNodeDialogOpen}\n                    icon=\"new-object\"\n                    onClose={() => {\n                        State.preferences.AddNodeDialogOpen = false;\n                    }}\n                    title=\"Add Node\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add node with unique node id to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> node means there should only exist\n                            one node that has the respective node id.\n                        </p>\n                        <Tag>New nodes are added to the end of the table</Tag>\n                        <hr />\n                        <NodeAdder\n                            onAdded={() => {\n                                this.setState({ addNodeDialogOpen: false });\n                                this.forceUpdate();\n                            }}\n                        />\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Callout,\n    Classes,\n    Dialog,\n    Divider,\n    Intent,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport NodeChooser from \"../utils/NodeChooser\";\nexport default observer(\n    /**\n     * @description This component will be used when adding a edge\n     * @author Zhiyuan LYU\n     * @extends {React.Component}\n     */\n    class AddEdgeDialog extends React.Component {\n        state = {\n            chosenSource: null as null | string,\n            chosenTarget: null as null | string,\n        };\n\n        get canImport(): boolean {\n            if (!this.state.chosenSource || !this.state.chosenTarget) {\n                return false;\n            } else if (this.state.chosenSource === this.state.chosenTarget) {\n                return false;\n            } else {\n                return (\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenSource,\n                        this.state.chosenTarget\n                    ) &&\n                    !State.graph.rawGraph.hasEdge(\n                        this.state.chosenTarget,\n                        this.state.chosenSource\n                    )\n                );\n            }\n        }\n\n        render() {\n            return (\n                <Dialog\n                    isOpen={State.preferences.AddEdgeDialogOpen}\n                    icon=\"new-link\"\n                    onClose={() => {\n                        State.preferences.AddEdgeDialogOpen = false;\n                    }}\n                    onClosed={() =>\n                        this.setState({\n                            chosenSource: null,\n                            chosenTarget: null,\n                        })\n                    }\n                    title=\"Add Edge\"\n                >\n                    <div className={Classes.DIALOG_BODY}>\n                        <p>\n                            <strong>\n                                You can only add unique undirected edges to the\n                                graph dataset.\n                            </strong>\n                        </p>\n                        <p>\n                            A <em>UNIQUE</em> edge means there should only exist\n                            one edge that connects between the source and the\n                            target.\n                        </p>\n                        <ButtonGroup fill={true}>\n                            <NodeChooser\n                                text=\"Source Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenSource: value });\n                                }}\n                            />\n                            <Divider />\n                            <NodeChooser\n                                text=\"Target Node\"\n                                onChange={(value) => {\n                                    this.setState({ chosenTarget: value });\n                                }}\n                            />\n                        </ButtonGroup>\n                        <p>New edges are added to the end of the table.</p>\n                        {!this.canImport && (\n                            <Callout\n                                title=\"Invalid Edge\"\n                                intent=\"danger\"\n                                icon=\"edit\"\n                            >\n                                The new edge is invalid because either this is a\n                                edge that already in the graph or cannot form a\n                                valid undirected edge\n                            </Callout>\n                        )}\n                    </div>\n                    <div className={Classes.DIALOG_FOOTER}>\n                        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                            <Button\n                                onClick={() => {\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                            >\n                                Cancel\n                            </Button>\n                            {/* //todo:\n                            <Button\n                                onClick={() => {\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                            >\n                                Preview\n                            </Button> */}\n                            <Button\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.graph.mutating.addEdge(\n                                        this.state.chosenSource!,\n                                        this.state.chosenTarget!\n                                    );\n                                    this.forceUpdate();\n                                    State.preferences.AddEdgeDialogOpen = false;\n                                }}\n                                disabled={!this.canImport}\n                            >\n                                Confirm\n                            </Button>\n                        </div>\n                    </div>\n                </Dialog>\n            );\n        }\n    }\n);\n","/* eslint-disable jsx-a11y/label-has-for */\nimport React from \"react\";\nimport {\n    Button,\n    ButtonGroup,\n    Classes,\n    ControlGroup,\n    Dialog,\n    FileInput,\n    Intent,\n    Spinner,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\n\nexport default observer(\n    /**\n     * @description the dialog for GEXF import\n     * @author Zichen XU\n     * @class ImportGEXFDialog\n     * @extends {React.Component}\n     */\n    class ImportGEXFDialog extends React.Component {\n        state = {\n            fileIsSelect: false,\n        };\n\n        renderImportButton() {\n            return (\n                <div className={Classes.DIALOG_FOOTER}>\n                    <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                        <ButtonGroup>\n                            <Button\n                                disabled={!this.state.fileIsSelect}\n                                intent={Intent.PRIMARY}\n                                onClick={() => {\n                                    State.import.isLoading = true;\n                                    State.import\n                                        .importGraphFromGEXF()\n                                        .then((res) => {\n                                            State.graph.setGraph(\n                                                res.graph,\n                                                res.metadata\n                                            );\n\n                                            if (\n                                                State.graph.rawGraph.hasAttribute(\n                                                    \"default\"\n                                                )\n                                            ) {\n                                                State.cluster.setCluster(\n                                                    State.graph.rawGraph.getAttribute(\n                                                        \"default\"\n                                                    )\n                                                );\n                                            }\n\n                                            State.import.isLoading = false;\n                                            State.import.importGEXFDialogOpen = false;\n                                        });\n                                }}\n                                text=\"Import\"\n                            />\n                        </ButtonGroup>\n                    </div>\n                </div>\n            );\n        }\n\n        render() {\n            return (\n                <Dialog\n                    icon=\"document-open\"\n                    isOpen={State.import.importGEXFDialogOpen}\n                    onClose={() => {\n                        State.import.importGEXFDialogOpen = false;\n                    }}\n                    title=\"Open GEXF\"\n                >\n                    {/* if is loading, then show Spinner */}\n                    {State.import.isLoading ? (\n                        <Spinner />\n                    ) : (\n                        <div\n                            className={classnames(\n                                Classes.DIALOG_BODY,\n                                \"import-dialog\"\n                            )}\n                        >\n                            <div>\n                                <ControlGroup>\n                                    <FileInput\n                                        text={State.import.gexfFileName}\n                                        onInputChange={(event) => {\n                                            let target = event.target as HTMLInputElement;\n                                            if (\n                                                !target.files ||\n                                                target.files.length < 1\n                                            ) {\n                                                return;\n                                            }\n                                            State.import.gexfFileName =\n                                                target.files[0].name;\n                                            // after setting the selectedNodeFileFromInput, it will auto render the preview table\n                                            State.import.selectedGEXFFileFromInput =\n                                                target.files[0];\n\n                                            this.setState({\n                                                fileIsSelect: true,\n                                            });\n                                        }}\n                                    />\n                                </ControlGroup>\n                            </div>\n                            {this.renderImportButton()}\n                        </div>\n                    )}\n                </Dialog>\n            );\n        }\n    }\n);\n","import React from \"react\";\n\nimport ImportDialog from \"./dialogs/importDialog\";\nimport ExportDialog from \"./dialogs/ExportDialog\";\nimport NodeDataSheetDialog from \"./dialogs/NodeDataSheetDialog\";\nimport EdgeDataSheetDialog from \"./dialogs/EdgeDataSheetDialog\";\nimport AddNodeDialog from \"./dialogs/AddNodeDialog\";\nimport AddEdgeDialog from \"./dialogs/AddEdgeDialog\";\nimport ImportGEXFDialog from \"./dialogs/ImportGEXFDialog\";\n\n/**\n * @description all the dialogs that may appear\n * @author Zichen XU, Zhiyuan LYU\n * @export\n * @class Dialogs\n * @extends {React.Component}\n */\nexport default class Dialogs extends React.Component {\n    render() {\n        return (\n            <div style={{ display: \"none\" }}>\n                <ImportGEXFDialog />\n                <ImportDialog />\n                <AddNodeDialog />\n                <AddEdgeDialog />\n                <NodeDataSheetDialog />\n                <EdgeDataSheetDialog />\n                <ExportDialog />\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Attributes } from \"graphology-types\";\nimport classnames from \"classnames\";\nimport State from \"../../state/index\";\n\nexport default observer(\n    /**\n     * @description This component will be used when multi-select in the mode 'node selection'.\n     * @author Zhiyuan LYU\n     * @extends {React.Component}\n     */\n    class SelectionBox extends React.Component {\n        state = {\n            boxStyle: {\n                left: 0,\n                top: 0,\n                width: 0,\n                height: 0,\n            },\n            startPoint: { x: 0, y: 0 },\n            endPoint: { x: 0, y: 0 },\n            mouseDown: false,\n        };\n\n        onMouseDownCallback = (\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\n        ) => {\n            let startpoint = { x: event.clientX, y: event.clientY };\n            this.setState({\n                startPoint: startpoint,\n                endPoint: startpoint,\n                mouseDown: true,\n            });\n        };\n\n        onMouseMoveCallback = (\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\n        ) => {\n            if (this.state.mouseDown) {\n                let endPoint = { x: event.clientX, y: event.clientY };\n                this.setState({\n                    endPoint: endPoint,\n                    boxStyle: this._calculateSelectionBox(\n                        this.state.startPoint,\n                        this.state.endPoint\n                    ),\n                });\n            }\n        };\n\n        onMouseUpCallback = (\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>\n        ) => {\n            State.interaction.boxSelection_endPoint = {\n                x: this.state.endPoint.x,\n                y: this.state.endPoint.y,\n            };\n            State.interaction.boxSelection_startPoint = {\n                x: this.state.startPoint.x,\n                y: this.state.startPoint.y,\n            };\n\n            this.setState({\n                startPoint: { x: 0, y: 0 },\n                endPoint: { x: 0, y: 0 },\n                boxStyle: {\n                    left: 0,\n                    top: 0,\n                    width: 0,\n                    height: 0,\n                },\n                mouseDown: false,\n            });\n            State.interaction.boxSelectionOpen = false;\n            State.interaction.boxSelectNode();\n        };\n\n        _calculateSelectionBox(\n            startPoint: Attributes,\n            endPoint: Attributes\n        ): Attributes {\n            let left = Math.min(startPoint.x, endPoint.x);\n            let top = Math.min(startPoint.y, endPoint.y);\n            let width = Math.abs(startPoint.x - endPoint.x);\n            let height = Math.abs(startPoint.y - endPoint.y);\n            return { left: left, top: top, width: width, height: height };\n        }\n\n        render() {\n            return (\n                <div\n                    className={classnames(\"boxCanvas\")}\n                    onMouseDown={this.onMouseDownCallback}\n                    onMouseMove={this.onMouseMoveCallback}\n                    onMouseUp={this.onMouseUpCallback}\n                >\n                    <div\n                        className={classnames(\"selectionBox\")}\n                        style={this.state.boxStyle}\n                    ></div>\n                </div>\n            );\n        }\n    }\n);\n","import ReactDOM from \"react-dom\";\nimport State from \"..\";\nimport * as THREE from \"three\";\nimport { Object3D } from \"three\";\nimport ComponentRef from \"../../components/ComponentRef\";\n\nexport const onDocumentLeftClick: EventListener = (evt: Event) => {\n    const event = evt as MouseEvent;\n    if (\n        State.cluster.clusterBy === null ||\n        !State.graphDelegate.graphDelegateMethods\n    ) {\n        return;\n    }\n    let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n    let box = (element as Element)?.getBoundingClientRect();\n\n    let vector = new THREE.Vector3(\n        ((event.clientX - box.left) / box.width) * 2 - 1,\n        -((event.clientY - box.top) / box.height) * 2 + 1,\n        0.5\n    );\n\n    let camera = State.graphDelegate.graphDelegateMethods?.camera();\n    if (!camera) {\n        return;\n    }\n    vector = vector.unproject(camera);\n\n    let raycaster = new THREE.Raycaster(\n        camera.position,\n        vector.sub(camera.position).normalize()\n    );\n    let intersects = raycaster.intersectObjects(\n        State.graphDelegate.clusterObject.fusionClusterObjects\n            ?.children as Object3D[],\n        true\n    );\n\n    if (intersects.length > 0) {\n        State.clusterInteraction.clusterLeftClickCallback(\n            intersects[0].object.uuid,\n            event\n        );\n        console.log(\"currently Clicked ClusterId\", intersects[0].object.uuid);\n    }\n};\n\nexport const onDocumentRightClick: EventListener = (evt: Event) => {\n    const event = evt as MouseEvent;\n    if (\n        State.cluster.clusterBy === null ||\n        !State.graphDelegate.graphDelegateMethods\n    ) {\n        return;\n    }\n    let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n    let box = (element as Element)?.getBoundingClientRect();\n\n    let vector = new THREE.Vector3(\n        ((event.clientX - box.left) / box.width) * 2 - 1,\n        -((event.clientY - box.top) / box.height) * 2 + 1,\n        0.5\n    );\n\n    let camera = State.graphDelegate.graphDelegateMethods?.camera();\n    if (!camera) {\n        return;\n    }\n    vector = vector.unproject(camera);\n\n    let raycaster = new THREE.Raycaster(\n        camera.position,\n        vector.sub(camera.position).normalize()\n    );\n    let intersects = raycaster.intersectObjects(\n        State.graphDelegate.clusterObject.fusionClusterObjects\n            ?.children as Object3D[],\n        true\n    );\n\n    if (intersects.length > 0) {\n        State.clusterInteraction.clusterRightClickCallback(\n            intersects[0].object.uuid,\n            event\n        );\n    } else {\n        State.clusterInteraction.clusterRightClickCallback(null, event);\n    }\n    console.log(\n        \"currently Right-Clicked ClusterId\",\n        intersects[0]?.object?.uuid ?? null\n    );\n};\n\nexport function onDocumentMouseMove(this: Element, event: MouseEvent) {\n    if (\n        State.cluster.clusterBy === null ||\n        !State.graphDelegate.graphDelegateMethods\n    ) {\n        State.clusterInteraction.currentlyHoveredClusterId = null;\n        return;\n    }\n    let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n    let box = (element as Element)?.getBoundingClientRect();\n\n    let vector = new THREE.Vector3(\n        ((event.clientX - box.left) / box.width) * 2 - 1,\n        -((event.clientY - box.top) / box.height) * 2 + 1,\n        0.5\n    );\n\n    let camera = State.graphDelegate.graphDelegateMethods?.camera();\n    if (!camera) {\n        return;\n    }\n    vector = vector.unproject(camera);\n\n    let raycaster = new THREE.Raycaster(\n        camera.position,\n        vector.sub(camera.position).normalize()\n    );\n    let intersects = raycaster.intersectObjects(\n        State.graphDelegate.clusterObject.fusionClusterObjects\n            ?.children as Object3D[],\n        true\n    );\n\n    if (intersects.length > 0) {\n        State.clusterInteraction.clusterHoverCallback(\n            intersects[0].object.uuid,\n            event\n        );\n    } else {\n        State.clusterInteraction.clusterHoverCallback(null, event);\n    }\n    console.log(\n        \"currentlyHoveredClusterId\",\n        intersects[0]?.object?.uuid ?? null\n    );\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport CanvasDraw from \"react-canvas-draw\";\nimport State from \"../../../state\";\nimport { NAVBAR_HEIGHT } from \"../../../constants\";\nimport { ICanvasDrawProps } from \"./CanvasDrawPanel\";\n\nexport default observer(\n    /**\n     * @description canvas to draw free-hand gesture when cluster splitting\n     * @author Zichen XU\n     * @class CanvasDrawFreehandPanel\n     */\n    class CanvasDrawFreehandPanel extends React.Component<\n        ICanvasDrawProps,\n        {}\n    > {\n        //@ts-ignore\n        canvasRef: React.MutableRefObject<CanvasDraw> = React.createRef();\n\n        get canvasMethods() {\n            return this.canvasRef.current;\n        }\n\n        render() {\n            return (\n                <div\n                    onMouseUp={() => {\n                        const data = JSON.parse(\n                            this.canvasMethods.getSaveData()\n                        );\n                        if (data.lines[0].points.length > 4) {\n                            this.exportDrawing();\n                        }\n                    }}\n                >\n                    <CanvasDraw\n                        ref={this.canvasRef}\n                        style={{\n                            position: \"absolute\",\n                            top: this.props.boundingRect.y,\n                        }}\n                        canvasHeight={this.props.boundingRect.height}\n                        canvasWidth={this.props.boundingRect.width}\n                        lazyRadius={0}\n                        brushRadius={3}\n                        brushColor={\"#F6B26B\"}\n                        catenaryColor={\"#F6B26B\"}\n                    />\n                </div>\n            );\n        }\n\n        exportDrawing() {\n            State.helper.clusterSplittingCurrentStep = 3;\n            const data = JSON.parse(this.canvasMethods.getSaveData());\n            let drawPoints = data?.lines[0]?.points as {\n                x: number;\n                y: number;\n            }[];\n            if (!drawPoints) {\n                return;\n            }\n            drawPoints.forEach((value) => {\n                value.y += NAVBAR_HEIGHT;\n            });\n\n            // line was drawn left to right\n            if (drawPoints[0].x < drawPoints[drawPoints.length - 1].x) {\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.props.boundingRect.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            } else {\n                drawPoints.reverse();\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.props.boundingRect.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            }\n\n            State.clusterInteraction.lineSegment = drawPoints;\n            State.clusterInteraction.computeSplitCluster();\n        }\n\n        clearDrawing() {\n            this.canvasMethods.clear();\n        }\n\n        componentDidMount = () => {\n            this.clearDrawing();\n        };\n\n        componentWillUnmount = () => {\n            this.clearDrawing();\n        };\n    }\n);\n","import { observer } from \"mobx-react\";\nimport React from \"react\";\nimport State from \"../../../state\";\nimport { ICanvasDrawProps } from \"./CanvasDrawPanel\";\n\nexport default observer(\n    /**\n     * @description the canvas to draw a straight line when splitting the cluster\n     * @author Zichen XU\n     * @class CanvasDrawStraightLinePanel\n     */\n\n    class CanvasDrawStraightLinePanel extends React.Component<ICanvasDrawProps> {\n        private startPoint = { x: 0, y: 0 };\n        private endPoint = { x: 100, y: 100 };\n        private mouseDown = false;\n\n        onMouseDownCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            this.startPoint = { x: event.clientX, y: event.clientY - 50 };\n            this.endPoint = { x: event.clientX, y: event.clientY - 50 };\n            this.mouseDown = true;\n        };\n\n        onMouseMoveCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            if (this.mouseDown) {\n                this.endPoint = { x: event.clientX, y: event.clientY - 50 };\n                this.drawPoints();\n            }\n        };\n\n        onMouseUpCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            if (this.mouseDown) {\n                this.mouseDown = false;\n                this.exportDrawing();\n            }\n        };\n\n        exportDrawing() {\n            State.helper.clusterSplittingCurrentStep = 3;\n            let drawPoints = [\n                { x: this.startPoint.x, y: this.startPoint.y },\n                { x: this.endPoint.x, y: this.endPoint.y },\n            ] as {\n                x: number;\n                y: number;\n            }[];\n\n            // line was drawn left to right\n            if (drawPoints[0].x < drawPoints[1].x) {\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.props.boundingRect.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            } else {\n                drawPoints.reverse();\n                drawPoints.unshift({ x: 0, y: 0 });\n                drawPoints.push({ x: this.props.boundingRect.width, y: 0 });\n                drawPoints.push({ x: 0, y: 0 });\n            }\n\n            State.clusterInteraction.lineSegment = drawPoints;\n            State.clusterInteraction.computeSplitCluster();\n        }\n\n        ctx!: CanvasRenderingContext2D;\n\n        drawPoints() {\n            this.ctx.lineJoin = \"round\";\n            this.ctx.lineCap = \"round\";\n            this.ctx.clearRect(\n                0,\n                0,\n                this.ctx.canvas.width,\n                this.ctx.canvas.height\n            );\n            this.ctx.lineWidth = 5;\n\n            this.ctx.beginPath();\n\n            this.ctx.moveTo(this.startPoint.x, this.startPoint.y);\n            this.ctx.lineTo(this.endPoint.x, this.endPoint.y);\n\n            this.ctx.strokeStyle = \"#F6B26B\";\n            this.ctx.stroke();\n        }\n\n        clearDrawing() {\n            this.ctx?.clearRect(\n                0,\n                0,\n                this.ctx.canvas.width,\n                this.ctx.canvas.height\n            );\n        }\n\n        render() {\n            return (\n                <canvas\n                    style={{\n                        position: \"absolute\",\n                        zIndex: 20,\n                    }}\n                    width={this.props.boundingRect.width}\n                    height={this.props.boundingRect.height}\n                    ref={(canvas) => {\n                        if (canvas) {\n                            this.ctx = canvas.getContext(\n                                \"2d\"\n                            ) as CanvasRenderingContext2D;\n                        }\n                    }}\n                    onMouseDown={this.onMouseDownCallback}\n                    onMouseMove={this.onMouseMoveCallback}\n                    onMouseUp={this.onMouseUpCallback}\n                />\n            );\n        }\n\n        componentDidMount = () => {\n            this.clearDrawing();\n        };\n\n        componentWillUnmount = () => {\n            this.clearDrawing();\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport CanvasDraw from \"react-canvas-draw\";\nimport State from \"../../../state\";\nimport { NAVBAR_HEIGHT } from \"../../../constants\";\nimport { ICanvasDrawProps } from \"./CanvasDrawPanel\";\n\nexport default observer(\n    /**\n     * @description canvas to draw free circle gesture when cluster splitting\n     * @author Zichen XU\n     * @class CanvasDrawFreeCirclePanel\n     */\n    class CanvasDrawFreeCirclePanel extends React.Component<\n        ICanvasDrawProps,\n        {}\n    > {\n        //@ts-ignore\n        canvasRef: React.MutableRefObject<CanvasDraw> = React.createRef();\n\n        get canvasMethods() {\n            return this.canvasRef.current;\n        }\n\n        render() {\n            return (\n                <div\n                    onMouseUp={() => {\n                        const data = JSON.parse(\n                            this.canvasMethods.getSaveData()\n                        );\n                        if (data.lines[0].points.length > 4) {\n                            this.exportDrawing();\n                        }\n                    }}\n                >\n                    <CanvasDraw\n                        ref={this.canvasRef}\n                        style={{\n                            position: \"absolute\",\n                            top: this.props.boundingRect.y,\n                        }}\n                        canvasHeight={this.props.boundingRect.height}\n                        canvasWidth={this.props.boundingRect.width}\n                        lazyRadius={0}\n                        brushRadius={3}\n                        brushColor={\"#F6B26B\"}\n                        catenaryColor={\"#F6B26B\"}\n                    />\n                </div>\n            );\n        }\n\n        exportDrawing() {\n            State.helper.clusterSplittingCurrentStep = 3;\n            const data = JSON.parse(this.canvasMethods.getSaveData());\n            let drawPoints = data?.lines[0]?.points as {\n                x: number;\n                y: number;\n            }[];\n            if (!drawPoints) {\n                return;\n            }\n            drawPoints.forEach((value) => {\n                value.y += NAVBAR_HEIGHT;\n            });\n\n            // form a circle\n            drawPoints.push(drawPoints[0]);\n\n            State.clusterInteraction.lineSegment = drawPoints;\n            State.clusterInteraction.computeSplitCluster();\n        }\n\n        clearDrawing() {\n            this.canvasMethods.clear();\n        }\n\n        componentDidMount = () => {\n            this.clearDrawing();\n        };\n\n        componentWillUnmount = () => {\n            this.clearDrawing();\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport { NAVBAR_HEIGHT } from \"../../../constants\";\nimport { ICanvasDrawProps } from \"./CanvasDrawPanel\";\n\nexport default observer(\n    /**\n     * @description canvas to draw circle gesture when cluster splitting\n     * @author Zichen XU\n     * @class CanvasDrawFreeCirclePanel\n     */\n    class CanvasDrawFreeCirclePanel extends React.Component<\n        ICanvasDrawProps,\n        {}\n    > {\n        private centerPoint = { x: 0, y: 0 } as { x: number; y: number };\n        private radius = 0 as number;\n        private mouseDown = false;\n\n        onMouseDownCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            this.centerPoint = {\n                x: event.clientX,\n                y: event.clientY - NAVBAR_HEIGHT,\n            };\n            this.mouseDown = true;\n        };\n\n        onMouseMoveCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            if (this.mouseDown) {\n                this.radius = Math.sqrt(\n                    Math.pow(event.clientX - this.centerPoint.x, 2) +\n                        Math.pow(\n                            event.clientY - NAVBAR_HEIGHT - this.centerPoint.y,\n                            2\n                        )\n                );\n                this.drawPoints();\n            }\n        };\n\n        onMouseUpCallback = (\n            event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n        ) => {\n            if (this.mouseDown) {\n                this.mouseDown = false;\n                this.exportDrawing();\n            }\n        };\n\n        exportDrawing() {\n            State.helper.clusterSplittingCurrentStep = 3;\n\n            // State.clusterInteraction.lineSegment = drawPoints;\n            State.clusterInteraction.computeSplitClusterInCircle(\n                this.centerPoint.x,\n                this.centerPoint.y,\n                this.radius\n            );\n        }\n\n        ctx!: CanvasRenderingContext2D;\n\n        drawPoints() {\n            this.ctx.lineJoin = \"round\";\n            this.ctx.lineCap = \"round\";\n            this.ctx.clearRect(\n                0,\n                0,\n                this.ctx.canvas.width,\n                this.ctx.canvas.height\n            );\n            this.ctx.lineWidth = 5;\n\n            this.ctx.beginPath();\n\n            this.ctx.arc(\n                this.centerPoint.x,\n                this.centerPoint.y,\n                this.radius,\n                0,\n                2 * Math.PI\n            );\n\n            this.ctx.strokeStyle = \"#F6B26B\";\n            this.ctx.stroke();\n        }\n\n        clearDrawing() {\n            this.ctx?.clearRect(\n                0,\n                0,\n                this.ctx.canvas.width,\n                this.ctx.canvas.height\n            );\n        }\n\n        render() {\n            return (\n                <canvas\n                    style={{\n                        position: \"absolute\",\n                        zIndex: 20,\n                    }}\n                    width={this.props.boundingRect.width}\n                    height={this.props.boundingRect.height}\n                    ref={(canvas) => {\n                        if (canvas) {\n                            this.ctx = canvas.getContext(\n                                \"2d\"\n                            ) as CanvasRenderingContext2D;\n                        }\n                    }}\n                    onMouseDown={this.onMouseDownCallback}\n                    onMouseMove={this.onMouseMoveCallback}\n                    onMouseUp={this.onMouseUpCallback}\n                />\n            );\n        }\n\n        componentDidMount = () => {\n            this.clearDrawing();\n        };\n\n        componentWillUnmount = () => {\n            this.clearDrawing();\n        };\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport ReactDOM from \"react-dom\";\nimport ComponentRef from \"../../ComponentRef\";\nimport { DrawMode } from \"../../../state/ClusterInteractionStore\";\nimport CanvasDrawFreehandPanel from \"./CanvasDrawFreehandPanel\";\nimport CanvasDrawStraightLinePanel from \"./CanvasDrawStraightLinePanel\";\nimport CanvasDrawFreeCirclePanel from \"./CanvasDrawFreeCirclePanel\";\nimport CanvasDrawCenterCirclePanel from \"./CanvasDrawCenterCirclePanel\";\nimport State from \"../../../state\";\n\nexport interface ICanvasDrawProps {\n    boundingRect: DOMRect;\n}\n\nexport default observer(\n    /**\n     * @description component that render different canvas drawing\n     * @author Zichen XU\n     * @class CanvasDrawPanel\n     */\n    class CanvasDrawPanel extends React.Component {\n        get canvas() {\n            let element = ReactDOM.findDOMNode(ComponentRef.visualizer);\n            return (element as Element)?.getBoundingClientRect();\n        }\n\n        render() {\n            switch (State.clusterInteraction.drawMode) {\n                case DrawMode.StraightLine:\n                    return (\n                        <CanvasDrawStraightLinePanel\n                            boundingRect={this.canvas}\n                        />\n                    );\n\n                case DrawMode.FreeLine:\n                    return (\n                        <CanvasDrawFreehandPanel boundingRect={this.canvas} />\n                    );\n\n                case DrawMode.FreeCircle:\n                    return (\n                        <CanvasDrawFreeCirclePanel boundingRect={this.canvas} />\n                    );\n\n                case DrawMode.CenterCircle:\n                    return (\n                        <CanvasDrawCenterCirclePanel\n                            boundingRect={this.canvas}\n                        />\n                    );\n            }\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport ForceGraph3D, {\n    ForceGraphMethods,\n    LinkObject,\n    NodeObject,\n} from \"react-force-graph-3d\";\nimport ComponentRef from \"../ComponentRef\";\nimport State from \"../../state\";\nimport SpriteText from \"three-spritetext\";\nimport {\n    ICustomLinkObject,\n    ICustomNodeObject,\n} from \"../../state/GraphDelegate\";\nimport { reaction } from \"mobx\";\nimport { VisualizationMode } from \"../../state/PreferencesStore\";\nimport SelectionBox from \"../panels/SelectionBox\";\nimport * as CustomMouseEvent from \"../../state/utils/MouseEventUtils\";\nimport CanvasDrawPanel from \"../panels/CanvasDraw/CanvasDrawPanel\";\nimport { createToaster } from \"../../state/utils/ToasterUtils\";\nimport { Position } from \"@blueprintjs/core\";\nimport ReactDOM from \"react-dom\";\nimport { TrackballControls } from \"three/examples/jsm/controls/TrackballControls\";\nimport { debounce } from \"lodash\";\n\nexport default observer(\n    class ThreeJSVis extends React.Component {\n        state = {\n            visualizationGraph: State.graphDelegate.visualizationGraph(),\n            nodePointerInteraction: true,\n        };\n\n        clicking = false;\n\n        // @ts-ignore\n        graphRef: React.MutableRefObject<ForceGraphMethods> = React.createRef();\n\n        get graphMethods(): ForceGraphMethods {\n            return this.graphRef.current;\n        }\n\n        graphDelegate = State.graphDelegate;\n\n        hoverNodeCallback = (\n            node: NodeObject | null,\n            previousNode: NodeObject | null\n        ) => {\n            if (State.search.isPreviewing) return;\n            // to avoid frequent refresh\n\n            if (node === null) {\n                State.interaction.currentlyHoveredNodeId = null;\n            } else if (node !== previousNode) {\n                let current: string = node.id as string;\n                State.interaction.currentlyHoveredNodeId = current;\n            }\n            // console.log(State.graph.rawGraph);\n        };\n\n        nodeLeftClickCallback = (node: NodeObject, event: MouseEvent) => {\n            if (!this.state.nodePointerInteraction) {\n                return;\n            }\n            let nodeId = node.id as string;\n            if (\n                State.preferences.visualizationMode ===\n                VisualizationMode.NodeSelection\n            ) {\n                // multi-selection\n                let index;\n                // if already in the list of selected, remove\n                if (\n                    (index = State.interaction.selectedNodes.indexOf(\n                        nodeId\n                    )) !== -1\n                ) {\n                    State.interaction.selectedNodes.splice(index, 1);\n                } else {\n                    // if not in the list, add\n                    State.interaction.selectedNodes.push(nodeId);\n                }\n            } else {\n                // single select\n                State.interaction.selectedNodes = [node.id as string];\n            }\n        };\n\n        nodeRightClickCallback = (node: NodeObject, event: MouseEvent) => {\n            if (!this.state.nodePointerInteraction) {\n                return;\n            }\n            State.interaction.chosenNode = node.id as string;\n            // if selected node is not in the list, then add\n            if (\n                !State.interaction.selectedNodes.includes(\n                    State.interaction.chosenNode\n                )\n            ) {\n                State.interaction.selectedNodes.push(\n                    State.interaction.chosenNode\n                );\n            }\n            State.preferences.rightClickPositionX = event.x;\n            State.preferences.rightClickPositionY = event.y;\n            State.preferences.rightClickOn = \"Node\";\n            State.preferences.rightClickPanelOpen = true;\n            State.preferences.closeAllPanel(\"rightClickPanel\");\n            setTimeout(() => {\n                this.graphMethods.resumeAnimation();\n            }, 200);\n        };\n\n        backgroundClickCallback = () => {\n            // cancel all selection\n            State.interaction.flush();\n            State.interaction.selectedNodes = [];\n            State.preferences.rightClickPanelOpen = false;\n            State.preferences.closeAllPanel(\"rightClickPanel\");\n        };\n\n        backgroundRightClickCallback = (event: MouseEvent) => {\n            if (\n                !this.state.nodePointerInteraction ||\n                State.signal.isRightClickingCluster\n            ) {\n                return;\n            }\n            this.graphMethods.pauseAnimation();\n            State.preferences.rightClickPositionX = event.x;\n            State.preferences.rightClickPositionY = event.y;\n            State.preferences.rightClickOn = \"Background\";\n            State.preferences.rightClickPanelOpen = true;\n            State.preferences.closeAllPanel(\"rightClickPanel\");\n            setTimeout(() => {\n                this.graphMethods.resumeAnimation();\n            }, 200);\n        };\n\n        computeNodeColor(_node: NodeObject) {\n            let node = _node as ICustomNodeObject;\n            if (node.hovered) {\n                return State.css.node.highlightColor;\n            } else if (node.chosen) {\n                return State.css.node.chosenColor;\n            } else if (node.multiSelected) {\n                return State.css.node.multiSelectedColor;\n            } else {\n                return State.css.node.defaultColor;\n            }\n        }\n\n        computeEdgeColor(_edge: LinkObject) {\n            let edge = _edge as ICustomLinkObject;\n            if (edge.hovered) {\n                return State.css.edge.highlightColor;\n            } else if (edge.chosen) {\n                return State.css.edge.selectedColor;\n            } else {\n                return State.css.edge.defaultColor;\n            }\n        }\n\n        computeEdgeWidth(_edge: LinkObject) {\n            let edge = _edge as ICustomLinkObject;\n            if (edge.hovered) {\n                return State.css.edge.highlightWidth;\n            } else if (edge.chosen) {\n                return State.css.edge.highlightWidth;\n            } else {\n                return State.css.edge.defaultWidth;\n            }\n        }\n\n        renderGraph = () => {\n            return (\n                <div>\n                    {State.preferences.visualizationMode ===\n                        VisualizationMode.NodeSelection &&\n                        State.interaction.boxSelectionOpen && <SelectionBox />}\n                    {State.preferences.visualizationMode ===\n                        VisualizationMode.ClusterSplitting &&\n                        State.clusterInteraction.drawPanelActivate && (\n                            <CanvasDrawPanel />\n                        )}\n                    <ForceGraph3D\n                        // Data Segment\n                        ref={this.graphRef}\n                        graphData={this.state.visualizationGraph}\n                        // Node Visualization Segment\n                        nodeLabel=\"id\"\n                        nodeRelSize={State.css.node.size}\n                        nodeColor={this.computeNodeColor}\n                        nodeVisibility={this.graphDelegate.nodeVisibility}\n                        nodeResolution={State.css.node.resolution}\n                        nodeThreeObjectExtend={true}\n                        nodeThreeObject={(node) => {\n                            const sprite = new SpriteText(`${node.id}`);\n                            sprite.color = State.css.label.color;\n                            sprite.textHeight = State.css.label.size;\n                            sprite.backgroundColor = \"\";\n                            sprite.visible = State.css.label.show;\n                            sprite.translateX(State.css.node.size + 2);\n                            return sprite;\n                        }}\n                        // Node Manipulation Segment\n                        onNodeHover={this.hoverNodeCallback}\n                        onNodeClick={this.nodeLeftClickCallback}\n                        onNodeRightClick={this.nodeRightClickCallback}\n                        onNodeDragEnd={(node) => {\n                            node.fx = node.x;\n                            node.fy = node.y;\n                            node.fz = node.z;\n                        }}\n                        // Link Visualization Segment\n                        linkVisibility={this.graphDelegate.linkVisibility}\n                        linkWidth={this.computeEdgeWidth}\n                        linkColor={this.computeEdgeColor}\n                        // Graph Manipulation Segment\n                        onBackgroundRightClick={\n                            this.backgroundRightClickCallback\n                        }\n                        onBackgroundClick={this.backgroundClickCallback}\n                        enablePointerInteraction={\n                            this.state.nodePointerInteraction\n                        }\n                        // Engine\n                        onEngineTick={() => {\n                            State.graphDelegate.clusterObject.canAlterNodePosition = true;\n                            this.graphDelegate.clusterObject.clusterDelegation();\n                        }}\n                        cooldownTicks={100}\n                        onEngineStop={() => {\n                            if (\n                                State.css.cluster.autoPlot &&\n                                State.css.cluster.shape === \"sphere\" &&\n                                State.graphDelegate.clusterObject\n                                    .canAlterNodePosition\n                            ) {\n                                console.log(\n                                    \"starts to plot points on the surface of the sphere\"\n                                );\n                                this.graphDelegate.clusterObject.alterNodePosition();\n                                State.graphDelegate.clusterObject.canAlterNodePosition = false;\n                            }\n                        }}\n                    />\n                </div>\n            );\n        };\n\n        render() {\n            return <div>{this.renderGraph()}</div>;\n        }\n\n        updateVisualizationGraph() {\n            this.setState({\n                visualizationGraph: State.graphDelegate.visualizationGraph(),\n            });\n        }\n\n        nodeInteractionListener(set: boolean) {\n            this.setState({\n                nodePointerInteraction: set,\n            });\n        }\n\n        private debouncedMouseMoveCallback: any;\n\n        clusterInteractionListener(set: boolean) {\n            const DOM = ReactDOM.findDOMNode(this) as Element;\n            if (set) {\n                this.debouncedMouseMoveCallback = debounce(\n                    CustomMouseEvent.onDocumentMouseMove,\n                    25\n                );\n                DOM.addEventListener(\n                    \"mousemove\",\n                    this.debouncedMouseMoveCallback\n                );\n                DOM.addEventListener(\n                    \"click\",\n                    CustomMouseEvent.onDocumentLeftClick\n                );\n                DOM.addEventListener(\n                    \"contextmenu\",\n                    CustomMouseEvent.onDocumentRightClick\n                );\n            } else {\n                DOM.removeEventListener(\n                    \"mousemove\",\n                    this.debouncedMouseMoveCallback\n                );\n                DOM.removeEventListener(\n                    \"click\",\n                    CustomMouseEvent.onDocumentLeftClick\n                );\n                DOM.removeEventListener(\n                    \"contextmenu\",\n                    CustomMouseEvent.onDocumentRightClick\n                );\n            }\n        }\n\n        componentDidMount() {\n            this.graphDelegate.mountDelegateMethods(this.graphMethods);\n            this.clusterInteractionListener(true);\n            ComponentRef.visualizer = this;\n            this.graphDelegate.updateClusterForce();\n\n            const control = this.graphMethods.controls() as TrackballControls;\n            control.addEventListener(\"change\", () => {\n                State.signal.isMovingCamera = true;\n            });\n        }\n    }\n);\n\nreaction(\n    () => State.preferences.visualizationMode,\n    (visualizationMode) => {\n        State.preferences.closeAllPanel();\n        State.preferences.rightClickPanelOpen = false;\n        State.interaction.flush();\n        State.clusterInteraction.flush();\n        switch (visualizationMode) {\n            case VisualizationMode.Normal:\n                ComponentRef.visualizer?.nodeInteractionListener(true);\n                ComponentRef.visualizer?.clusterInteractionListener(true);\n                break;\n\n            case VisualizationMode.NodeSelection:\n                ComponentRef.visualizer?.nodeInteractionListener(true);\n                ComponentRef.visualizer?.clusterInteractionListener(false);\n                createToaster(\n                    <p>\n                        Select one or more <b>Nodes</b> and <b>Right-click</b>{\" \"}\n                        on one of them to open <b>Context Menu</b>\n                    </p>,\n                    Position.BOTTOM,\n                    10000\n                );\n                break;\n\n            case VisualizationMode.ClusterSelection:\n                ComponentRef.visualizer?.nodeInteractionListener(false);\n                ComponentRef.visualizer?.clusterInteractionListener(true);\n                createToaster(\n                    <p>\n                        Select one or more <b>Clusters</b> and{\" \"}\n                        <b>Right-click</b> on one of them to open{\" \"}\n                        <b>Context Menu</b>\n                    </p>,\n                    Position.BOTTOM,\n                    10000\n                );\n                break;\n\n            case VisualizationMode.ClusterSplitting:\n                ComponentRef.visualizer?.nodeInteractionListener(false);\n                ComponentRef.visualizer?.clusterInteractionListener(true);\n                State.helper.clusterSplittingPanelStackOpen = true;\n                break;\n        }\n    }\n);\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Card } from \"@blueprintjs/core\";\nimport { Cell, Column, EditableCell, Table } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state/index\";\nimport ComponentRef from \"../ComponentRef\";\n\ninterface Props {\n    /**\n     * the node id of the select node\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    onNode: string;\n}\n\nexport default observer(\n    /**\n     * @description Implementing a table showing the detail in formation of hovered Node\n     * in which the information could be changed by users\n     * @author Zhiyuan LYU Chenghao SHI\n     * @extends {React.Component<Props, {}>}\n     */\n    class NodeDetail extends React.Component<Props, {}> {\n        cellRenderer_property = (rowIndex: number) => {\n            return <Cell>{State.graph.metadata.nodeProperties[rowIndex]}</Cell>;\n        };\n\n        cellRenderer_value = (rowIndex: number) => {\n            let data = State.graph.rawGraph.getNodeAttribute(\n                this.props.onNode,\n                State.graph.metadata.nodeProperties[rowIndex]\n            );\n            // return a Editable Cell where user can edit the value of certain property;\n            return (\n                <EditableCell\n                    value={data}\n                    onChange={(newVal) =>\n                        State.graph.rawGraph.setNodeAttribute(\n                            this.props.onNode,\n                            State.graph.metadata.nodeProperties[rowIndex],\n                            newVal\n                        )\n                    }\n                    onConfirm={(newVal) =>\n                        State.graph.rawGraph.setNodeAttribute(\n                            this.props.onNode,\n                            State.graph.metadata.nodeProperties[rowIndex],\n                            newVal\n                        )\n                    }\n                    tooltip={data}\n                />\n            );\n        };\n\n        formatLongFloat = (nodeAttributeValue: any) => {\n            const num = Number(nodeAttributeValue);\n            if (Number.isNaN(num) || num > 1 || num < 0) {\n                // Do not format just return original\n                return nodeAttributeValue;\n            }\n            // Format to no more than 3 significant digit.\n            return Number.parseFloat(num.toString()).toPrecision(3);\n        };\n\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"right-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <Card className={\"node-details-table\"}>\n                        <Table\n                            numRows={State.graph.metadata.nodeProperties.length}\n                            enableRowHeader={false}\n                        >\n                            <Column\n                                name=\"Properties\"\n                                cellRenderer={this.cellRenderer_property}\n                            />\n                            <Column\n                                name=\"Value\"\n                                cellRenderer={this.cellRenderer_value}\n                            />\n                        </Table>\n                    </Card>\n                </div>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.nodeDetail = React.createRef();\n        };\n    }\n);\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Card, Tag } from \"@blueprintjs/core\";\nimport { Cell, Column, Table } from \"@blueprintjs/table\";\nimport { observer } from \"mobx-react\";\nimport ComponentRef from \"../ComponentRef\";\nimport State from \"../../state/index\";\n\nexport default observer(\n    /**\n     * @description This component will be used when multiple-choose nodes.\n     * @author Zhiyuan LYU\n     * @extends {React.Component}\n     */\n    class MultipleNodeDetail extends React.Component {\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"left-bottom-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <Card>\n                        <Table\n                            numRows={\n                                State.interaction.selectedNodes.length > 10\n                                    ? 10\n                                    : State.interaction.selectedNodes.length\n                            }\n                        >\n                            {State.graph.metadata.nodeProperties.map((it) => (\n                                <Column\n                                    key={it}\n                                    name={it}\n                                    cellRenderer={(i) => (\n                                        <Cell>\n                                            {State.graph.rawGraph.getNodeAttribute(\n                                                State.interaction.selectedNodes[\n                                                    i\n                                                ] as string,\n                                                it as string\n                                            )}\n                                        </Cell>\n                                    )}\n                                />\n                            ))}\n                        </Table>\n                        <Tag style={{ marginTop: \"3px\" }}>\n                            if select more than 10 nodes, only the top 10 nodes\n                            will be displayed\n                        </Tag>\n                    </Card>\n                </div>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.multiNodeDetail = this;\n        };\n    }\n);\n","import React from \"react\";\nimport { Alert, Button, Card, Code, H6, Intent } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../state\";\nimport {\n    Cell,\n    Column,\n    ICellRenderer,\n    RenderMode,\n    Table,\n} from \"@blueprintjs/table\";\n\ninterface Props {\n    /**\n     * the node id of the select node to delete Edge\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    onNode: string;\n}\n\nexport default observer(\n    /**\n     * @description interactively delete or preview edge with a table shown at the right-bottom\n     * @author Zichen XU\n     * @class DeleteEdgeInteractionPanel\n     * @extends {React.Component<Props, {}>}\n     */\n    class DeleteEdgeInteractionPanel extends React.Component<Props, {}> {\n        state = {\n            targetNode: null as string | null,\n            deleteAlertOpen: false,\n        };\n\n        get neighbors(): string[] {\n            return State.graph.rawGraph.neighbors(this.props.onNode);\n        }\n\n        deleteEdgeRenderer: ICellRenderer = (rowIndex) => {\n            let targetNode = this.neighbors[rowIndex];\n            return (\n                <Cell>\n                    <Button\n                        onClick={() => {\n                            this.setState({\n                                targetNode: targetNode,\n                                deleteAlertOpen: true,\n                            });\n                        }}\n                        icon=\"trash\"\n                        intent=\"danger\"\n                        text=\"Delete\"\n                        minimal={true}\n                    />\n                </Cell>\n            );\n        };\n\n        deleteEdgeAlert = () => {\n            if (this.state.targetNode === null) {\n                return null;\n            }\n\n            let edgeToDelete: string | undefined;\n\n            if (\n                (edgeToDelete = State.graph.rawGraph.edge(\n                    this.state.targetNode,\n                    this.props.onNode\n                )) === undefined\n            ) {\n                edgeToDelete = State.graph.rawGraph.edge(\n                    this.props.onNode,\n                    this.state.targetNode\n                );\n            }\n\n            return (\n                <Alert\n                    cancelButtonText=\"Cancel\"\n                    confirmButtonText=\"Confirm Delete\"\n                    icon=\"trash\"\n                    intent={Intent.DANGER}\n                    isOpen={this.state.deleteAlertOpen}\n                    onCancel={() => this.setState({ deleteAlertOpen: false })}\n                    onConfirm={() => {\n                        State.graph.mutating.dropEdge(edgeToDelete as string);\n                        this.setState({ deleteAlertOpen: false });\n                        State.preferences.deleteEdgePanelOpen = false;\n                    }}\n                >\n                    <p>\n                        Are you sure you want to delete the edge with Key{\" \"}\n                        <Code>{edgeToDelete as string}</Code> between Node ID{\" \"}\n                        <Code>{this.state.targetNode}</Code> and Node ID{\" \"}\n                        <Code>{this.props.onNode}</Code>. This action cannot be\n                        reversed.\n                    </p>\n                </Alert>\n            );\n        };\n\n        neighborsRenderer: ICellRenderer = (rowIndex: number) => {\n            return (\n                <Cell interactive={true}>\n                    <div\n                        onMouseEnter={() => {\n                            State.graphDelegate.cameraFocusOn(\n                                this.props.onNode,\n                                400\n                            );\n                            State.interaction.selectedEdge = State.interaction.getEdgeKey(\n                                this.props.onNode,\n                                this.neighbors[rowIndex]\n                            ) as string;\n                        }}\n                    >\n                        {this.neighbors[rowIndex]}\n                    </div>\n                </Cell>\n            );\n        };\n\n        render() {\n            return (\n                <div\n                    className={classnames(\n                        \"right-bottom-overlay-card\",\n                        \"transparent-frame\"\n                    )}\n                >\n                    <Card className={classnames(\"node-details-table\")}>\n                        <Button\n                            icon=\"cross\"\n                            onClick={() => {\n                                State.preferences.deleteEdgePanelOpen = false;\n                                State.interaction.selectedEdge = null;\n                                State.graphDelegate.graphDelegateMethods.refresh(); // update color of selected edges\n                            }}\n                        >\n                            Close\n                        </Button>\n                        <H6> Node ID: {this.props.onNode}</H6>\n                        <Table\n                            numRows={this.neighbors.length}\n                            defaultRowHeight={30}\n                            renderMode={RenderMode.NONE}\n                        >\n                            <Column\n                                name=\"\"\n                                cellRenderer={this.deleteEdgeRenderer}\n                                //@ts-ignore\n                                style={this.style}\n                            />\n                            <Column\n                                name=\"Node ID\"\n                                //@ts-ignore\n                                intent={Intent.PRIMARY}\n                                cellRenderer={this.neighborsRenderer}\n                            />\n                        </Table>\n                        {this.deleteEdgeAlert()}\n                    </Card>\n                </div>\n            );\n        }\n    }\n);\n","import React, { ReactNode } from \"react\";\nimport { Button, Card, Classes, Collapse, Elevation } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\n\ninterface Props {\n    name: string;\n    isOpen: boolean;\n    onToggle: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n    children: ReactNode;\n}\n\nexport default observer(\n    /**\n     * @description the Collapsable HOC to wrap the content into a collapsable flip\n     * @author Zichen XU\n     * @class Collapsable\n     * @extends {React.Component<Props, {}>}\n     */\n    class Collapsable extends React.Component<Props, {}> {\n        render() {\n            return (\n                <Card elevation={Elevation.THREE}>\n                    <Button\n                        className={classnames(\n                            Classes.LARGE,\n                            Classes.FILL,\n                            \"text-align-left\"\n                        )}\n                        rightIcon={\n                            this.props.isOpen ? \"chevron-up\" : \"chevron-down\"\n                        }\n                        onClick={this.props.onToggle}\n                    >\n                        {this.props.name}\n                    </Button>\n                    <Collapse isOpen={this.props.isOpen}>\n                        {this.props.children}\n                    </Collapse>\n                </Card>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport { Card, Checkbox, Slider } from \"@blueprintjs/core\";\nimport Collapsable from \"../../utils/Collapsable\";\nimport SimpleSelect from \"../../utils/SimpleSelect\";\n\nexport default observer(\n    /**\n     * @description the sub-tab to alter the graph options of cluster\n     * @author Zichen XU, Zhiyuan LYU\n     * @class ClusterPanel\n     * @extends {React.Component}\n     */\n    class ClusterPanel extends React.Component {\n        state = {\n            shapeOptionOpen: false,\n            forceOptionOpen: false,\n        };\n\n        forceCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Force\"\n                    isOpen={this.state.forceOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            forceOptionOpen: !this.state.forceOptionOpen,\n                        })\n                    }\n                >\n                    <Card className={\"sub-option\"}>\n                        Cluster Force Distance:\n                        <br />\n                        <Slider\n                            min={0}\n                            max={100}\n                            stepSize={10}\n                            labelStepSize={20}\n                            onChange={(value) => {\n                                State.css.cluster.clusterForce = value;\n                                State.graphDelegate.updateClusterForce();\n                            }}\n                            value={State.css.cluster.clusterForce}\n                        />\n                    </Card>\n                    <Card className={\"sub-option\"}>\n                        Normal Force Distance:\n                        <br />\n                        <Slider\n                            min={0}\n                            max={100}\n                            stepSize={10}\n                            labelStepSize={20}\n                            onChange={(value) => {\n                                State.css.cluster.normalForce = value;\n                                State.graphDelegate.updateClusterForce();\n                            }}\n                            value={State.css.cluster.normalForce}\n                        />\n                    </Card>\n                </Collapsable>\n            );\n        };\n\n        shapeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Shape\"\n                    isOpen={this.state.shapeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            shapeOptionOpen: !this.state.shapeOptionOpen,\n                        })\n                    }\n                >\n                    <Card className={\"sub-option\"}>\n                        <p style={{ textAlign: \"left\" }}>\n                            Cluster Shape:\n                            <span style={{ float: \"right\" }}>\n                                <SimpleSelect\n                                    items={[\"convexHull\", \"sphere\"]}\n                                    text={State.css.cluster.shape}\n                                    onSelect={(it) => {\n                                        State.css.cluster.shape = it;\n                                        State.cluster.setCluster(\n                                            State.cluster.clusterBy,\n                                            true\n                                        );\n                                    }}\n                                    small={true}\n                                />\n                            </span>\n                        </p>\n                        <p style={{ display: \"flex\" }}>\n                            Auto plot nodes onto the surface of clusters\n                            <Checkbox\n                                checked={State.css.cluster.autoPlot}\n                                large={true}\n                                onChange={() => {\n                                    State.css.cluster.autoPlot = !State.css\n                                        .cluster.autoPlot;\n                                }}\n                            />\n                        </p>\n                    </Card>\n                    {State.css.cluster.shape === \"sphere\" && (\n                        <Card className={\"sub-option\"}>\n                            Cluster Resolution:\n                            <br />\n                            <Slider\n                                min={2}\n                                max={20}\n                                stepSize={1}\n                                labelStepSize={5}\n                                onChange={(value) => {\n                                    State.css.cluster.resolution = value;\n                                    State.graphDelegate.graphDelegateMethods.refresh();\n                                }}\n                                value={State.css.cluster.resolution}\n                            />\n                        </Card>\n                    )}\n                </Collapsable>\n            );\n        };\n\n        render() {\n            return (\n                <div>\n                    <div>\n                        <p>Modifying All Clusters</p>\n                    </div>\n                    {this.forceCollapse()}\n                    {this.shapeCollapse()}\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport {\n    Button,\n    PopoverInteractionKind,\n    Position,\n    Popover,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport { ColorResult, SketchPicker } from \"react-color\";\n\n/**\n *\n * @interface Props\n */\ninterface Props {\n    /**\n     * the color to be previewed on the button\n     *\n     * @type {string}\n     * @memberof Props\n     */\n    color: string;\n\n    /**\n     * function to call when a candidate is selected, will be called on every selection of candidate\n     *\n     * @memberof Props\n     */\n    onChange: (color: ColorResult) => void;\n}\n\nexport default observer(\n    /**\n     * @description this component can be used to choose the node among all the nodes, with basic search filters available\n     *\n     * to use it, you have to specify the text shown above the selectButton\n     * as well as the onChange function to call when a candidate is selected\n     * @author Zichen XU\n     * @class ColorPicker\n     * @extends {React.Component<Props, {}>}\n     */\n    class ColorPicker extends React.Component<Props, {}> {\n        render() {\n            return (\n                <Popover\n                    interactionKind={PopoverInteractionKind.CLICK}\n                    popoverClassName=\"bp3-popover-content-sizing\"\n                    placement={Position.RIGHT}\n                >\n                    <Button\n                        text=\"  \"\n                        style={{\n                            backgroundColor: this.props.color,\n                        }}\n                        small={true}\n                    />\n                    <div>\n                        <SketchPicker\n                            color={this.props.color}\n                            onChange={(it) => {\n                                this.props.onChange(it);\n                            }}\n                        />\n                    </div>\n                </Popover>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport { Card } from \"@blueprintjs/core\";\nimport Collapsable from \"../../utils/Collapsable\";\nimport ColorPicker from \"../../utils/ColorPicker\";\n\nexport default observer(\n    /**\n     * @description This component will be used to change styles of edge\n     * @author Zhiyuan LYU Zichen XU\n     * @extends {React.Component}\n     */\n    class EdgesPanel extends React.Component {\n        state = {\n            sizeOptionOpen: false,\n            thicknessOptionOpen: false,\n            colorOptionOpen: false,\n            forceOptionOpen: false,\n        };\n\n        render() {\n            return (\n                <div>\n                    <p>Modifying All Edges</p>\n\n                    {/* Collapsable Option: Color */}\n                    <Collapsable\n                        name=\"Color\"\n                        isOpen={this.state.colorOptionOpen}\n                        onToggle={() =>\n                            this.setState({\n                                colorOptionOpen: !this.state.colorOptionOpen,\n                            })\n                        }\n                    >\n                        <Card className={\"sub-option\"}>\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Default Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={State.css.edge.defaultColor}\n                                            onChange={(it) => {\n                                                State.css.edge.defaultColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Selected Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={State.css.edge.selectedColor}\n                                            onChange={(it) => {\n                                                State.css.edge.selectedColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n\n                            <section>\n                                <p style={{ textAlign: \"left\" }}>\n                                    Highlight Color:\n                                    <span style={{ float: \"right\" }}>\n                                        <ColorPicker\n                                            color={\n                                                State.css.edge.highlightColor\n                                            }\n                                            onChange={(it) => {\n                                                State.css.edge.highlightColor =\n                                                    it.hex;\n\n                                                State.graphDelegate.graphDelegateMethods.refresh();\n                                            }}\n                                        />\n                                    </span>\n                                </p>\n                            </section>\n                        </Card>\n                    </Collapsable>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Card, Slider, Switch } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport ColorPicker from \"../../utils/ColorPicker\";\n\nexport default observer(\n    /**\n     * @description This component will be used to change style of label\n     * @author Zhiyuan LYU, Zichen XU\n     * @extends {React.Component}\n     */\n    class LabelsPanel extends React.Component {\n        render() {\n            return (\n                <div>\n                    <Switch\n                        label=\"Show Node Label\"\n                        checked={State.css.label.show}\n                        onChange={() => {\n                            State.css.label.show = !State.css.label.show;\n                            State.graphDelegate.graphDelegateMethods.refresh();\n                        }}\n                    />\n                    <br />\n                    <Card className={\"sub-option\"}>\n                        Label Size:\n                        <br />\n                        <Slider\n                            min={1}\n                            max={10}\n                            stepSize={1}\n                            labelStepSize={2}\n                            onChange={(value) => {\n                                State.css.label.size = value;\n                                State.graphDelegate.graphDelegateMethods.refresh();\n                            }}\n                            value={State.css.label.size}\n                        />\n                        <br />\n                        <p style={{ textAlign: \"left\" }}>\n                            Label Color:\n                            <span style={{ float: \"right\" }}>\n                                <ColorPicker\n                                    color={State.css.label.color}\n                                    onChange={(it) => {\n                                        State.css.label.color = it.hex;\n                                        State.graphDelegate.graphDelegateMethods.refresh();\n                                    }}\n                                />\n                            </span>\n                        </p>\n                    </Card>\n                </div>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport { Card, Slider } from \"@blueprintjs/core\";\nimport Collapsable from \"../../utils/Collapsable\";\nimport ColorPicker from \"../../utils/ColorPicker\";\n\nexport default observer(\n    /**\n     * @description This component will be used to change style of nodes. Including color, size,etc\n     * @author Zhiyuan LYU, Zichen XU\n     * @extends {React.Component}\n     */\n    class NodesPanel extends React.Component {\n        state = {\n            timeOutRef: null,\n            colorOptionOpen: false,\n            sizeOptionOpen: false,\n            shapeOptionOpen: false,\n        };\n\n        colorCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Color\"\n                    isOpen={this.state.colorOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            colorOptionOpen: !this.state.colorOptionOpen,\n                        })\n                    }\n                >\n                    <Card className={\"sub-option\"}>\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Default Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.defaultColor}\n                                        onChange={(it) => {\n                                            State.css.node.defaultColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Selected Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={\n                                            State.css.node.multiSelectedColor\n                                        }\n                                        onChange={(it) => {\n                                            State.css.node.multiSelectedColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n\n                        <section>\n                            <p style={{ textAlign: \"left\" }}>\n                                Highlight Color:\n                                <span style={{ float: \"right\" }}>\n                                    <ColorPicker\n                                        color={State.css.node.highlightColor}\n                                        onChange={(it) => {\n                                            State.css.node.highlightColor =\n                                                it.hex;\n\n                                            State.graphDelegate.graphDelegateMethods.refresh();\n                                        }}\n                                    />\n                                </span>\n                            </p>\n                        </section>\n                    </Card>\n                </Collapsable>\n            );\n        };\n\n        sizeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Size\"\n                    isOpen={this.state.sizeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            sizeOptionOpen: !this.state.sizeOptionOpen,\n                        })\n                    }\n                >\n                    <Card className={\"sub-option\"}>\n                        Node Size:\n                        <br />\n                        <Slider\n                            min={1}\n                            max={20}\n                            stepSize={1}\n                            labelStepSize={5}\n                            onChange={(value) => {\n                                State.css.node.size = value;\n                                State.graphDelegate.graphDelegateMethods.refresh();\n                            }}\n                            value={State.css.node.size}\n                        />\n                    </Card>\n                </Collapsable>\n            );\n        };\n\n        shapeCollapse = () => {\n            return (\n                <Collapsable\n                    name=\"Shape\"\n                    isOpen={this.state.shapeOptionOpen}\n                    onToggle={() =>\n                        this.setState({\n                            shapeOptionOpen: !this.state.shapeOptionOpen,\n                        })\n                    }\n                >\n                    <Card className={\"sub-option\"}>\n                        Node Resolution:\n                        <br />\n                        <Slider\n                            min={2}\n                            max={20}\n                            stepSize={1}\n                            labelStepSize={5}\n                            onChange={(value) => {\n                                State.css.node.resolution = value;\n                            }}\n                            value={State.css.node.resolution}\n                        />\n                    </Card>\n                </Collapsable>\n            );\n        };\n\n        render() {\n            return (\n                <div>\n                    <div>\n                        <p>Modifying All Nodes</p>\n                    </div>\n                    {this.colorCollapse()}\n                    {this.sizeCollapse()}\n                    {this.shapeCollapse()}\n                </div>\n            );\n        }\n    }\n);\n","import { H3, Tab, Tabs } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport ClusterPanel from \"./ClusterPanel\";\nimport EdgesPanel from \"./EdgesPanel\";\nimport LabelsPanel from \"./LabelsPanel\";\nimport NodesPanel from \"./NodesPanel\";\n\nexport default observer(\n    /**\n     * @description the graph options panel which contains four sub-tabs\n     * @author Zichen XU, Zhiyuan LYU\n     * @class RenderOptionsCard\n     * @extends {React.Component}\n     */\n    class RenderOptionsCard extends React.Component {\n        render() {\n            return (\n                <div>\n                    <H3>Graph Options</H3>\n                    <Tabs animate={true}>\n                        <Tab id=\"nodes\" title=\"Nodes\" panel={<NodesPanel />} />\n                        <Tab id=\"edges\" title=\"Edges\" panel={<EdgesPanel />} />\n                        <Tab\n                            id=\"labels\"\n                            title=\"Labels\"\n                            panel={<LabelsPanel />}\n                        />\n                        <Tab\n                            id=\"clusters\"\n                            title=\"Clusters\"\n                            panel={<ClusterPanel />}\n                        />\n\n                        <Tabs.Expander />\n                    </Tabs>\n                </div>\n            );\n        }\n    }\n);\n","import React, { CSSProperties } from \"react\";\nimport {\n    Button,\n    Callout,\n    Card,\n    Colors,\n    Elevation,\n    H6,\n    Icon,\n    InputGroup,\n    Intent,\n} from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport ClusterChooser, { ClusterAdder } from \"./ClusterChooser\";\nimport { handleStringChange, parseNumberOrString } from \"./InputFormUtils\";\n\ninterface Props {\n    callback: Function;\n    style?: CSSProperties;\n}\n\nexport default observer(\n    class FormClusterOptionsCard extends React.Component<Props> {\n        state = {\n            selectedAttribute: State.cluster.clusterBy,\n            value: \"\" as string,\n        };\n\n        renderInput() {\n            return (\n                <>\n                    <div style={{ marginTop: 10 }}>\n                        <InputGroup\n                            leftElement={<Icon icon=\"tag\" />}\n                            onChange={handleStringChange((value) => {\n                                this.setState({ value: value });\n                            })}\n                            placeholder=\"Enter Clustering Value\"\n                            value={this.state.value}\n                            intent={\n                                this.state.value === \"\"\n                                    ? Intent.DANGER\n                                    : Intent.SUCCESS\n                            }\n                        />\n                    </div>\n                    <div className=\"horizontal-gap\"></div>\n                    <Button\n                        onClick={() => {\n                            this.props.callback(\n                                this.state.selectedAttribute as string,\n                                parseNumberOrString(this.state.value)\n                            );\n                        }}\n                        intent={Intent.SUCCESS}\n                        disabled={\n                            this.state.selectedAttribute === null ||\n                            this.state.value === \"\"\n                        }\n                    >\n                        Confirm\n                    </Button>\n                </>\n            );\n        }\n\n        render() {\n            return (\n                <>\n                    <Card\n                        elevation={Elevation.ONE}\n                        style={{\n                            background: Colors.DARK_GRAY3,\n                        }}\n                    >\n                        <H6>(Optional) You can add node attributes here</H6>\n                        <ClusterAdder\n                            onCreate={(attribute) => {\n                                this.setState({ selectedAttribute: attribute });\n                            }}\n                        />\n                    </Card>\n                    <div className=\"horizontal-gap\"></div>\n                    <Card elevation={Elevation.THREE}>\n                        <H6>\n                            Choose the Attribute and New Value to form the new\n                            cluster\n                        </H6>\n                        <Callout\n                            intent={\n                                this.state.selectedAttribute === null\n                                    ? Intent.DANGER\n                                    : Intent.SUCCESS\n                            }\n                        >\n                            <div style={{ display: \"flex\" }}>\n                                <div\n                                    style={{\n                                        marginRight: 20,\n                                        marginTop: 5,\n                                        marginBottom: 10,\n                                    }}\n                                >\n                                    Choose the Attribute\n                                </div>\n\n                                <ClusterChooser\n                                    showNone={false}\n                                    onSelect={(cluster) => {\n                                        this.setState({\n                                            selectedAttribute: cluster,\n                                        });\n                                    }}\n                                    syncWith={this.state.selectedAttribute}\n                                />\n                            </div>\n                        </Callout>\n                        {this.renderInput()}\n                    </Card>\n                </>\n            );\n        }\n    }\n);\n","import { Button, Icon, InputGroup, Intent } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../state\";\nimport { handleStringChange, parseNumberOrString } from \"./InputFormUtils\";\nimport FormClusterOptionsCard from \"./FormClusterOptionsCard\";\n\nexport default observer(\n    class FormTwoClusterOptionsCard extends FormClusterOptionsCard {\n        state = {\n            selectedAttribute: State.cluster.clusterBy,\n            value: \"\" as string,\n            anotherValue: \"\" as string,\n        };\n\n        renderInput() {\n            return (\n                <>\n                    <div className=\"horizontal-gap\"></div>\n                    <InputGroup\n                        leftElement={<Icon icon=\"tag\" />}\n                        onChange={handleStringChange((value) => {\n                            this.setState({ value: value });\n                        })}\n                        placeholder=\"Enter Clustering Value for nodes in white\"\n                        value={this.state.value}\n                        intent={\n                            this.state.value === \"\"\n                                ? Intent.DANGER\n                                : Intent.SUCCESS\n                        }\n                    />\n                    <div className=\"horizontal-gap\"></div>\n                    <InputGroup\n                        leftElement={<Icon icon=\"tag\" />}\n                        onChange={handleStringChange((value) => {\n                            this.setState({ anotherValue: value });\n                        })}\n                        placeholder=\"Enter Clustering Value for nodes in red\"\n                        value={this.state.anotherValue}\n                        intent={\n                            this.state.anotherValue === \"\"\n                                ? Intent.DANGER\n                                : Intent.SUCCESS\n                        }\n                    />\n                    <div className=\"horizontal-gap\"></div>\n                    <Button\n                        onClick={() => {\n                            this.props.callback(\n                                this.state.selectedAttribute as string,\n                                parseNumberOrString(this.state.value),\n                                parseNumberOrString(this.state.anotherValue)\n                            );\n                        }}\n                        intent={Intent.SUCCESS}\n                        disabled={\n                            this.state.selectedAttribute === null ||\n                            this.state.value === \"\" ||\n                            this.state.anotherValue === \"\"\n                        }\n                    >\n                        Confirm\n                    </Button>\n                </>\n            );\n        }\n    }\n);\n","import React from \"react\";\n\nimport {\n    Button,\n    Intent,\n    Classes,\n    H4,\n    RadioGroup,\n    Radio,\n    Text,\n    Card,\n} from \"@blueprintjs/core\";\nimport { Popover2, Tooltip2 } from \"@blueprintjs/popover2\";\nimport classnames from \"classnames\";\nimport State from \"../../../state\";\nimport { VisualizationMode } from \"../../../state/PreferencesStore\";\nimport { observer } from \"mobx-react\";\nimport ComponentRef from \"../../ComponentRef\";\nimport { getMessage } from \"./InteractionModePanel\";\nimport { handleStringChange } from \"../../utils/InputFormUtils\";\nimport { DrawMode } from \"../../../state/ClusterInteractionStore\";\nimport FormTwoClusterOptionsCard from \"../../utils/FormTwoClusterOptionsCard\";\n\ninterface Props {\n    currentStep: 1 | 2 | 3;\n}\n\nexport default observer(\n    /**\n     * @description the helper pop-over for a step-to-step guidance to user on the way to split cluster\n     * @author Zichen XU\n     * @class ClusterSplittingPanelStack\n     * @extends {React.Component<Props, {}>}\n     */\n    class ClusterSplittingPanelStack extends React.Component<Props, {}> {\n        state = {\n            selected: \"curve\" as string,\n        };\n        titles = [\"Select Cluster\", \"Draw Line or Circle\", \"Confirm?\"];\n\n        renderFirstPanel = () => {\n            return (\n                <p>\n                    Select a <b>Cluster</b> to split by clicking it\n                </p>\n            );\n        };\n\n        renderSecondPanel = () => {\n            return (\n                <p>\n                    <RadioGroup\n                        label=\"Use the mouse to\"\n                        onChange={handleStringChange((value) => {\n                            this.setState({ selected: value });\n                            switch (value) {\n                                case \"curve\":\n                                    State.clusterInteraction.drawMode =\n                                        DrawMode.FreeLine;\n                                    break;\n                                case \"straight\":\n                                    State.clusterInteraction.drawMode =\n                                        DrawMode.StraightLine;\n                                    break;\n                                case \"circle\":\n                                    State.clusterInteraction.drawMode =\n                                        DrawMode.FreeCircle;\n                                    break;\n                                case \"centerCircle\":\n                                    State.clusterInteraction.drawMode =\n                                        DrawMode.CenterCircle;\n                                    break;\n                            }\n                        })}\n                        selectedValue={this.state.selected}\n                    >\n                        <Radio\n                            label=\"Draw a Freehand Line through the cluster\"\n                            value=\"curve\"\n                        />\n                        <Radio\n                            label=\"Draw a Straight Line through the cluster\"\n                            value=\"straight\"\n                        />\n                        <Radio\n                            label=\"Draw a Free Circle within the cluster\"\n                            value=\"circle\"\n                        />\n                        <Radio\n                            label=\"Draw a Centered Circle within the cluster\"\n                            value=\"centerCircle\"\n                        />\n                    </RadioGroup>\n                    hold and draw a line to split this Cluster\n                </p>\n            );\n        };\n\n        renderThirdPanel = () => {\n            return (\n                <div style={{ width: \"500px\" }}>\n                    <H4>Confirm Splitting of Cluster? </H4>\n                    <p>\n                        The two sub-clusters has been specified using the\n                        different node colors.\n                    </p>\n                    <FormTwoClusterOptionsCard\n                        callback={(\n                            attribute: string,\n                            value1: number | string,\n                            value2: number | string\n                        ) => {\n                            State.helper.clusterSplittingPanelStackOpen = false;\n                            State.clusterInteraction.splitCluster(\n                                attribute,\n                                value1,\n                                value2\n                            );\n                            State.preferences.visualizationMode =\n                                VisualizationMode.Normal;\n                            State.helper.clusterSplittingCurrentStep = 1;\n                        }}\n                    />\n                </div>\n            );\n        };\n\n        renderWhichPanel = () => {\n            switch (this.props.currentStep) {\n                case 1:\n                    return this.renderFirstPanel();\n                case 2:\n                    return this.renderSecondPanel();\n                case 3:\n                    return this.renderThirdPanel();\n            }\n        };\n\n        renderWhichBack = () => {\n            switch (this.props.currentStep) {\n                case 1:\n                    return <span />;\n                case 2:\n                    return (\n                        <Button\n                            className={Classes.PANEL_STACK_HEADER_BACK}\n                            icon=\"chevron-left\"\n                            minimal={true}\n                            onClick={() => {\n                                State.helper.clusterSplittingCurrentStep = 1;\n                            }}\n                            small={true}\n                            text={this.titles[0]}\n                            title={this.titles[0]}\n                        />\n                    );\n                case 3:\n                    return (\n                        <Button\n                            className={Classes.PANEL_STACK_HEADER_BACK}\n                            icon=\"chevron-left\"\n                            minimal={true}\n                            onClick={() => {\n                                State.helper.clusterSplittingCurrentStep = 2;\n                            }}\n                            small={true}\n                            text={this.titles[1]}\n                            title={this.titles[1]}\n                        />\n                    );\n            }\n        };\n\n        renderPanelStack = () => {\n            return (\n                <div\n                    className={Classes.PANEL_STACK_VIEW}\n                    style={{ position: \"unset\" }}\n                >\n                    <div style={{ minWidth: \"300px\", minHeight: \"100px\" }}>\n                        <div className={Classes.PANEL_STACK_HEADER}>\n                            {this.renderWhichBack()}\n                            <Text className={Classes.HEADING} ellipsize={true}>\n                                {this.titles[this.props.currentStep - 1]}\n                            </Text>\n                            <span />\n                        </div>\n                        <Card> {this.renderWhichPanel()}</Card>\n                    </div>\n                </div>\n            );\n        };\n\n        render() {\n            return (\n                <Popover2\n                    placement=\"right\"\n                    usePortal={false}\n                    content={this.renderPanelStack()}\n                    isOpen={\n                        State.preferences.visualizationMode ===\n                            VisualizationMode.ClusterSplitting &&\n                        State.helper.clusterSplittingPanelStackOpen\n                    }\n                    onOpened={() => {\n                        State.helper.clusterSplittingCurrentStep = 1;\n                    }}\n                >\n                    <Tooltip2\n                        usePortal={false}\n                        content={getMessage(VisualizationMode.ClusterSplitting)}\n                        placement={\"bottom\"}\n                    >\n                        <Button\n                            className={classnames([\n                                Classes.BUTTON,\n                                Classes.MINIMAL,\n                            ])}\n                            intent={Intent.DANGER}\n                            text={VisualizationMode.ClusterSplitting}\n                            active={\n                                State.preferences.visualizationMode ===\n                                VisualizationMode.ClusterSplitting\n                            }\n                            onClick={() => {\n                                State.preferences.visualizationMode =\n                                    VisualizationMode.ClusterSplitting;\n\n                                State.helper.clusterSplittingPanelStackOpen = true;\n                            }}\n                        />\n                    </Tooltip2>\n                </Popover2>\n            );\n        }\n        componentDidMount = () => {\n            ComponentRef.clusterSplittingPanelStack = this;\n        };\n    }\n);\n","import React from \"react\";\n\nimport { Button, Intent, Classes, Card, Text } from \"@blueprintjs/core\";\nimport { Popover2, Tooltip2 } from \"@blueprintjs/popover2\";\nimport classnames from \"classnames\";\nimport State from \"../../../state\";\nimport { VisualizationMode } from \"../../../state/PreferencesStore\";\nimport { observer } from \"mobx-react\";\nimport { getMessage } from \"./InteractionModePanel\";\n\nexport default observer(\n    /**\n     * @description a helper pop-over that user can choose to enter the box-selection mode\n     * @author Zichen XU\n     * @class NodeSelectionPanel\n     * @extends {React.Component}\n     */\n    class NodeSelectionPanel extends React.Component {\n        private renderPanelStack = () => {\n            return (\n                <div\n                    className={Classes.PANEL_STACK_VIEW}\n                    style={{ position: \"unset\" }}\n                >\n                    <div style={{ minWidth: \"300px\", minHeight: \"100px\" }}>\n                        <div className={Classes.PANEL_STACK_HEADER}>\n                            <span />\n                            <Text className={Classes.HEADING} ellipsize={true}>\n                                Node Multi-Selection Mode\n                            </Text>\n                            <span />\n                        </div>\n                        <Card>\n                            <Button\n                                icon=\"select\"\n                                intent={\n                                    State.interaction.boxSelectionOpen\n                                        ? Intent.PRIMARY\n                                        : Intent.NONE\n                                }\n                                active={State.interaction.boxSelectionOpen}\n                                onClick={() =>\n                                    (State.interaction.boxSelectionOpen = !State\n                                        .interaction.boxSelectionOpen)\n                                }\n                            >\n                                Use Box-Selection\n                            </Button>\n                        </Card>\n                    </div>\n                </div>\n            );\n        };\n\n        render() {\n            return (\n                <Popover2\n                    placement=\"right\"\n                    usePortal={false}\n                    content={this.renderPanelStack()}\n                    isOpen={\n                        State.preferences.visualizationMode ===\n                            VisualizationMode.NodeSelection &&\n                        State.helper.NodeSelectionPanelOpen\n                    }\n                >\n                    <Tooltip2\n                        usePortal={false}\n                        content={getMessage(VisualizationMode.NodeSelection)}\n                    >\n                        <Button\n                            className={classnames([\n                                Classes.BUTTON,\n                                Classes.MINIMAL,\n                            ])}\n                            intent={Intent.WARNING}\n                            text={VisualizationMode.NodeSelection}\n                            active={\n                                State.preferences.visualizationMode ===\n                                VisualizationMode.NodeSelection\n                            }\n                            onClick={() => {\n                                State.preferences.visualizationMode =\n                                    VisualizationMode.NodeSelection;\n\n                                State.helper.NodeSelectionPanelOpen = true;\n                            }}\n                        />\n                    </Tooltip2>\n                </Popover2>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, Classes, Intent } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../../state\";\nimport { VisualizationMode } from \"../../../state/PreferencesStore\";\nimport ClusterSplittingPanelStack from \"./ClusterSplittingPanelStack\";\nimport { Tooltip2 } from \"@blueprintjs/popover2\";\nimport NodeSelectionPanel from \"./NodeSelectionPanel\";\n\nexport function getMessage(mode: VisualizationMode): string {\n    switch (mode) {\n        case VisualizationMode.Normal:\n            return \"Normal Interaction Mode where mouse interactions on nodes and clusters are both activated\";\n\n        case VisualizationMode.NodeSelection:\n            return \"Select one or more nodes and interact with them, such as adding/deleting, merge them to a cluster, free them from a cluster\";\n\n        case VisualizationMode.ClusterSelection:\n            return \"Select one or more clusters and interact with them, such as merging and releasing them\";\n\n        case VisualizationMode.ClusterSplitting:\n            return \"Select one cluster and draw a line to split into two halfs\";\n    }\n}\n\nexport default observer(\n    /**\n     * @description the four panels to select from different interaction modes\n     * @author Zichen XU\n     * @class InteractionModePanel\n     * @extends {React.Component}\n     */\n    class InteractionModePanel extends React.Component {\n        getIntent(mode: VisualizationMode): Intent {\n            switch (mode) {\n                case VisualizationMode.Normal:\n                    return Intent.PRIMARY;\n\n                case VisualizationMode.NodeSelection:\n                    return Intent.WARNING;\n\n                case VisualizationMode.ClusterSelection:\n                    return Intent.SUCCESS;\n\n                case VisualizationMode.ClusterSplitting:\n                    return Intent.DANGER;\n            }\n        }\n\n        renderMode(mode: VisualizationMode) {\n            return (\n                <Tooltip2 content={getMessage(mode)}>\n                    <Button\n                        className={classnames([\n                            Classes.BUTTON,\n                            Classes.MINIMAL,\n                        ])}\n                        text={mode}\n                        intent={this.getIntent(mode)}\n                        active={State.preferences.visualizationMode === mode}\n                        onClick={() => {\n                            State.preferences.visualizationMode = mode;\n                        }}\n                    />\n                </Tooltip2>\n            );\n        }\n\n        render() {\n            return (\n                <div className=\"selection-action-panel\">\n                    {this.renderMode(VisualizationMode.Normal)}\n                    <NodeSelectionPanel />\n                    {this.renderMode(VisualizationMode.ClusterSelection)}\n                    <ClusterSplittingPanelStack\n                        currentStep={State.helper.clusterSplittingCurrentStep}\n                    />\n                </div>\n            );\n        }\n    }\n);\n","import { MenuItem, MenuItemProps } from \"@blueprintjs/core\";\nimport { Tooltip2 } from \"@blueprintjs/popover2\";\n\ninterface TooltipProps {\n    tooltipText: string;\n}\n\ntype Props = TooltipProps & MenuItemProps;\n\nexport function MenuItemWithTooltip(props: Props) {\n    return (\n        <Tooltip2 content={props.tooltipText}>\n            <MenuItem {...props} />\n        </Tooltip2>\n    );\n}\n","import React from \"react\";\nimport { MenuDivider } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport { MenuItemWithTooltip } from \"../../utils/MenuItemWithTooltip\";\nimport { Popover2 } from \"@blueprintjs/popover2\";\nimport FormClusterOptionsCard from \"../../utils/FormClusterOptionsCard\";\n\nexport default observer(\n    /**\n     * @description sub component to render options for RightClickNodePanel\n     * @author Zichen XU, Zhiyuan LYU\n     */\n    class RightClickNodePanel extends React.Component {\n        state = {\n            formNewClusterOpen: false,\n        };\n\n        formNewCluster(attribute: string, value: number | string) {\n            State.interaction.selectedNodes.forEach((nodeId) => {\n                State.graph.rawGraph.setNodeAttribute(nodeId, attribute, value);\n            });\n            State.preferences.rightClickPanelOpen = false;\n            State.cluster.setCluster(attribute);\n            State.interaction.flush();\n        }\n\n        releaseFromCluster() {\n            const clusterName = State.cluster.clusterBy as string;\n            State.interaction.selectedNodes.forEach((nodeId) => {\n                State.graph.rawGraph.setNodeAttribute(nodeId, clusterName, \"\");\n            });\n            State.preferences.rightClickPanelOpen = false;\n            State.cluster.setCluster(State.cluster.clusterBy, true);\n            State.interaction.flush();\n        }\n\n        render() {\n            return (\n                <>\n                    <MenuDivider\n                        title={\n                            (\"Node ID: \" +\n                                State.interaction.chosenNode) as string\n                        }\n                    />\n                    <MenuItemWithTooltip\n                        tooltipText=\"Delete this selected node from the graph\"\n                        icon=\"graph-remove\"\n                        text=\"Delete Node\"\n                        multiline={true}\n                        onClick={() => {\n                            State.graph.mutating.dropNode(\n                                State.interaction.chosenNode as string\n                            );\n                            State.interaction.flush();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuItemWithTooltip\n                        tooltipText=\"Delete multiple selected nodes from the graph\"\n                        icon=\"graph-remove\"\n                        text=\"Delete Selected Nodes\"\n                        multiline={true}\n                        onClick={() => {\n                            State.interaction.selectedNodes.forEach((node) => {\n                                State.graph.mutating.dropNode(node);\n                            });\n                            State.interaction.flush();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                        disabled={\n                            State.interaction.selectedNodes.length === 0 ||\n                            State.interaction.selectedNodes.length === 1\n                        }\n                    />\n\n                    <MenuDivider title=\"Edit Edges\" />\n                    <MenuItemWithTooltip\n                        tooltipText=\"Add new edge to this graph\"\n                        icon=\"new-link\"\n                        text=\"Add Edge\"\n                        onClick={() => {\n                            State.preferences.AddEdgeDialogOpen = true;\n                            State.interaction.flush();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuItemWithTooltip\n                        tooltipText=\"Interactively delete edge that connected to this selected node\"\n                        icon=\"cross\"\n                        text=\"Delete Edge\"\n                        onClick={() => {\n                            State.preferences.deleteEdgePanelOpen = true;\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider title=\"Node-Cluster\" />\n                    <Popover2\n                        isOpen={this.state.formNewClusterOpen}\n                        content={\n                            <FormClusterOptionsCard\n                                callback={(\n                                    attribute: string,\n                                    value: string | number\n                                ) => {\n                                    this.formNewCluster(attribute, value);\n                                    this.setState({\n                                        formNewClusterOpen: false,\n                                    });\n                                    State.preferences.rightClickPanelOpen = false;\n                                }}\n                            />\n                        }\n                    >\n                        <MenuItemWithTooltip\n                            tooltipText=\"Use the selected nodes to form a new cluster\"\n                            icon=\"inner-join\"\n                            text=\"Form a New Cluster\"\n                            onClick={() =>\n                                this.setState({\n                                    formNewClusterOpen: true,\n                                })\n                            }\n                            disabled={\n                                State.interaction.selectedNodes.length === 0\n                            }\n                        />\n                    </Popover2>\n\n                    <MenuItemWithTooltip\n                        tooltipText=\"Release the selected nodes from the cluster where they belongs\"\n                        icon=\"ungroup-objects\"\n                        text=\"Release from Cluster\"\n                        onClick={this.releaseFromCluster}\n                        disabled={State.interaction.selectedNodes.length === 0}\n                    />\n                </>\n            );\n        }\n\n        componentWillUnmount = () => {\n            this.setState({ formNewClusterOpen: false });\n        };\n    }\n);\n","import React from \"react\";\nimport { MenuDivider } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport { MenuItemWithTooltip } from \"../../utils/MenuItemWithTooltip\";\nimport { Popover2 } from \"@blueprintjs/popover2\";\nimport FormClusterOptionsCard from \"../../utils/FormClusterOptionsCard\";\nimport { Vector3 } from \"three\";\n\nexport default observer(\n    /**\n     * @description sub component to render options for RightClickClusterPanel\n     * @author Zichen XU, Zhiyuan LYU\n     */\n    class RightClickClusterPanel extends React.Component {\n        state = {\n            mergeSelectedClustersOpen: false,\n            mergeNeighborsOpen: false,\n            mergeNearestClustersOpen: false,\n        };\n\n        /**\n         * @description loop through the selected clusters and set the nodes within that cluster\n         * @author Zichen XU\n         */\n        mergeSelectedClusters(attribute: string, value: string | number) {\n            State.clusterInteraction.selectedClusters.forEach((uuid) => {\n                const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n                    uuid\n                ) as string | number;\n                const keys = State.cluster.attributeKeys.get(clusterValue);\n                keys?.forEach((nodeId) => {\n                    State.graph.rawGraph.setNodeAttribute(\n                        nodeId,\n                        attribute,\n                        value\n                    );\n                });\n            });\n            State.cluster.setCluster(attribute);\n            State.clusterInteraction.flush();\n        }\n\n        /**\n         * @description preview the selected cluster with its neighbors\n         * @author Zichen XU, Chenghao SHI\n         */\n        previewClusterNeighbors(uuid: string) {\n            State.clusterInteraction.selectedClusters = [uuid];\n            const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n                uuid\n            ) as string | number;\n            const nodeIds = State.cluster.attributeKeys.get(clusterValue);\n            let attributes: (string | number)[] = [];\n            nodeIds?.forEach((nodeId) => {\n                State.graph.rawGraph.forEachNeighbor(nodeId, (neighbor) => {\n                    const attribute = State.cluster.keyAttribute.get(neighbor)!;\n                    if (!attributes.includes(attribute)) {\n                        attributes.push(attribute);\n                    }\n                });\n            });\n            attributes.forEach((attribute) => {\n                State.clusterInteraction.selectedClusters.push(\n                    State.graphDelegate.clusterObject.clusterObjectsMap?.get(\n                        attribute\n                    )?.uuid!\n                );\n            });\n        }\n\n        /**\n         * @description preview the nearest cluster with its neighbors\n         * @author Zichen XU\n         */\n        previewNearestNeighbors(uuid: string) {\n            function computeDistance(from: Vector3) {\n                const current = State.graphDelegate.clusterObject.getObjectById(\n                    uuid\n                )!.position;\n                return current.distanceTo(from);\n            }\n\n            State.clusterInteraction.selectedClusters = [uuid];\n            const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n                uuid\n            ) as string | number;\n            const nodeIds = State.cluster.attributeKeys.get(clusterValue);\n            let attributes: (string | number)[] = [];\n            nodeIds?.forEach((nodeId) => {\n                State.graph.rawGraph.forEachNeighbor(nodeId, (neighbor) => {\n                    const attribute = State.cluster.keyAttribute.get(neighbor)!;\n                    if (!attributes.includes(attribute)) {\n                        attributes.push(attribute);\n                    }\n                });\n            });\n            const objects = attributes\n                .map((attribute) => {\n                    return State.graphDelegate.clusterObject.clusterObjectsMap?.get(\n                        attribute\n                    )?.uuid!;\n                })\n                .map((uuid) => {\n                    return State.graphDelegate.clusterObject.getObjectById(\n                        uuid\n                    );\n                });\n\n            if (objects.length !== 0) {\n                let shortest = objects[0];\n                objects.forEach((object) => {\n                    if (\n                        computeDistance(object?.position!) <\n                        computeDistance(shortest?.position!)\n                    ) {\n                        shortest = object;\n                    }\n                });\n                State.clusterInteraction.selectedClusters.push(shortest?.uuid!);\n            }\n        }\n\n        /**\n         * @description delete the selected clusters and its corresponding nodes\n         * @author Zichen XU\n         */\n        deleteSelectedClusters() {\n            State.clusterInteraction.selectedClusters.forEach((uuid) => {\n                const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n                    uuid\n                ) as string | number;\n                const keys = State.cluster.attributeKeys.get(clusterValue);\n                keys?.forEach((nodeId: string) => {\n                    State.graph.rawGraph.dropNode(nodeId);\n                });\n            });\n            State.cluster.setCluster(null, true);\n            State.clusterInteraction.flush();\n        }\n\n        /**\n         * @description loop through the selected clusters and set the nodes within that cluster\n         * @author Zichen XU\n         */\n        releaseSelectedClusters() {\n            State.clusterInteraction.selectedClusters.forEach((uuid) => {\n                const clusterValue = State.graphDelegate.clusterObject.UUID2ClusterValueMap.get(\n                    uuid\n                ) as string | number;\n                const keys = State.cluster.attributeKeys.get(clusterValue);\n                keys?.forEach((nodeId) => {\n                    State.graph.rawGraph.setNodeAttribute(\n                        nodeId,\n                        State.cluster.clusterBy as string,\n                        \"\"\n                    );\n                });\n            });\n            State.cluster.setCluster(State.cluster.clusterBy, true);\n            State.clusterInteraction.flush();\n        }\n\n        render() {\n            return (\n                <>\n                    <MenuDivider title=\"Cluster Operation\" />\n                    <Popover2\n                        popoverClassName={\"transparent-popover\"}\n                        isOpen={this.state.mergeSelectedClustersOpen}\n                        content={\n                            <FormClusterOptionsCard\n                                callback={(\n                                    attribute: string,\n                                    value: number | string\n                                ) => {\n                                    this.mergeSelectedClusters(\n                                        attribute,\n                                        value\n                                    );\n                                    this.setState({\n                                        mergeSelectedClustersOpen: false,\n                                    });\n                                    State.preferences.rightClickPanelOpen = false;\n                                }}\n                            />\n                        }\n                    >\n                        <MenuItemWithTooltip\n                            tooltipText=\"Merge selected clusters into a larger cluster\"\n                            icon=\"group-objects\"\n                            text=\"Merge Clusters\"\n                            onClick={() => {\n                                this.closeAllPanel();\n                                this.setState({\n                                    mergeSelectedClustersOpen: true,\n                                });\n                            }}\n                            disabled={\n                                State.clusterInteraction.selectedClusters\n                                    .length === 0 ||\n                                State.clusterInteraction.selectedClusters\n                                    .length === 1\n                            }\n                        />\n                    </Popover2>\n\n                    <Popover2\n                        popoverClassName={\"transparent-popover\"}\n                        isOpen={this.state.mergeNeighborsOpen}\n                        content={\n                            <FormClusterOptionsCard\n                                callback={(\n                                    attribute: string,\n                                    value: number | string\n                                ) => {\n                                    this.mergeSelectedClusters(\n                                        attribute,\n                                        value\n                                    );\n                                    this.setState({\n                                        mergeNeighborsOpen: false,\n                                    });\n                                    State.preferences.rightClickPanelOpen = false;\n                                }}\n                                style={{ opacity: \"50%\" }}\n                            />\n                        }\n                    >\n                        <MenuItemWithTooltip\n                            tooltipText=\"Merge this cluster with its neighbors\"\n                            icon=\"group-objects\"\n                            text=\"Merge Neighbors\"\n                            onClick={() => {\n                                this.previewClusterNeighbors(\n                                    State.clusterInteraction\n                                        .chosenCluster as string\n                                );\n                                State.graphDelegate.clusterObject.updateAllMaterials();\n                                this.closeAllPanel();\n                                this.setState({\n                                    mergeNeighborsOpen: true,\n                                });\n                            }}\n                        />\n                    </Popover2>\n\n                    <Popover2\n                        popoverClassName={\"transparent-popover\"}\n                        isOpen={this.state.mergeNearestClustersOpen}\n                        content={\n                            <FormClusterOptionsCard\n                                callback={(\n                                    attribute: string,\n                                    value: number | string\n                                ) => {\n                                    this.mergeSelectedClusters(\n                                        attribute,\n                                        value\n                                    );\n                                    this.setState({\n                                        mergeNearestClustersOpen: false,\n                                    });\n                                    State.preferences.rightClickPanelOpen = false;\n                                }}\n                            />\n                        }\n                    >\n                        <MenuItemWithTooltip\n                            tooltipText=\"Merge this cluster with its nearest neighbor\"\n                            icon=\"group-objects\"\n                            text=\"Merge Nearest Neighbor\"\n                            onClick={() => {\n                                this.previewNearestNeighbors(\n                                    State.clusterInteraction\n                                        .chosenCluster as string\n                                );\n                                State.graphDelegate.clusterObject.updateAllMaterials();\n                                this.closeAllPanel();\n                                this.setState({\n                                    mergeNearestClustersOpen: true,\n                                });\n                            }}\n                        />\n                    </Popover2>\n                    <MenuDivider />\n                    <MenuItemWithTooltip\n                        tooltipText=\"Release selected clusters from the included nodes\"\n                        icon=\"group-objects\"\n                        text=\"Release Cluster(s)\"\n                        onClick={() => {\n                            this.releaseSelectedClusters();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuItemWithTooltip\n                        tooltipText=\"Delete this cluster and its associated nodes from the graph\"\n                        icon=\"delete\"\n                        text=\"Delete Cluster(s)\"\n                        onClick={() => {\n                            this.deleteSelectedClusters();\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                </>\n            );\n        }\n\n        componentWillUnmount = () => {\n            this.closeAllPanel();\n        };\n\n        closeAllPanel() {\n            this.setState({\n                mergeSelectedClustersOpen: false,\n                mergeNeighborsOpen: false,\n                mergeNearestClustersOpen: false,\n            });\n        }\n    }\n);\n","import React from \"react\";\nimport { MenuDivider } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport State from \"../../../state\";\nimport { MenuItemWithTooltip } from \"../../utils/MenuItemWithTooltip\";\n\nexport default observer(\n    /**\n     * @description sub component to render options for RightClickBackgroundPanel\n     * @author Zichen XU, Zhiyuan LYU\n     */\n    class RightClickBackgroundPanel extends React.Component {\n        render() {\n            return (\n                <>\n                    <MenuDivider title=\"Edit Graph\" />\n                    <MenuItemWithTooltip\n                        tooltipText=\"Add single node to the graph\"\n                        icon=\"new-object\"\n                        text=\"Add Node\"\n                        onClick={() => {\n                            State.preferences.AddNodeDialogOpen = true;\n                            State.preferences.rightClickPanelOpen = false;\n                        }}\n                    />\n                    <MenuDivider />\n                </>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Classes, Menu } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport State from \"../../../state\";\nimport { computed, makeObservable } from \"mobx\";\nimport RightClickNodeMenu from \"./RightClickNodeMenu\";\nimport RightClickClusterMenu from \"./RightClickClusterMenu\";\nimport RightClickBackgroundMenu from \"./RightClickBackgroundMenu\";\n\ninterface Props {\n    /**\n     * what place this RightClick interaction is activated\n     *\n     * @type {(\"Node\" | \"Cluster\" | \"Background\")}\n     */\n    on: \"Node\" | \"Cluster\" | \"Background\";\n}\n\nexport default observer(\n    /**\n     * @description This component will be used when mouse right-clicked. There will be some operation choices on this panel.\n     * @author Zichen XU, Zhiyuan LYU\n     */\n    class RightClickPanel extends React.Component<Props, {}> {\n        constructor(props: any) {\n            super(props);\n            makeObservable(this, {\n                stylePosition: computed,\n            });\n        }\n\n        get stylePosition() {\n            return {\n                top: State.preferences.rightClickPositionY + 10 + \"px\",\n                left: State.preferences.rightClickPositionX + 10 + \"px\",\n            };\n        }\n\n        renderMenuContent() {\n            switch (this.props.on) {\n                case \"Node\":\n                    return <RightClickNodeMenu />;\n                case \"Cluster\":\n                    return <RightClickClusterMenu />;\n                case \"Background\":\n                    return <RightClickBackgroundMenu />;\n            }\n        }\n\n        render() {\n            return (\n                <Menu\n                    className={classnames(\n                        Classes.ELEVATION_1,\n                        \"right-click-panel\"\n                    )}\n                    style={this.stylePosition}\n                >\n                    {this.renderMenuContent()}\n                </Menu>\n            );\n        }\n    }\n);\n","import React from \"react\";\nimport { Button, Card, Elevation } from \"@blueprintjs/core\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport State from \"../state\";\nimport NodeDetailPanel from \"./panels/NodeDetailPanel\";\nimport MultiDetailPanel from \"./panels/MultiDetailPanel\";\nimport DeleteEdgeInteractionPanel from \"./panels/DeleteEdgeInteractionPanel\";\nimport GraphOptionsCard from \"./panels/GraphOptions/GraphOptionsCard\";\nimport InteractionModePanel from \"./panels/InteractionModePanel/InteractionModePanel\";\nimport RightClickPanel from \"./panels/RightClickPanel/RightClickPanel\";\n\nexport default observer(\n    /**\n     * @description all the floating cards on the screen\n     * @author Zhiyuan LYU\n     * @class FloatingCards\n     * @extends {React.Component}\n     */\n    class FloatingCards extends React.Component {\n        optionsVisible = {\n            left: \"0em\",\n        };\n        optionsInvisible = {\n            left: \"-2200em\",\n        };\n        sideButtonVis = {\n            marginLeft: \"50px\",\n        };\n        sideButtonInv = {\n            marginLeft: \"-15px\",\n        };\n        toggleOptions = () => {\n            State.preferences.graphOptionsCardOpen = !State.preferences\n                .graphOptionsCardOpen;\n        };\n        render() {\n            return (\n                <div className=\"floating-overlay\">\n                    <div className=\"left-cards\">\n                        <Card\n                            elevation={Elevation.TWO}\n                            className={classnames(\n                                \"overlay-card\",\n                                \"transparent-frame\",\n                                \"left-cards\"\n                            )}\n                            style={\n                                State.preferences.graphOptionsCardOpen\n                                    ? this.optionsVisible\n                                    : this.optionsInvisible\n                            }\n                        >\n                            <br />\n                            <Button\n                                className=\"openbtn2\"\n                                icon=\"chevron-left\"\n                                onClick={this.toggleOptions}\n                            />\n                            <br />\n                            <GraphOptionsCard />\n                        </Card>\n                        <Card\n                            elevation={Elevation.TWO}\n                            className={classnames(\n                                \"overlay-card\",\n                                \"transparent-frame\"\n                            )}\n                            style={{\n                                width: \"1em\",\n                                paddingTop: \"1em\",\n                                paddingRight: \"0.7em\",\n                                paddingBottom: \"0.5em\",\n                                marginLeft: \"-5.4em\",\n                            }}\n                        >\n                            <Button\n                                icon=\"more\"\n                                className=\"openbtn\"\n                                onClick={this.toggleOptions}\n                                style={\n                                    State.preferences.graphOptionsCardOpen\n                                        ? this.sideButtonInv\n                                        : this.sideButtonVis\n                                }\n                            />\n                        </Card>\n                    </div>\n\n                    {/* single selected */}\n                    {/* {State.graph.selectedNodes.length === 1 && (\n                        <NodeDetail node={State.graph.currentlyHoveredId} />\n                    )} */}\n                    {State.interaction.currentlyHoveredNodeId &&\n                        State.interaction.selectedNodes.length === 0 && (\n                            <NodeDetailPanel\n                                onNode={\n                                    State.interaction.currentlyHoveredNodeId\n                                }\n                            />\n                        )}\n\n                    {/* multiple selected */}\n                    {/* {State.graph.selectedNodes.length !== 1 && State.graph.currentlyHovered && (\n                        <NodeDetail node={State.graph.currentlyHovered.data.ref} />\n                    )} */}\n                    {State.interaction.selectedNodes.length !== 0 && (\n                        <MultiDetailPanel />\n                    )}\n\n                    {State.preferences.rightClickPanelOpen &&\n                        State.preferences.rightClickOn && (\n                            <RightClickPanel\n                                on={State.preferences.rightClickOn}\n                            />\n                        )}\n                    {State.preferences.deleteEdgePanelOpen &&\n                        State.interaction.chosenNode && (\n                            <DeleteEdgeInteractionPanel\n                                onNode={State.interaction.chosenNode}\n                            />\n                        )}\n                    <InteractionModePanel />\n                </div>\n            );\n        }\n    }\n);\n","import classnames from \"classnames\";\nimport { Classes } from \"@blueprintjs/core\";\nimport Navbar from \"./components/Navbar\";\nimport Dialogs from \"./components/Dialogs\";\nimport ThreeJSVis from \"./components/visualize/Visualizer\";\nimport FloatingCards from \"./components/FloatingCards\";\n\nfunction App() {\n    return (\n        <div\n            className={classnames({\n                \"app-wrapper\": true,\n                [Classes.DARK]: true,\n            })}\n        >\n            <Navbar />\n            <main className=\"main\">\n                <ThreeJSVis />\n            </main>\n            <FloatingCards />\n            <Dialogs />\n        </div>\n    );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/table/lib/css/table.css\";\nimport \"@blueprintjs/select/lib/css/blueprint-select.css\";\nimport \"@blueprintjs/popover2/lib/css/blueprint-popover2.css\";\nimport \"normalize.css\";\nimport \"./App.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}